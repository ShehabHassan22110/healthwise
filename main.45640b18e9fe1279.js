(self.webpackChunkhealthwise1=self.webpackChunkhealthwise1||[]).push([[179],{2011:(ht,Se,F)=>{"use strict";F.d(Se,{Dh:()=>me,GT:()=>we,cc:()=>xe,hO:()=>Ge,on:()=>$,pX:()=>ce,xv:()=>pe});var c=F(5e3),re=F(127),L=F(5813);ht=F.hmd(ht);const he=["ngOnDestroy"],ce=(ae,Ee,Ae,ge={})=>new Proxy(ae,{get:(Fe,Me)=>Ae.runOutsideAngular(()=>{var nt;if(ae[Me])return(null===(nt=null==ge?void 0:ge.spy)||void 0===nt?void 0:nt.get)&&ge.spy.get(Me,ae[Me]),ae[Me];if(he.indexOf(Me)>-1)return()=>{};const Qe=Ee.toPromise().then(fe=>{const B=fe&&fe[Me];return"function"==typeof B?B.bind(fe):B&&B.then?B.then(q=>Ae.run(()=>q)):Ae.run(()=>B)});return new Proxy(()=>{},{get:(fe,B)=>Qe[B],apply:(fe,B,q)=>Qe.then(W=>{var Z;const ue=W&&W(...q);return(null===(Z=null==ge?void 0:ge.spy)||void 0===Z?void 0:Z.apply)&&ge.spy.apply(Me,q,ue),ue})})})}),we=(ae,Ee)=>{Ee.forEach(Ae=>{Object.getOwnPropertyNames(Ae.prototype||Ae).forEach(ge=>{Object.defineProperty(ae.prototype,ge,Object.getOwnPropertyDescriptor(Ae.prototype||Ae,ge))})})};class se{constructor(Ee){return Ee}}const me=new c.OlP("angularfire2.app.options"),pe=new c.OlP("angularfire2.app.name");function $(ae,Ee,Ae){const Fe="object"==typeof Ae&&Ae||{};Fe.name=Fe.name||"string"==typeof Ae&&Ae||"[DEFAULT]";const nt=re.Z.apps.filter(Qe=>Qe&&Qe.name===Fe.name)[0]||Ee.runOutsideAngular(()=>re.Z.initializeApp(ae,Fe));try{JSON.stringify(ae)!==JSON.stringify(nt.options)&&G("error",`${nt.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qe){}return new se(nt)}const G=(ae,...Ee)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[ae](...Ee)},ie={provide:se,useFactory:$,deps:[me,c.R0b,[new c.FiY,pe]]};let Ge=(()=>{class ae{constructor(Ae){re.Z.registerVersion("angularfire",L.q4.full,"core"),re.Z.registerVersion("angularfire",L.q4.full,"app-compat"),re.Z.registerVersion("angular",c.q4F.full,Ae.toString())}static initializeApp(Ae,ge){return{ngModule:ae,providers:[{provide:me,useValue:Ae},{provide:pe,useValue:ge}]}}}return ae.\u0275fac=function(Ae){return new(Ae||ae)(c.LFG(c.Lbi))},ae.\u0275mod=c.oAB({type:ae}),ae.\u0275inj=c.cJS({providers:[ie]}),ae})();function xe(ae,Ee,Ae,ge,Fe){const[,Me,nt]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===ae)||[];if(Me)return function Ne(ae,Ee){try{return ae.toString()===Ee.toString()}catch(Ae){return ae===Ee}}(Fe,nt)||(te("error",`${Ee} was already initialized on the ${Ae} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),te("warn",{is:Fe,was:nt})),Me;{const Qe=ge();return globalThis.\u0275AngularfireInstanceCache.push([ae,Qe,Fe]),Qe}}const He=!!ht.hot,te=(ae,...Ee)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[ae](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ht,Se,F)=>{"use strict";F.d(Se,{q4:()=>rd,iC:()=>$c,fc:()=>ca,HU:()=>zl,vb:()=>Ep,JM:()=>sd});var c=F(5e3),re=F(5867),L=F(5861),he=F(9681),ce=F(2090),we=F(4859),se=F(1877),me=F(2940);const pe="@firebase/installations",$="0.5.5",ie=`w:${$}`,Ge="FIS_v2",Ee=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ae(D){return D instanceof ce.ZR&&D.code.includes("request-failed")}function ge({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Fe(D){return{token:D.token,requestStatus:2,expiresIn:W(D.expiresIn),creationTime:Date.now()}}function Me(D,S){return nt.apply(this,arguments)}function nt(){return(nt=(0,L.Z)(function*(D,S){const j=(yield S.json()).error;return Ee.create("request-failed",{requestName:D,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Qe({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function fe(D,{refreshToken:S}){const k=Qe(D);return k.append("Authorization",function Z(D){return`${Ge} ${D}`}(S)),k}function B(D){return q.apply(this,arguments)}function q(){return(q=(0,L.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function W(D){return Number(D.replace("s","000"))}function ue(D,S){return K.apply(this,arguments)}function K(){return(K=(0,L.Z)(function*(D,{fid:S}){const k=ge(D),de={method:"POST",headers:Qe(D),body:JSON.stringify({fid:S,authVersion:Ge,appId:D.appId,sdkVersion:ie})},Pe=yield B(()=>fetch(k,de));if(Pe.ok){const tt=yield Pe.json();return{fid:tt.fid||S,registrationStatus:2,refreshToken:tt.refreshToken,authToken:Fe(tt.authToken)}}throw yield Me("Create Installation",Pe)})).apply(this,arguments)}function ze(D){return new Promise(S=>{setTimeout(S,D)})}const dn=/^[cdef][\w-]{21}$/;function ct(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const k=function ln(D){return function _t(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return dn.test(k)?k:""}catch(D){return""}}function It(D){return`${D.appName}!${D.appId}`}const An=new Map;function Jt(D,S){const k=It(D);Ut(k,S),function bs(D,S){const k=function xr(){return!ki&&"BroadcastChannel"in self&&(ki=new BroadcastChannel("[Firebase] FID Change"),ki.onmessage=D=>{Ut(D.data.key,D.data.fid)}),ki}();k&&k.postMessage({key:D,fid:S}),function ri(){0===An.size&&ki&&(ki.close(),ki=null)}()}(k,S)}function Ut(D,S){const k=An.get(D);if(k)for(const j of k)j(S)}let ki=null;const mi="firebase-installations-store";let Es=null;function Ct(){return Es||(Es=(0,me.openDb)("firebase-installations-database",1,D=>{0===D.oldVersion&&D.createObjectStore(mi)})),Es}function Oi(D,S){return qn.apply(this,arguments)}function qn(){return(qn=(0,L.Z)(function*(D,S){const k=It(D),J=(yield Ct()).transaction(mi,"readwrite"),de=J.objectStore(mi),Pe=yield de.get(k);return yield de.put(S,k),yield J.complete,(!Pe||Pe.fid!==S.fid)&&Jt(D,S.fid),S})).apply(this,arguments)}function Kn(D){return Co.apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(D){const S=It(D),j=(yield Ct()).transaction(mi,"readwrite");yield j.objectStore(mi).delete(S),yield j.complete})).apply(this,arguments)}function _i(D,S){return wr.apply(this,arguments)}function wr(){return(wr=(0,L.Z)(function*(D,S){const k=It(D),J=(yield Ct()).transaction(mi,"readwrite"),de=J.objectStore(mi),Pe=yield de.get(k),tt=S(Pe);return void 0===tt?yield de.delete(k):yield de.put(tt,k),yield J.complete,tt&&(!Pe||Pe.fid!==tt.fid)&&Jt(D,tt.fid),tt})).apply(this,arguments)}function Vn(D){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,L.Z)(function*(D){let S;const k=yield _i(D,j=>{const J=To(j),de=Ht(D,J);return S=de.registrationPromise,de.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function To(D){return Ls(D||{fid:ct(),registrationStatus:0})}function Ht(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Ee.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function ft(D,S){return wt.apply(this,arguments)}(D,k);return{installationEntry:k,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Hr(D)}:{installationEntry:S}}function wt(){return(wt=(0,L.Z)(function*(D,S){try{return Oi(D,yield ue(D,S))}catch(k){throw Ae(k)&&409===k.customData.serverCode?yield Kn(D):yield Oi(D,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Hr(D){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,L.Z)(function*(D){let S=yield Ft(D);for(;1===S.registrationStatus;)yield ze(100),S=yield Ft(D);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:j}=yield Vn(D);return j||k}return S})).apply(this,arguments)}function Ft(D){return _i(D,S=>{if(!S)throw Ee.create("installation-not-found");return Ls(S)})}function Ls(D){return function qr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ii(D,S){return H.apply(this,arguments)}function H(){return(H=(0,L.Z)(function*({appConfig:D,platformLoggerProvider:S},k){const j=Y(D,k),J=fe(D,k),de=S.getImmediate({optional:!0});de&&J.append("x-firebase-client",de.getPlatformInfoString());const tt={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ie}})},et=yield B(()=>fetch(j,tt));if(et.ok)return Fe(yield et.json());throw yield Me("Generate Auth Token",et)})).apply(this,arguments)}function Y(D,{fid:S}){return`${ge(D)}/${S}/authTokens:generate`}function Q(D){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,L.Z)(function*(D,S=!1){let k;const j=yield _i(D.appConfig,de=>{if(!st(de))throw Ee.create("not-registered");const Pe=de.authToken;if(!S&&Ot(Pe))return de;if(1===Pe.requestStatus)return k=oe(D,S),de;{if(!navigator.onLine)throw Ee.create("app-offline");const tt=sn(de);return k=Te(D,tt),tt}});return k?yield k:j.authToken})).apply(this,arguments)}function oe(D,S){return Je.apply(this,arguments)}function Je(){return(Je=(0,L.Z)(function*(D,S){let k=yield De(D.appConfig);for(;1===k.authToken.requestStatus;)yield ze(100),k=yield De(D.appConfig);const j=k.authToken;return 0===j.requestStatus?Q(D,S):j})).apply(this,arguments)}function De(D){return _i(D,S=>{if(!st(S))throw Ee.create("not-registered");return function Nn(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Te(D,S){return qe.apply(this,arguments)}function qe(){return(qe=(0,L.Z)(function*(D,S){try{const k=yield ii(D,S),j=Object.assign(Object.assign({},S),{authToken:k});return yield Oi(D.appConfig,j),k}catch(k){if(!Ae(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Oi(D.appConfig,j)}else yield Kn(D.appConfig);throw k}})).apply(this,arguments)}function st(D){return void 0!==D&&2===D.registrationStatus}function Ot(D){return 2===D.requestStatus&&!function mt(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function sn(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function Sl(){return(Sl=(0,L.Z)(function*(D){const S=D,{installationEntry:k,registrationPromise:j}=yield Vn(S.appConfig);return j?j.catch(console.error):Q(S).catch(console.error),k.fid})).apply(this,arguments)}function Al(){return(Al=(0,L.Z)(function*(D,S=!1){const k=D;return yield pr(k.appConfig),(yield Q(k,S)).token})).apply(this,arguments)}function pr(D){return si.apply(this,arguments)}function si(){return(si=(0,L.Z)(function*(D){const{registrationPromise:S}=yield Vn(D);S&&(yield S)})).apply(this,arguments)}function La(D){return Ee.create("missing-app-config-values",{valueName:D})}const vi="installations",Pt=D=>{const S=D.getProvider("app").getImmediate(),k=function Rr(D){if(!D||!D.options)throw La("App Configuration");if(!D.name)throw La("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!D.options[k])throw La(k);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:k,platformLoggerProvider:(0,he._getProvider)(S,"platform-logger"),_delete:()=>Promise.resolve()}},mn=D=>{const S=D.getProvider("app").getImmediate(),k=(0,he._getProvider)(S,vi).getImmediate();return{getId:()=>function Mc(D){return Sl.apply(this,arguments)}(k),getToken:J=>function xc(D){return Al.apply(this,arguments)}(k,J)}};(function oi(){(0,he._registerComponent)(new we.wA(vi,Pt,"PUBLIC")),(0,he._registerComponent)(new we.wA("installations-internal",mn,"PRIVATE"))})(),(0,he.registerVersion)(pe,$),(0,he.registerVersion)(pe,$,"esm2017");const Us="@firebase/remote-config",$n=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class lh{constructor(S,k,j,J){this.client=S,this.storage=k,this.storageCache=j,this.logger=J}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-k,J=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${J}.`),J}fetch(S){var k=this;return(0,L.Z)(function*(){const[j,J]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(J&&k.isCachedDataFresh(S.cacheMaxAgeMillis,j))return J;S.eTag=J&&J.eTag;const de=yield k.client.fetch(S),Pe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===de.status&&Pe.push(k.storage.setLastSuccessfulFetchResponse(de)),yield Promise.all(Pe),de})()}}function kc(D=navigator){return D.languages&&D.languages[0]||D.language}class ir{constructor(S,k,j,J,de,Pe){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=j,this.projectId=J,this.apiKey=de,this.appId=Pe}fetch(S){var k=this;return(0,L.Z)(function*(){const[j,J]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},et={sdk_version:k.sdkVersion,app_instance_id:j,app_instance_id_token:J,app_id:k.appId,language_code:kc()},Bt={method:"POST",headers:tt,body:JSON.stringify(et)},yn=fetch(Pe,Bt),Tr=new Promise((is,so)=>{S.signal.addEventListener(()=>{const ll=new Error("The operation was aborted.");ll.name="AbortError",so(ll)})});let Gn;try{yield Promise.race([yn,Tr]),Gn=yield yn}catch(is){let so="fetch-client-network";throw"AbortError"===is.name&&(so="fetch-timeout"),$n.create(so,{originalErrorMessage:is.message})}let pn=Gn.status;const Fn=Gn.headers.get("ETag")||void 0;let vn,Fo;if(200===Gn.status){let is;try{is=yield Gn.json()}catch(so){throw $n.create("fetch-client-parse",{originalErrorMessage:so.message})}vn=is.entries,Fo=is.state}if("INSTANCE_STATE_UNSPECIFIED"===Fo?pn=500:"NO_CHANGE"===Fo?pn=304:("NO_TEMPLATE"===Fo||"EMPTY_CONFIG"===Fo)&&(vn={}),304!==pn&&200!==pn)throw $n.create("fetch-status",{httpStatus:pn});return{status:pn,eTag:Fn,config:vn}})()}}class Hs{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,L.Z)(function*(){const j=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:j}){var J=this;return(0,L.Z)(function*(){yield function ch(D,S){return new Promise((k,j)=>{const J=Math.max(S-Date.now(),0),de=setTimeout(k,J);D.addEventListener(()=>{clearTimeout(de),j($n.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const de=yield J.client.fetch(S);return yield J.storage.deleteThrottleMetadata(),de}catch(de){if(!function _m(D){if(!(D instanceof ce.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(de))throw de;const Pe={throttleEndTimeMillis:Date.now()+(0,ce.$s)(j),backoffCount:j+1};return yield J.storage.setThrottleMetadata(Pe),J.attemptFetch(S,Pe)}})()}}class vm{constructor(S,k,j,J,de){this.app=S,this._client=k,this._storageCache=j,this._storage=J,this._logger=de,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xl(D,S){const k=D.target.error||void 0;return $n.create(S,{originalErrorMessage:k&&k.message})}const ja="app_namespace_store";class dh{constructor(S,k,j,J=function wm(){return new Promise((D,S)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=j=>{S(xl(j,"storage-open"))},k.onsuccess=j=>{D(j.target.result)},k.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore(ja,{keyPath:"compositeKey"})}}catch(k){S($n.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=S,this.appName=k,this.namespace=j,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,L.Z)(function*(){const j=yield k.openDbPromise;return new Promise((J,de)=>{const tt=j.transaction([ja],"readonly").objectStore(ja),et=k.createCompositeKey(S);try{const Bt=tt.get(et);Bt.onerror=yn=>{de(xl(yn,"storage-get"))},Bt.onsuccess=yn=>{const Tr=yn.target.result;J(Tr?Tr.value:void 0)}}catch(Bt){de($n.create("storage-get",{originalErrorMessage:Bt&&Bt.message}))}})})()}set(S,k){var j=this;return(0,L.Z)(function*(){const J=yield j.openDbPromise;return new Promise((de,Pe)=>{const et=J.transaction([ja],"readwrite").objectStore(ja),Bt=j.createCompositeKey(S);try{const yn=et.put({compositeKey:Bt,value:k});yn.onerror=Tr=>{Pe(xl(Tr,"storage-set"))},yn.onsuccess=()=>{de()}}catch(yn){Pe($n.create("storage-set",{originalErrorMessage:yn&&yn.message}))}})})()}delete(S){var k=this;return(0,L.Z)(function*(){const j=yield k.openDbPromise;return new Promise((J,de)=>{const tt=j.transaction([ja],"readwrite").objectStore(ja),et=k.createCompositeKey(S);try{const Bt=tt.delete(et);Bt.onerror=yn=>{de(xl(yn,"storage-delete"))},Bt.onsuccess=()=>{J()}}catch(Bt){de($n.create("storage-delete",{originalErrorMessage:Bt&&Bt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Ha{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const k=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),J=S.storage.getActiveConfig(),de=yield k;de&&(S.lastFetchStatus=de);const Pe=yield j;Pe&&(S.lastSuccessfulFetchTimestampMillis=Pe);const tt=yield J;tt&&(S.activeConfig=tt)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Uv(){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,L.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Em(){(0,he._registerComponent)(new we.wA("remote-config",function D(S,{instanceIdentifier:k}){const j=S.getProvider("app").getImmediate(),J=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw $n.create("registration-window");if(!(0,ce.hl)())throw $n.create("indexed-db-unavailable");const{projectId:de,apiKey:Pe,appId:tt}=j.options;if(!de)throw $n.create("registration-project-id");if(!Pe)throw $n.create("registration-api-key");if(!tt)throw $n.create("registration-app-id");const et=new dh(tt,j.name,k=k||"firebase"),Bt=new Ha(et),yn=new se.Yd(Us);yn.logLevel=se.in.ERROR;const Tr=new ir(J,he.SDK_VERSION,k,de,Pe,tt),Gn=new Hs(Tr,et),pn=new lh(Gn,et,Bt,yn),Fn=new vm(j,pn,Bt,et,yn);return function cn(D){const S=(0,ce.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Fn),Fn},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(Us,"0.3.4"),(0,he.registerVersion)(Us,"0.3.4","esm2017")}();const Ao="/firebase-messaging-sw.js",Fi="/firebase-cloud-messaging-push-scope",ea="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$a="google.c.a.c_id",hh="google.c.a.c_l",Cm="google.c.a.ts",Li="google.c.a.e";var $s=(()=>{return(D=$s||($s={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",$s;var D})();function Vi(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ph(D){const k=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(k),J=new Uint8Array(j.length);for(let de=0;de<j.length;++de)J[de]=j.charCodeAt(de);return J}const kr="fcm_token_details_db",Wu="fcm_token_object_Store";function gh(D){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,L.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(de=>de.name).includes(kr))return null;let S=null;return(yield(0,me.openDb)(kr,5,function(){var j=(0,L.Z)(function*(J){var de;if(J.oldVersion<2||!J.objectStoreNames.contains(Wu))return;const Pe=J.transaction.objectStore(Wu),tt=yield Pe.index("fcmSenderId").get(D);if(yield Pe.clear(),tt)if(2===J.oldVersion){const et=tt;if(!et.auth||!et.p256dh||!et.endpoint)return;S={token:et.fcmToken,createTime:null!==(de=et.createTime)&&void 0!==de?de:Date.now(),subscriptionOptions:{auth:et.auth,p256dh:et.p256dh,endpoint:et.endpoint,swScope:et.swScope,vapidKey:"string"==typeof et.vapidKey?et.vapidKey:Vi(et.vapidKey)}}}else if(3===J.oldVersion){const et=tt;S={token:et.fcmToken,createTime:et.createTime,subscriptionOptions:{auth:Vi(et.auth),p256dh:Vi(et.p256dh),endpoint:et.endpoint,swScope:et.swScope,vapidKey:Vi(et.vapidKey)}}}else if(4===J.oldVersion){const et=tt;S={token:et.fcmToken,createTime:et.createTime,subscriptionOptions:{auth:Vi(et.auth),p256dh:Vi(et.p256dh),endpoint:et.endpoint,swScope:et.swScope,vapidKey:Vi(et.vapidKey)}}}});return function(J){return j.apply(this,arguments)}}())).close(),yield(0,me.deleteDb)(kr),yield(0,me.deleteDb)("fcm_vapid_details_db"),yield(0,me.deleteDb)("undefined"),Ga(S)?S:null}),Oc.apply(this,arguments)}function Ga(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Mo="firebase-messaging-store";let Pc=null;function xn(){return Pc||(Pc=(0,me.openDb)("firebase-messaging-database",1,D=>{0===D.oldVersion&&D.createObjectStore(Mo)})),Pc}function Nc(D){return ta.apply(this,arguments)}function ta(){return(ta=(0,L.Z)(function*(D){const S=es(D),j=yield(yield xn()).transaction(Mo).objectStore(Mo).get(S);if(j)return j;{const J=yield gh(D.appConfig.senderId);if(J)return yield Ui(D,J),J}})).apply(this,arguments)}function Ui(D,S){return zr.apply(this,arguments)}function zr(){return(zr=(0,L.Z)(function*(D,S){const k=es(D),J=(yield xn()).transaction(Mo,"readwrite");return yield J.objectStore(Mo).put(S,k),yield J.complete,S})).apply(this,arguments)}function za(D){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,L.Z)(function*(D){const S=es(D),j=(yield xn()).transaction(Mo,"readwrite");yield j.objectStore(Mo).delete(S),yield j.complete})).apply(this,arguments)}function es({appConfig:D}){return D.appId}const Qn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Za(D,S){return kl.apply(this,arguments)}function kl(){return(kl=(0,L.Z)(function*(D,S){const k=yield Ya(D),j=Qa(S),J={method:"POST",headers:k,body:JSON.stringify(j)};let de;try{de=yield(yield fetch(Ka(D.appConfig),J)).json()}catch(Pe){throw Qn.create("token-subscribe-failed",{errorInfo:Pe})}if(de.error)throw Qn.create("token-subscribe-failed",{errorInfo:de.error.message});if(!de.token)throw Qn.create("token-subscribe-no-token");return de.token})).apply(this,arguments)}function Bi(D,S){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,L.Z)(function*(D,S){const k=yield Ya(D),j=Qa(S.subscriptionOptions),J={method:"PATCH",headers:k,body:JSON.stringify(j)};let de;try{de=yield(yield fetch(`${Ka(D.appConfig)}/${S.token}`,J)).json()}catch(Pe){throw Qn.create("token-update-failed",{errorInfo:Pe})}if(de.error)throw Qn.create("token-update-failed",{errorInfo:de.error.message});if(!de.token)throw Qn.create("token-update-no-token");return de.token})).apply(this,arguments)}function Ol(D,S){return vt.apply(this,arguments)}function vt(){return(vt=(0,L.Z)(function*(D,S){const j={method:"DELETE",headers:yield Ya(D)};try{const de=yield(yield fetch(`${Ka(D.appConfig)}/${S}`,j)).json();if(de.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:de.error.message})}catch(J){throw Qn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function Ka({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ya(D){return xo.apply(this,arguments)}function xo(){return(xo=(0,L.Z)(function*({appConfig:D,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Qa({p256dh:D,auth:S,endpoint:k,vapidKey:j}){const J={web:{endpoint:k,auth:S,p256dh:D}};return j!==ea&&(J.web.applicationPubKey=j),J}const Xa=6048e5;function mh(D){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,L.Z)(function*(D){const S=yield bi(D.swRegistration,D.vapidKey),k={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Vi(S.getKey("auth")),p256dh:Vi(S.getKey("p256dh"))},j=yield Nc(D.firebaseDependencies);if(j){if(Zu(j.subscriptionOptions,k))return Date.now()>=j.createTime+Xa?_h(D,{token:j.token,createTime:Date.now(),subscriptionOptions:k}):j.token;try{yield Ol(D.firebaseDependencies,j.token)}catch(J){console.warn(J)}return Nl(D.firebaseDependencies,k)}return Nl(D.firebaseDependencies,k)})).apply(this,arguments)}function ke(D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,L.Z)(function*(D){const S=yield Nc(D.firebaseDependencies);S&&(yield Ol(D.firebaseDependencies,S.token),yield za(D.firebaseDependencies));const k=yield D.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function _h(D,S){return _n.apply(this,arguments)}function _n(){return(_n=(0,L.Z)(function*(D,S){try{const k=yield Bi(D.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield Ui(D.firebaseDependencies,j),k}catch(k){throw yield ke(D),k}})).apply(this,arguments)}function Nl(D,S){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,L.Z)(function*(D,S){const j={token:yield Za(D,S),createTime:Date.now(),subscriptionOptions:S};return yield Ui(D,j),j.token})).apply(this,arguments)}function bi(D,S){return zs.apply(this,arguments)}function zs(){return(zs=(0,L.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ph(S)})})).apply(this,arguments)}function Zu(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function Fc(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function fp(D,S){if(!S.notification)return;D.notification={};const k=S.notification.title;k&&(D.notification.title=k);const j=S.notification.body;j&&(D.notification.body=j);const J=S.notification.image;J&&(D.notification.image=J)}(S,D),function Lc(D,S){!S.data||(D.data=S.data)}(S,D),function Ja(D,S){if(!S.fcmOptions)return;D.fcmOptions={};const k=S.fcmOptions.link;k&&(D.fcmOptions.link=k);const j=S.fcmOptions.analytics_label;j&&(D.fcmOptions.analyticsLabel=j)}(S,D),S}function Pr(D){return"object"==typeof D&&!!D&&$a in D}function Cs(D,S){const k=[];for(let j=0;j<D.length;j++)k.push(D.charAt(j)),j<S.length&&k.push(S.charAt(j));return k.join("")}function Ws(D){return Qn.create("missing-app-config-values",{valueName:D})}Cs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Cs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ts{constructor(S,k,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Vc(D){if(!D||!D.options)throw Ws("App Configuration Object");if(!D.name)throw Ws("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=D;for(const j of S)if(!k[j])throw Ws(j);return{appName:D.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:J,installations:k,analyticsProvider:j}}_delete(){return Promise.resolve()}}function yh(D){return el.apply(this,arguments)}function el(){return(el=(0,L.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Ao,{scope:Fi}),D.swRegistration.update().catch(()=>{})}catch(S){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function pp(D,S){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,L.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield yh(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Ku(D,S){return na.apply(this,arguments)}function na(){return(na=(0,L.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=ea)})).apply(this,arguments)}function ra(){return(ra=(0,L.Z)(function*(D,S){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield Ku(D,null==S?void 0:S.vapidKey),yield pp(D,null==S?void 0:S.serviceWorkerRegistration),mh(D)})).apply(this,arguments)}function vh(D,S,k){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,L.Z)(function*(D,S,k){const j=Uc(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:k[$a],message_name:k[hh],message_time:k[Cm],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Uc(D){switch(D){case $s.NOTIFICATION_CLICKED:return"notification_open";case $s.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bc(){return(Bc=(0,L.Z)(function*(D,S){const k=S.data;if(!k.isFirebaseMessaging)return;D.onMessageHandler&&k.messageType===$s.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Fc(k)):D.onMessageHandler.next(Fc(k)));const j=k.data;Pr(j)&&"1"===j[Li]&&(yield vh(D,k.messageType,j))})).apply(this,arguments)}const Vl="@firebase/messaging",Zs=D=>{const S=new ts(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function gp(D,S){return Bc.apply(this,arguments)}(S,k)),S},mp=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:j=>function Yu(D,S){return ra.apply(this,arguments)}(S,j)}};function Er(){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,L.Z)(function*(){try{yield(0,ce.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Tm(){(0,he._registerComponent)(new we.wA("messaging",Zs,"PUBLIC")),(0,he._registerComponent)(new we.wA("messaging-internal",mp,"PRIVATE")),(0,he.registerVersion)(Vl,"0.9.9"),(0,he.registerVersion)(Vl,"0.9.9","esm2017")}();const Ul="analytics",tl="firebase_id",Dm="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ks="https://www.googletagmanager.com/gtag/js",Xn=new se.Yd("@firebase/analytics");function yp(D){return Promise.all(D.map(S=>S.catch(k=>k)))}function Eh(D,S){const k=document.createElement("script");k.src=`${Ks}?l=${D}&id=${S}`,k.async=!0,document.head.appendChild(k)}function Ch(D,S,k,j,J,de){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,L.Z)(function*(D,S,k,j,J,de){const Pe=j[J];try{if(Pe)yield S[Pe];else{const et=(yield yp(k)).find(Bt=>Bt.measurementId===J);et&&(yield S[et.appId])}}catch(tt){Xn.error(tt)}D("config",J,de)})).apply(this,arguments)}function Hc(D,S,k,j,J){return Th.apply(this,arguments)}function Th(){return(Th=(0,L.Z)(function*(D,S,k,j,J){try{let de=[];if(J&&J.send_to){let Pe=J.send_to;Array.isArray(Pe)||(Pe=[Pe]);const tt=yield yp(k);for(const et of Pe){const Bt=tt.find(Tr=>Tr.measurementId===et),yn=Bt&&S[Bt.appId];if(!yn){de=[];break}de.push(yn)}}0===de.length&&(de=Object.values(S)),yield Promise.all(de),D("event",j,J||{})}catch(de){Xn.error(de)}})).apply(this,arguments)}function rl(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Ks))return S;return null}const Rt=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ys=new class Lt{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function il(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Rn(D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,L.Z)(function*(D){var S;const{appId:k,apiKey:j}=D,J={method:"GET",headers:il(j)},de=Dm.replace("{app-id}",k),Pe=yield fetch(de,J);if(200!==Pe.status&&304!==Pe.status){let tt="";try{const et=yield Pe.json();(null===(S=et.error)||void 0===S?void 0:S.message)&&(tt=et.error.message)}catch(et){}throw Rt.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:tt})}return Pe.json()})).apply(this,arguments)}function wi(D){return hn.apply(this,arguments)}function hn(){return(hn=(0,L.Z)(function*(D,S=Ys,k){const{appId:j,apiKey:J,measurementId:de}=D.options;if(!j)throw Rt.create("no-app-id");if(!J){if(de)return{measurementId:de,appId:j};throw Rt.create("no-api-key")}const Pe=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new Oo;return setTimeout((0,L.Z)(function*(){tt.abort()}),void 0!==k?k:6e4),ia({appId:j,apiKey:J,measurementId:de},Pe,tt,S)})).apply(this,arguments)}function ia(D,S,k){return ut.apply(this,arguments)}function ut(){return(ut=(0,L.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:k},j,J=Ys){const{appId:de,measurementId:Pe}=D;try{yield bp(j,S)}catch(tt){if(Pe)return Xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:de,measurementId:Pe};throw tt}try{const tt=yield Rn(D);return J.deleteThrottleMetadata(de),tt}catch(tt){if(!ji(tt)){if(J.deleteThrottleMetadata(de),Pe)return Xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:de,measurementId:Pe};throw tt}const et=503===Number(tt.customData.httpStatus)?(0,ce.$s)(k,J.intervalMillis,30):(0,ce.$s)(k,J.intervalMillis),Bt={throttleEndTimeMillis:Date.now()+et,backoffCount:k+1};return J.setThrottleMetadata(de,Bt),Xn.debug(`Calling attemptFetch again in ${et} millis`),ia(D,Bt,j,J)}})).apply(this,arguments)}function bp(D,S){return new Promise((k,j)=>{const J=Math.max(S-Date.now(),0),de=setTimeout(k,J);D.addEventListener(()=>{clearTimeout(de),j(Rt.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function ji(D){if(!(D instanceof ce.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Oo{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Qs(){return sa.apply(this,arguments)}function sa(){return(sa=(0,L.Z)(function*(){if(!(0,ce.hl)())return Xn.warn(Rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(D){return Xn.warn(Rt.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function kn(){return(kn=(0,L.Z)(function*(D,S,k,j,J,de,Pe){var tt;const et=wi(D);et.then(pn=>{k[pn.measurementId]=pn.appId,D.options.measurementId&&pn.measurementId!==D.options.measurementId&&Xn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${pn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pn=>Xn.error(pn)),S.push(et);const Bt=Qs().then(pn=>{if(pn)return j.getId()}),[yn,Tr]=yield Promise.all([et,Bt]);rl()||Eh(de,yn.measurementId),J("js",new Date);const Gn=null!==(tt=null==Pe?void 0:Pe.config)&&void 0!==tt?tt:{};return Gn.origin="firebase",Gn.update=!0,null!=Tr&&(Gn[tl]=Tr),J("config",yn.measurementId,Gn),yn.measurementId})).apply(this,arguments)}class wp{constructor(S){this.app=S}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},ye=[];const sr={};let N,Xs,ci="dataLayer",ns=!1;function bt(D,S,k){!function Js(){const D=[];if((0,ce.ru)()&&D.push("This is a browser extension environment."),(0,ce.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((j,J)=>`(${J+1}) ${j}`).join(" "),k=Rt.create("invalid-analytics-context",{errorInfo:S});Xn.warn(k.message)}}();const j=D.options.appId;if(!j)throw Rt.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Rt.create("no-api-key");Xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[j])throw Rt.create("already-exists",{id:j});if(!ns){!function nl(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(ci);const{wrappedGtag:de,gtagCore:Pe}=function Ju(D,S,k,j,J){let de=function(...Pe){window[j].push(arguments)};return window[J]&&"function"==typeof window[J]&&(de=window[J]),window[J]=function vp(D,S,k,j){function de(){return(de=(0,L.Z)(function*(Pe,tt,et){try{"event"===Pe?yield Hc(D,S,k,tt,et):"config"===Pe?yield Ch(D,S,k,j,tt,et):D("set",tt)}catch(Bt){Xn.error(Bt)}})).apply(this,arguments)}return function J(Pe,tt,et){return de.apply(this,arguments)}}(de,D,S,k),{gtagCore:de,wrappedGtag:window[J]}}(li,ye,sr,ci,"gtag");Xs=de,N=Pe,ns=!0}return li[j]=function fn(D,S,k,j,J,de,Pe){return kn.apply(this,arguments)}(D,ye,sr,S,N,ci,k),new wp(D)}function oa(){return(oa=(0,L.Z)(function*(D,S,k,j,J){if(J&&J.global)D("event",k,j);else{const de=yield S;D("event",k,Object.assign(Object.assign({},j),{send_to:de}))}})).apply(this,arguments)}function ed(){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,L.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(D){return!1}})).apply(this,arguments)}const ro="@firebase/analytics";!function qt(){(0,he._registerComponent)(new we.wA(Ul,(S,{options:k})=>bt(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,he._registerComponent)(new we.wA("analytics-internal",function D(S){try{const k=S.getProvider(Ul).getImmediate();return{logEvent:(j,J,de)=>function td(D,S,k,j){D=(0,ce.m9)(D),function jl(D,S,k,j,J){return oa.apply(this,arguments)}(Xs,li[D.app.options.appId],S,k,j).catch(J=>Xn.error(J))}(k,j,J,de)}}catch(k){throw Rt.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,he.registerVersion)(ro,"0.7.5"),(0,he.registerVersion)(ro,"0.7.5","esm2017")}();var aa=F(4408),nd=F(7565);const Fr=new class Ah extends nd.v{}(class or extends aa.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,k,j):S.flush(this)}});var $l=F(4986),No=F(8505),Is=F(5363),Mh=F(9468);const rd=new c.GfV("7.2.1"),Hi="__angularfire_symbol__analyticsIsSupportedValue",io="__angularfire_symbol__analyticsIsSupported",sl="__angularfire_symbol__remoteConfigIsSupportedValue",Gl="__angularfire_symbol__remoteConfigIsSupported",Zr="__angularfire_symbol__messagingIsSupportedValue",ol="__angularfire_symbol__messagingIsSupported";function sd(D,S,k){if(S){if(1===S.length)return S[0];const de=S.filter(Pe=>Pe.app===k);if(1===de.length)return de[0]}return k.container.getProvider(D).getImmediate({optional:!0})}globalThis[io]||(globalThis[io]=ed().then(D=>globalThis[Hi]=D).catch(()=>globalThis[Hi]=!1)),globalThis[ol]||(globalThis[ol]=Er().then(D=>globalThis[Zr]=D).catch(()=>globalThis[Zr]=!1)),globalThis[Gl]||(globalThis[Gl]=Uv().then(D=>globalThis[sl]=D).catch(()=>globalThis[sl]=!1));const Ep=(D,S)=>{const k=S?[S]:(0,re.C6)(),j=[];return k.forEach(J=>{J.container.getProvider(D).instances.forEach(Pe=>{j.includes(Pe)||j.push(Pe)})}),j};function Ds(){}class od{constructor(S,k=Fr){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,j){const J=this.zone;return this.delegate.schedule(function(Pe){J.runGuarded(()=>{S.apply(this,[Pe])})},k,j)}}class qc{constructor(S){this.zone=S,this.task=null}call(S,k){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ds,{},Ds,Ds)),k.pipe((0,No.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zl=(()=>{class D{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new od(Zone.current)),this.insideAngular=k.run(()=>new od(Zone.current,$l.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(k){return new(k||D)(c.LFG(c.R0b))},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function In(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ca(D){return D.pipe((0,Is.Q)(In().outsideAngular))}function $c(D){return In(),function al(D){return function(k){return(k=k.lift(new qc(D.ngZone))).pipe((0,Mh.R)(D.outsideAngular),(0,Is.Q)(D.insideAngular))}}(In())(D)}},2090:(ht,Se,F)=>{"use strict";F.d(Se,{$s:()=>Ft,BH:()=>Ge,DV:()=>en,Dv:()=>Co,G6:()=>Qe,GJ:()=>Jt,LL:()=>K,Mn:()=>Me,Pz:()=>Le,Sg:()=>xe,UG:()=>te,UI:()=>bs,US:()=>we,Wj:()=>Vn,Yr:()=>nt,ZB:()=>G,ZR:()=>ue,b$:()=>Ae,cI:()=>dn,d:()=>ge,dS:()=>To,eu:()=>B,g5:()=>L,gK:()=>_i,gQ:()=>mi,h$:()=>se,hl:()=>fe,hu:()=>re,jU:()=>ae,lb:()=>Pi,m9:()=>ii,ne:()=>Es,p$:()=>$,pd:()=>Eo,r3:()=>ni,ru:()=>Ee,tV:()=>pe,uI:()=>He,ug:()=>Ht,vZ:()=>ki,w1:()=>Fe,w9:()=>An,xO:()=>ri,xb:()=>Ut,z$:()=>Ne,zI:()=>q,zd:()=>ws});const re=function(H,Y){if(!H)throw L(Y)},L=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},he=function(H){const Y=[];let Q=0;for(let Ie=0;Ie<H.length;Ie++){let oe=H.charCodeAt(Ie);oe<128?Y[Q++]=oe:oe<2048?(Y[Q++]=oe>>6|192,Y[Q++]=63&oe|128):55296==(64512&oe)&&Ie+1<H.length&&56320==(64512&H.charCodeAt(Ie+1))?(oe=65536+((1023&oe)<<10)+(1023&H.charCodeAt(++Ie)),Y[Q++]=oe>>18|240,Y[Q++]=oe>>12&63|128,Y[Q++]=oe>>6&63|128,Y[Q++]=63&oe|128):(Y[Q++]=oe>>12|224,Y[Q++]=oe>>6&63|128,Y[Q++]=63&oe|128)}return Y},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,Y){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let oe=0;oe<H.length;oe+=3){const Je=H[oe],De=oe+1<H.length,Te=De?H[oe+1]:0,qe=oe+2<H.length,st=qe?H[oe+2]:0;let sn=(15&Te)<<2|st>>6,Nn=63&st;qe||(Nn=64,De||(sn=64)),Ie.push(Q[Je>>2],Q[(3&Je)<<4|Te>>4],Q[sn],Q[Nn])}return Ie.join("")},encodeString(H,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(H):this.encodeByteArray(he(H),Y)},decodeString(H,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(H):function(H){const Y=[];let Q=0,Ie=0;for(;Q<H.length;){const oe=H[Q++];if(oe<128)Y[Ie++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const Je=H[Q++];Y[Ie++]=String.fromCharCode((31&oe)<<6|63&Je)}else if(oe>239&&oe<365){const qe=((7&oe)<<18|(63&H[Q++])<<12|(63&H[Q++])<<6|63&H[Q++])-65536;Y[Ie++]=String.fromCharCode(55296+(qe>>10)),Y[Ie++]=String.fromCharCode(56320+(1023&qe))}else{const Je=H[Q++],De=H[Q++];Y[Ie++]=String.fromCharCode((15&oe)<<12|(63&Je)<<6|63&De)}}return Y.join("")}(this.decodeStringToByteArray(H,Y))},decodeStringToByteArray(H,Y){this.init_();const Q=Y?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let oe=0;oe<H.length;){const Je=Q[H.charAt(oe++)],Te=oe<H.length?Q[H.charAt(oe)]:0;++oe;const st=oe<H.length?Q[H.charAt(oe)]:64;++oe;const mt=oe<H.length?Q[H.charAt(oe)]:64;if(++oe,null==Je||null==Te||null==st||null==mt)throw Error();Ie.push(Je<<2|Te>>4),64!==st&&(Ie.push(Te<<4&240|st>>2),64!==mt&&Ie.push(st<<6&192|mt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},se=function(H){const Y=he(H);return we.encodeByteArray(Y,!0)},me=function(H){return se(H).replace(/\./g,"")},pe=function(H){try{return we.decodeString(H,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function $(H){return G(void 0,H)}function G(H,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return Y}for(const Q in Y)!Y.hasOwnProperty(Q)||!ie(Q)||(H[Q]=G(H[Q],Y[Q]));return H}function ie(H){return"__proto__"!==H}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,Q)=>{this.resolve=Y,this.reject=Q})}wrapCallback(Y){return(Q,Ie)=>{Q?this.reject(Q):this.resolve(Ie),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(Q):Y(Q,Ie))}}}function xe(H,Y){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=Y||"demo-project",oe=H.iat||0,Je=H.sub||H.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:oe,exp:oe+3600,auth_time:oe,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},H);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(De)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function ae(){return"object"==typeof self&&self.self===self}function Ee(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ge(){return Ne().indexOf("Electron/")>=0}function Fe(){const H=Ne();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Me(){return Ne().indexOf("MSAppHost/")>=0}function nt(){return!1}function Qe(){return!te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function B(){return new Promise((H,Y)=>{try{let Q=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(Ie);oe.onsuccess=()=>{oe.result.close(),Q||self.indexedDB.deleteDatabase(Ie),H(!0)},oe.onupgradeneeded=()=>{Q=!1},oe.onerror=()=>{var Je;Y((null===(Je=oe.error)||void 0===Je?void 0:Je.message)||"")}}catch(Q){Y(Q)}})}function q(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ue extends Error{constructor(Y,Q,Ie){super(Q),this.code=Y,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(Y,Q,Ie){this.service=Y,this.serviceName=Q,this.errors=Ie}create(Y,...Q){const Ie=Q[0]||{},oe=`${this.service}/${Y}`,Je=this.errors[Y],De=Je?function ze(H,Y){return H.replace(_t,(Q,Ie)=>{const oe=Y[Ie];return null!=oe?String(oe):`<${Ie}?>`})}(Je,Ie):"Error";return new ue(oe,`${this.serviceName}: ${De} (${oe}).`,Ie)}}const _t=/\{\$([^}]+)}/g;function dn(H){return JSON.parse(H)}function Le(H){return JSON.stringify(H)}const ct=function(H){let Y={},Q={},Ie={},oe="";try{const Je=H.split(".");Y=dn(pe(Je[0])||""),Q=dn(pe(Je[1])||""),oe=Je[2],Ie=Q.d||{},delete Q.d}catch(Je){}return{header:Y,claims:Q,data:Ie,signature:oe}},An=function(H){const Q=ct(H).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Jt=function(H){const Y=ct(H).claims;return"object"==typeof Y&&!0===Y.admin};function ni(H,Y){return Object.prototype.hasOwnProperty.call(H,Y)}function en(H,Y){if(Object.prototype.hasOwnProperty.call(H,Y))return H[Y]}function Ut(H){for(const Y in H)if(Object.prototype.hasOwnProperty.call(H,Y))return!1;return!0}function bs(H,Y,Q){const Ie={};for(const oe in H)Object.prototype.hasOwnProperty.call(H,oe)&&(Ie[oe]=Y.call(Q,H[oe],oe,H));return Ie}function ki(H,Y){if(H===Y)return!0;const Q=Object.keys(H),Ie=Object.keys(Y);for(const oe of Q){if(!Ie.includes(oe))return!1;const Je=H[oe],De=Y[oe];if(xr(Je)&&xr(De)){if(!ki(Je,De))return!1}else if(Je!==De)return!1}for(const oe of Ie)if(!Q.includes(oe))return!1;return!0}function xr(H){return null!==H&&"object"==typeof H}function ri(H){const Y=[];for(const[Q,Ie]of Object.entries(H))Array.isArray(Ie)?Ie.forEach(oe=>{Y.push(encodeURIComponent(Q)+"="+encodeURIComponent(oe))}):Y.push(encodeURIComponent(Q)+"="+encodeURIComponent(Ie));return Y.length?"&"+Y.join("&"):""}function ws(H){const Y={};return H.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[oe,Je]=Ie.split("=");Y[decodeURIComponent(oe)]=decodeURIComponent(Je)}}),Y}function Eo(H){const Y=H.indexOf("?");if(!Y)return"";const Q=H.indexOf("#",Y);return H.substring(Y,Q>0?Q:void 0)}class mi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,Q){Q||(Q=0);const Ie=this.W_;if("string"==typeof Y)for(let mt=0;mt<16;mt++)Ie[mt]=Y.charCodeAt(Q)<<24|Y.charCodeAt(Q+1)<<16|Y.charCodeAt(Q+2)<<8|Y.charCodeAt(Q+3),Q+=4;else for(let mt=0;mt<16;mt++)Ie[mt]=Y[Q]<<24|Y[Q+1]<<16|Y[Q+2]<<8|Y[Q+3],Q+=4;for(let mt=16;mt<80;mt++){const sn=Ie[mt-3]^Ie[mt-8]^Ie[mt-14]^Ie[mt-16];Ie[mt]=4294967295&(sn<<1|sn>>>31)}let st,Ot,oe=this.chain_[0],Je=this.chain_[1],De=this.chain_[2],Te=this.chain_[3],qe=this.chain_[4];for(let mt=0;mt<80;mt++){mt<40?mt<20?(st=Te^Je&(De^Te),Ot=1518500249):(st=Je^De^Te,Ot=1859775393):mt<60?(st=Je&De|Te&(Je|De),Ot=2400959708):(st=Je^De^Te,Ot=3395469782);const sn=(oe<<5|oe>>>27)+st+qe+Ot+Ie[mt]&4294967295;qe=Te,Te=De,De=4294967295&(Je<<30|Je>>>2),Je=oe,oe=sn}this.chain_[0]=this.chain_[0]+oe&4294967295,this.chain_[1]=this.chain_[1]+Je&4294967295,this.chain_[2]=this.chain_[2]+De&4294967295,this.chain_[3]=this.chain_[3]+Te&4294967295,this.chain_[4]=this.chain_[4]+qe&4294967295}update(Y,Q){if(null==Y)return;void 0===Q&&(Q=Y.length);const Ie=Q-this.blockSize;let oe=0;const Je=this.buf_;let De=this.inbuf_;for(;oe<Q;){if(0===De)for(;oe<=Ie;)this.compress_(Y,oe),oe+=this.blockSize;if("string"==typeof Y){for(;oe<Q;)if(Je[De]=Y.charCodeAt(oe),++De,++oe,De===this.blockSize){this.compress_(Je),De=0;break}}else for(;oe<Q;)if(Je[De]=Y[oe],++De,++oe,De===this.blockSize){this.compress_(Je),De=0;break}}this.inbuf_=De,this.total_+=Q}digest(){const Y=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let oe=this.blockSize-1;oe>=56;oe--)this.buf_[oe]=255&Q,Q/=256;this.compress_(this.buf_);let Ie=0;for(let oe=0;oe<5;oe++)for(let Je=24;Je>=0;Je-=8)Y[Ie]=this.chain_[oe]>>Je&255,++Ie;return Y}}function Es(H,Y){const Q=new Ct(H,Y);return Q.subscribe.bind(Q)}class Ct{constructor(Y,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{Y(this)}).catch(Ie=>{this.error(Ie)})}next(Y){this.forEachObserver(Q=>{Q.next(Y)})}error(Y){this.forEachObserver(Q=>{Q.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,Q,Ie){let oe;if(void 0===Y&&void 0===Q&&void 0===Ie)throw new Error("Missing Observer.");oe=function qn(H,Y){if("object"!=typeof H||null===H)return!1;for(const Q of Y)if(Q in H&&"function"==typeof H[Q])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:Q,complete:Ie},void 0===oe.next&&(oe.next=Kn),void 0===oe.error&&(oe.error=Kn),void 0===oe.complete&&(oe.complete=Kn);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch(De){}}),this.observers.push(oe),Je}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,Y)}sendOne(Y,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{Q(this.observers[Y])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kn(){}const Co=function(H,Y,Q,Ie){let oe;if(Ie<Y?oe="at least "+Y:Ie>Q&&(oe=0===Q?"none":"no more than "+Q),oe)throw new Error(H+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+oe+".")};function _i(H,Y){return`${H} failed: ${Y} argument `}function Vn(H,Y,Q,Ie){if((!Ie||Q)&&"function"!=typeof Q)throw new Error(_i(H,Y)+"must be a valid function.")}function Pi(H,Y,Q,Ie){if((!Ie||Q)&&("object"!=typeof Q||null===Q))throw new Error(_i(H,Y)+"must be a valid context object.")}const To=function(H){const Y=[];let Q=0;for(let Ie=0;Ie<H.length;Ie++){let oe=H.charCodeAt(Ie);if(oe>=55296&&oe<=56319){const Je=oe-55296;Ie++,re(Ie<H.length,"Surrogate pair missing trail surrogate."),oe=65536+(Je<<10)+(H.charCodeAt(Ie)-56320)}oe<128?Y[Q++]=oe:oe<2048?(Y[Q++]=oe>>6|192,Y[Q++]=63&oe|128):oe<65536?(Y[Q++]=oe>>12|224,Y[Q++]=oe>>6&63|128,Y[Q++]=63&oe|128):(Y[Q++]=oe>>18|240,Y[Q++]=oe>>12&63|128,Y[Q++]=oe>>6&63|128,Y[Q++]=63&oe|128)}return Y},Ht=function(H){let Y=0;for(let Q=0;Q<H.length;Q++){const Ie=H.charCodeAt(Q);Ie<128?Y++:Ie<2048?Y+=2:Ie>=55296&&Ie<=56319?(Y+=4,Q++):Y+=3}return Y};function Ft(H,Y=1e3,Q=2){const Ie=Y*Math.pow(Q,H),oe=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+oe)}function ii(H){return H&&H._delegate?H._delegate:H}},5500:(ht,Se,F)=>{"use strict";var c=F(5e3);let re=null;function L(){return re}const se=new c.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function pe(){return(0,c.LFG)(G)}()},providedIn:"platform"}),n})();const $=new c.OlP("Location Initialized");let G=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ie()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ie()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ge(){return new G((0,c.LFG)(se))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ae(n){const e=(0,c.LFG)(se).location;return new Ae((0,c.LFG)(me),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ee=new c.OlP("appBaseHref");let Ae=(()=>{class n extends te{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+He(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+He(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(Ee,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ge=(()=>{class n extends te{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+He(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+He(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(Ee,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Qe(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function nt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=xe,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(c.LFG(te),c.LFG(me))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Me(){return new Fe((0,c.LFG)(te),(0,c.LFG)(me))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}var q=(()=>((q=q||{})[q.Zero=0]="Zero",q[q.One=1]="One",q[q.Two=2]="Two",q[q.Few=3]="Few",q[q.Many=4]="Many",q[q.Other=5]="Other",q))();const Eo=c.kL8;class tn{}let $n=(()=>{class n extends tn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Eo(r||this.locale)(t)){case q.Zero:return"zero";case q.One:return"one";case q.Two:return"two";case q.Few:return"few";case q.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.soG))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),js=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Ba{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ba(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,u),Do(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Do(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Do(n,e){n.context.$implicit=e.item}let Un=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ah("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ah("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class cn{constructor(){this.$implicit=null,this.ngIf=null}}function ah(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class Jo{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ai=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),$r=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Jo(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(ai,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),$u=(()=>{class n{constructor(t,r,i){i._addDefault(new Jo(t,r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(ai,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),Gu=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();class ch{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class _m{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Hs=new _m,ym=new ch;let zu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return Hs;if((0,c.F4k)(t))return ym;throw function ir(n,e){return new c.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1}),n})(),Li=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:tn,useClass:$n}]}),n})();const fh="browser";function Gr(n){return"server"===n}let Ga=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new hp((0,c.LFG)(se),window)}),n})();class hp{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Mo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Mn(this.window.history)||Mn(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Mn(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ta extends class Nc extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){re||(re=n)}(new ta)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function zr(){return Ui=Ui||document.querySelector("base"),Ui?Ui.getAttribute("href"):null}();return null==t?null:function Wa(n){za=za||document.createElement("a"),za.setAttribute("href",n);const e=za.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ui=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Va(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let za,Ui=null;const es=new c.OlP("TRANSITION_ID"),Qn=[{provide:c.ip1,useFactory:function Or(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[es,se,c.zs3],multi:!0}];class Za{static init(){(0,c.VLi)(new Za)}addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const h=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let kl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Bi=new c.OlP("EventManagerPlugins");let Gs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Bi),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Ol{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let vt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ka=(()=>{class n extends vt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ya),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ya))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Ya(n){L().remove(n)}const xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qa=/%COMP%/g;function _n(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?_n(n,i,t):(i=i.replace(Qa,n),t.push(i))}return t}function Nl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let bi=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new zs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new fp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new Lc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=_n(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Gs),c.LFG(Ka),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class zs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(xo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=xo[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=xo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nl(r)):this.eventManager.addEventListener(e,t,Nl(r))}}class fp extends zs{constructor(e,t,r,i){super(e),this.component=r;const s=_n(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Nt(n){return"_ngcontent-%COMP%".replace(Qa,n)}(i+"-"+r.id),this.hostAttr=function _h(n){return"_nghost-%COMP%".replace(Qa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Lc extends zs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=_n(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const h=document.createElement("style");h.textContent=s[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ja=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Pr=["alt","control","meta","shift"],Vc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ws={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ts={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yh=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="";if(Pr.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),u+=p+".")}),u+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function el(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ws.hasOwnProperty(e)&&(e=Ws[e]))}return Vc[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pr.forEach(s=>{s!=i&&ts[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Yu=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:fh},{provide:c.g9A,useValue:function pp(){ta.makeCurrent(),Za.init()},multi:!0},{provide:se,useFactory:function Ku(){return(0,c.RDi)(document),document},deps:[]}]),ra=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Fl(){return new c.qLn},deps:[]},{provide:Bi,useClass:Ja,multi:!0,deps:[se,c.R0b,c.Lbi]},{provide:Bi,useClass:yh,multi:!0,deps:[se]},{provide:bi,useClass:bi,deps:[Gs,Ka,c.AFp]},{provide:c.FYo,useExisting:bi},{provide:vt,useExisting:Ka},{provide:Ka,useClass:Ka,deps:[se]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Gs,useClass:Gs,deps:[Bi,c.R0b]},{provide:class xn{},useClass:kl,deps:[]}];let vh=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:es,useExisting:c.AFp},Qn]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:ra,imports:[Li,c.hGG]}),n})();"undefined"!=typeof window&&window;let Hc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(vp),r},providedIn:"root"}),n})(),vp=(()=>{class n extends Hc{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Th(n){return new vp(n.get(se))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var rl=F(4986),En=F(8306),Rt=F(8996),Wr=F(3269);function lt(...n){const e=(0,Wr.yG)(n);return(0,Rt.D)(n,e)}var Lt=F(5813),Ys=F(8189);function Rn(...n){return function il(){return(0,Ys.J)(1)}()((0,Rt.D)(n,(0,Wr.yG)(n)))}var Cn=F(4482);function wi(...n){const e=(0,Wr.yG)(n);return(0,Cn.e)((t,r)=>{(e?Rn(n,t,e):Rn(n,t)).subscribe(r)})}var hn=F(5403);function ia(){return(0,Cn.e)((n,e)=>{let t,r=!1;n.subscribe(new hn.Q(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ut=F(4004);function bp(n,e,t,r,i){return(s,u)=>{let h=t,p=e,y=0;s.subscribe(new hn.Q(u,C=>{const I=y++;p=h?n(p,C,I):(h=!0,C),r&&u.next(p)},i&&(()=>{h&&u.next(p),u.complete()})))}}function ji(n,e){return(0,Cn.e)(bp(n,e,arguments.length>=2,!0))}var Oo=F(4671);function Qs(n,e=Oo.y){return n=null!=n?n:sa,(0,Cn.e)((t,r)=>{let i,s=!0;t.subscribe(new hn.Q(r,u=>{const h=e(u);(s||!n(i,h))&&(s=!1,i=h,r.next(u))}))})}function sa(n,e){return n===e}function fn(n,e){return(0,Cn.e)((t,r)=>{let i=0;t.subscribe(new hn.Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}var rt,kn=F(2011),li=(F(3059),F(3942)),ye=F(5861),sr=F(9681),ci=F(4859),ui=F(1877),N=F(2090),Xs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ns={},Js=Js||{},bt=Xs||self;function jl(){}function oa(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function eo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var to="closure_uid_"+(1e9*Math.random()>>>0),no=0;function Ih(n,e,t){return n.call.apply(n.bind,arguments)}function Hl(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Tn(n,e,t){return(Tn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ih:Hl).apply(null,arguments)}function ql(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Nr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function on(){this.s=this.s,this.o=this.o}var Dh={};on.prototype.s=!1,on.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Po(n){return Object.prototype.hasOwnProperty.call(n,to)&&n[to]||(n[to]=++no)}(this);delete Dh[n]}},on.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Sm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Am=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function Mm(n){return Array.prototype.concat.apply([],arguments)}function td(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ro(n){return/^[\s\xa0]*$/.test(n)}var or,Sh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qt(n,e){return-1!=n.indexOf(e)}function aa(n,e){return n<e?-1:n>e?1:0}e:{var nd=bt.navigator;if(nd){var Ah=nd.userAgent;if(Ah){or=Ah;break e}}or=""}function Fr(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ts(n){const e={};for(const t in n)e[t]=n[t];return e}var $l="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function No(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<$l.length;s++)t=$l[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Is(n){return Is[" "](n),n}Is[" "]=jl;var Ei,n,rd=qt(or,"Opera"),Hi=qt(or,"Trident")||qt(or,"MSIE"),io=qt(or,"Edge"),sl=io||Hi,Gl=qt(or,"Gecko")&&!(qt(or.toLowerCase(),"webkit")&&!qt(or,"Edge"))&&!(qt(or,"Trident")||qt(or,"MSIE"))&&!qt(or,"Edge"),Zr=qt(or.toLowerCase(),"webkit")&&!qt(or,"Edge");function ol(){var n=bt.document;return n?n.documentMode:void 0}e:{var xh="",id=(n=or,Gl?/rv:([^\);]+)(\)|;)/.exec(n):io?/Edge\/([\d\.]+)/.exec(n):Hi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Zr?/WebKit\/(\S+)/.exec(n):rd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(id&&(xh=id?id[1]:""),Hi){var Rh=ol();if(null!=Rh&&Rh>parseFloat(xh)){Ei=String(Rh);break e}}Ei=xh}var sd={};var qc=bt.document&&Hi&&(ol()||parseInt(Ei,10))||void 0,zl=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{bt.addEventListener("test",jl,e),bt.removeEventListener("test",jl,e)}catch(t){}return n}();function In(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function la(n,e){if(In.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Gl){e:{try{Is(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rs[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&la.Z.h.call(this)}}In.prototype.h=function(){this.defaultPrevented=!0},Nr(la,In);var rs={2:"touch",3:"pen",4:"mouse"};la.prototype.h=function(){la.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ca="closure_listenable_"+(1e6*Math.random()|0),Wl=0;function $c(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Wl,this.ca=this.fa=!1}function al(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Gc(n){this.src=n,this.g={},this.h=0}function zc(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Sm(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(al(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function D(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}Gc.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=D(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new $c(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var S="closure_lm_"+(1e6*Math.random()|0),k={};function j(n,e,t,r,i){if(r&&r.once)return Pe(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)j(n,e[s],t,r,i);return null}return t=pn(t),n&&n[ca]?n.N(e,t,eo(r)?!!r.capture:!!r,i):J(n,e,t,!1,r,i)}function J(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=eo(i)?!!i.capture:!!i,h=Tr(n);if(h||(n[S]=h=new Gc(n)),(t=h.add(e,t,r,u,s)).proxy)return t;if(r=function de(){var e=yn;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zl||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Bt(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Pe(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Pe(n,e[s],t,r,i);return null}return t=pn(t),n&&n[ca]?n.O(e,t,eo(r)?!!r.capture:!!r,i):J(n,e,t,!0,r,i)}function tt(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)tt(n,e[s],t,r,i);else r=eo(r)?!!r.capture:!!r,t=pn(t),n&&n[ca]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=D(s=n.g[e],t,r,i))&&(al(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Tr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=D(e,t,r,i)),(t=-1<n?e[n]:null)&&et(t))}function et(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ca])zc(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Bt(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Tr(e))?(zc(t,n),0==t.h&&(t.src=null,e[S]=null)):al(n)}}}function Bt(n){return n in k?k[n]:k[n]="on"+n}function yn(n,e){if(n.ca)n=!0;else{e=new la(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&et(n),n=t.call(r,e)}return n}function Tr(n){return(n=n[S])instanceof Gc?n:null}var Gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(n){return"function"==typeof n?n:(n[Gn]||(n[Gn]=function(e){return n.handleEvent(e)}),n[Gn])}function Fn(){on.call(this),this.i=new Gc(this),this.P=this,this.I=null}function vn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new In(e,n);else if(e instanceof In)e.target=e.target||n;else{var i=e;No(e=new In(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=Fo(u,r,!0,e)&&i}if(i=Fo(u=e.g=n,r,!0,e)&&i,i=Fo(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Fo(u=e.g=t[s],r,!1,e)&&i}function Fo(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ca&&u.capture==t){var h=u.listener,p=u.ia||u.src;u.fa&&zc(n.i,u),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Nr(Fn,on),Fn.prototype[ca]=!0,Fn.prototype.removeEventListener=function(n,e,t,r){tt(this,n,e,t,r)},Fn.prototype.M=function(){if(Fn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)al(t[r]);delete n.g[e],n.h--}}this.I=null},Fn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var is=bt.JSON.stringify;function so(){var n=Ip;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Zl,Cp=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xm,n=>n.reset());class xm{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tp(n){bt.setTimeout(()=>{throw n},0)}function cl(n,e){Zl||function jv(){var n=bt.Promise.resolve(void 0);Zl=function(){n.then(Hv)}}(),kh||(Zl(),kh=!0),Ip.add(n,e)}var kh=!1,Ip=new class ll{constructor(){this.h=this.g=null}add(e,t){const r=Cp.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Hv(){for(var n;n=so();){try{n.h.call(n.g)}catch(t){Tp(t)}var e=Cp;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}kh=!1}function Oh(n,e){Fn.call(this),this.h=n||1,this.g=e||bt,this.j=Tn(this.kb,this),this.l=Date.now()}function Dp(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Wc(n,e,t){if("function"==typeof n)t&&(n=Tn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Tn(n.handleEvent,n)}return 2147483647<Number(e)?-1:bt.setTimeout(n,e||0)}function Rm(n){n.g=Wc(()=>{n.g=null,n.i&&(n.i=!1,Rm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nr(Oh,Fn),(rt=Oh.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vn(this,"tick"),this.da&&(Dp(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Oh.Z.M.call(this),Dp(this),delete this.g};class Ph extends on{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Rm(this)}M(){super.M(),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kl(n){on.call(this),this.h=n,this.g={}}Nr(Kl,on);var Yl=[];function km(n,e,t,r){Array.isArray(t)||(t&&(Yl[0]=t.toString()),t=Yl);for(var i=0;i<t.length;i++){var s=j(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Om(n){Fr(n.g,function(e,t){this.g.hasOwnProperty(t)&&et(e)},n),n.g={}}function Sp(){this.g=!0}function Ql(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Nm(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return is(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Kl.prototype.M=function(){Kl.Z.M.call(this),Om(this)},Kl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sp.prototype.Aa=function(){this.g=!1},Sp.prototype.info=function(){};var ss={},Fm=null;function ld(){return Fm=Fm||new Fn}function Lm(n){In.call(this,ss.Ma,n)}function cd(n){const e=ld();vn(e,new Lm(e,n))}function Vm(n,e){In.call(this,ss.STAT_EVENT,n),this.stat=e}function zn(n){const e=ld();vn(e,new Vm(e,n))}function ua(n,e){In.call(this,ss.Na,n),this.size=e}function Zc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){n()},e)}ss.Ma="serverreachability",Nr(Lm,In),ss.STAT_EVENT="statevent",Nr(Vm,In),ss.Na="timingevent",Nr(ua,In);var Kc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Um={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Fh(){}function Lh(){}Fh.prototype.h=null;var Ap,Yc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Vh(){In.call(this,"d")}function Uh(){In.call(this,"c")}function Bh(){}function jh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Kl(this),this.P=oo,this.W=new Oh(n=sl?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qv}function qv(){this.i=null,this.g="",this.h=!1}Nr(Vh,In),Nr(Uh,In),Nr(Bh,Fh),Bh.prototype.g=function(){return new XMLHttpRequest},Bh.prototype.i=function(){return{}},Ap=new Bh;var oo=45e3,Hh={},os={};function da(n,e,t){n.K=1,n.v=tu(As(e)),n.s=t,n.U=!0,Mp(n,null)}function Mp(n,e){n.F=Date.now(),Qc(n),n.A=As(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ul(t.h,"t",r),n.C=0,t=n.l.H,n.h=new qv,n.g=Jm(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Ph(Tn(n.Ia,n,n.g),n.O)),km(n.V,n.g,"readystatechange",n.gb),e=n.H?Ts(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),cd(1),function Nh(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var C=y[0];y=y[1];var I=C.split("_");u=2<=I.length&&"type"==I[1]?u+(C+"=")+y+"&":u+(C+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ud(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function xp(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=GE(n,t),i==os){4==e&&(n.o=4,zn(14),r=!1),Ql(n.j,n.m,null,"[Incomplete Response]");break}if(i==Hh){n.o=4,zn(15),Ql(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ql(n.j,n.m,i,null),jm(n,i)}ud(n)&&i!=os&&i!=Hh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),md(e),e.L=!0,zn(11))):(Ql(n.j,n.m,t,"[Invalid Chunked Response]"),fa(n),ha(n))}function GE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?os:(t=Number(e.substring(t,r)),isNaN(t)?Hh:(r+=1)+t>e.length?os:(e=e.substr(r,t),n.C=r+t,e))}function Qc(n){n.Y=Date.now()+n.P,$v(n,n.P)}function $v(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Zc(Tn(n.eb,n),e)}function Xc(n){n.B&&(bt.clearTimeout(n.B),n.B=null)}function ha(n){0==n.l.G||n.I||Lp(n.l,n)}function fa(n){Xc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Dp(n.W),Om(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function jm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Wh(t.i,n)))if(t.I=n.N,!n.J&&Wh(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Zc(Tn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;rc(t),We(t)}ru(t),zn(18)}if(1>=Np(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else dl(t,11)}else if((n.J||t.g==n)&&rc(t),!ro(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const I=y[4];null!=I&&(t.za=I,t.h.info("SVER="+t.za));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.K=r=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const U=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=r.i;!s.g&&(qt(U,"spdy")||qt(U,"quic")||qt(U,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(gd(s,s.h),s.h=null))}if(r.D){const X=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(r.sa=X,jn(r.F,r.D,X))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=nf(r,r.H?r.la:null,r.W),u.J){Zh(r.i,u);var h=u,p=r.K;p&&h.setTimeout(p),h.B&&(Xc(h),Qc(h)),r.g=u}else va(r);0<t.l.length&&pt(t)}else"stop"!=y[0]&&"close"!=y[0]||dl(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?dl(t,7):ve(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}cd(4)}catch(y){}}function qh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(oa(n)||"string"==typeof n)Am(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(oa(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function zE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(oa(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function Jc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Jc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function $h(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];pa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)pa(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function pa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=jh.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==g(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const C=g(this.g);var e=this.g.Da();const I=this.g.ba();if(!(3>C)&&(3!=C||sl||this.g&&(this.h.h||this.g.ga()||_(this.g)))){this.I||4!=C||7==e||cd(8==e||0>=I?3:2),Xc(this);var t=this.g.ba();this.N=t;t:if(ud(this)){var r=_(this.g);n="";var i=r.length,s=4==g(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fa(this),ha(this);var u="";break t}this.h.i=new bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function ad(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ro(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,zn(12),fa(this),ha(this);break e}Ql(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jm(this,t)}this.U?(xp(this,C,u),sl&&this.i&&3==C&&(km(this.V,this.W,"tick",this.fb),this.W.start())):(Ql(this.j,this.m,u,null),jm(this,u)),4==C&&fa(this),this.i&&!this.I&&(4==C?Lp(this.l,this):(this.i=!1,Qc(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,zn(12)):(this.o=0,zn(13)),fa(this),ha(this)}}}catch(C){}},rt.fb=function(){if(this.g){var n=g(this.g),e=this.g.ga();this.C<e.length&&(Xc(this),xp(this,n,e),this.i&&4!=n&&Qc(this))}},rt.cancel=function(){this.I=!0,fa(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Pm(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(cd(3),zn(17)),fa(this),this.o=2,ha(this)):$v(this,this.Y-n)},(rt=Jc.prototype).R=function(){$h(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return $h(this),this.g.concat()},rt.get=function(n,e){return pa(this.h,n)?this.h[n]:e},rt.set=function(n,e){pa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var Hm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ss(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ss){this.g=void 0!==e?e:n.g,eu(this,n.j),this.s=n.s,Gh(this,n.i),Dn(this,n.m),this.l=n.l,e=n.h;var t=new Xl;t.i=e.i,e.g&&(t.g=new Jc(e.g),t.h=e.h),Rp(this,t),this.o=n.o}else n&&(t=String(n).match(Hm))?(this.g=!!e,eu(this,t[1]||"",!0),this.s=dd(t[2]||""),Gh(this,t[3]||"",!0),Dn(this,t[4]),this.l=dd(t[5]||"",!0),Rp(this,t[6]||"",!0),this.o=dd(t[7]||"")):(this.g=!!e,this.h=new Xl(null,this.g))}function As(n){return new Ss(n)}function eu(n,e,t){n.j=t?dd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gh(n,e,t){n.i=t?dd(e,!0):e}function Dn(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Rp(n,e,t){e instanceof Xl?(n.h=e,function Zv(n,e){e&&!n.j&&(ga(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(zh(this,r),ul(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=hd(e,pd)),n.h=new Xl(e,n.g))}function jn(n,e,t){n.h.set(e,t)}function tu(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function dd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ss.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hd(e,fd,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hd(e,fd,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(hd(t,"/"==t.charAt(0)?Wv:WE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hd(t,Ci)),n.join("")};var fd=/[#\/\?@]/g,WE=/[#\?:]/g,Wv=/[#\?]/g,pd=/[#\?@]/g,Ci=/#/g;function Xl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ga(n){n.g||(n.g=new Jc,n.h=0,n.i&&function qm(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zh(n,e){ga(n),e=ma(n,e),pa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,pa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&$h(n)))}function Ir(n,e){return ga(n),e=ma(n,e),pa(n.g.h,e)}function ul(n,e,t){zh(n,e),0<t.length&&(n.i=null,n.g.set(ma(n,e),td(t)),n.h+=t.length)}function ma(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Pp(n){this.l=n||as,n=bt.PerformanceNavigationTiming?0<(n=bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(bt.g&&bt.g.Ea&&bt.g.Ea()&&bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Xl.prototype).add=function(n,e){ga(this),this.i=null,n=ma(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){ga(this),this.g.forEach(function(t,r){Am(t,function(i){n.call(e,i,r,this)},this)},this)},rt.T=function(){ga(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},rt.R=function(n){ga(this);var e=[];if("string"==typeof n)Ir(this,n)&&(e=Mm(e,this.g.get(ma(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Mm(e,n[t])}return e},rt.set=function(n,e){return ga(this),this.i=null,Ir(this,n=ma(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=i;""!==r[s]&&(u+="="+encodeURIComponent(String(r[s]))),n.push(u)}}return this.i=n.join("&")};var as=10;function Jl(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Np(n){return n.h?1:n.g?n.g.size:0}function Wh(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gd(n,e){n.g?n.g.add(e):n.h=e}function Zh(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Kh(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return td(n.i)}function Yh(){}function Kv(){this.g=new Yh}function Lo(n,e,t){const r=t||"";try{qh(n,function(i,s){let u=i;eo(i)&&(u=is(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Qh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function _a(n){this.l=n.$b||null,this.j=n.ib||!1}function Xh(n,e){Fn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Jh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pp.prototype.cancel=function(){if(this.i=Kh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Yh.prototype.stringify=function(n){return bt.JSON.stringify(n,void 0)},Yh.prototype.parse=function(n){return bt.JSON.parse(n,void 0)},Nr(_a,Fh),_a.prototype.g=function(){return new Xh(this.l,this.j)},_a.prototype.i=function(n){return function(){return n}}({}),Nr(Xh,Fn);var Jh=0;function Ti(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ec(n){n.readyState=4,n.l=null,n.j=null,n.A=null,tc(n)}function tc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Xh.prototype).open=function(n,e){if(this.readyState!=Jh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,tc(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ec(this)),this.readyState=Jh},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,tc(this)),this.g&&(this.readyState=3,tc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ti(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ec(this):tc(this),3==this.readyState&&Ti(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,ec(this))},rt.Ta=function(n){this.g&&(this.response=n,ec(this))},rt.ha=function(){this.g&&ec(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Xh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Gm=bt.JSON.parse;function bn(n){Fn.call(this),this.headers=new Jc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nu,this.K=this.L=!1}Nr(bn,Fn);var nu="",zm=/^https?$/i,Wm=["POST","PUT"];function Fp(n){return"content-type"==n.toLowerCase()}function Km(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ym(n),ls(n)}function Ym(n){n.D||(n.D=!0,vn(n,"complete"),vn(n,"error"))}function nc(n){if(n.h&&void 0!==Js&&(!n.C[1]||4!=g(n)||2!=n.ba()))if(n.v&&4==g(n))Wc(n.Fa,0,n);else if(vn(n,"readystatechange"),4==g(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Hm)[1]||null;if(!i&&bt.self&&bt.self.location){var s=bt.self.location.protocol;i=s.substr(0,s.length-1)}r=!zm.test(i?i.toLowerCase():"")}t=r}if(t)vn(n,"complete"),vn(n,"success");else{n.m=6;try{var u=2<g(n)?n.g.statusText:""}catch(p){u=""}n.j=u+" ["+n.ba()+"]",Ym(n)}}finally{ls(n)}}}function ls(n,e){if(n.g){v(n);const t=n.g,r=n.C[0]?jl:null;n.g=null,n.C=null,e||vn(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function v(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(bt.clearTimeout(n.A),n.A=null)}function g(n){return n.g?n.g.readyState:0}function _(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nu:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function A(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function w(n){let e="";return Fr(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function O(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ee(n){this.za=0,this.l=[],this.h=new Sp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=O("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=O("baseRetryDelayMs",5e3,n),this.$a=O("retryDelaySeedMs",1e4,n),this.Ya=O("forwardChannelMaxRetries",2,n),this.ra=O("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Pp(n&&n.concurrentRequestLimit),this.Ca=new Kv,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ve(n){if(it(n),3==n.G){var e=n.V++,t=As(n.F);jn(t,"SID",n.J),jn(t,"RID",e),jn(t,"TYPE","terminate"),ya(n,t),(e=new jh(n,n.h,e,void 0)).K=2,e.v=tu(As(t)),t=!1,bt.navigator&&bt.navigator.sendBeacon&&(t=bt.navigator.sendBeacon(e.v.toString(),"")),!t&&bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Jm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Qc(e)}Xm(n)}function We(n){n.g&&(md(n),n.g.cancel(),n.g=null)}function it(n){We(n),n.u&&(bt.clearTimeout(n.u),n.u=null),rc(n),n.i.cancel(),n.m&&("number"==typeof n.m&&bt.clearTimeout(n.m),n.m=null)}function Et(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&pt(n)}function pt(n){Jl(n.i)||n.m||(n.m=!0,cl(n.Ha,n),n.C=0)}function qi(n,e){var t;t=e?e.m:n.V++;const r=As(n.F);jn(r,"SID",n.J),jn(r,"RID",t),jn(r,"AID",n.U),ya(n,r),n.o&&n.s&&A(r,n.o,n.s),t=new jh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Qm(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),gd(n.i,t),da(t,r,e)}function ya(n,e){n.j&&qh({},function(t,r){jn(e,r,t)})}function Qm(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Tn(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const C=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),h=!1;else try{Lo(C,u,"req"+y+"_")}catch(I){r&&r(C)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function va(n){n.g||n.u||(n.Y=1,cl(n.Ga,n),n.A=0)}function ru(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Zc(Tn(n.Ga,n),tf(n,n.A)),n.A++,0))}function md(n){null!=n.B&&(bt.clearTimeout(n.B),n.B=null)}function ef(n){n.g=new jh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=As(n.oa);jn(e,"RID","rpc"),jn(e,"SID",n.J),jn(e,"CI",n.N?"0":"1"),jn(e,"AID",n.U),ya(n,e),jn(e,"TYPE","xmlhttp"),n.o&&n.s&&A(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=tu(As(e)),t.s=null,t.U=!0,Mp(t,n)}function rc(n){null!=n.v&&(bt.clearTimeout(n.v),n.v=null)}function Lp(n,e){var t=null;if(n.g==e){rc(n),md(n),n.g=null;var r=2}else{if(!Wh(n.i,e))return;t=e.D,Zh(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;vn(r=ld(),new ua(r,t,e,i)),pt(n)}else va(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function ar(n,e){return!(Np(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Zc(Tn(n.Ha,n,e),tf(n,n.C)),n.C++,0)))}(n,e)||2==r&&ru(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:dl(n,5);break;case 4:dl(n,10);break;case 3:dl(n,6);break;default:dl(n,2)}}function tf(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function dl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Tn(n.jb,n);t||(t=new Ss("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||eu(t,"https"),tu(t)),function $m(n,e){const t=new Sp;if(bt.Image){const r=new Image;r.onload=ql(Qh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ql(Qh,t,r,"TestLoadImage: error",!1,e),r.onabort=ql(Qh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ql(Qh,t,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zn(2);n.G=0,n.j&&n.j.va(e),Xm(n),it(n)}function Xm(n){n.G=0,n.I=-1,n.j&&((0!=Kh(n.i).length||0!=n.l.length)&&(n.i.i.length=0,td(n.l),n.l.length=0),n.j.ua())}function nf(n,e,t){let r=function kp(n){return n instanceof Ss?As(n):new Ss(n,void 0)}(t);if(""!=r.i)e&&Gh(r,e+"."+r.i),Dn(r,r.m);else{const i=bt.location;r=function Gv(n,e,t,r){var i=new Ss(null,void 0);return n&&eu(i,n),e&&Gh(i,e),t&&Dn(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Fr(n.aa,function(i,s){jn(r,s,i)}),t=n.sa,(e=n.D)&&t&&jn(r,e,t),jn(r,"VER",n.ma),ya(n,r),r}function Jm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new bn(t&&n.Ba&&!n.qa?new _a({ib:!0}):n.qa)).L=n.H,e}function Yv(){}function rf(){if(Hi&&!(10<=Number(qc)))throw Error("Environmental error: no available transport.")}function Ms(n,e){Fn.call(this),this.g=new ee(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ro(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ro(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sf(this)}function e_(n){Vh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ZE(){Uh.call(this),this.status=1}function sf(n){this.g=n}(rt=bn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ap.g(),this.C=function Bm(n){return n.h||(n.h=n.i())}(this.u?this.u:Ap),this.g.onreadystatechange=Tn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Km(this,s)}n=t||"";const i=new Jc(this.headers);r&&qh(r,function(s,u){i.set(u,s)}),r=function Bv(n){e:{var e=Fp;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=bt.FormData&&n instanceof bt.FormData,!(0<=Sm(Wm,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{v(this),0<this.B&&((this.K=function Zm(n){return Hi&&function Ep(){return function Mh(n){var e=sd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Sh(String(Ei)).split("."),t=Sh("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=aa(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||aa(0==i[2].length,0==s[2].length)||aa(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tn(this.pa,this)):this.A=Wc(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Km(this,s)}},rt.pa=function(){void 0!==Js&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vn(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vn(this,"complete"),vn(this,"abort"),ls(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ls(this,!0)),bn.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?nc(this):this.cb())},rt.cb=function(){nc(this)},rt.ba=function(){try{return 2<g(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Gm(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=ee.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new jh(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=Ts(s),No(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qm(this,i,e),jn(t=As(this.F),"RID",n),jn(t,"CVER",22),this.D&&jn(t,"X-HTTP-Session-Id",this.D),ya(this,t),this.o&&s&&A(t,this.o,s),gd(this.i,i),this.Ra&&jn(t,"TYPE","init"),this.ja?(jn(t,"$req",e),jn(t,"SID","null"),i.$=!0,da(i,t,null)):da(i,t,e),this.G=2}}else 3==this.G&&(n?qi(this,n):0==this.l.length||Jl(this.i)||qi(this))},rt.Ga=function(){if(this.u=null,ef(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Zc(Tn(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,zn(10),We(this),ef(this))},rt.ab=function(){null!=this.v&&(this.v=null,We(this),ru(this),zn(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),zn(2)):(this.h.info("Failed to ping google.com"),zn(1))},(rt=Yv.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},rf.prototype.g=function(n,e){return new Ms(n,e)},Nr(Ms,Fn),Ms.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),cl(Tn(n.hb,n,e))),zn(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=nf(n,null,n.W),pt(n)},Ms.prototype.close=function(){ve(this.g)},Ms.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Et(this.g,e)}else this.v?((e={}).__data__=is(n),Et(this.g,e)):Et(this.g,n)},Ms.prototype.M=function(){this.g.j=null,delete this.j,ve(this.g),delete this.g,Ms.Z.M.call(this)},Nr(e_,Vh),Nr(ZE,Uh),Nr(sf,Yv),sf.prototype.xa=function(){vn(this.g,"a")},sf.prototype.wa=function(n){vn(this.g,new e_(n))},sf.prototype.va=function(n){vn(this.g,new ZE(n))},sf.prototype.ua=function(){vn(this.g,"b")},rf.prototype.createWebChannel=rf.prototype.g,Ms.prototype.send=Ms.prototype.u,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,Kc.NO_ERROR=0,Kc.TIMEOUT=8,Kc.HTTP_ERROR=6,Um.COMPLETE="complete",Lh.EventType=Yc,Yc.OPEN="a",Yc.CLOSE="b",Yc.ERROR="c",Yc.MESSAGE="d",Fn.prototype.listen=Fn.prototype.N,bn.prototype.listenOnce=bn.prototype.O,bn.prototype.getLastError=bn.prototype.La,bn.prototype.getLastErrorCode=bn.prototype.Da,bn.prototype.getStatus=bn.prototype.ba,bn.prototype.getResponseJson=bn.prototype.Qa,bn.prototype.getResponseText=bn.prototype.ga,bn.prototype.send=bn.prototype.ea;var KE=ns.createWebChannelTransport=function(){return new rf},YE=ns.getStatEventTarget=function(){return ld()},ic=ns.ErrorCode=Kc,QE=ns.EventType=Um,XE=ns.Event=ss,JE=ns.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},t_=ns.FetchXmlHttpFactory=_a,n_=ns.WebChannel=Lh,eC=ns.XhrIo=bn;const Qv="@firebase/firestore";class di{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");let iu="9.6.7";const sc=new ui.Yd("@firebase/firestore");function af(){return sc.logLevel}function Be(n,...e){if(sc.logLevel<=ui.in.DEBUG){const t=e.map(Vp);sc.debug(`Firestore (${iu}): ${n}`,...t)}}function mr(n,...e){if(sc.logLevel<=ui.in.ERROR){const t=e.map(Vp);sc.error(`Firestore (${iu}): ${n}`,...t)}}function lf(n,...e){if(sc.logLevel<=ui.in.WARN){const t=e.map(Vp);sc.warn(`Firestore (${iu}): ${n}`,...t)}}function Vp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${iu}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function xt(n,e){n||dt()}function Xe(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(di.UNAUTHENTICATED))}shutdown(){}}class nC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dA{constructor(e){this.t=e,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Lr,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,ye.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Lr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new Xv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new di(e)}}class rC{constructor(e,t,r){this.type="FirstParty",this.user=di.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class hA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new rC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ba{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.p;return this.p=s.token,Be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new iC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class xs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function fA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}xs.A=-1;class sC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function cf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Jv(n){return n+"\0"}class hi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hi.fromMillis(Date.now())}static fromDate(e){return hi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new hi(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function oC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function St(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class uf{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===uf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends uf{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const i_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends uf{construct(e,t,r){return new On(e,t,r)}static isValidIdentifier(e){return i_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new On(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Oe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Oe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Oe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(s(),i++)}if(s(),u)throw new Oe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(t)}static emptyPath(){return new On([])}}class _d{constructor(e){this.fields=e,e.sort(On.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Dr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const oc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(n){if(xt(!!n),"string"==typeof n){let e=0;const t=oc.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ac(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function aC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tb(n){const e=n.mapValue.fields.__previous_value__;return aC(e)?tb(e):e}function s_(n){const e=hl(n.mapValue.fields.__local_write_time__.timestampValue);return new hi(e.seconds,e.nanos)}class o_{constructor(e,t,r,i,s,u,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class fl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}function lc(n){return null==n}function yd(n){return 0===n&&1/n==-1/0}function a_(n){return"number"==typeof n&&Number.isInteger(n)&&!yd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(an.fromString(e))}static fromName(e){return new ot(an.fromString(e).popFirst(5))}static empty(){return new ot(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new an(e.slice()))}}const gA={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function vd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aC(n)?4:10:dt()}function wa(n,e){if(n===e)return!0;const t=vd(n);if(t!==vd(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return s_(n).isEqual(s_(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=hl(r.timestampValue),u=hl(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ac(n.bytesValue).isEqual(ac(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return lr(r.geoPointValue.latitude)===lr(i.geoPointValue.latitude)&&lr(r.geoPointValue.longitude)===lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return lr(r.integerValue)===lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=lr(r.doubleValue),u=lr(i.doubleValue);return s===u?yd(s)===yd(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return cf(n.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(oC(s)!==oC(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!wa(s[h],u[h])))return!1;return!0}(n,e);default:return dt()}var i}function Up(n,e){return void 0!==(n.values||[]).find(t=>wa(t,e))}function bd(n,e){if(n===e)return 0;const t=vd(n),r=vd(e);if(t!==r)return Zt(t,r);switch(t){case 0:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=lr(i.integerValue||i.doubleValue),h=lr(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return mA(n.timestampValue,e.timestampValue);case 4:return mA(s_(n),s_(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=ac(i),h=ac(s);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),h=s.split("/");for(let p=0;p<u.length&&p<h.length;p++){const y=Zt(u[p],h[p]);if(0!==y)return y}return Zt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Zt(lr(i.latitude),lr(s.latitude));return 0!==u?u:Zt(lr(i.longitude),lr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],h=s.values||[];for(let p=0;p<u.length&&p<h.length;++p){const y=bd(u[p],h[p]);if(y)return y}return Zt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){const u=i.fields||{},h=Object.keys(u),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const I=Zt(h[C],y[C]);if(0!==I)return I;const x=bd(u[h[C]],p[y[C]]);if(0!==x)return x}return Zt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw dt()}}function mA(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=hl(n),r=hl(e),i=Zt(t.seconds,r.seconds);return 0!==i?i:Zt(t.nanos,r.nanos)}function df(n){return lC(n)}function lC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=hl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ac(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=lC(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const h of i)u?u=!1:s+=",",s+=`${h}:${lC(r.fields[h])}`;return s+"}"}(n.mapValue):dt();var e}function Bp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function l_(n){return!!n&&"integerValue"in n}function c_(n){return!!n&&"arrayValue"in n}function u_(n){return!!n&&"nullValue"in n}function _A(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nb(n){return!!n&&"mapValue"in n}function d_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return St(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=d_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=d_(n.arrayValue.values[t]);return e}return Object.assign({},n)}class cs{constructor(e){this.value=e}static empty(){return new cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=d_(t)}setAll(e){let t=On.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=d_(u):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());nb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];nb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){St(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cs(d_(this.value))}}function yA(n){const e=[];return St(n.fields,(t,r)=>{const i=new On([t]);if(nb(r)){const s=yA(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new _d(e)}class _r{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new _r(e,0,At.min(),At.min(),cs.empty(),0)}static newFoundDocument(e,t,r){return new _r(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new _r(e,2,t,At.min(),cs.empty(),0)}static newUnknownDocument(e,t){return new _r(e,3,t,At.min(),cs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let cC=(()=>{class n{constructor(t,r,i,s){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=s}}return n.UNKNOWN_ID=-1,n})();class rb{constructor(e,t){this.fieldPath=e,this.kind=t}}class h_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new h_(0,ib.min())}}class ib{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ib(At.min(),ot.empty(),-1)}}class su{constructor(e,t=null,r=[],i=[],s=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=h,this.P=null}}function f_(n,e=null,t=[],r=[],i=null,s=null,u=null){return new su(n,e,t,r,i,s,u)}function jp(n){const e=Xe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+df(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),lc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>df(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>df(r)).join(",")),e.P=t}return e.P}function hf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!pf(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!wa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wd(n.startAt,e.startAt)&&wd(n.endAt,e.endAt)}function Hp(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ii extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new vA(e,t,r):"array-contains"===t?new sb(e,r):"in"===t?new bA(e,r):"not-in"===t?new fC(e,r):"array-contains-any"===t?new wA(e,r):new Ii(e,t,r)}static v(e,t,r){return"in"===t?new ou(e,r):new dC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(bd(t,this.value)):null!==t&&vd(this.value)===vd(t)&&this.V(bd(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class vA extends Ii{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.V(t)}}class ou extends Ii{constructor(e,t){super(e,"in",t),this.keys=hC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dC extends Ii{constructor(e,t){super(e,"not-in",t),this.keys=hC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ot.fromName(r.referenceValue))}class sb extends Ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return c_(t)&&Up(t.arrayValue,this.value)}}class bA extends Ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Up(this.value.arrayValue,t)}}class fC extends Ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(Up(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Up(this.value.arrayValue,t)}}class wA extends Ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!c_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Up(this.value.arrayValue,r))}}class ff{constructor(e,t){this.position=e,this.inclusive=t}}class pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function pf(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function p_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?ot.comparator(ot.fromName(u.referenceValue),t.key):bd(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function wd(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wa(n.position[t],e.position[t]))return!1;return!0}class ao{constructor(e,t=null,r=[],i=[],s=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function Ed(n,e,t,r,i,s,u,h){return new ao(n,e,t,r,i,s,u,h)}function gf(n){return new ao(n)}function qp(n){return!lc(n.limit)&&"F"===n.limitType}function $p(n){return!lc(n.limit)&&"L"===n.limitType}function Gp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function zp(n){for(const e of n.filters)if(e.S())return e.field;return null}function g_(n){return null!==n.collectionGroup}function cc(n){const e=Xe(n);if(null===e.D){e.D=[];const t=zp(e),r=Gp(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new pl(t)),e.D.push(new pl(On.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new pl(On.keyField(),s))}}}return e.D}function Vo(n){const e=Xe(n);if(!e.C)if("F"===e.limitType)e.C=f_(e.path,e.collectionGroup,cc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of cc(e))t.push(new pl(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new ff(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new ff(e.startAt.position,!e.startAt.inclusive):null;e.C=f_(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function ob(n,e,t){return new ao(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function m_(n,e){return hf(Vo(n),Vo(e))&&n.limitType===e.limitType}function ab(n){return`${jp(Vo(n))}|lt:${n.limitType}`}function __(n){return`Query(target=${function uC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${df(r.value)}`;var r}).join(", ")}]`),lc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>df(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>df(t)).join(",")),`Target(${e})`}(Vo(n))}; limitType=${n.limitType})`}function lb(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ot.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const h=p_(i,s,u);return i.inclusive?h<=0:h<0}(t.startAt,cc(t),r)||t.endAt&&!function(i,s,u){const h=p_(i,s,u);return i.inclusive?h>=0:h>0}(t.endAt,cc(t),r)));var t,r}function cb(n){return(e,t)=>{let r=!1;for(const i of cc(n)){const s=EA(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function EA(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):function(i,s,u){const h=s.data.field(i),p=u.data.field(i);return null!==h&&null!==p?bd(h,p):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function pC(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yd(e)?"-0":e}}function Rs(n){return{integerValue:""+n}}function gC(n,e){return a_(e)?Rs(e):pC(n,e)}class y_{constructor(){this._=void 0}}function UO(n,e,t){return n instanceof Wp?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Cd?v_(n,e):n instanceof au?mC(n,e):function(r,i){const s=ub(r,i),u=_C(s)+_C(r.k);return l_(s)&&l_(r.k)?Rs(u):pC(r.O,u)}(n,e)}function BO(n,e,t){return n instanceof Cd?v_(n,e):n instanceof au?mC(n,e):t}function ub(n,e){return n instanceof mf?l_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Wp extends y_{}class Cd extends y_{constructor(e){super(),this.elements=e}}function v_(n,e){const t=db(e);for(const r of n.elements)t.some(i=>wa(i,r))||t.push(r);return{arrayValue:{values:t}}}class au extends y_{constructor(e){super(),this.elements=e}}function mC(n,e){let t=db(e);for(const r of n.elements)t=t.filter(i=>!wa(i,r));return{arrayValue:{values:t}}}class mf extends y_{constructor(e,t){super(),this.O=e,this.k=t}}function _C(n){return lr(n.integerValue||n.doubleValue)}function db(n){return c_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zp{constructor(e,t){this.field=e,this.transform=t}}class CA{constructor(e,t){this.version=e,this.transformResults=t}}class Vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vr}static exists(e){return new Vr(void 0,e)}static updateTime(e){return new Vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yp{}function TA(n,e,t){n instanceof b_?function(r,i,s){const u=r.value.clone(),h=EC(r.fieldTransforms,i,s.transformResults);u.setAll(h),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof lu?function(r,i,s){if(!Kp(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=EC(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(wC(r)),h.setAll(u),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Uo(n,e,t){var i;n instanceof b_?function(r,i,s){if(!Kp(r.precondition,i))return;const u=r.value.clone(),h=CC(r.fieldTransforms,s,i);u.setAll(h),i.convertToFoundDocument(bC(i),u).setHasLocalMutations()}(n,e,t):n instanceof lu?function(r,i,s){if(!Kp(r.precondition,i))return;const u=CC(r.fieldTransforms,s,i),h=i.data;h.setAll(wC(r)),h.setAll(u),i.convertToFoundDocument(bC(i),h).setHasLocalMutations()}(n,e,t):Kp(n.precondition,i=e)&&i.convertToNoDocument(At.min())}function hb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=ub(r.transform,i||null);null!=s&&(null==t&&(t=cs.empty()),t.set(r.field,s))}return t||null}function vC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&cf(t,r,(i,s)=>function yC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Cd&&r instanceof Cd||t instanceof au&&r instanceof au?cf(t.elements,r.elements,wa):t instanceof mf&&r instanceof mf?wa(t.k,r.k):t instanceof Wp&&r instanceof Wp);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function bC(n){return n.isFoundDocument()?n.version:At.min()}class b_ extends Yp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class lu extends Yp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function wC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function EC(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,h=e.data.field(s.field);r.set(s.field,BO(u,h,t[i]))}return r}function CC(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,UO(s,u,e))}return r}class Td extends Yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class fb extends Yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class IA{constructor(e){this.count=e}}var cr,Kt;function TC(n){switch(n){default:return dt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function w_(n){if(void 0===n)return mr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case cr.OK:return _e.OK;case cr.CANCELLED:return _e.CANCELLED;case cr.UNKNOWN:return _e.UNKNOWN;case cr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case cr.INTERNAL:return _e.INTERNAL;case cr.UNAVAILABLE:return _e.UNAVAILABLE;case cr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case cr.NOT_FOUND:return _e.NOT_FOUND;case cr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case cr.ABORTED:return _e.ABORTED;case cr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case cr.DATA_LOSS:return _e.DATA_LOSS;default:return dt()}}(Kt=cr||(cr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class ur{constructor(e,t){this.comparator=e,this.root=t||Di.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qp(this.root,e,this.comparator,!0)}}class Qp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Di{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:Di.RED,this.left=null!=i?i:Di.EMPTY,this.right=null!=s?s:Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Di(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1,Di.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Di(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jn{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new E_(this.data.getIterator())}getIteratorFrom(e){return new E_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jn(this.comparator);return t.data=e,t}}class E_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xp(n){return n.hasNext()?n.getNext():void 0}const DA=new ur(ot.comparator);function lo(){return DA}const IC=new ur(ot.comparator);function C_(){return IC}const DC=new ur(ot.comparator),SC=new Jn(ot.comparator);function jt(...n){let e=SC;for(const t of n)e=e.add(t);return e}const T_=new Jn(Zt);function I_(){return T_}class Jp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,D_.createSynthesizedTargetChangeForCurrentChange(e,t)),new Jp(At.min(),r,I_(),lo(),jt())}}class D_{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new D_(Dr.EMPTY_BYTE_STRING,t,jt(),jt(),jt())}}class _f{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class pb{constructor(e,t){this.targetId=e,this.F=t}}class S_{constructor(e,t,r=Dr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class yf{constructor(){this.B=0,this.L=gb(),this.U=Dr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=jt(),t=jt(),r=jt();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new D_(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=gb()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class SA{constructor(e){this.nt=e,this.st=new Map,this.it=lo(),this.rt=A_(),this.ot=new Jn(Zt)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const s=i.target;if(Hp(s))if(0===r){const u=new ot(s.path);this.at(t,u,_r.newNoDocument(u,At.min()))}else xt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,u)=>{const h=this.wt(u);if(h){if(s.current&&Hp(h.target)){const p=new ot(h.target.path);null!==this.it.get(p)||this.It(u,p)||this.at(u,p,_r.newNoDocument(p,e))}s.j&&(t.set(u,s.H()),s.J())}});let r=jt();this.rt.forEach((s,u)=>{let h=!0;u.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.it.forEach((s,u)=>u.setReadTime(e));const i=new Jp(e,t,this.ot,this.it,r);return this.it=lo(),this.rt=A_(),this.ot=new Jn(Zt),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new yf,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new Jn(Zt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new yf),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function A_(){return new ur(ot.comparator)}function gb(){return new ur(ot.comparator)}const AC={asc:"ASCENDING",desc:"DESCENDING"},MC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class AA{constructor(e,t){this.databaseId=e,this.N=t}}function Id(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xC(n,e){return n.N?e.toBase64():e.toUint8Array()}function MA(n,e){return Id(n,e.toTimestamp())}function Kr(n){return xt(!!n),At.fromTimestamp(function(e){const t=hl(e);return new hi(t.seconds,t.nanos)}(n))}function cu(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mb(n){const e=an.fromString(n);return xt(BC(e)),e}function eg(n,e){return cu(n.databaseId,e.path)}function gl(n,e){const t=mb(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(kC(t))}function uu(n,e){return cu(n.databaseId,e)}function RC(n){const e=mb(n);return 4===e.length?an.emptyPath():kC(e)}function tg(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kC(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function OC(n,e,t){return{name:eg(n,e),fields:t.value.mapValue.fields}}function co(n,e,t){const r=gl(n,e.name),i=Kr(e.updateTime),s=new cs({mapValue:{fields:e.fields}}),u=_r.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function vf(n,e){let t;if(e instanceof b_)t={update:OC(n,e.key,e.value)};else if(e instanceof Td)t={delete:eg(n,e.key)};else if(e instanceof lu)t={update:OC(n,e.key,e.data),updateMask:vb(e.fieldMask)};else{if(!(e instanceof fb))return dt();t={verify:eg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof Wp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof au)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof mf)return{fieldPath:s.field.canonicalString(),increment:u.k};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:MA(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function M_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Vr.updateTime(Kr(i.updateTime)):void 0!==i.exists?Vr.exists(i.exists):Vr.none():Vr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let h=null;"setToServerValue"in u?(xt("REQUEST_TIME"===u.setToServerValue),h=new Wp):"appendMissingElements"in u?h=new Cd(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new au(u.removeAllFromArray.values||[]):"increment"in u?h=new mf(s,u.increment):dt();const p=On.fromServerFormat(u.fieldPath);return new Zp(p,h)}(n,i)):[];var i;if(e.update){const i=gl(n,e.update.name),s=new cs({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new _d((e.updateMask.fieldPaths||[]).map(y=>On.fromServerFormat(y)));return new lu(i,s,u,t,r)}return new b_(i,s,t,r)}if(e.delete){const i=gl(n,e.delete);return new Td(i,t)}if(e.verify){const i=gl(n,e.verify);return new fb(i,t)}return dt()}function FC(n,e){return{documents:[uu(n,e.path)]}}function LC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=uu(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=uu(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(C=>function(I){if("=="===I.op){if(_A(I.value))return{unaryFilter:{field:bf(I.field),op:"IS_NAN"}};if(u_(I.value))return{unaryFilter:{field:bf(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(_A(I.value))return{unaryFilter:{field:bf(I.field),op:"IS_NOT_NAN"}};if(u_(I.value))return{unaryFilter:{field:bf(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bf(I.field),op:UC(I.op),value:I.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:bf((C=y).field),direction:jO(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(y=e.limit,n.N||lc(y)?y:{value:y});var y,h,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function VC(n){let e=RC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=yb(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new pl(wf((I=C).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let h=null;t.limit&&(h=function(C){let I;return I="object"==typeof C?C.value:C,lc(I)?null:I}(t.limit));let p=null;var C;t.startAt&&(p=new ff((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new ff(C.values||[],!C.before)}(t.endAt)),Ed(e,i,u,s,h,"F",p,y)}function yb(n){return n?void 0!==n.unaryFilter?[qO(n)]:void 0!==n.fieldFilter?[HO(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>yb(e)).reduce((e,t)=>e.concat(t)):dt():[]}function jO(n){return AC[n]}function UC(n){return MC[n]}function bf(n){return{fieldPath:n.canonicalString()}}function wf(n){return On.fromServerFormat(n.fieldPath)}function HO(n){return Ii.create(wf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function qO(n){switch(n.unaryFilter.op){case"IS_NAN":const e=wf(n.unaryFilter.field);return Ii.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=wf(n.unaryFilter.field);return Ii.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=wf(n.unaryFilter.field);return Ii.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=wf(n.unaryFilter.field);return Ii.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function vb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Yr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RA(e)),e=jC(n.get(t),e);return RA(e)}function jC(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function RA(n){return n+"\x01\x01"}function Ur(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&dt(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:dt()}s=u+2}return new an(r)}class $O{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Bo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Bo.store="owner",Bo.key="owner";class uc{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}uc.store="mutationQueues",uc.keyPath="userId";class Hn{constructor(e,t,r,i,s){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=s}}Hn.store="mutations",Hn.keyPath="batchId",Hn.userMutationsIndex="userMutationsIndex",Hn.userMutationsKeyPath=["userId","batchId"];class Si{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Yr(t)]}static key(e,t,r){return[e,Yr(t),r]}}Si.store="documentMutations",Si.PLACEHOLDER=new Si;class kA{constructor(e,t){this.path=e,this.readTime=t}}class GO{constructor(e,t){this.path=e,this.version=t}}class dr{constructor(e,t,r,i,s,u){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=s,this.parentPath=u}}dr.store="remoteDocuments",dr.readTimeIndex="readTimeIndex",dr.readTimeIndexPath="readTime",dr.collectionReadTimeIndex="collectionReadTimeIndex",dr.collectionReadTimeIndexPath=["parentPath","readTime"];class jo{constructor(e){this.byteSize=e}}jo.store="remoteDocumentGlobal",jo.key="remoteDocumentGlobalKey";class ks{constructor(e,t,r,i,s,u,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=u,this.query=h}}ks.store="targets",ks.keyPath="targetId",ks.queryTargetsIndexName="queryTargetsIndex",ks.queryTargetsKeyPath=["canonicalId","targetId"];class Qr{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Qr.store="targetDocuments",Qr.keyPath=["targetId","path"],Qr.documentTargetsIndex="documentTargetsIndex",Qr.documentTargetsKeyPath=["path","targetId"];class uo{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}uo.key="targetGlobalKey",uo.store="targetGlobal";class Dd{constructor(e,t){this.collectionId=e,this.parent=t}}Dd.store="collectionParents",Dd.keyPath=["collectionId","parent"];class dc{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}dc.store="clientMetadata",dc.keyPath="clientId";class Ef{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Ef.store="bundles",Ef.keyPath="bundleId";class Cf{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Cf.store="namedQueries",Cf.keyPath="name";class ho{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}ho.store="indexConfiguration",ho.keyPath="indexId",ho.collectionGroupIndex="collectionGroupIndex",ho.collectionGroupIndexPath="collectionGroup";class us{constructor(e,t,r,i,s,u){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=s,this.largestBatchId=u}}us.store="indexState",us.keyPath=["indexId","uid"],us.sequenceNumberIndex="sequenceNumberIndex",us.sequenceNumberIndexPath=["uid","sequenceNumber"];class Ai{constructor(e,t,r,i,s){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=s}}Ai.store="indexEntries",Ai.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Ai.documentKeyIndex="documentKeyIndex",Ai.documentKeyIndexPath=["indexId","uid","documentKey"];class fi{constructor(e,t,r,i,s,u){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=s,this.overlayMutation=u}}fi.store="documentOverlays",fi.keyPath=["userId","collectionPath","documentId"],fi.collectionPathOverlayIndex="collectionPathOverlayIndex",fi.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],fi.collectionGroupOverlayIndex="collectionGroupOverlayIndex",fi.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const Tf=[uc.store,Hn.store,Si.store,dr.store,ks.store,Bo.store,uo.store,Qr.store,dc.store,jo.store,Dd.store,Ef.store,Cf.store],HC=[...Tf,fi.store],OA=[...HC,ho.store,us.store,Ai.store],x_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ea{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):be.reject(t)}static resolve(e){return new be((t,r)=>{t(e)})}static reject(e){return new be((t,r)=>{r(e)})}static waitFor(e){return new be((t,r)=>{let i=0,s=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=be.resolve(!1);for(const r of e)t=t.next(i=>i?be.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}class Xr{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Lr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new $i(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=du(r.target.error);this.At.reject(new $i(e,i))}}static open(e,t,r,i){try{return new Xr(t,e.transaction(i,r))}catch(s){throw new $i(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new If(t)}}class Mi{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Mi.vt((0,N.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Ho(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,N.hl)())return!1;if(Mi.St())return!0;const e=(0,N.z$)(),t=Mi.vt(e),r=0<t&&t<10,i=Mi.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new $i(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Oe(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Oe(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new $i(e,h))},s.onupgradeneeded=u=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.bt.kt(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ye.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.xt(e);const p=Xr.open(s.db,e,u?"readonly":"readwrite",r),y=i(p).next(C=>(p.Pt(),C)).catch(C=>(p.abort(C),be.reject(C))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class R_{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return Ho(this.$t.delete())}}class $i extends Oe{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hc(n){return"IndexedDbTransactionError"===n.name}class If{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ho(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Ho(this.store.add(e))}get(e){return Ho(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Ho(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Ho(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.Kt(i,(u,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new be((s,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}Gt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(s,u,h)=>h.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new be((r,i)=>{t.onerror=s=>{const u=du(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new be((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const p=new R_(h),y=t(h.primaryKey,h.value,p);if(y instanceof be){const C=y.catch(I=>(p.done(),be.reject(I)));r.push(C)}p.isDone?i():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>be.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ho(n){return new be((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=du(r.target.error);t(i)}})}let Sd=!1;function du(n){const e=Mi.vt((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sd||(Sd=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ad extends Ea{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function hr(n,e){const t=Xe(n);return Mi.Nt(t.zt,e)}class hu{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&TA(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Uo(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Uo(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&cf(this.mutations,e.mutations,(t,r)=>vC(t,r))&&cf(this.baseMutations,e.baseMutations,(t,r)=>vC(t,r))}}class fu{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=DC;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new fu(e,t,r,i)}}class pu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fc{constructor(e,t,r,i,s=At.min(),u=At.min(),h=Dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new fc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class bb{constructor(e){this.Ht=e}}function wb(n,e){let t;if(e.document)t=co(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ot.fromSegments(e.noDocument.path),i=mu(e.noDocument.readTime);t=_r.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=ot.fromSegments(e.unknownDocument.path),i=mu(e.unknownDocument.version);t=_r.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(O_(e.readTime)),t}function Eb(n,e){const t=k_(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:eg(u=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Id(u,h.version.toTimestamp())};return new dr(null,null,i,e.hasCommittedMutations,t,r)}var u,h;if(e.isNoDocument()){const i=e.key.path.toArray(),s=gu(e.version),u=e.hasCommittedMutations;return new dr(null,new kA(i,s),null,u,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),s=gu(e.version);return new dr(new GO(i,s),null,null,!0,t,r)}return dt()}function k_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function O_(n){const e=new hi(n[0],n[1]);return At.fromTimestamp(e)}function gu(n){const e=n.toTimestamp();return new $O(e.seconds,e.nanoseconds)}function mu(n){const e=new hi(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Md(n,e){const t=(e.baseMutations||[]).map(s=>M_(n.Ht,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>M_(n.Ht,s)),i=hi.fromMillis(e.localWriteTimeMs);return new hu(e.batchId,i,t,r)}function ng(n){const e=mu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mu(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=Vo(gf(RC(i.documents[0])))):r=Vo(VC(n.query)),new fc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Dr.fromBase64String(n.resumeToken))}function Cb(n,e){const t=gu(e.snapshotVersion),r=gu(e.lastLimboFreeSnapshotVersion);let i;i=Hp(e.target)?FC(n.Ht,e.target):LC(n.Ht,e.target);const s=e.resumeToken.toBase64();return new ks(e.targetId,jp(e.target),t,s,e.sequenceNumber,r,i)}function Tb(n){const e=VC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ob(e,e.limit,"L"):e}function P_(n,e){return new pu(e.largestBatchId,M_(n.Ht,e.overlayMutation))}function Ib(n,e){const t=e.path.lastSegment();return[n,Yr(e.path.popLast()),t]}class PA{getBundleMetadata(e,t){return qC(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:mu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return qC(e).put({bundleId:(r=t).id,createTime:gu(Kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Db(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Tb(i.bundledQuery),readTime:mu(i.readTime)};var i})}saveNamedQuery(e,t){return Db(e).put({name:(r=t).name,readTime:gu(Kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qC(n){return hr(n,Ef.store)}function Db(n){return hr(n,Cf.store)}class Sb{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new Sb(e,t.uid||"")}getOverlay(e,t){return Df(e).get(Ib(this.userId,t)).next(r=>r?P_(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(s=>{const u=new pu(t,s);i.push(this.Yt(e,u))}),be.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Yr(u.getCollectionPath())));const s=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(Df(e).Gt(fi.collectionPathOverlayIndex,h))}),be.waitFor(s)}getOverlaysForCollection(e,t,r){const i=new Map,s=Yr(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Df(e).qt(fi.collectionPathOverlayIndex,u).next(h=>{for(const p of h){const y=P_(this.O,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=new Map;let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Df(e).Qt({index:fi.collectionGroupOverlayIndex,range:h},(p,y,C)=>{const I=P_(this.O,y);s.size<i||I.largestBatchId===u?(s.set(I.getKey(),I),u=I.largestBatchId):C.done()}).next(()=>s)}Yt(e,t){return Df(e).put(function(r,i,s){const[u,h,p]=Ib(i,s.mutation.key);return new fi(i,h,p,s.mutation.key.getCollectionGroup(),s.largestBatchId,vf(r.Ht,s.mutation))}(this.O,this.userId,t))}}function Df(n){return hr(n,fi.store)}class N_{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(lr(e.integerValue));else if("doubleValue"in e){const r=lr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),yd(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(ac(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?wa(e,gA)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):dt()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),ot.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function NA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function FA(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=NA(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}N_.le=new N_;class LA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=FA(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=FA(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Ab{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class Mb{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class $C{constructor(){this.Se=new LA,this.De=new Ab(this.Se),this.Ce=new Mb(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class GC{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function zC(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ot.comparator(n.documentKey,e.documentKey),0!==t?t:(t=VA(n.arrayValue,e.arrayValue),0!==t?t:VA(n.directionalValue,e.directionalValue)))}function VA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UA{constructor(){this.xe=new F_}addToCollectionParentIndex(e,t){return this.xe.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t,r){return be.resolve(jt())}getFieldIndex(e,t){return be.resolve(null)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}updateCollectionGroup(e,t,r){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class F_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Jn(an.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Jn(an.comparator)).toArray()}}class zO{constructor(e){this.user=e,this.ke=new F_,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const s={collectionId:r,parent:Yr(i)};return WC(e).put(s)}return be.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Jv(t),""],!1,!0);return WC(e).qt(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Ur(u.parent))}return r})}addFieldIndex(e,t){const r=L_(e),i=new ho((s=t).indexId,s.collectionGroup,s.fields.map(u=>[u.fieldPath.canonicalString(),u.kind]));var s;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=L_(e),i=rg(e),s=pc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return be.resolve(jt())}getFieldIndex(e,t){return be.resolve(null)}Oe(e,t){const r=new $C;for(const i of e.fields.filter(u=>2!==u.kind)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.Ne(i.kind);N_.le.Xt(s,u)}return r.Ve()}Me(e){const t=new $C;return N_.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=L_(e),i=rg(e);return(t?r.qt(ho.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(s=>{const u=[];return be.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{u.push(function(y,C){const I=C?new h_(C.sequenceNumber,new ib(mu(C.readTime),new ot(Ur(C.documentKey)),C.largestBatchId)):h_.empty(),x=y.fields.map(([P,U])=>new rb(On.fromServerFormat(P),U));return new cC(y.indexId,y.collectionGroup,x,I)}(h,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=L_(e),s=rg(e);return this.$e(e).next(u=>i.qt(ho.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>be.forEach(h,p=>{return s.put(new us(p.indexId,this.user.uid||"",u,gu((x=r).readTime),Yr(x.documentKey.path),x.largestBatchId));var x})))}updateIndexEntries(e,t){const r=new Map;return be.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?be.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),be.forEach(h,p=>this.Fe(e,i,p).next(y=>{const C=this.Be(s,p);return y.isEqual(C)?be.resolve():this.Le(e,s,y,C)}))))})}Ue(e,t,r){return pc(e).put(new Ai(r.indexId,this.uid,r.arrayValue,r.directionalValue,Yr(t.key.path)))}qe(e,t,r){return pc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Yr(t.key.path)])}Fe(e,t,r){const i=pc(e);let s=new Jn(zC);return i.Qt({index:Ai.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,Yr(t.path)])},(u,h)=>{s=s.add(new GC(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}Be(e,t){let r=new Jn(zC);const i=this.Oe(t,e);if(null==i)return r;const s=t.fields.find(h=>2===h.kind);if(null!=s){const u=e.data.field(s.fieldPath);if(c_(u))for(const h of u.arrayValue.values||[])r=r.add(new GC(t.indexId,e.key,this.Me(h),i))}else r=r.add(new GC(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(u,h,p,y,C){const I=u.getIterator(),x=h.getIterator();let P=Xp(I),U=Xp(x);for(;P||U;){let X=!1,le=!1;if(P&&U){const je=p(P,U);je<0?le=!0:je>0&&(X=!0)}else null!=P?le=!0:X=!0;X?(y(U),U=Xp(x)):le?(C(P),P=Xp(I)):(P=Xp(I),U=Xp(x))}}(r,i,zC,u=>{s.push(this.Ue(e,t,u))},u=>{s.push(this.qe(e,t,u))}),be.waitFor(s)}$e(e){let t=1;return rg(e).Qt({index:us.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}}function WC(n){return hr(n,Dd.store)}function pc(n){return hr(n,Ai.store)}function L_(n){return hr(n,ho.store)}function rg(n){return hr(n,us.store)}const ZC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ds{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ds(e,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ig(n,e,t){const r=n.store(Hn.store),i=n.store(Si.store),s=[],u=IDBKeyRange.only(t.batchId);let h=0;const p=r.Qt({range:u},(C,I,x)=>(h++,x.delete()));s.push(p.next(()=>{xt(1===h)}));const y=[];for(const C of t.mutations){const I=Si.key(e,C.key.path,t.batchId);s.push(i.delete(I)),y.push(C.key)}return be.waitFor(s).next(()=>y)}function V_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}ds.DEFAULT_COLLECTION_PERCENTILE=10,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ds.DEFAULT=new ds(41943040,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ds.DISABLED=new ds(-1,0,0);class U_{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){xt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new U_(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).Qt({index:Hn.userMutationsIndex,range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Sf(e),u=_u(e);return u.add({}).next(h=>{xt("number"==typeof h);const p=new hu(h,t,r,i),y=function(x,P,U){const X=U.baseMutations.map(je=>vf(x.Ht,je)),le=U.mutations.map(je=>vf(x.Ht,je));return new Hn(P,U.batchId,U.localWriteTime.toMillis(),X,le)}(this.O,this.userId,p),C=[];let I=new Jn((x,P)=>Zt(x.canonicalString(),P.canonicalString()));for(const x of i){const P=Si.key(this.userId,x.key.path,h);I=I.add(x.key.path.popLast()),C.push(u.put(y)),C.push(s.put(P,Si.PLACEHOLDER))}return I.forEach(x=>{C.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Ke[h]=p.keys()}),be.waitFor(C).next(()=>p)})}lookupMutationBatch(e,t){return _u(e).get(t).next(r=>r?(xt(r.userId===this.userId),Md(this.O,r)):null)}Ge(e,t){return this.Ke[t]?be.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return _u(e).Qt({index:Hn.userMutationsIndex,range:i},(u,h,p)=>{h.userId===this.userId&&(xt(h.batchId>=r),s=Md(this.O,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _u(e).Qt({index:Hn.userMutationsIndex,range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).qt(Hn.userMutationsIndex,t).next(r=>r.map(i=>Md(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Si.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Sf(e).Qt({range:i},(u,h,p)=>{const[y,C,I]=u,x=Ur(C);if(y===this.userId&&t.path.isEqual(x))return _u(e).get(I).next(P=>{if(!P)throw dt();xt(P.userId===this.userId),s.push(Md(this.O,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jn(Zt);const i=[];return t.forEach(s=>{const u=Si.prefixForPath(this.userId,s.path),h=IDBKeyRange.lowerBound(u),p=Sf(e).Qt({range:h},(y,C,I)=>{const[x,P,U]=y,X=Ur(P);x===this.userId&&s.path.isEqual(X)?r=r.add(U):I.done()});i.push(p)}),be.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Si.prefixForPath(this.userId,r),u=IDBKeyRange.lowerBound(s);let h=new Jn(Zt);return Sf(e).Qt({range:u},(p,y,C)=>{const[I,x,P]=p,U=Ur(x);I===this.userId&&r.isPrefixOf(U)?U.length===i&&(h=h.add(P)):C.done()}).next(()=>this.je(e,h))}je(e,t){const r=[],i=[];return t.forEach(s=>{i.push(_u(e).get(s).next(u=>{if(null===u)throw dt();xt(u.userId===this.userId),r.push(Md(this.O,u))}))}),be.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ig(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),be.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return be.resolve();const r=IDBKeyRange.lowerBound(Si.prefixForUser(this.userId)),i=[];return Sf(e).Qt({range:r},(s,u,h)=>{if(s[0]===this.userId){const p=Ur(s[1]);i.push(p)}else h.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return KC(e,this.userId,t)}We(e){return YC(e).get(this.userId).next(t=>t||new uc(this.userId,-1,""))}}function KC(n,e,t){const r=Si.prefixForPath(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return Sf(n).Qt({range:s,jt:!0},(h,p,y)=>{const[C,I,x]=h;C===e&&I===i&&(u=!0),y.done()}).next(()=>u)}function _u(n){return hr(n,Hn.store)}function Sf(n){return hr(n,Si.store)}function YC(n){return hr(n,uc.store)}class xd{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new xd(0)}static Je(){return new xd(-1)}}class QC{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new xd(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>At.fromTimestamp(new hi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Af(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Af(e).Qt((u,h)=>{const p=ng(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>be.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Af(e).Qt((r,i)=>{const s=ng(i);t(s)})}Ye(e){return xb(e).get(uo.key).next(t=>(xt(null!==t),t))}Xe(e,t){return xb(e).put(uo.key,t)}Ze(e,t){return Af(e).put(Cb(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=jp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Af(e).Qt({range:i,index:ks.queryTargetsIndexName},(u,h,p)=>{const y=ng(h);hf(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=gc(e);return t.forEach(u=>{const h=Yr(u.path);i.push(s.put(new Qr(r,h))),i.push(this.referenceDelegate.addReference(e,r,u))}),be.waitFor(i)}removeMatchingKeys(e,t,r){const i=gc(e);return be.forEach(t,s=>{const u=Yr(s.path);return be.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=gc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=gc(e);let s=jt();return i.Qt({range:r,jt:!0},(u,h,p)=>{const y=Ur(u[1]),C=new ot(y);s=s.add(C)}).next(()=>s)}containsKey(e,t){const r=Yr(t.path),i=IDBKeyRange.bound([r],[Jv(r)],!1,!0);let s=0;return gc(e).Qt({index:Qr.documentTargetsIndex,jt:!0,range:i},([u,h],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}Tt(e,t){return Af(e).get(t).next(r=>r?ng(r):null)}}function Af(n){return hr(n,ks.store)}function xb(n){return hr(n,uo.store)}function gc(n){return hr(n,Qr.store)}function mc(n){return XC.apply(this,arguments)}function XC(){return XC=(0,ye.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==x_)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),XC.apply(this,arguments)}function B_([n,e],[t,r]){const i=Zt(n,t);return 0===i?Zt(e,r):i}class BA{constructor(e){this.en=e,this.buffer=new Jn(B_),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();B_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WO{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){hc(i)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield mc(i)}yield t.un(e)}))}}class sg{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return be.resolve(xs.A);const r=new BA(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(ZC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZC):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,s,u,h,p,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,u=Date.now(),this.nthSequenceNumber(e,i))).next(I=>(r=I,h=Date.now(),this.removeTargets(e,r,t))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(y=Date.now(),af()<=ui.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${I} documents in `+(y-p)+`ms\nTotal Duration: ${y-C}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:I})))}}class JC{constructor(e,t){this.db=e,this.garbageCollector=new sg(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return Mf(e,r)}removeReference(e,t,r){return Mf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Mf(e,t)}wn(e,t){return function(r,i){let s=!1;return YC(r).Wt(u=>KC(r,u,i).next(h=>(h&&(s=!0),be.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this._n(e,(u,h)=>{if(h<=t){const p=this.wn(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,At.min()),gc(e).delete([0,Yr(u.path)])))});i.push(p)}}).next(()=>be.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Mf(e,t)}_n(e,t){const r=gc(e);let i,s=xs.A;return r.Qt({index:Qr.documentTargetsIndex},([u,h],{path:p,sequenceNumber:y})=>{0===u?(s!==xs.A&&t(new ot(Ur(i)),s),s=y,i=p):s=xs.A}).next(()=>{s!==xs.A&&t(new ot(Ur(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mf(n,e){return gc(n).put((r=n.currentSequenceNumber,new Qr(0,Yr(e.path),r)));var r}class yu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){St(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eb(this.inner)}}class eT{constructor(){this.changes=new yu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?be.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rb{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rd(e).put(j_(t),r)}removeEntry(e,t){const r=Rd(e),i=j_(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Rd(e).get(j_(t)).next(r=>this.gn(t,r))}yn(e,t){return Rd(e).get(j_(t)).next(r=>({document:this.gn(t,r),size:V_(r)}))}getEntries(e,t){let r=lo();return this.pn(e,t,(i,s)=>{const u=this.gn(i,s);r=r.insert(i,u)}).next(()=>r)}In(e,t){let r=lo(),i=new ur(ot.comparator);return this.pn(e,t,(s,u)=>{const h=this.gn(s,u);r=r.insert(s,h),i=i.insert(s,V_(u))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return be.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),s=t.getIterator();let u=s.getNext();return Rd(e).Qt({range:i},(h,p,y)=>{const C=ot.fromSegments(h);for(;u&&ot.comparator(u,C)<0;)r(u,null),u=s.getNext();u&&u.isEqual(C)&&(r(u,p),u=s.hasNext()?s.getNext():null),u?y.Ut(u.path.toArray()):y.done()}).next(()=>{for(;u;)r(u,null),u=s.hasNext()?s.getNext():null})}getAll(e,t,r){let i=lo();const s=t.length+1,u={};if(r.isEqual(At.min())){const h=t.toArray();u.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),p=k_(r);u.range=IDBKeyRange.lowerBound([h,p],!0),u.index=dr.collectionReadTimeIndex}return Rd(e).Qt(u,(h,p,y)=>{if(h.length!==s)return;const C=this.gn(ot.fromSegments(h),p);t.isPrefixOf(C.key.path)?i=i.insert(C.key,C):y.done()}).next(()=>i)}newChangeBuffer(e){return new kb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ob(e).get(jo.key).next(t=>(xt(!!t),t))}mn(e,t){return Ob(e).put(jo.key,t)}gn(e,t){if(t){const r=wb(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return _r.newInvalidDocument(e)}}class kb extends eT{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new yu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Jn((s,u)=>Zt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.An.get(s);if(u.isValidDocument()){const p=Eb(this.Tn.O,u);i=i.add(s.path.popLast()),r+=V_(p)-h,t.push(this.Tn.addEntry(e,s,p))}else if(r-=h,this.trackRemovals){const p=Eb(this.Tn.O,u.convertToNoDocument(At.min()));t.push(this.Tn.addEntry(e,s,p))}else t.push(this.Tn.removeEntry(e,s))}),i.forEach(s=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Tn.updateMetadata(e,r)),be.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((s,u)=>{this.An.set(s,u)}),r))}}function Ob(n){return hr(n,jo.store)}function Rd(n){return hr(n,dr.store)}function j_(n){return n.path.toArray()}class Pb{constructor(e){this.O=e}kt(e,t,r,i){const s=new Xr("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(Bo.store),(h=e).createObjectStore(uc.store,{keyPath:uc.keyPath}),h.createObjectStore(Hn.store,{keyPath:Hn.keyPath,autoIncrement:!0}).createIndex(Hn.userMutationsIndex,Hn.userMutationsKeyPath,{unique:!0}),h.createObjectStore(Si.store),H_(e),function(h){h.createObjectStore(dr.store)}(e));let u=be.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(Qr.store),h.deleteObjectStore(ks.store),h.deleteObjectStore(uo.store)}(e),H_(e)),u=u.next(()=>function(h){const p=h.store(uo.store),y=new uo(0,0,At.min().toTimestamp(),0);return p.put(uo.key,y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,p){return p.store(Hn.store).qt().next(y=>{h.deleteObjectStore(Hn.store),h.createObjectStore(Hn.store,{keyPath:Hn.keyPath,autoIncrement:!0}).createIndex(Hn.userMutationsIndex,Hn.userMutationsKeyPath,{unique:!0});const C=p.store(Hn.store),I=y.map(x=>C.put(x));return be.waitFor(I)})}(e,s))),u=u.next(()=>{!function(h){h.createObjectStore(dc.store,{keyPath:dc.keyPath})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Rn(s))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore(jo.store)}(e),this.Pn(s)))),r<7&&i>=7&&(u=u.next(()=>this.bn(s))),r<8&&i>=8&&(u=u.next(()=>this.vn(e,s))),r<9&&i>=9&&(u=u.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const p=h.objectStore(dr.store);p.createIndex(dr.readTimeIndex,dr.readTimeIndexPath,{unique:!1}),p.createIndex(dr.collectionReadTimeIndex,dr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(u=u.next(()=>this.Vn(s))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore(Ef.store,{keyPath:Ef.keyPath})})(e),function(h){h.createObjectStore(Cf.store,{keyPath:Cf.keyPath})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const p=h.createObjectStore(fi.store,{keyPath:fi.keyPath});p.createIndex(fi.collectionPathOverlayIndex,fi.collectionPathOverlayIndexPath,{unique:!1}),p.createIndex(fi.collectionGroupOverlayIndex,fi.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>{!function(h){h.createObjectStore(ho.store,{keyPath:ho.keyPath,autoIncrement:!0}).createIndex(ho.collectionGroupIndex,ho.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(us.store,{keyPath:us.keyPath}).createIndex(us.sequenceNumberIndex,us.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(Ai.store,{keyPath:Ai.keyPath}).createIndex(Ai.documentKeyIndex,Ai.documentKeyIndexPath,{unique:!1})}(e)})),u}Pn(e){let t=0;return e.store(dr.store).Qt((r,i)=>{t+=V_(i)}).next(()=>{const r=new jo(t);return e.store(jo.store).put(jo.key,r)})}Rn(e){const t=e.store(uc.store),r=e.store(Hn.store);return t.qt().next(i=>be.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt(Hn.userMutationsIndex,u).next(h=>be.forEach(h,p=>{xt(p.userId===s.userId);const y=Md(this.O,p);return ig(e,s.userId,y).next(()=>{})}))}))}bn(e){const t=e.store(Qr.store),r=e.store(dr.store);return e.store(uo.store).get(uo.key).next(i=>{const s=[];return r.Qt((u,h)=>{const p=new an(u),y=[0,Yr(p)];s.push(t.get(y).next(C=>C?be.resolve():t.put(new Qr(0,Yr(p),i.highestListenSequenceNumber))))}).next(()=>be.waitFor(s))})}vn(e,t){e.createObjectStore(Dd.store,{keyPath:Dd.keyPath});const r=t.store(Dd.store),i=new F_,s=u=>{if(i.add(u)){const h=u.lastSegment(),p=u.popLast();return r.put({collectionId:h,parent:Yr(p)})}};return t.store(dr.store).Qt({jt:!0},(u,h)=>{const p=new an(u);return s(p.popLast())}).next(()=>t.store(Si.store).Qt({jt:!0},([u,h,p],y)=>{const C=Ur(h);return s(C.popLast())}))}Vn(e){const t=e.store(ks.store);return t.Qt((r,i)=>{const s=ng(i),u=Cb(this.O,s);return t.put(u)})}}function H_(n){n.createObjectStore(Qr.store,{keyPath:Qr.keyPath}).createIndex(Qr.documentTargetsIndex,Qr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(ks.store,{keyPath:ks.keyPath}).createIndex(ks.queryTargetsIndexName,ks.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(uo.store)}const q_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $_{constructor(e,t,r,i,s,u,h,p,y,C,I=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=s,this.window=u,this.document=h,this.Dn=y,this.Cn=C,this.schemaVersion=I,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=x=>Promise.resolve(),!$_.Vt())throw new Oe(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JC(this,i),this.Bn=t+"main",this.O=new bb(p),this.Ln=new Mi(this.Bn,this.schemaVersion,new Pb(this.O)),this.Un=new QC(this.referenceDelegate,this.O),this.qn=new Rb(this.O),this.Kn=new PA,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===C&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(_e.FAILED_PRECONDITION,q_);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new xs(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>og(e).put(new dc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(hc(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return kd(e).get(Bo.key).next(t=>be.resolve(this.ts(t)))}es(e){return og(e).delete(this.clientId)}ns(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=hr(r,dc.store);return i.qt().next(s=>{const u=e.rs(s,18e5),h=s.filter(p=>-1===u.indexOf(p));return be.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?be.resolve(!0):kd(e).get(Bo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Oe(_e.FAILED_PRECONDITION,q_);return!1}}return!(!this.networkEnabled||!this.inForeground)||og(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Bo.store,dc.store],t=>{const r=new Ad(t,xs.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>og(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return U_.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new zO(e)}getDocumentOverlayCache(e){return Sb.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=13===(u=this.schemaVersion)?OA:12===u?HC:11===u?Tf:void dt();var u;let h;return this.Ln.runTransaction(e,i,s,p=>(h=new Ad(p,this.Nn?this.Nn.next():xs.A),"readwrite-primary"===t?this.Jn(h).next(y=>!!y||this.Yn(h)).next(y=>{if(!y)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Oe(_e.FAILED_PRECONDITION,x_);return r(h)}).next(y=>this.Zn(h).next(()=>y)):this._s(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}_s(e){return kd(e).get(Bo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(_e.FAILED_PRECONDITION,q_)})}Zn(e){const t=new Bo(this.clientId,this.allowTabSynchronization,Date.now());return kd(e).put(Bo.key,t)}static Vt(){return Mi.Vt()}Xn(e){const t=kd(e);return t.get(Bo.key).next(r=>this.ts(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete(Bo.key)):be.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kd(n){return hr(n,Bo.store)}function og(n){return hr(n,dc.store)}function G_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Nb{constructor(e,t){this.progress=e,this.ws=t}}class tT{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return ot.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):g_(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new ot(t)).next(r=>{let i=C_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let s=C_();return this.indexManager.getCollectionParents(e,i).next(u=>be.forEach(u,h=>{const p=(y=t,C=h.child(i),new ao(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.bs(e,p,r).next(y=>{y.forEach((C,I)=>{s=s.insert(C,I)})})}).next(()=>s))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(s=>(i=s,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const u of s)for(const h of u.mutations){const p=h.key;let y=i.get(p);null==y&&(y=_r.newInvalidDocument(p),i=i.insert(p,y)),Uo(h,y,u.localWriteTime),y.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((s,u)=>{lb(t,u)||(i=i.remove(s))}),i))}}class Fb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=jt(),i=jt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Fb(e,t.fromCache,r,i)}}class Lb{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(s=t).filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())||r.isEqual(At.min())?this.Ns(e,t):this.Cs.Es(e,i).next(s=>{const u=this.xs(t,s);return(qp(t)||$p(t))&&this.ks(t.limitType,u,i,r)?this.Ns(e,t):(af()<=ui.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),__(t)),this.Cs.As(e,t,r).next(h=>(u.forEach(p=>{h=h.insert(p.key,p)}),h)))});var s}xs(e,t){let r=new Jn(cb(e));return t.forEach((i,s)=>{lb(e,s)&&(r=r.add(s))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ns(e,t){return af()<=ui.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",__(t)),this.Cs.As(e,t,At.min())}}class nT{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new ur(Zt),this.$s=new yu(s=>jp(s),hf),this.Fs=At.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new tT(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function z_(n,e,t,r){return new nT(n,e,t,r)}function Vb(n,e){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,ye.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.gs.getAllMutationBatches(r))).next(s=>{const u=[],h=[];let p=jt();for(const y of i){u.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}for(const y of s){h.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}return t.Us.Es(r,p).next(y=>({qs:y,removedBatchIds:u,addedBatchIds:h}))})})}),Ub.apply(this,arguments)}function rT(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(u,h,p,y){const C=p.batch,I=C.keys();let x=be.resolve();return I.forEach(P=>{x=x.next(()=>y.getEntry(h,P)).next(U=>{const X=p.docVersions.get(P);xt(null!==X),U.version.compareTo(X)<0&&(C.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),y.addEntry(U)))})}),x.next(()=>u.gs.removeMutationBatch(h,C))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function Bb(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function iT(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((y,C)=>{const I=i.get(C);if(!I)return;h.push(t.Un.removeMatchingKeys(s,y.removedDocuments,C).next(()=>t.Un.addMatchingKeys(s,y.addedDocuments,C)));let x=I.withSequenceNumber(s.currentSequenceNumber);var P,U,X;e.targetMismatches.has(C)?x=x.withResumeToken(Dr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,r)),i=i.insert(C,x),U=x,X=y,(0===(P=I).resumeToken.approximateByteSize()||U.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(s,x))});let p=lo();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(W_(s,u,e.documentUpdates).next(y=>{p=y})),!r.isEqual(At.min())){const y=t.Un.getLastRemoteSnapshotVersion(s).next(C=>t.Un.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(y)}return be.waitFor(h).next(()=>u.apply(s)).next(()=>t.Us.Ts(s,p)).next(()=>p)}).then(s=>(t.Ms=i,s))}function W_(n,e,t){let r=jt();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=lo();return t.forEach((u,h)=>{const p=i.get(u);h.isNoDocument()&&h.version.isEqual(At.min())?(e.removeEntry(u,h.readTime),s=s.insert(u,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(h),s=s.insert(u,h)):Be("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",h.version)}),s})}function sT(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Od(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(s=>s?(i=s,be.resolve(i)):t.Un.allocateTargetId(r).next(u=>(i=new fc(e,u,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function Pd(n,e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,ye.Z)(function*(n,e,t){const r=Xe(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!hc(u))throw u;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),Z_.apply(this,arguments)}function ag(n,e,t){const r=Xe(n);let i=At.min(),s=jt();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,p,y){const C=Xe(h),I=C.$s.get(y);return void 0!==I?be.resolve(C.Ms.get(I)):C.Un.getTargetData(p,y)}(r,u,Vo(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(u,h.targetId).next(p=>{s=p})}).next(()=>r.Os.As(u,e,t?i:At.min(),t?s:jt())).next(h=>({documents:h,Ks:s})))}function jb(n,e){const t=Xe(n),r=Xe(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.Tt(s,e).next(u=>u?u.target:null))}function Hb(n){const e=Xe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,s){const u=Xe(r);let h=lo(),p=k_(s);const y=Rd(i),C=IDBKeyRange.lowerBound(p,!0);return y.Qt({index:dr.readTimeIndex,range:C},(I,x)=>{const P=wb(u.O,x);h=h.insert(P.key,P),p=x.readTime}).next(()=>({ws:h,readTime:O_(p)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function aT(){return aT=(0,ye.Z)(function*(n){const e=Xe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Rd(r);let s=At.min();return i.Qt({index:dr.readTimeIndex,reverse:!0},(u,h,p)=>{h.readTime&&(s=O_(h.readTime)),p.done()}).next(()=>s)}(t)).then(t=>{e.Fs=t})}),aT.apply(this,arguments)}function qb(){return qb=(0,ye.Z)(function*(n,e,t,r){const i=Xe(n);let s=jt(),u=lo();for(const y of t){const C=e.Gs(y.metadata.name);y.document&&(s=s.add(C));const I=e.js(y);I.setReadTime(e.Qs(y.metadata.readTime)),u=u.insert(C,I)}const h=i.Bs.newChangeBuffer({trackRemovals:!0}),p=yield Od(i,(y=r,Vo(gf(an.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>W_(y,h,u).next(C=>(h.apply(y),C)).next(C=>i.Un.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Un.addMatchingKeys(y,s,p.targetId)).next(()=>i.Us.Ts(y,C)).next(()=>C)))}),qb.apply(this,arguments)}function lT(n,e){return $b.apply(this,arguments)}function $b(){return $b=(0,ye.Z)(function*(n,e,t=jt()){const r=yield Od(n,Vo(Tb(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Kr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Kn.saveNamedQuery(s,e);const h=r.withResumeToken(Dr.EMPTY_BYTE_STRING,u);return i.Ms=i.Ms.insert(h.targetId,h),i.Un.updateTargetData(s,h).next(()=>i.Un.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Un.addMatchingKeys(s,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(s,e))})}),$b.apply(this,arguments)}class Jr{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return be.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:Kr(r.createTime)}),be.resolve()}getNamedQuery(e,t){return be.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:Tb(r.bundledQuery),readTime:Kr(r.readTime)}),be.resolve();var r}}class cT{constructor(){this.overlays=new ur(ot.comparator),this.Hs=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),be.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Hs.delete(r)),be.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,s=t.length+1,u=new ot(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return be.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ur((y,C)=>y-C);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=s.get(y.largestBatchId);null===C&&(C=new Map,s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=new Map,p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,C)=>h.set(C,y)),!(h.size>=i)););return be.resolve(h)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new pu(t,r));let s=this.Hs.get(t);void 0===s&&(s=new Set,this.Hs.set(t,s)),s.add(r.key)}}class Gb{constructor(){this.Js=new Jn(pi.Ys),this.Xs=new Jn(pi.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new pi(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new pi(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new ot(new an([])),r=new pi(t,e),i=new pi(t,e+1),s=[];return this.Xs.forEachInRange([r,i],u=>{this.ei(u),s.push(u.key)}),s}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new ot(new an([])),r=new pi(t,e),i=new pi(t,e+1);let s=jt();return this.Xs.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new pi(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pi{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return ot.comparator(e.key,t.key)||Zt(e.oi,t.oi)}static Zs(e,t){return Zt(e.oi,t.oi)||ot.comparator(e.key,t.key)}}class uT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new Jn(pi.Ys)}checkEmpty(e){return be.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const s=this.ci;this.ci++;const u=new hu(s,t,r,i);this.gs.push(u);for(const h of i)this.ui=this.ui.add(new pi(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return be.resolve(u)}lookupMutationBatch(e,t){return be.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),s=i<0?0:i;return be.resolve(this.gs.length>s?this.gs[s]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return be.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pi(t,0),i=new pi(t,Number.POSITIVE_INFINITY),s=[];return this.ui.forEachInRange([r,i],u=>{const h=this.ai(u.oi);s.push(h)}),be.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jn(Zt);return t.forEach(i=>{const s=new pi(i,0),u=new pi(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([s,u],h=>{r=r.add(h.oi)})}),be.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ot.isDocumentKey(s)||(s=s.child(""));const u=new pi(new ot(s),0);let h=new Jn(Zt);return this.ui.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.oi)),!0)},u),be.resolve(this.li(h))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return be.forEach(t.mutations,i=>{const s=new pi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new pi(t,0),i=this.ui.firstAfterOrEqual(r);return be.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return be.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class HA{constructor(e){this.di=e,this.docs=new ur(ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return be.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(t))}getEntries(e,t){let r=lo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_r.newInvalidDocument(i))}),be.resolve(r)}getAll(e,t,r){let i=lo();const s=new ot(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||p.readTime.compareTo(r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return be.resolve(i)}_i(e,t){return be.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dT(this)}getSize(e){return be.resolve(this.size)}}class dT extends eT{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),be.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class hT{constructor(e){this.persistence=e,this.wi=new yu(t=>jp(t),hf),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.mi=0,this.gi=new Gb,this.targetCount=0,this.yi=xd.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),be.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new xd(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.Ze(t),be.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.wi.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.wi.delete(u),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),be.waitFor(s).next(()=>i)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return be.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),be.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),be.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),be.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return be.resolve(r)}containsKey(e,t){return be.resolve(this.gi.containsKey(t))}}class xf{constructor(e,t){this.pi={},this.overlays={},this.Nn=new xs(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new hT(this),this.indexManager=new UA,this.qn=new HA(r=>this.referenceDelegate.Ii(r)),this.O=new bb(t),this.Kn=new Jr(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new uT(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new qA(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.Ti(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return be.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class qA extends Ea{constructor(e){super(),this.currentSequenceNumber=e}}class zb{constructor(e){this.persistence=e,this.Ri=new Gb,this.Pi=null}static bi(e){return new zb(e)}get vi(){if(this.Pi)return this.Pi;throw dt()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),be.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),be.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.vi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.vi,r=>{const i=ot.fromPath(r);return this.Vi(e,i).next(s=>{s||t.removeEntry(i,At.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return be.or([()=>be.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function Wb(n,e){return`firestore_clients_${n}_${e}`}function fT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function K_(n,e){return`firestore_targets_${n}_${e}`}class Zb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new Oe(i.error.code,i.error.message))),u?new Zb(e,t,i.state,s):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Oe(r.error.code,r.error.message))),s?new Nd(e,r.state,i):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=I_();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=a_(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new Rf(e,s):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qo{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qo(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kb{constructor(){this.activeTargetIds=I_()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yb{constructor(e,t,r,i,s){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new ur(Zt),this.started=!1,this.$i=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Fi=Wb(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new Kb),this.Li=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const s=e.getItem(Wb(e.persistenceKey,i));if(s){const u=Rf.Si(i,s);u&&(e.Mi=e.Mi.insert(u.clientId,u))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(K_(this.persistenceKey,e));if(r){const i=Nd.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(K_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(s){let u=xs.A;if(null!=s)try{const h=JSON.parse(s);xt("number"==typeof h),u=h}catch(h){mr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==xs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new Zb(this.currentUser,e,t,r),s=fT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Di())}Ji(e){const t=fT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=K_(this.persistenceKey,e),s=new Nd(e,t,r);this.setItem(i,s.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return Rf.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return Zb.Si(new di(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return Nd.Si(i,t)}Qi(e){return qo.Si(e)}rr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),s=this.zi(r),u=[],h=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.dr(u,h).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=I_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Ca{constructor(){this._r=new Kb,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new Kb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Ta{mr(e){}shutdown(){}}class $o{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class gT{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class $A extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,s){const u=this.$r(e,t);Be("RestConnection","Sending: ",u,r);const h={};return this.Fr(h,i,s),this.Br(e,u,h,r).then(p=>(Be("RestConnection","Received: ",p),p),p=>{throw lf("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}Lr(e,t,r,i,s){return this.Mr(e,t,r,i,s)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+iu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$r(e,t){return`${this.kr}/v1/${t}:${pT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((s,u)=>{const h=new eC;h.listenOnce(QE.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ic.NO_ERROR:const y=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(y)),s(y);break;case ic.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),u(new Oe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:const C=h.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const I=h.getResponseJson().error;if(I&&I.status&&I.message){const x=function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(U)>=0?U:_e.UNKNOWN}(I.status);u(new Oe(x,I.message))}else u(new Oe(_e.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Oe(_e.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=KE(),u=YE(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new t_({})),this.Fr(h.initMessageHeaders,t,r),(0,N.uI)()||(0,N.b$)()||(0,N.d)()||(0,N.w1)()||(0,N.Mn)()||(0,N.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");Be("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let C=!1,I=!1;const x=new gT({Ar:U=>{I?Be("Connection","Not sending because WebChannel is closed:",U):(C||(Be("Connection","Opening WebChannel transport."),y.open(),C=!0),Be("Connection","WebChannel sending:",U),y.send(U))},Rr:()=>y.close()}),P=(U,X,le)=>{U.listen(X,je=>{try{le(je)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return P(y,n_.EventType.OPEN,()=>{I||Be("Connection","WebChannel transport opened.")}),P(y,n_.EventType.CLOSE,()=>{I||(I=!0,Be("Connection","WebChannel transport closed"),x.Cr())}),P(y,n_.EventType.ERROR,U=>{I||(I=!0,lf("Connection","WebChannel transport errored:",U),x.Cr(new Oe(_e.UNAVAILABLE,"The operation could not be completed")))}),P(y,n_.EventType.MESSAGE,U=>{var X;if(!I){const le=U.data[0];xt(!!le);const je=le,Ke=je.error||(null===(X=je[0])||void 0===X?void 0:X.error);if(Ke){Be("Connection","WebChannel received error:",Ke);const Ye=Ke.status;let Ze=function(Ln){const br=cr[Ln];if(void 0!==br)return w_(br)}(Ye),Wt=Ke.message;void 0===Ze&&(Ze=_e.INTERNAL,Wt="Unknown error status: "+Ye+" with message "+Ke.message),I=!0,x.Cr(new Oe(Ze,Wt)),y.close()}else Be("Connection","WebChannel received:",le),x.Nr(le)}}),P(u,XE.STAT_EVENT,U=>{U.stat===JE.PROXY?Be("Connection","Detected buffering proxy"):U.stat===JE.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.Dr()},0),x}}function mT(){return"undefined"!=typeof window?window:null}function Y_(){return"undefined"!=typeof document?document:null}function lg(n){return new AA(n,!0)}class cg{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=s,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class kf{constructor(e,t,r,i,s,u,h,p){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new cg(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,ye.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,ye.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Oe(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,ye.Z)(function*(){e.state=0,e.start()}))}Io(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GA extends kf{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.O=s}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function PC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:dt(),i=e.targetChange.targetIds||[],s=function(p,y){return p.N?(xt(void 0===y||"string"==typeof y),Dr.fromBase64String(y||"")):(xt(void 0===y||y instanceof Uint8Array),Dr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=void 0===p.code?_e.UNKNOWN:w_(p.code);return new Oe(y,p.message||"")}(u);t=new S_(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=gl(n,r.document.name),s=Kr(r.document.updateTime),u=new cs({mapValue:{fields:r.document.fields}}),h=_r.newFoundDocument(i,s,u);t=new _f(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=gl(n,r.document),s=r.readTime?Kr(r.readTime):At.min(),u=_r.newNoDocument(i,s);t=new _f([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=gl(n,r.document);t=new _f([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,s=new IA(r.count||0);t=new pb(r.targetId,s)}}var p;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return At.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?At.min():s.readTime?Kr(s.readTime):At.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=tg(this.O),t.addTarget=function(i,s){let u;const h=s.target;return u=Hp(h)?{documents:FC(i,h)}:{query:LC(i,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=xC(i,s.resumeToken):s.snapshotVersion.compareTo(At.min())>0&&(u.readTime=Id(i,s.snapshotVersion.toTimestamp())),u}(this.O,e);const r=function xA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=tg(this.O),t.removeTarget=e,this.fo(t)}}class _T extends kf{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.O=s,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function NC(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let s=Kr(r.updateTime?r.updateTime:i);return s.isEqual(At.min())&&(s=Kr(i)),new CA(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.Vo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=tg(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vf(this.O,r))};this.fo(t)}}class zA extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Oe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.eo.Mr(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(_e.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.eo.Lr(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(_e.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class yT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(mr(t),this.Oo=!1):Be("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class vT{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=s,this.jo.mr(h=>{r.enqueueAndForget((0,ye.Z)(function*(){var p;_c(u)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,ye.Z)(function*(y){const C=Xe(y);C.Ko.add(4),yield Fd(C),C.Qo.set("Unknown"),C.Ko.delete(4),yield vu(C)}),function(y){return p.apply(this,arguments)})(u))}))}),this.Qo=new yT(r,i)}}function vu(n){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,ye.Z)(function*(n){if(_c(n))for(const e of n.Go)yield e(!0)}),Qb.apply(this,arguments)}function Fd(n){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,ye.Z)(function*(n){for(const e of n.Go)yield e(!1)}),Q_.apply(this,arguments)}function Of(n,e){const t=Xe(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),J_(t)?X_(t):Ld(t).co()&&ug(t,e))}function bu(n,e){const t=Xe(n),r=Ld(t);t.qo.delete(e),r.co()&&Xb(t,e),0===t.qo.size&&(r.co()?r.ho():_c(t)&&t.Qo.set("Unknown"))}function ug(n,e){n.Wo.Z(e.targetId),Ld(n).Ao(e)}function Xb(n,e){n.Wo.Z(e),Ld(n).Ro(e)}function X_(n){n.Wo=new SA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),Ld(n).start(),n.Qo.Mo()}function J_(n){return _c(n)&&!Ld(n).oo()&&n.qo.size>0}function _c(n){return 0===Xe(n).Ko.size}function Jb(n){n.Wo=void 0}function bT(n){return ey.apply(this,arguments)}function ey(){return ey=(0,ye.Z)(function*(n){n.qo.forEach((e,t)=>{ug(n,e)})}),ey.apply(this,arguments)}function wT(n,e){return ew.apply(this,arguments)}function ew(){return ew=(0,ye.Z)(function*(n,e){Jb(n),J_(n)?(n.Qo.Bo(e),X_(n)):n.Qo.set("Unknown")}),ew.apply(this,arguments)}function WA(n,e,t){return tw.apply(this,arguments)}function tw(){return tw=(0,ye.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof S_&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,s){const u=s.cause;for(const h of s.targetIds)i.qo.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.qo.delete(h),i.Wo.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ty(n,r)}else if(e instanceof _f?n.Wo.ct(e):e instanceof pb?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(At.min()))try{const r=yield Bb(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.Wo.yt(s);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.qo.get(p);y&&i.qo.set(p,y.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const p=i.qo.get(h);if(!p)return;i.qo.set(h,p.withResumeToken(Dr.EMPTY_BYTE_STRING,p.snapshotVersion)),Xb(i,h);const y=new fc(p.target,h,1,p.sequenceNumber);ug(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield ty(n,r)}var r}),tw.apply(this,arguments)}function ty(n,e,t){return nw.apply(this,arguments)}function nw(){return nw=(0,ye.Z)(function*(n,e,t){if(!hc(e))throw e;n.Ko.add(1),yield Fd(n),n.Qo.set("Offline"),t||(t=()=>Bb(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield vu(n)}))}),nw.apply(this,arguments)}function ET(n,e){return e().catch(t=>ty(n,t,e))}function Pf(n){return rw.apply(this,arguments)}function rw(){return rw=(0,ye.Z)(function*(n){const e=Xe(n),t=yc(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;ZA(e);)try{const i=yield sT(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,KA(e,i)}catch(i){yield ty(e,i)}CT(e)&&TT(e)}),rw.apply(this,arguments)}function ZA(n){return _c(n)&&n.Uo.length<10}function KA(n,e){n.Uo.push(e);const t=yc(n);t.co()&&t.bo&&t.vo(e.mutations)}function CT(n){return _c(n)&&!yc(n).oo()&&n.Uo.length>0}function TT(n){yc(n).start()}function YA(n){return iw.apply(this,arguments)}function iw(){return iw=(0,ye.Z)(function*(n){yc(n).Do()}),iw.apply(this,arguments)}function QA(n){return sw.apply(this,arguments)}function sw(){return sw=(0,ye.Z)(function*(n){const e=yc(n);for(const t of n.Uo)e.vo(t.mutations)}),sw.apply(this,arguments)}function XA(n,e,t){return ny.apply(this,arguments)}function ny(){return ny=(0,ye.Z)(function*(n,e,t){const r=n.Uo.shift(),i=fu.from(r,e,t);yield ET(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Pf(n)}),ny.apply(this,arguments)}function IT(n,e){return ry.apply(this,arguments)}function ry(){return ry=(0,ye.Z)(function*(n,e){var t;e&&yc(n).bo&&(yield(t=(0,ye.Z)(function*(r,i){if(TC(s=i.code)&&s!==_e.ABORTED){const u=r.Uo.shift();yc(r).ao(),yield ET(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Pf(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),CT(n)&&TT(n)}),ry.apply(this,arguments)}function ow(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,ye.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=_c(t);t.Ko.add(3),yield Fd(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield vu(t)}),iy.apply(this,arguments)}function sy(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,ye.Z)(function*(n,e){const t=Xe(n);e?(t.Ko.delete(2),yield vu(t)):e||(t.Ko.add(2),yield Fd(t),t.Qo.set("Unknown"))}),oy.apply(this,arguments)}function Ld(n){return n.zo||(n.zo=function(e,t,r){const i=Xe(e);return i.No(),new GA(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:bT.bind(null,n),vr:wT.bind(null,n),To:WA.bind(null,n)}),n.Go.push(function(){var e=(0,ye.Z)(function*(t){t?(n.zo.ao(),J_(n)?X_(n):n.Qo.set("Unknown")):(yield n.zo.stop(),Jb(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function yc(n){return n.Ho||(n.Ho=function(e,t,r){const i=Xe(e);return i.No(),new _T(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:YA.bind(null,n),vr:IT.bind(null,n),So:QA.bind(null,n),Vo:XA.bind(null,n)}),n.Go.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Ho.ao(),yield Pf(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class dg{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,h=new dg(e,t,u,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vd(n,e){if(mr("AsyncQueue",`${e}: ${n}`),hc(n))return new Oe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class Go{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=C_(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new Go(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DT{constructor(){this.Jo=new ur(ot.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):dt():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Nf{constructor(e,t,r,i,s,u,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(u=>{s.push({type:0,doc:u})}),new Nf(e,t,Go.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&m_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Ff{constructor(){this.Xo=void 0,this.listeners=[]}}class ZO{constructor(){this.queries=new yu(e=>ab(e),m_),this.onlineState="Unknown",this.Zo=new Set}}function hg(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,ye.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Ff),i)try{s.Xo=yield t.onListen(r)}catch(u){const h=Vd(u,`Initialization of query '${__(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.tc(t.onlineState),s.Xo&&e.ec(s.Xo)&&aw(t)}),ST.apply(this,arguments)}function ay(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,ye.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ly.apply(this,arguments)}function KO(n,e){const t=Xe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.ec(i)&&(r=!0);u.Xo=i}}r&&aw(t)}function Tt(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function aw(n){n.Zo.forEach(e=>{e.next()})}class lw{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Nf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=Nf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class JA{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class fg{constructor(e){this.O=e}Gs(e){return gl(this.O,e)}js(e){return e.metadata.exists?co(this.O,e.document,!1):_r.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Kr(e)}}class eM{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=pg(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new fg(this.O);for(const i of e)if(i.metadata.queries){const s=r.Gs(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||jt()).add(s);t.set(u,h)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function jA(n,e,t,r){return qb.apply(this,arguments)}(e.localStore,new fg(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield lT(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new Nb(Object.assign({},e.progress),t)})()}}function pg(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gg{constructor(e){this.key=e}}class fr{constructor(e){this.key=e}}class tM{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=jt(),this.mutatedKeys=jt(),this.mc=cb(e),this.gc=new Go(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new DT,i=t?t.gc:this.gc;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const p=qp(this.query)&&i.size===this.query.limit?i.last():null,y=$p(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,I)=>{const x=i.get(C),P=lb(this.query,I)?I:null,U=!!x&&this.mutatedKeys.has(x.key),X=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let le=!1;x&&P?x.data.isEqual(P.data)?U!==X&&(r.track({type:3,doc:P}),le=!0):this.Tc(x,P)||(r.track({type:2,doc:P}),le=!0,(p&&this.mc(P,p)>0||y&&this.mc(P,y)<0)&&(h=!0)):!x&&P?(r.track({type:0,doc:P}),le=!0):x&&!P&&(r.track({type:1,doc:x}),le=!0,(p||y)&&(h=!0)),le&&(P?(u=u.add(P),s=X?s.add(C):s.delete(C)):(u=u.delete(C),s=s.delete(C)))}),qp(this.query)||$p(this.query))for(;u.size>this.query.limit;){const C=qp(this.query)?u.last():u.first();u=u.delete(C.key),s=s.delete(C.key),r.track({type:1,doc:C})}return{gc:u,Ec:r,ks:h,mutatedKeys:s}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const s=e.Ec.Yo();s.sort((y,C)=>function(I,x){const P=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return P(I)-P(x)}(y.type,C.type)||this.mc(y.doc,C.doc)),this.Ac(r);const u=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,p=h!==this._c;return this._c=h,0!==s.length||p?{snapshot:new Nf(this.query,e.gc,i,s,e.mutatedKeys,0===h,p,!1),Pc:u}:{Pc:u}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new DT,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=jt(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new fr(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new gg(r))}),t}vc(e){this.dc=e.Ks,this.wc=jt();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return Nf.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class AT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nM{constructor(e){this.key=e,this.Sc=!1}}class rM{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.Dc={},this.Cc=new yu(h=>ab(h),m_),this.Nc=new Map,this.xc=new Set,this.kc=new ur(ot.comparator),this.Oc=new Map,this.Mc=new Gb,this.$c={},this.Fc=new Map,this.Bc=xd.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function MT(n,e){return cy.apply(this,arguments)}function cy(){return cy=(0,ye.Z)(function*(n,e){const t=bw(n);let r,i;const s=t.Cc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Vc();else{const u=yield Od(t.localStore,Vo(e));t.isPrimaryClient&&Of(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield uy(t,e,r,"current"===h)}return i}),cy.apply(this,arguments)}function uy(n,e,t,r){return dy.apply(this,arguments)}function dy(){return dy=(0,ye.Z)(function*(n,e,t,r){n.Uc=(C,I,x)=>{return(P=(0,ye.Z)(function*(U,X,le,je){let Ke=X.view.Ic(le);Ke.ks&&(Ke=yield ag(U.localStore,X.query,!1).then(({documents:Wt})=>X.view.Ic(Wt,Ke)));const Ye=je&&je.targetChanges.get(X.targetId),Ze=X.view.applyChanges(Ke,U.isPrimaryClient,Ye);return gy(U,X.targetId,Ze.Pc),Ze.snapshot}),function(U,X,le,je){return P.apply(this,arguments)})(n,C,I,x);var P};const i=yield ag(n.localStore,e,!0),s=new tM(e,i.Ks),u=s.Ic(i.documents),h=D_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(u,n.isPrimaryClient,h);gy(n,t,p.Pc);const y=new AT(e,t,s);return n.Cc.set(e,y),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),p.snapshot}),dy.apply(this,arguments)}function iM(n,e){return cw.apply(this,arguments)}function cw(){return cw=(0,ye.Z)(function*(n,e){const t=Xe(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(s=>!m_(s,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Pd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bu(t.remoteStore,r.targetId),jd(t,r.targetId)}).catch(mc))):(jd(t,r.targetId),yield Pd(t.localStore,r.targetId,!0))}),cw.apply(this,arguments)}function Ud(){return Ud=(0,ye.Z)(function*(n,e,t){const r=by(n);try{const i=yield function(s,u){const h=Xe(s),p=hi.now(),y=u.reduce((I,x)=>I.add(x.key),jt());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",I=>h.Us.Es(I,y).next(x=>{C=x;const P=[];for(const U of u){const X=hb(U,C.get(U.key));null!=X&&P.push(new lu(U.key,X,yA(X.value.mapValue),Vr.exists(!0)))}return h.gs.addMutationBatch(I,p,P,u)})).then(I=>(I.applyToLocalDocumentSet(C),{batchId:I.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,h){let p=s.$c[s.currentUser.toKey()];p||(p=new ur(Zt)),p=p.insert(u,h),s.$c[s.currentUser.toKey()]=p}(r,i.batchId,t),yield vc(r,i.changes),yield Pf(r.remoteStore)}catch(i){const s=Vd(i,"Failed to persist write");t.reject(s)}}),Ud.apply(this,arguments)}function xT(n,e){return uw.apply(this,arguments)}function uw(){return uw=(0,ye.Z)(function*(n,e){const t=Xe(n);try{const r=yield iT(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.Oc.get(s);u&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Sc=!0:i.modifiedDocuments.size>0?xt(u.Sc):i.removedDocuments.size>0&&(xt(u.Sc),u.Sc=!1))}),yield vc(t,r,e)}catch(r){yield mc(r)}}),uw.apply(this,arguments)}function RT(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((s,u)=>{const h=u.view.tc(e);h.snapshot&&i.push(h.snapshot)}),function(s,u){const h=Xe(s);h.onlineState=u;let p=!1;h.queries.forEach((y,C)=>{for(const I of C.listeners)I.tc(u)&&(p=!0)}),p&&aw(h)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hy(n,e,t){return fy.apply(this,arguments)}function fy(){return fy=(0,ye.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),s=i&&i.key;if(s){let u=new ur(ot.comparator);u=u.insert(s,_r.newNoDocument(s,At.min()));const h=jt().add(s),p=new Jp(At.min(),new Map,new Jn(Zt),u,h);yield xT(r,p),r.kc=r.kc.remove(s),r.Oc.delete(e),my(r)}else yield Pd(r.localStore,e,!1).then(()=>jd(r,e,t)).catch(mc)}),fy.apply(this,arguments)}function kT(n,e){return py.apply(this,arguments)}function py(){return py=(0,ye.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield rT(t.localStore,e);fw(t,r,null),hw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vc(t,i)}catch(i){yield mc(i)}}),py.apply(this,arguments)}function oM(n,e,t){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,ye.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(s,u){const h=Xe(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.gs.lookupMutationBatch(p,u).next(C=>(xt(null!==C),y=C.keys(),h.gs.removeMutationBatch(p,C))).next(()=>h.gs.performConsistencyCheck(p)).next(()=>h.Us.Es(p,y))})}(r.localStore,e);fw(r,e,t),hw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vc(r,i)}catch(i){yield mc(i)}}),Bd.apply(this,arguments)}function dw(){return dw=(0,ye.Z)(function*(n,e){const t=Xe(n);_c(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=Xe(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=Vd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),dw.apply(this,arguments)}function hw(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function fw(n,e,t){const r=Xe(n);let i=r.$c[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function jd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||pw(n,r)})}function pw(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(bu(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),my(n))}function gy(n,e,t){for(const r of t)r instanceof gg?(n.Mc.addReference(r.key,e),aM(n,r)):r instanceof fr?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||pw(n,r.key)):dt()}function aM(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.xc.add(r),my(n))}function my(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new ot(an.fromString(e)),r=n.Bc.next();n.Oc.set(r,new nM(t)),n.kc=n.kc.insert(t,r),Of(n.remoteStore,new fc(Vo(gf(t.path)),r,2,xs.A))}}function vc(n,e,t){return gw.apply(this,arguments)}function gw(){return gw=(0,ye.Z)(function*(n,e,t){const r=Xe(n),i=[],s=[],u=[];var h;r.Cc.isEmpty()||(r.Cc.forEach((h,p)=>{u.push(r.Uc(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=Fb.Ss(p.targetId,y);s.push(C)}}))}),yield Promise.all(u),r.Dc.To(i),yield(h=(0,ye.Z)(function*(p,y){const C=Xe(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>be.forEach(y,x=>be.forEach(x.vs,P=>C.persistence.referenceDelegate.addReference(I,x.targetId,P)).next(()=>be.forEach(x.Vs,P=>C.persistence.referenceDelegate.removeReference(I,x.targetId,P)))))}catch(I){if(!hc(I))throw I;Be("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const x=I.targetId;if(!I.fromCache){const P=C.Ms.get(x),X=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);C.Ms=C.Ms.insert(x,X)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,s))}),gw.apply(this,arguments)}function YO(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ye.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield Vb(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(u=>{u.forEach(h=>{h.reject(new Oe(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vc(t,r.qs)}var i}),OT.apply(this,arguments)}function QO(n,e){const t=Xe(n),r=t.Oc.get(e);if(r&&r.Sc)return jt().add(r.key);{let i=jt();const s=t.Nc.get(e);if(!s)return i;for(const u of s){const h=t.Cc.get(u);i=i.unionWith(h.view.yc)}return i}}function XO(n,e){return _y.apply(this,arguments)}function _y(){return _y=(0,ye.Z)(function*(n,e){const t=Xe(n),r=yield ag(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&gy(t,e.targetId,i.Pc),i}),_y.apply(this,arguments)}function yy(n){return mw.apply(this,arguments)}function mw(){return mw=(0,ye.Z)(function*(n){const e=Xe(n);return Hb(e.localStore).then(t=>vc(e,t))}),mw.apply(this,arguments)}function lM(n,e,t,r){return vy.apply(this,arguments)}function vy(){return vy=(0,ye.Z)(function*(n,e,t,r){const i=Xe(n),s=yield function(u,h){const p=Xe(u),y=Xe(p.gs);return p.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Ge(C,h).next(I=>I?p.Us.Es(C,I):be.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield Pf(i.remoteStore):"acknowledged"===t||"rejected"===t?(fw(i,e,r||null),hw(i,e),h=e,Xe(Xe(i.localStore).gs).Qe(h)):dt(),yield vc(i,s)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),vy.apply(this,arguments)}function _w(){return _w=(0,ye.Z)(function*(n,e){const t=Xe(n);if(bw(t),by(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield PT(t,r.toArray());t.Lc=!0,yield sy(t.remoteStore,!0);for(const s of i)Of(t.remoteStore,s)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(jd(t,u),Pd(t.localStore,u,!0))),bu(t.remoteStore,u)}),yield i,yield PT(t,r),function(s){const u=Xe(s);u.Oc.forEach((h,p)=>{bu(u.remoteStore,p)}),u.Mc.ii(),u.Oc=new Map,u.kc=new ur(ot.comparator)}(t),t.Lc=!1,yield sy(t.remoteStore,!1)}}),_w.apply(this,arguments)}function PT(n,e,t){return yw.apply(this,arguments)}function yw(){return yw=(0,ye.Z)(function*(n,e,t){const r=Xe(n),i=[],s=[];for(const u of e){let h;const p=r.Nc.get(u);if(p&&0!==p.length){h=yield Od(r.localStore,Vo(p[0]));for(const y of p){const C=r.Cc.get(y),I=yield XO(r,C);I.snapshot&&s.push(I.snapshot)}}else{const y=yield jb(r.localStore,u);h=yield Od(r.localStore,y),yield uy(r,NT(y),u,!1)}i.push(h)}return r.Dc.To(s),i}),yw.apply(this,arguments)}function NT(n){return Ed(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function cM(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).ds()}function FT(n,e,t,r){return vw.apply(this,arguments)}function vw(){return vw=(0,ye.Z)(function*(n,e,t,r){const i=Xe(n);if(i.Lc)Be("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const s=yield Hb(i.localStore),u=Jp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield vc(i,s,u);break}case"rejected":yield Pd(i.localStore,e,!0),jd(i,e,r);break;default:dt()}}),vw.apply(this,arguments)}function uM(n,e,t){return wu.apply(this,arguments)}function wu(){return wu=(0,ye.Z)(function*(n,e,t){const r=bw(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const s=yield jb(r.localStore,i),u=yield Od(r.localStore,s);yield uy(r,NT(s),u.targetId,!1),Of(r.remoteStore,u)}for(const i of t)r.Nc.has(i)&&(yield Pd(r.localStore,i,!1).then(()=>{bu(r.remoteStore,i),jd(r,i)}).catch(mc))}}),wu.apply(this,arguments)}function bw(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hy.bind(null,e),e.Dc.To=KO.bind(null,e.eventManager),e.Dc.qc=Tt.bind(null,e.eventManager),e}function by(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oM.bind(null,e),e}class ww{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.O=lg(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return z_(this.persistence,new Lb,e.initialUser,this.O)}jc(e){return new xf(zb.bi,this.O)}Gc(e){return new Ca}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class LT extends ww{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield function oT(n){return aT.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield by(r.zc.syncEngine),yield Pf(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return z_(this.persistence,new Lb,e.initialUser,this.O)}Qc(e){return new WO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=G_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ds.withCacheSize(this.cacheSizeBytes):ds.DEFAULT;return new $_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mT(),Y_(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new Ca}}class VT extends LT{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof Yb&&(r.sharedClientState.syncEngine={hr:lM.bind(null,i),lr:FT.bind(null,i),dr:uM.bind(null,i),ds:cM.bind(null,i),ar:yy.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var s=(0,ye.Z)(function*(u){yield function _g(n,e){return _w.apply(this,arguments)}(r.zc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}Gc(e){const t=mT();if(!Yb.Vt(t))throw new Oe(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=G_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yb(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ew{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>RT(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=YO.bind(null,r.syncEngine),yield sy(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ZO}createDatastore(e){const t=lg(e.databaseInfo.databaseId),r=new $A(e.databaseInfo);return new zA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>RT(this.syncEngine,h,0),u=$o.Vt()?new $o:new Ta,new vT(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,h,p,y){const C=new rM(r,i,s,u,h,p);return y&&(C.Lc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Xe(t);Be("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield Fd(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function wy(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ey{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UT{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const s=yield e.nu(i);return new JA(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,ye.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class BT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(s,u){const h=Xe(s),p=tg(h.O)+"/documents",y={documents:u.map(P=>eg(h.O,P))},C=yield h.Lr("BatchGetDocuments",p,y),I=new Map;C.forEach(P=>{const U=function _b(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=gl(t,r.found.name),s=Kr(r.found.updateTime),u=new cs({mapValue:{fields:r.found.fields}});return _r.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=gl(t,r.missing),s=Kr(r.readTime);return _r.newNoDocument(i,s)}(n,e):dt()}(h.O,P);I.set(U.key.toString(),U)});const x=[];return u.forEach(P=>{const U=I.get(P.toString());xt(!!U),x.push(U)}),x}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Td(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=ot.fromPath(i);e.mutations.push(new fb(s,e.precondition(s)))}),yield(r=(0,ye.Z)(function*(i,s){const u=Xe(i),h=tg(u.O)+"/documents",p={writes:s.map(y=>vf(u.O,y))};yield u.Mr("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Vr.updateTime(t):Vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Oe(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vr.updateTime(t)}return Vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hM{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new cg(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,ye.Z)(function*(){const t=new BT(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.uu(s)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!lc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!TC(t)}return!1}}class fM{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=di.UNAUTHENTICATED,this.clientId=sC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ye.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Vd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function jT(n,e){return yg.apply(this,arguments)}function yg(){return yg=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(s){r.isEqual(s)||(yield Vb(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yg.apply(this,arguments)}function HT(n,e){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Cw(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>ow(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>ow(e.remoteStore,s)),n.onlineComponents=e}),Cy.apply(this,arguments)}function Cw(n){return Tw.apply(this,arguments)}function Tw(){return Tw=(0,ye.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield jT(n,new ww)),n.offlineComponents}),Tw.apply(this,arguments)}function Ty(n){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,ye.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield HT(n,new Ew)),n.onlineComponents}),Iw.apply(this,arguments)}function qT(n){return Cw(n).then(e=>e.persistence)}function Dw(n){return Cw(n).then(e=>e.localStore)}function $T(n){return Ty(n).then(e=>e.remoteStore)}function Sw(n){return Ty(n).then(e=>e.syncEngine)}function Hd(n){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,ye.Z)(function*(n){const e=yield Ty(n),t=e.eventManager;return t.onListen=MT.bind(null,e.syncEngine),t.onUnlisten=iM.bind(null,e.syncEngine),t}),Iy.apply(this,arguments)}function zT(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,s,u,h,p){const y=new Ey({next:I=>{s.enqueueAndForget(()=>ay(i,C));const x=I.docs.has(u);!x&&I.fromCache?p.reject(new Oe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&I.fromCache&&h&&"server"===h.source?p.reject(new Oe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),C=new lw(gf(u.path),y,{includeMetadataChanges:!0,uc:!0});return hg(i,C)}(yield Hd(n),n.asyncQueue,e,t,r)})),r.promise}function WT(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,s,u,h,p){const y=new Ey({next:I=>{s.enqueueAndForget(()=>ay(i,C)),I.fromCache&&"server"===h.source?p.reject(new Oe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),C=new lw(u,y,{includeMetadataChanges:!0,uc:!0});return hg(i,C)}(yield Hd(n),n.asyncQueue,e,t,r)})),r.promise}const KT=new Map;function Rw(n,e,t){if(!t)throw new Oe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Dy(n,e,t,r){if(!0===e&&!0===r)throw new Oe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YT(n){if(!ot.isDocumentKey(n))throw new Oe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kw(n){if(ot.isDocumentKey(n))throw new Oe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sy(n);throw new Oe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QT(n,e){if(e<=0)throw new Oe(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Ow{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Dy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ay{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,e instanceof fl?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Oe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(i.options.projectId)}(e))}get app(){if(!this._app)throw new Oe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new LO;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new hA(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=KT.get(e);t&&(Be("ComponentProvider","Removing Datastore"),KT.delete(e),t.terminate())}(this),Promise.resolve()}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class hs extends Gi{constructor(e,t,r){super(e,t,gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new ot(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Lf(n,e,...t){if(n=(0,N.m9)(n),Rw("collection","path",e),n instanceof Ay){const r=an.fromString(e,...t);return kw(r),new hs(n,null,r)}{if(!(n instanceof Sn||n instanceof hs))throw new Oe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return kw(r),new hs(n.firestore,null,r)}}function Pw(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=sC.R()),Rw("doc","path",e),n instanceof Ay){const r=an.fromString(e,...t);return YT(r),new Sn(n,null,new ot(r))}{if(!(n instanceof Sn||n instanceof hs))throw new Oe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return YT(r),new Sn(n.firestore,n instanceof hs?n.converter:null,new ot(r))}}function Nw(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof Sn||n instanceof hs)&&(e instanceof Sn||e instanceof hs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function XT(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&m_(n._query,e._query)&&n.converter===e.converter}class vM{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new cg(this,"async_queue_retry"),this.yu=()=>{const t=Y_();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=Y_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Y_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Lr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,ye.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!hc(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,mr("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=dg.createAndSchedule(this,e,t,r,s=>this.Tu(s));return this.du.push(i),i}pu(){this._u&&dt()}verifyOperationInProgress(){}Au(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function Fw(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class bM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends Ay{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new vM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tI(this),this._firestoreClient.terminate()}}function er(n){return n._firestoreClient||tI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tI(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new o_(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new fM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function iI(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield jT(n,t),yield HT(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===_e.FAILED_PRECONDITION||s.code===_e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var s})).then(()=>r.promise)}function qd(n){if(n._initialized||n._terminated)throw new Oe(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ml{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(Dr.fromBase64String(e))}catch(t){throw new Oe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Eu{constructor(e){this._methodName=e}}class My{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const JO=/^__.*__$/;class sI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new lu(e,this.data,this.fieldMask,t,this.fieldTransforms):new b_(e,this.data,t,this.fieldTransforms)}}class DM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new lu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Uw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class Vf{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new Vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return ky(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(Uw(this.Vu)&&JO.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class SM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||lg(e)}Fu(e,t,r,i=!1){return new Vf({Vu:e,methodName:t,$u:r,path:On.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function $d(n){const e=n._freezeSettings(),t=lg(n._databaseId);return new SM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bg(n,e,t,r,i,s={}){const u=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);xy("Data must be an object, but it was:",u,r);const h=qw(r,u);let p,y;if(s.merge)p=new _d(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const C=[];for(const I of s.mergeFields){const x=Ry(e,I,t);if(!u.contains(x))throw new Oe(_e.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);aI(C,x)||C.push(x)}p=new _d(C),y=u.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=u.fieldTransforms;return new sI(new cs(h),p,y)}class wg extends Eu{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wg}}function oI(n,e,t){return new Vf({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class Bw extends Eu{_toFieldTransform(e){return new Zp(e.path,new Wp)}isEqual(e){return e instanceof Bw}}class AM extends Eu{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=oI(this,e,!0),r=this.Bu.map(s=>Cu(s,t)),i=new Cd(r);return new Zp(e.path,i)}isEqual(e){return this===e}}class MM extends Eu{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=oI(this,e,!0),r=this.Bu.map(s=>Cu(s,t)),i=new au(r);return new Zp(e.path,i)}isEqual(e){return this===e}}class xM extends Eu{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new mf(e.O,gC(e.O,this.Lu));return new Zp(e.path,t)}isEqual(e){return this===e}}function jw(n,e,t,r){const i=n.Fu(1,e,t);xy("Data must be an object, but it was:",i,r);const s=[],u=cs.empty();St(r,(p,y)=>{const C=Eg(e,p,t);y=(0,N.m9)(y);const I=i.xu(C);if(y instanceof wg)s.push(C);else{const x=Cu(y,I);null!=x&&(s.push(C),u.set(C,x))}});const h=new _d(s);return new DM(u,h,i.fieldTransforms)}function Gd(n,e,t,r,i,s){const u=n.Fu(1,e,t),h=[Ry(e,r,t)],p=[i];if(s.length%2!=0)throw new Oe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)h.push(Ry(e,s[x])),p.push(s[x+1]);const y=[],C=cs.empty();for(let x=h.length-1;x>=0;--x)if(!aI(y,h[x])){const P=h[x];let U=p[x];U=(0,N.m9)(U);const X=u.xu(P);if(U instanceof wg)y.push(P);else{const le=Cu(U,X);null!=le&&(y.push(P),C.set(P,le))}}const I=new _d(y);return new DM(C,I,u.fieldTransforms)}function Hw(n,e,t,r=!1){return Cu(t,n.Fu(r?4:3,e))}function Cu(n,e){if($w(n=(0,N.m9)(n)))return xy("Unsupported field value:",e,n),qw(n,e);if(n instanceof Eu)return function(t,r){if(!Uw(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let h=Cu(u,r.ku(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gC(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=hi.fromDate(t);return{timestampValue:Id(r.O,i)}}if(t instanceof hi){const i=new hi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Id(r.O,i)}}if(t instanceof My)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bc)return{bytesValue:xC(r.O,t._byteString)};if(t instanceof Sn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.Ou(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cu(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${Sy(t)}`)}(n,e)}function qw(n,e){const t={};return eb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):St(n,(r,i)=>{const s=Cu(i,e.Du(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function $w(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hi||n instanceof My||n instanceof bc||n instanceof Sn||n instanceof Eu)}function xy(n,e,t){if(!$w(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Sy(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function Ry(n,e,t){if((e=(0,N.m9)(e))instanceof ml)return e._internalPath;if("string"==typeof e)return Eg(n,e);throw ky("Field path arguments must be of type string or ",n,!1,void 0,t)}const RM=new RegExp("[~\\*/\\[\\]]");function Eg(n,e,t){if(e.search(RM)>=0)throw ky(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ml(...e.split("."))._internalPath}catch(r){throw ky(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ky(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new Oe(_e.INVALID_ARGUMENT,h+n+p)}function aI(n,e){return n.some(t=>t.isEqual(e))}class Cg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kM extends Cg{data(){return super.data()}}function Tu(n,e){return"string"==typeof e?Eg(n,e):e instanceof ml?e._internalPath:e._delegate._internalPath}class zd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ia extends Cg{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Os(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Tu("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Os extends Ia{data(e={}){return super.data(e)}}class Iu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Os(this._firestore,this._userDataWriter,r.key,r,new zd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Os(r._firestore,r._userDataWriter,u.doc.key,u.doc,new zd(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new Os(r._firestore,r._userDataWriter,u.doc.key,u.doc,new zd(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:Oy(u.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Oy(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function Uf(n,e){return n instanceof Ia&&e instanceof Ia?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Iu&&e instanceof Iu&&n._firestore===e._firestore&&XT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function lI(n){if($p(n)&&0===n.explicitOrderBy.length)throw new Oe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}function Du(n,...e){for(const t of e)n=t._apply(n);return n}class Py extends Tg{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=$d(e.firestore),r=function(i,s,u,h,p,y,C){let I;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Oe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){Ly(C,y);const P=[];for(const U of C)P.push(Fy(h,i,U));I={arrayValue:{values:P}}}else I=Fy(h,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||Ly(C,y),I=Hw(u,"where",C,"in"===y||"not-in"===y);const x=Ii.create(p,y,I);return function(P,U){if(U.S()){const le=zp(P);if(null!==le&&!le.isEqual(U.field))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${le.toString()}' and '${U.field.toString()}'`);const je=Gp(P);null!==je&&uI(0,U.field,je)}const X=function(le,je){for(const Ke of le.filters)if(je.indexOf(Ke.op)>=0)return Ke.op;return null}(P,function(le){switch(le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==X)throw new Oe(_e.INVALID_ARGUMENT,X===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${X.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Gi(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new ao(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class OM extends Tg{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Oe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new pl(i,s);return function(h,p){if(null===Gp(h)){const y=zp(h);null!==y&&uI(0,y,p.field)}}(r,u),u}(e._query,this.Uu,this.Gu);return new Gi(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new ao(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Gw extends Tg{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new Gi(e.firestore,e.converter,ob(e._query,this.ju,this.Qu))}}class Ww extends Tg{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=Yw(e,this.type,this.Wu,this.zu);return new Gi(e.firestore,e.converter,(i=t,new ao((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class LM extends Tg{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=Yw(e,this.type,this.Wu,this.zu);return new Gi(e.firestore,e.converter,(i=t,new ao((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Yw(n,e,t,r){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof Cg)return function(i,s,u,h,p){if(!h)throw new Oe(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const C of cc(i))if(C.field.isKeyField())y.push(Bp(s,h.key));else{const I=h.data.field(C.field);if(aC(I))throw new Oe(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const x=C.field.canonicalString();throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(I)}return new ff(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=$d(n.firestore);return function(s,u,h,p,y,C){const I=s.explicitOrderBy;if(y.length>I.length)throw new Oe(_e.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let P=0;P<y.length;P++){const U=y[P];if(I[P].field.isKeyField()){if("string"!=typeof U)throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!g_(s)&&-1!==U.indexOf("/"))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const X=s.path.child(an.fromString(U));if(!ot.isDocumentKey(X))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${X}' is not because it contains an odd number of segments.`);const le=new ot(X);x.push(Bp(u,le))}else{const X=Hw(h,p,U);x.push(X)}}return new ff(x,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Fy(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new Oe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g_(e)&&-1!==t.indexOf("/"))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!ot.isDocumentKey(r))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bp(n,new ot(r))}if(t instanceof Sn)return Bp(n,t._key);throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sy(t)}.`)}function Ly(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function uI(n,e,t){if(!t.isEqual(e))throw new Oe(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Qw{convertValue(e,t="none"){switch(vd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return St(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new My(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(s_(e));default:return null}}convertTimestamp(e){const t=hl(e);return new hi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);xt(BC(r));const i=new fl(r.get(1),r.get(3)),s=new ot(r.popFirst(5));return i.isEqual(t)||mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Vy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VM extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}class Xw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$d(e)}set(e,t,r){this._verifyNotCommitted();const i=_l(e,this._firestore),s=Vy(i.converter,t,r),u=bg(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Vr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=_l(e,this._firestore);let u;return u="string"==typeof(t=(0,N.m9)(t))||t instanceof ml?Gd(this._dataReader,"WriteBatch.update",s._key,t,r,i):jw(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,Vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_l(e,this._firestore);return this._mutations=this._mutations.concat(new Td(t._key,Vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _l(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new Oe(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Su extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function mI(n,e,t){n=Yt(n,Sn);const r=Yt(n.firestore,Wn),i=Vy(n.converter,e,t);return Bf(r,[bg($d(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Vr.none())])}function Jw(n,e,t,...r){n=Yt(n,Sn);const i=Yt(n.firestore,Wn),s=$d(i);let u;return u="string"==typeof(e=(0,N.m9)(e))||e instanceof ml?Gd(s,"updateDoc",n._key,e,t,r):jw(s,"updateDoc",n._key,e),Bf(i,[u.toMutation(n._key,Vr.exists(!0))])}function Wd(n,...e){var t,r,i;n=(0,N.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Fw(e[u])||(s=e[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(Fw(e[u])){const I=e[u];e[u]=null===(t=I.next)||void 0===t?void 0:t.bind(I),e[u+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),e[u+2]=null===(i=I.complete)||void 0===i?void 0:i.bind(I)}let p,y,C;if(n instanceof Sn)y=Yt(n.firestore,Wn),C=gf(n._key.path),p={next:I=>{e[u]&&e[u](yI(y,n,I))},error:e[u+1],complete:e[u+2]};else{const I=Yt(n,Gi);y=Yt(I.firestore,Wn),C=I._query;const x=new Su(y);p={next:P=>{e[u]&&e[u](new Iu(y,x,I,P))},error:e[u+1],complete:e[u+2]},lI(n._query)}return function(I,x,P,U){const X=new Ey(U),le=new lw(x,X,P);return I.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return hg(yield Hd(I),le)})),()=>{X.Jc(),I.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return ay(yield Hd(I),le)}))}}(er(y),C,h,p)}function Bf(n,e){return function(t,r){const i=new Lr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function sM(n,e,t){return Ud.apply(this,arguments)}(yield Sw(t),r,i)})),i.promise}(er(n),e)}function yI(n,e,t){const r=t.docs.get(e._key),i=new Su(n);return new Ia(n,i,e._key,r,new zd(t.hasPendingWrites,t.fromCache),e.converter)}class Ig extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$d(e)}get(e){const t=_l(e,this._firestore),r=new VM(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const s=i[0];if(s.isFoundDocument())return new Cg(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Cg(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=_l(e,this._firestore),s=Vy(i.converter,t,r),u=bg(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=_l(e,this._firestore);let u;return u="string"==typeof(t=(0,N.m9)(t))||t instanceof ml?Gd(this._dataReader,"Transaction.update",s._key,t,r,i):jw(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=_l(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_l(e,this._firestore),r=new Su(this._firestore);return super.get(e).then(i=>new Ia(this._firestore,r,t._key,i._document,new zd(!1,!1),t.converter))}}function wI(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function r0(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function EI(){if(!function pA(){return"undefined"!=typeof atob}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){iu=sr.SDK_VERSION,(0,sr._registerComponent)(new ci.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Wn(i,new dA(t.getProvider("auth-internal")),new ba(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,sr.registerVersion)(Qv,"3.4.5",n),(0,sr.registerVersion)(Qv,"3.4.5","esm2017")}();class jf{constructor(e){this._delegate=e}static fromBase64String(e){return EI(),new jf(bc.fromBase64String(e))}static fromUint8Array(e){return r0(),new jf(bc.fromUint8Array(e))}toBase64(){return EI(),this._delegate.toBase64()}toUint8Array(){return r0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Hf(n){return function CI(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class zM{enableIndexedDbPersistence(e,t){return function nI(n,e){qd(n=Yt(n,Wn));const t=er(n),r=n._freezeSettings(),i=new Ew;return iI(t,i,new LT(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rI(n){qd(n=Yt(n,Wn));const e=er(n),t=n._freezeSettings(),r=new Ew;return iI(e,r,new VT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wM(n){if(n._initialized&&!n._terminated)throw new Oe(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Mi.Vt())return Promise.resolve();const i=r+"main";yield Mi.delete(i)}),function(r){return t.apply(this,arguments)})(G_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class By{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&lf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _M(n,e,t,r={}){var i;const s=(n=Yt(n,Ay))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&lf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=di.MOCK_USER;else{u=(0,N.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Oe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new di(p)}n._authCredentials=new nC(new Xv(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function Vw(n){return function pM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield qT(n),t=yield $T(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i.Ko.delete(0),vu(i)}(t)}))}(er(n=Yt(n,Wn)))}(this._delegate)}disableNetwork(){return function CM(n){return function gM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield qT(n),t=yield $T(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const s=Xe(i);s.Ko.add(0),yield Fd(s),s.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(er(n=Yt(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Dy("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function EM(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function mg(n,e){return dw.apply(this,arguments)}(yield Sw(e),t)})),t.promise}(er(n=Yt(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function BM(n,e){return function Aw(n,e){const t=new Ey(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Hd(n),i=t,Xe(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Hd(n),i=t,void Xe(r).Zo.delete(i);var r,i}))}}(er(n=Yt(n,Wn)),Fw(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zd(this,Lf(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new fo(this,Pw(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zi(this,function yM(n,e){if(n=Yt(n,Ay),Rw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(t=e,new ao(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function jM(n,e){return function Mw(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(i=n,Ty(i).then(s=>s.datastore));var i;new hM(n.asyncQueue,r,e,t).run()})),t.promise}(er(n=Yt(n,Wn)),t=>e(new Ig(n,t)))}(this._delegate,t=>e(new TI(this,t)))}batch(){return er(this._delegate),new II(new Xw(this._delegate,e=>Bf(this._delegate,e)))}loadBundle(e){return function TM(n,e){const t=er(n=Yt(n,Wn)),r=new bM;return function ZT(n,e,t,r){const i=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return wy(p,y);if(p instanceof ArrayBuffer)return wy(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new UT(p,u);var p}(t,lg(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function dM(n,e,t){const r=Xe(n);var i;(i=(0,ye.Z)(function*(s,u,h){try{const p=yield u.getMetadata();if(yield function(x,P){const U=Xe(x),X=Kr(P.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",le=>U.Kn.getBundleMetadata(le,P.id)).then(le=>!!le&&le.createTime.compareTo(X)>=0)}(s.localStore,p))return yield u.close(),void h._completeWith((x=p,{taskState:"Success",documentsLoaded:x.totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}));h._updateProgress(pg(p));const y=new eM(p,s.localStore,u.O);let C=yield u.Kc();for(;C;){const x=yield y.lc(C);x&&h._updateProgress(x),C=yield u.Kc()}const I=yield y.complete();yield vc(s,I.ws,void 0),yield function(x,P){const U=Xe(x);return U.persistence.runTransaction("Save bundle","readwrite",X=>U.Kn.saveBundleMetadata(X,P))}(s.localStore,p),h._completeWith(I.progress)}catch(p){lf("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p)}var x}),function(s,u,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Sw(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function IM(n,e){return function xw(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Kn.getNamedQuery(s,r))}(yield Dw(n),e)}))}(er(n=Yt(n,Wn)),e).then(t=>t?new Gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new zi(this,t):null)}}class qf extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new jf(new bc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fo.forKey(t,this.firestore,null)}}class TI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qf(e)}get(e){const t=Mu(e);return this._delegate.get(t).then(r=>new Dg(this._firestore,new Ia(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Mu(e);return r?(wI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Mu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Mu(e);return this._delegate.delete(t),this}}class II{constructor(e){this._delegate=e}set(e,t,r){const i=Mu(e);return r?(wI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Mu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Mu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Au{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Os(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sg(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Au.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Au(e,new qf(e),t),i.set(t,s)),s}}Au.INSTANCES=new WeakMap;class fo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qf(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fo(t,new Sn(t._delegate,r,new ot(e)))}static forKey(e,t,r){return new fo(t,new Sn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zd(this.firestore,Lf(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof Sn&&Nw(this._delegate,e)}set(e,t){t=wI("DocumentReference.set",t);try{return t?mI(this._delegate,e,t):mI(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Jw(this._delegate,e):Jw(this._delegate,e,t,...r)}catch(i){throw ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _I(n){return Bf(Yt(n.firestore,Wn),[new Td(n._key,Vr.none())])}(this._delegate)}onSnapshot(...e){const t=s0(e),r=o0(e,i=>new Dg(this.firestore,new Ia(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Wd(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function hI(n){n=Yt(n,Sn);const e=Yt(n.firestore,Wn),t=er(e),r=new Su(e);return function GT(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,s,u){try{const h=yield function(p,y){const C=Xe(p);return C.persistence.runTransaction("read document","readonly",I=>C.Us.ys(I,y))}(i,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Oe(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Vd(h,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield Dw(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ia(e,r,n._key,i,new zd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function fI(n){n=Yt(n,Sn);const e=Yt(n.firestore,Wn);return zT(er(e),n._key,{source:"server"}).then(t=>yI(e,n,t))}(this._delegate):function dI(n){n=Yt(n,Sn);const e=Yt(n.firestore,Wn);return zT(er(e),n._key).then(t=>yI(e,n,t))}(this._delegate),t.then(r=>new Dg(this.firestore,new Ia(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fo(this.firestore,this._delegate.withConverter(e?Au.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function s0(n){for(const e of n)if("object"==typeof e&&!Hf(e))return e;return{}}function o0(n,e){var t,r;let i;return i=Hf(n[0])?n[0]:Hf(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Uf(this._delegate,e._delegate)}}class Sg extends Dg{data(e){const t=this._delegate.data(e);return function tC(n,e){n||dt()}(void 0!==t),t}}class zi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qf(e)}where(e,t,r){try{return new zi(this.firestore,Du(this._delegate,function Ny(n,e,t){const r=e,i=Tu("where",n);return new Py(i,r,t)}(e,t,r)))}catch(i){throw ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zi(this.firestore,Du(this._delegate,function PM(n,e="asc"){const t=e,r=Tu("orderBy",n);return new OM(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zi(this.firestore,Du(this._delegate,function cI(n){return QT("limit",n),new Gw("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zi(this.firestore,Du(this._delegate,function zw(n){return QT("limitToLast",n),new Gw("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zi(this.firestore,Du(this._delegate,function NM(...n){return new Ww("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zi(this.firestore,Du(this._delegate,function FM(...n){return new Ww("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zi(this.firestore,Du(this._delegate,function Zw(...n){return new LM("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zi(this.firestore,Du(this._delegate,function Kw(...n){return new LM("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return XT(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function pI(n){n=Yt(n,Gi);const e=Yt(n.firestore,Wn),t=er(e),r=new Su(e);return function mM(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,s,u){try{const h=yield ag(i,s,!0),p=new tM(s,h.Ks),y=p.Ic(h.documents),C=p.applyChanges(y,!1);u.resolve(C.snapshot)}catch(h){const p=Vd(h,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield Dw(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Iu(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function gI(n){n=Yt(n,Gi);const e=Yt(n.firestore,Wn),t=er(e),r=new Su(e);return WT(t,n._query,{source:"server"}).then(i=>new Iu(e,r,n,i))}(this._delegate):function UM(n){n=Yt(n,Gi);const e=Yt(n.firestore,Wn),t=er(e),r=new Su(e);return lI(n._query),WT(t,n._query).then(i=>new Iu(e,r,n,i))}(this._delegate),t.then(r=>new jy(this.firestore,new Iu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=s0(e),r=o0(e,i=>new jy(this.firestore,new Iu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Wd(this._delegate,t,r)}withConverter(e){return new zi(this.firestore,this._delegate.withConverter(e?Au.getInstance(this.firestore,e):null))}}class WM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new WM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Sg(this._firestore,r))})}isEqual(e){return Uf(this._delegate,e._delegate)}}class Zd extends zi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fo(this.firestore,e):null}doc(e){try{return new fo(this.firestore,void 0===e?Pw(this._delegate):Pw(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function fs(n,e){const t=Yt(n.firestore,Wn),r=Pw(n),i=Vy(n.converter,e);return Bf(t,[bg($d(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fo(this.firestore,t))}isEqual(e){return Nw(this._delegate,e._delegate)}withConverter(e){return new Zd(this.firestore,this._delegate.withConverter(e?Au.getInstance(this.firestore,e):null))}}function Mu(n){return Yt(n,Sn)}class Hy{constructor(...e){this._delegate=new ml(...e)}static documentId(){return new Hy(On.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof ml&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function HM(){return new Bw("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kd(e)}static delete(){const e=function e0(){return new wg("deleteField")}();return e._methodName="FieldValue.delete",new Kd(e)}static arrayUnion(...e){const t=function vI(...n){return new AM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kd(t)}static arrayRemove(...e){const t=function qM(...n){return new MM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kd(t)}static increment(e){const t=function $M(n){return new xM("increment",n)}(e);return t._methodName="FieldValue.increment",new Kd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZM={Firestore:By,GeoPoint:My,Timestamp:hi,Blob:jf,Transaction:TI,WriteBatch:II,DocumentReference:fo,DocumentSnapshot:Dg,Query:zi,QueryDocumentSnapshot:Sg,QuerySnapshot:jy,CollectionReference:Zd,FieldPath:Hy,FieldValue:Kd,setLogLevel:function eP(n){!function r_(n){sc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function DI(n){(function tP(n,e){n.INTERNAL.registerComponent(new ci.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ZM)))})(n,(e,t)=>new By(e,t,new zM)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(li.Z);var nn=F(7579),yl=F(6451),a0=F(5363),wc=F(8421);function Sr(n,e){return(0,Cn.e)((t,r)=>{let i=null,s=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe(new hn.Q(r,p=>{null==i||i.unsubscribe();let y=0;const C=s++;(0,wc.Xf)(n(p,C)).subscribe(i=new hn.Q(r,I=>r.next(e?e(p,I,C,y++):I),()=>{i=null,h()}))},()=>{u=!0,h()}))})}var nP=F(6063);class rP extends nn.x{constructor(e=1/0,t=1/0,r=nP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)h=p;h&&r.splice(0,h+1)}}}var SI=F(3099);function Ag(n,e,t){var r,i;let s,u=!1;return n&&"object"==typeof n?(s=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,SI.B)({connector:()=>new rP(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}const $f=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ei=F(5698);function l0(n){return(0,Cn.e)((e,t)=>{let r=!1;e.subscribe(new hn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function AI(n=KM){return(0,Cn.e)((e,t)=>{let r=!1;e.subscribe(new hn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function KM(){return new $f}function Ec(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fn((i,s)=>n(i,s,r)):Oo.y,(0,ei.q)(1),t?l0(e):AI(()=>new $f))}var Da=F(576);function c0(n,e){return(0,Da.m)(e)?Sr(()=>n,e):Sr(()=>n)}var qy=F(9468);F(5867);const kI=new Map,d0={activated:!1,tokenObservers:[]},OI={initialized:!1,enabled:!1};function ti(n){return kI.get(n)||d0}function Sa(n,e){kI.set(n,e)}function xg(){return OI}class dP{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function nx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gs=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function f0(n){if(!ti(n).activated)throw gs.create("use-before-activation",{appName:n.name})}function Wy(n,e){return p0.apply(this,arguments)}function p0(){return p0=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,s)}catch(I){throw gs.create("fetch-network-error",{originalErrorMessage:I.message})}if(200!==u.status)throw gs.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(I){throw gs.create("fetch-parse-error",{originalErrorMessage:I.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),C=Date.now();return{token:h.attestationToken,expireTimeMillis:C+y,issuedAtTimeMillis:C}}),p0.apply(this,arguments)}function kg(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Og="firebase-app-check-store";let Pg=null;function VI(){return Pg||(Pg=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(gs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Og,{keyPath:"compositeKey"})}}catch(t){e(gs.create("storage-open",{originalErrorMessage:t.message}))}}),Pg)}function _0(){return _0=(0,ye.Z)(function*(n,e){const r=(yield VI()).transaction(Og,"readwrite"),s=r.objectStore(Og).put({compositeKey:n,value:e});return new Promise((u,h)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var y;h(gs.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),_0.apply(this,arguments)}const Zy=new ui.Yd("@firebase/app-check");function $I(n,e){return(0,N.hl)()?function hP(n,e){return function BI(n,e){return _0.apply(this,arguments)}(function ox(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Zy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GI(){return xg().enabled}function v0(){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,ye.Z)(function*(){const n=xg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Cc.apply(this,arguments)}const b0={error:"UNKNOWN_ERROR"};function w0(n){return N.US.encodeString(JSON.stringify(n),!1)}function Yy(n){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,ye.Z)(function*(n,e=!1){const t=n.app;f0(t);const r=ti(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&C0(p)&&(i=p)}if(!e&&i&&C0(i))return{token:i.token};let h,u=!1;if(GI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Wy(kg(t,yield v0()),n.platformLoggerProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const p=yield r.exchangeTokenPromise;return yield $I(t,p),Sa(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),u=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Zy.warn(p.message):Zy.error(p),s=p}return i?(h={token:i.token},Sa(t,Object.assign(Object.assign({},r),{token:i})),yield $I(t,i)):h=mP(s),u&&ax(t,h),h}),Ng.apply(this,arguments)}function Qy(n,e){const t=ti(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Sa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function E0(n){const{app:e}=n,t=ti(e);let r=t.tokenRefresher;r||(r=function gP(n){const{app:e}=n;return new dP((0,ye.Z)(function*(){let r;if(r=ti(e).token?yield Yy(n,!0):yield Yy(n),r.error)throw r.error}),()=>!0,()=>{const t=ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Sa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ax(n,e){const t=ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function C0(n){return n.expireTimeMillis-Date.now()>0}function mP(n){return{token:w0(b0),error:n}}class _P{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=ti(this.app);for(const t of e)Qy(this.app,t.next);return Promise.resolve()}}const eD="app-check-internal";!function fx(){(0,sr._registerComponent)(new ci.wA("app-check",n=>function yP(n,e){return new _P(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(eD).initialize()})),(0,sr._registerComponent)(new ci.wA(eD,n=>function vP(n){return{getToken:e=>Yy(n,e),addTokenListener:e=>function Fg(n,e,t,r){const{app:i}=n,s=ti(i),u={next:t,error:r,type:e};if(Sa(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&C0(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),E0(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>E0(n))}(n,"INTERNAL",e),removeTokenListener:e=>Qy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,sr.registerVersion)("@firebase/app-check","0.5.3")}();class Jy{constructor(){return(0,Lt.vb)("app-check")}}"undefined"!=typeof window&&window;var E=F(127);const M=new c.OlP("angularfire2.auth.use-emulator"),R=new c.OlP("angularfire2.auth.settings"),V=new c.OlP("angularfire2.auth.tenant-id"),z=new c.OlP("angularfire2.auth.langugage-code"),ne=new c.OlP("angularfire2.auth.use-device-language"),Ce=new c.OlP("angularfire.auth.persistence"),Ue=(n,e,t,r,i,s,u,h)=>(0,kn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[y,C]of Object.entries(u))p.settings[y]=C;return h&&p.setPersistence(h),p},[t,r,i,s,u,h]);let $e=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,I,x,P){const U=new nn.x,X=lt(void 0).pipe((0,a0.Q)(u.outsideAngular),Sr(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,3059)))),(0,ut.U)(()=>(0,kn.on)(t,s,r)),(0,ut.U)(le=>Ue(le,s,h,y,C,I,p,x)),Ag({bufferSize:1,refCount:!1}));if(Gr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=lt(null);else{X.pipe(Ec()).subscribe();const je=X.pipe(Sr(Ze=>Ze.getRedirectResult().then(Wt=>Wt,()=>null)),Lt.iC,Ag({bufferSize:1,refCount:!1})),Ke=X.pipe(Sr(Ze=>new En.y(Wt=>({unsubscribe:s.runOutsideAngular(()=>Ze.onAuthStateChanged(Ln=>Wt.next(Ln),Ln=>Wt.error(Ln),()=>Wt.complete()))})))),Ye=X.pipe(Sr(Ze=>new En.y(Wt=>({unsubscribe:s.runOutsideAngular(()=>Ze.onIdTokenChanged(Ln=>Wt.next(Ln),Ln=>Wt.error(Ln),()=>Wt.complete()))}))));this.authState=je.pipe(c0(Ke),(0,qy.R)(u.outsideAngular),(0,a0.Q)(u.insideAngular)),this.user=je.pipe(c0(Ye),(0,qy.R)(u.outsideAngular),(0,a0.Q)(u.insideAngular)),this.idToken=this.user.pipe(Sr(Ze=>Ze?(0,Rt.D)(Ze.getIdToken()):lt(null))),this.idTokenResult=this.user.pipe(Sr(Ze=>Ze?(0,Rt.D)(Ze.getIdTokenResult()):lt(null))),this.credential=(0,yl.T)(je,U,this.authState.pipe(fn(Ze=>!Ze))).pipe((0,ut.U)(Ze=>(null==Ze?void 0:Ze.user)?Ze:null),(0,qy.R)(u.outsideAngular),(0,a0.Q)(u.insideAngular))}return(0,kn.pX)(this,X,s,{spy:{apply:(le,je,Ke)=>{(le.startsWith("signIn")||le.startsWith("createUser"))&&Ke.then(Ye=>U.next(Ye))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(kn.Dh),c.LFG(kn.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Lt.HU),c.LFG(M,8),c.LFG(R,8),c.LFG(V,8),c.LFG(z,8),c.LFG(ne,8),c.LFG(Ce,8),c.LFG(Jy,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),at=(()=>{class n{constructor(){E.Z.registerVersion("angularfire",Lt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[$e]}),n})();function yt(n,e){return function Re(n,e=rl.z){return new En.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function un(n,e){return yt(n,e).pipe((0,ut.U)(t=>({payload:t,type:"query"})))}function Wi(n,e){return un(n,e).pipe(wi(void 0),ia(),(0,ut.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const p=i.find(C=>C.doc.ref.isEqual(u.ref)),y=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function xu(n,e,t){return Wi(n,t).pipe(ji((r,i)=>function A0(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function M0(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ug(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ug(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ug(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Qs(),(0,ut.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Ug(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function ev(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class tv{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Wi(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ut.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(wi(void 0),ia(),fn(([r,i])=>i.length>0||!r),(0,ut.U)(([r,i])=>i),Lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ev(e);return xu(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(e={}){return un(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Lt.iC)}get(e){return(0,Rt.D)(this.query.get(e)).pipe(Lt.iC)}add(e){return this.ref.add(e)}doc(e){return new nv(this.ref.doc(e),this.afs)}}class nv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=AP(r,t);return new tv(i,s,this.afs)}snapshotChanges(){return function $t(n,e){return yt(n,e).pipe(wi(void 0),ia(),(0,ut.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ut.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Rt.D)(this.ref.get(e)).pipe(Lt.iC)}}class x0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Wi(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),fn(t=>t.length>0),Lt.iC):Wi(this.query,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ev(e);return xu(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(e={}){return un(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Lt.iC)}get(e){return(0,Rt.D)(this.query.get(e)).pipe(Lt.iC)}}const rv=new c.OlP("angularfire2.enableFirestorePersistence"),iv=new c.OlP("angularfire2.firestore.persistenceSettings"),v2=new c.OlP("angularfire2.firestore.settings"),b2=new c.OlP("angularfire2.firestore.use-emulator");function AP(n,e=(t=>t)){return{query:e(n),ref:n}}let iD=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,I,x,P,U,X,le,je,Ke){this.schedulers=p;const Ye=(0,kn.on)(t,h,r),Ze=C;I&&Ue(Ye,h,x,U,X,le,P,je),[this.firestore,this.persistenceEnabled$]=(0,kn.cc)(`${Ye.name}.firestore`,"AngularFirestore",Ye.name,()=>{const Wt=h.runOutsideAngular(()=>Ye.firestore());if(s&&Wt.settings(s),Ze&&Wt.useEmulator(...Ze),i&&!Gr(u)){const Ln=()=>{try{return(0,Rt.D)(Wt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(br){return"undefined"!=typeof console&&console.warn(br),lt(!1)}};return[Wt,h.runOutsideAngular(Ln)]}return[Wt,lt(!1)]},[s,Ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=AP(i,r),h=this.schedulers.ngZone.run(()=>s);return new tv(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new x0(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new nv(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(kn.Dh),c.LFG(kn.xv,8),c.LFG(rv,8),c.LFG(v2,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Lt.HU),c.LFG(iv,8),c.LFG(b2,8),c.LFG($e,8),c.LFG(M,8),c.LFG(R,8),c.LFG(V,8),c.LFG(z,8),c.LFG(ne,8),c.LFG(Ce,8),c.LFG(Jy,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),w2=(()=>{class n{constructor(){E.Z.registerVersion("angularfire",Lt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:rv,useValue:!0},{provide:iv,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[iD]}),n})();function gx(n,e=rl.z){return(0,Cn.e)((t,r)=>{let i=null,s=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=u+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);h()}t.subscribe(new hn.Q(r,y=>{s=y,u=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}const MP="firebasestorage.googleapis.com",xP="storageBucket";class Br extends N.ZR{constructor(e,t){super(mx(e),`Firebase Storage: ${t} (${mx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Br.prototype)}_codeEquals(e){return mx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function mx(n){return"storage/"+n}function _x(){return new Br("unknown","An unknown error occurred, please check the error payload for server response.")}function RP(){return new Br("canceled","User canceled the upload/download.")}function kP(){return new Br("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function sv(n){return new Br("invalid-argument",n)}function OP(){return new Br("app-deleted","The Firebase app was deleted.")}function PP(n){return new Br("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function R0(n,e){return new Br("invalid-format","String does not match format '"+n+"': "+e)}function k0(n){throw new Br("internal-error","Internal error: "+n)}class Ps{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ps.makeFromUrl(e,t)}catch(i){return new Ps(e,"")}if(""===r.path)return r;throw function R2(n){return new Br("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ze){Ze.path_=decodeURIComponent(Ze.path)}const I=t.replace(/[.]/g,"\\."),Ye=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Ze){"/"===Ze.path.charAt(Ze.path.length-1)&&(Ze.path_=Ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===MP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ze=0;Ze<Ye.length;Ze++){const Wt=Ye[Ze],Ln=Wt.regex.exec(e);if(Ln){let bo=Ln[Wt.indices.path];bo||(bo=""),r=new Ps(Ln[Wt.indices.bucket],bo),Wt.postModify(r);break}}if(null==r)throw function x2(n){return new Br("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class N2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sD(n){return"string"==typeof n||n instanceof String}function NP(n){return yx()&&n instanceof Blob}function yx(){return"undefined"!=typeof Blob}function vx(n,e,t,r){if(r<e)throw sv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw sv(`Invalid value for '${n}'. Expected ${t} or less.`)}function Yd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function FP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Gf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Gf||(Gf={})),Gf))();class j2{constructor(e,t,r,i,s,u,h,p,y,C,I){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,P)=>{this.resolve_=x,this.reject_=P,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function V2(n){return void 0!==n}(p)?s():s(p)}catch(p){u(p)}else if(null!==h){const p=_x();p.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,p):p)}else u(i.canceled?this.appDelete_?OP():RP():function M2(){return new Br("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new oD(!1,null,!0)):this.backoffId_=function F2(n,e,t){let r=1,i=null,s=null,u=!1,h=0;function p(){return 2===h}let y=!1;function C(...le){y||(y=!0,e.apply(null,le))}function I(le){i=setTimeout(()=>{i=null,n(P,p())},le)}function x(){s&&clearTimeout(s)}function P(le,...je){if(y)return void x();if(le)return x(),void C.call(null,le,...je);if(p()||u)return x(),void C.call(null,le,...je);let Ye;r<64&&(r*=2),1===h?(h=2,Ye=0):Ye=1e3*(r+Math.random()),I(Ye)}let U=!1;function X(le){U||(U=!0,x(),!y&&(null!==i?(le||(h=2),clearTimeout(i),I(0)):le||(h=1)))}return I(0),s=setTimeout(()=>{u=!0,X(!0)},t),X}((r,i)=>{if(i)return void r(!1,new oD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const h=s.getErrorCode()===Gf.NO_ERROR,p=s.getStatus();if(!h||this.isRetryStatusCode_(p)){const C=s.getErrorCode()===Gf.ABORT;return void r(!1,new oD(!1,null,C))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new oD(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function L2(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class oD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Z2(...n){const e=function W2(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(yx())return new Blob(n);throw new Br("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Aa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bx{constructor(e,t){this.data=e,this.contentType=t||null}}function wx(n,e){switch(n){case Aa.RAW:return new bx(LP(e));case Aa.BASE64:case Aa.BASE64URL:return new bx(VP(n,e));case Aa.DATA_URL:return new bx(function X2(n){const e=new UP(n);return e.base64?VP(Aa.BASE64,e.rest):function Q2(n){let e;try{e=decodeURIComponent(n)}catch(t){throw R0(Aa.DATA_URL,"Malformed data URL.")}return LP(e)}(e.rest)}(e),function J2(n){return new UP(n).contentType}(e))}throw _x()}function LP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function VP(n,e){switch(n){case Aa.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw R0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Aa.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw R0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Y2(n){return atob(n)}(e)}catch(i){throw R0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class UP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw R0(Aa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function ej(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ru{constructor(e,t){let r=0,i="";NP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(NP(this.data_)){const i=function K2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ru(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ru(r,!0)}}static getBlob(...e){if(yx()){const t=e.map(r=>r instanceof Ru?r.data_:r);return new Ru(Z2.apply(null,t))}{const t=e.map(u=>sD(u)?wx(Aa.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[s++]=u[h]}),new Ru(i,!0)}}uploadData(){return this.data_}}function Ex(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function B2(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function BP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function rj(n,e){return e}class po{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||rj}}let aD=null;function O0(){if(aD)return aD;const n=[];n.push(new po("bucket")),n.push(new po("generation")),n.push(new po("metageneration")),n.push(new po("name","fullPath",!0));const t=new po("name");t.xform=function e(s,u){return function ij(n){return!sD(n)||n.length<2?n:BP(n)}(u)},n.push(t);const i=new po("size");return i.xform=function r(s,u){return void 0!==u?Number(u):u},n.push(i),n.push(new po("timeCreated")),n.push(new po("updated")),n.push(new po("md5Hash",null,!0)),n.push(new po("cacheControl",null,!0)),n.push(new po("contentDisposition",null,!0)),n.push(new po("contentEncoding",null,!0)),n.push(new po("contentLanguage",null,!0)),n.push(new po("contentType",null,!0)),n.push(new po("metadata","customMetadata",!0)),aD=n,aD}function jP(n,e,t){const r=Ex(e);return null===r?null:function oj(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const u=t[s];r[u.local]=u.xform(r,e[u.server])}return function sj(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Ps(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function Cx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const HP="prefixes";class ku{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ou(n){if(!n)throw _x()}function lD(n,e){return function t(r,i){const s=jP(n,i,e);return Ou(null!==s),s}}function ov(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function S2(){return new Br("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function D2(){return new Br("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function I2(n){return new Br("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function A2(n){return new Br("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function P0(n){const e=ov(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function T2(n){return new Br("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function $P(n,e,t){const i=Yd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new ku(i,"GET",lD(n,t),u);return h.errorHandler=P0(e),h}function hj(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=Yd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,C=new ku(h,"GET",function uj(n,e){return function t(r,i){const s=function cj(n,e,t){const r=Ex(t);return null===r?null:function lj(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[HP])for(const i of t[HP]){const s=i.replace(/\/$/,""),u=n._makeStorageReference(new Ps(e,s));r.prefixes.push(u)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Ps(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Ou(null!==s),s}}(n,e.bucket),y);return C.urlParams=s,C.errorHandler=ov(e),C}function zP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function mj(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class cD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Tx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Ou(!1)}return Ou(!!t&&-1!==(e||["active"]).indexOf(t)),t}const bj={STATE_CHANGED:"state_changed"},go={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ix(n){switch(n){case"running":case"pausing":case"canceling":return go.RUNNING;case"paused":return go.PAUSED;case"success":return go.SUCCESS;case"canceled":return go.CANCELED;default:return go.ERROR}}class wj{constructor(e,t,r){if(function U2(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function av(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Cj extends class Ej{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw k0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw k0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw k0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw k0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw k0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Tc(){return new Cj}class YP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=O0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function _j(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u=zP(e,r,i),h={name:u.fullPath},p=Yd(s,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},I=Cx(u,t),U=new ku(p,"POST",function P(X){let le;Tx(X);try{le=X.getResponseHeader("X-Goog-Upload-URL")}catch(je){Ou(!1)}return Ou(sD(le)),le},n.maxUploadRetryTime);return U.urlParams=h,U.headers=C,U.body=I,U.errorHandler=ov(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Tc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function yj(n,e,t,r){const p=new ku(t,"POST",function s(y){const C=Tx(y,["active","final"]);let I=null;try{I=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(P){Ou(!1)}I||Ou(!1);const x=Number(I);return Ou(!isNaN(x)),new cD(x,r.size(),"final"===C)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=ov(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Tc,t,r);this._request=s,s.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new cD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let u;try{u=function vj(n,e,t,r,i,s,u,h){const p=new cD(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function O2(){return new Br("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let C=y;i>0&&(C=Math.min(C,i));const I=p.current,U={"X-Goog-Upload-Command":C===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},X=r.slice(I,I+C);if(null===X)throw kP();const Ye=new ku(t,"POST",function le(Ze,Wt){const Ln=Tx(Ze,["active","final"]),br=p.current+C,bo=r.size();let Na;return Na="final"===Ln?lD(e,s)(Ze,Wt):null,new cD(br,bo,"final"===Ln,Na)},e.maxUploadRetryTime);return Ye.headers=U,Ye.body=X.uploadData(),Ye.progressCallback=h||null,Ye.errorHandler=ov(n),Ye}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Tc,i,s);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=$P(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Tc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function WP(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let Ye="";for(let Ze=0;Ze<2;Ze++)Ye+=Math.random().toString().slice(2);return Ye}();u["Content-Type"]="multipart/related; boundary="+p;const y=zP(e,r,i),C=Cx(y,t),P=Ru.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===P)throw kP();const U={name:y.fullPath},X=Yd(s,n.host,n._protocol),je=n.maxUploadRetryTime,Ke=new ku(X,"POST",lD(n,t),je);return Ke.urlParams=U,Ke.headers=u,Ke.body=P.uploadData(),Ke.errorHandler=ov(e),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Tc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=RP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ix(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new wj(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ix(this._state)){case go.SUCCESS:av(this._resolve.bind(null,this.snapshot))();break;case go.CANCELED:case go.ERROR:av(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ix(this._state)){case go.RUNNING:case go.PAUSED:e.next&&av(e.next.bind(e,this.snapshot))();break;case go.SUCCESS:e.complete&&av(e.complete.bind(e))();break;default:e.error&&av(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Bg{constructor(e,t){this._service=e,this._location=t instanceof Ps?t:Ps.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bg(e,t)}get root(){const e=new Ps(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BP(this._location.path)}get storage(){return this._service}get parent(){const e=function tj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ps(this._location.bucket,e);return new Bg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw PP(e)}}function XP(n,e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,ye.Z)(function*(n,e,t){const i=yield JP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield XP(n,e,i.nextPageToken))}),Dx.apply(this,arguments)}function JP(n,e){null!=e&&"number"==typeof e.maxResults&&vx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=hj(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Tc)}function Nj(n){n._throwIfRoot("getDownloadURL");const e=function fj(n,e,t){const i=Yd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new ku(i,"GET",function dj(n,e){return function t(r,i){const s=jP(n,i,e);return Ou(null!==s),function aj(n,e,t,r){const i=Ex(e);if(null===i||!sD(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(y=>{const I=n.fullPath;return Yd("/b/"+u(n.bucket)+"/o/"+u(I),t,r)+FP({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=P0(e),h}(n.storage,n._location,O0());return n.storage.makeRequestWithTokens(e,Tc).then(t=>{if(null===t)throw function P2(){return new Br("no-download-url","The given file does not have any download URLs.")}();return t})}function eN(n,e){const t=function nj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ps(n._location.bucket,t);return new Bg(n.storage,r)}function tN(n,e){if(n instanceof Sx){const t=n;if(null==t._bucket)throw function k2(){return new Br("no-default-bucket","No default bucket found. Did you set the '"+xP+"' property when initializing the app?")}();const r=new Bg(t,t._bucket);return null!=e?tN(r,e):r}return void 0!==e?eN(n,e):n}function Uj(n,e){if(e&&function Lj(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Sx)return function Vj(n,e){return new Bg(n,e)}(n,e);throw sv("To use ref(service, url), the first argument must be a Storage instance.")}return tN(n,e)}function nN(n,e){const t=null==e?void 0:e[xP];return null==t?null:Ps.makeFromBucketSpec(t,n)}class Sx{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=MP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ps.makeFromBucketSpec(i,this._host):nN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ps.makeFromBucketSpec(this._url,e):nN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new N2(OP());{const s=function z2(n,e,t,r,i,s){const u=FP(n.urlParams),h=n.url+u,p=Object.assign({},n.headers);return function $2(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function H2(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function q2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(p,s),function G2(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new j2(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const rN="@firebase/storage";function oN(n,e){return Uj(n=(0,N.m9)(n),e)}function Yj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Sx(t,r,i,e,sr.SDK_VERSION)}!function Qj(){(0,sr._registerComponent)(new ci.wA("storage",Yj,"PUBLIC").setMultipleInstances(!0)),(0,sr.registerVersion)(rN,"0.9.2",""),(0,sr.registerVersion)(rN,"0.9.2","esm2017")}();class uD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class aN{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new uD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new uD(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?u=>t(new uD(u,this,this._ref)):{next:t.next?u=>t.next(new uD(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class lN{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Qd(e,this._service))}get items(){return this._delegate.items.map(e=>new Qd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Qd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Zj(n,e){return eN(n,e)}(this._delegate,e);return new Qd(t,this.storage)}get root(){return new Qd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Qd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new aN(function jj(n,e,t){return function xj(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new YP(n,new Ru(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Aa.RAW,r){this._throwIfRoot("putString");const i=wx(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new aN(new YP(this._delegate,new Ru(i.data,!0),s),this)}listAll(){return function Gj(n){return function kj(n){const e={prefixes:[],items:[]};return XP(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new lN(e,this.storage))}list(e){return function $j(n,e){return JP(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new lN(t,this.storage))}getMetadata(){return function Hj(n){return function Oj(n){n._throwIfRoot("getMetadata");const e=$P(n.storage,n._location,O0());return n.storage.makeRequestWithTokens(e,Tc)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function qj(n,e){return function Pj(n,e){n._throwIfRoot("updateMetadata");const t=function pj(n,e,t,r){const s=Yd(e.fullServerUrl(),n.host,n._protocol),h=Cx(t,r),y=n.maxOperationRetryTime,C=new ku(s,"PATCH",lD(n,r),y);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=h,C.errorHandler=P0(e),C}(n.storage,n._location,e,O0());return n.storage.makeRequestWithTokens(t,Tc)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function zj(n){return Nj(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Wj(n){return function Fj(n){n._throwIfRoot("deleteObject");const e=function gj(n,e){const r=Yd(e.fullServerUrl(),n.host,n._protocol),h=new ku(r,"DELETE",function u(p,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=P0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Tc)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw PP(e)}}class cN{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(uN(e))throw sv("ref() expected a child path but got a URL, use refFromURL instead.");return new Qd(oN(this._delegate,e),this)}refFromURL(e){if(!uN(e))throw sv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ps.makeFromUrl(e,this._delegate.host)}catch(t){throw sv("refFromUrl() expected a valid full URL but got an invalid one.")}return new Qd(oN(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Kj(n,e,t,r={}){!function Bj(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,N.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function uN(n){return/^[A-Za-z]+:\/\//.test(n)}function tH(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new cN(t,r)}function dN(n){const e=function rH(n){return new En.y(e=>{const t=u=>e.next(u);t(n.snapshot);const s=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){s()}}).pipe(gx(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ut.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function dD(n){return{getDownloadURL:()=>lt(void 0).pipe(Lt.fc,Sr(()=>n.getDownloadURL()),Lt.iC),getMetadata:()=>lt(void 0).pipe(Lt.fc,Sr(()=>n.getMetadata()),Lt.iC),delete:()=>(0,Rt.D)(n.delete()),child:e=>dD(n.child(e)),updateMetadata:e=>(0,Rt.D)(n.updateMetadata(e)),put:(e,t)=>dN(n.put(e,t)),putString:(e,t,r)=>dN(n.putString(e,t,r)),list:e=>(0,Rt.D)(n.list(e)),listAll:()=>(0,Rt.D)(n.listAll())}}!function nH(n){const e={TaskState:go,TaskEvent:bj,StringFormat:Aa,Storage:cN,Reference:Qd};n.INTERNAL.registerComponent(new ci.wA("storage-compat",tH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(li.Z);const iH=new c.OlP("angularfire2.storageBucket"),sH=new c.OlP("angularfire2.storage.maxUploadRetryTime"),oH=new c.OlP("angularfire2.storage.maxOperationRetryTime"),aH=new c.OlP("angularfire2.storage.use-emulator");let hN=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,I){const x=(0,kn.on)(t,u,r);this.storage=(0,kn.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const P=u.runOutsideAngular(()=>x.storage(i||void 0)),U=C;return U&&P.useEmulator(...U),p&&P.setMaxUploadRetryTime(p),y&&P.setMaxOperationRetryTime(y),P},[p,y])}ref(t){return dD(this.storage.ref(t))}refFromURL(t){return dD(this.storage.refFromURL(t))}upload(t,r,i){return dD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(kn.Dh),c.LFG(kn.xv,8),c.LFG(iH,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Lt.HU),c.LFG(sH,8),c.LFG(oH,8),c.LFG(aH,8),c.LFG(Jy,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),cH=(()=>{class n{constructor(){E.Z.registerVersion("angularfire",Lt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[hN],imports:[lH]}),n})();var Ax=F(5032);const fN="@firebase/database";let Mx="";function gN(n){Mx=n}class hH{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class fH{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const mN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hH(e)}}catch(e){}return new fH},jg=mN("localStorage"),xx=mN("sessionStorage"),lv=new ui.Yd("@firebase/database"),_N=function(){let n=1;return function(){return n++}}(),yN=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const r=t.digest();return N.US.encodeByteArray(r)},N0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=N0.apply(null,r):e+="object"==typeof r?(0,N.Pz)(r):r,e+=" "}return e};let Hg=null,vN=!0;const bN=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(lv.logLevel=ui.in.VERBOSE,Hg=lv.log.bind(lv),e&&xx.set("logging_enabled",!0)):"function"==typeof n?Hg=n:(Hg=null,xx.remove("logging_enabled"))},Zi=function(...n){if(!0===vN&&(vN=!1,null===Hg&&!0===xx.get("logging_enabled")&&bN(!0)),Hg){const e=N0.apply(null,n);Hg(e)}},F0=function(n){return function(...e){Zi(n,...e)}},Rx=function(...n){const e="FIREBASE INTERNAL ERROR: "+N0(...n);lv.error(e)},Pu=function(...n){const e=`FIREBASE FATAL ERROR: ${N0(...n)}`;throw lv.error(e),new Error(e)},mo=function(...n){const e="FIREBASE WARNING: "+N0(...n);lv.warn(e)},hD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Xd="[MIN_NAME]",Nu="[MAX_NAME]",qg=function(n,e){if(n===e)return 0;if(n===Xd||e===Nu)return-1;if(e===Xd||n===Nu)return 1;{const t=fD(n),r=fD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},mH=function(n,e){return n===e?0:n<e?-1:1},L0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Pz)(e))},kx=function(n){if("object"!=typeof n||null===n)return(0,N.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.Pz)(e[r]),t+=":",t+=kx(n[e[r]]);return t+="}",t},wN=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ki(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const EN=function(n){(0,N.hu)(!hD(n),"Invalid JSON number");const r=1023;let i,s,u,h,p;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const C=y.join("");let I="";for(p=0;p<64;p+=8){let x=parseInt(C.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),I+=x}return I.toLowerCase()},bH=new RegExp("^-?(0*)\\d{1,10}$"),CN=-2147483648,Ox=2147483647,fD=function(n){if(bH.test(n)){const e=Number(n);if(e>=CN&&e<=Ox)return e}return null},cv=function(n){try{n()}catch(e){setTimeout(()=>{throw mo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class EH{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){mo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class CH{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Zi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mo(e)}}let U0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const AN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xN="websocket",RN="long_polling";class Nx{constructor(e,t,r,i,s=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function kN(n,e,t){let r;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===xN)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==RN)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function IH(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ki(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class DH{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const Fx={},Lx={};function Vx(n){const e=n.toString();return Fx[e]||(Fx[e]=new DH),Fx[e]}class AH{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&cv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uv{constructor(e,t,r,i,s,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=F0(e),this.stats_=Vx(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),kN(t,RN,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new AH(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ux((...s)=>{const[u,h,p,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&AN.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uv.forceAllow_=!0}static forceDisallow(){uv.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!uv.forceAllow_&&(uv.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.h$)(t),i=wN(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ux{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=_N(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ux.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Zi("frame writing exception"),h.stack&&Zi(h.stack),Zi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Zi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Zi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let B0=null;"undefined"!=typeof MozWebSocket?B0=MozWebSocket:"undefined"!=typeof WebSocket&&(B0=WebSocket);let j0=(()=>{class n{constructor(t,r,i,s,u,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=F0(this.connId),this.stats_=Vx(r),this.connURL=n.connectionURL_(r,h,p,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s){const u={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&AN.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),s&&(u.ac=s),kN(t,xN,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jg.set("previous_websocket_failure",!0);try{if((0,N.Yr)()){const s={headers:{"User-Agent":`Firebase/5/${Mx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(s.proxy={origin:h}),this.mySock=new B0(this.connURL,[],s)}else this.mySock=new B0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==B0&&!n.forceDisallow_}static previouslyFailed(){return jg.isInMemoryStorage||!0===jg.get("previous_websocket_failure")}markConnectionHealthy(){jg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=wN(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Bx{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[uv,j0]}initTransports_(e){const t=j0&&j0.isAvailable();let r=t&&!j0.previouslyFailed();if(e.webSocketOnly&&(t||mo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[j0];else{const i=this.transports_=[];for(const s of Bx.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class GN{constructor(e,t,r,i,s,u,h,p,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=F0("c:"+this.id+":"),this.transportManager_=new Bx(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=L0("t",e),r=L0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=L0("t",e),r=L0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=L0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Rx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&mo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),V0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class zN{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class WN{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class gD extends WN{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new gD}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function wn(){return new Pn("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function zf(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pn(n.pieces_,e)}function Hx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function H0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function YN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pn(e,0)}function yr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Pn(t,0)}function zt(n){return n.pieceNum_>=n.pieces_.length}function _o(n,e){const t=Gt(n),r=Gt(e);if(null===t)return e;if(t===r)return _o(Zn(n),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function YH(n,e){const t=H0(n,0),r=H0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=qg(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function qx(n,e){if(zf(n)!==zf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function vl(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(zf(n)>zf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class QH{constructor(e,t){this.errorPrefix_=t,this.parts_=H0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.ug)(this.parts_[r]);QN(this)}}function QN(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$g(n))}function $g(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class $x extends WN{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new $x}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const q0=1e3;let _D,Gg=(()=>{class n extends zN{constructor(t,r,i,s,u,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=F0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=q0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$x.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&gD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,N.Pz)(u)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new N.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||s!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,C=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(i,s),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const i=(0,N.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();mo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,h=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Rx("Unrecognized action received from server: "+(0,N.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=q0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=q0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=q0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const C=function(){y?y.close():(p=!0,s())};t.realtime_={close:C,sendRequest:function(P){(0,N.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,U]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?Zi("getToken() completed but was canceled"):(Zi("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=U&&U.token,y=new GN(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,X=>{mo(X+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(P){t.log_("Failed to get token: "+P),p||(t.repoInfo_.nodeAdmin&&mo(P),C())}}})()}interrupt(t){Zi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=q0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>kx(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Pn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Zi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Zi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Mx.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=gD.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Qt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Qt(e,t)}}class mD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Qt(Xd,e),i=new Qt(Xd,t);return 0!==this.compare(r,i)}minPost(){return Qt.MIN}}class e1 extends mD{static get __EMPTY_NODE(){return _D}static set __EMPTY_NODE(e){_D=e}compare(e,t){return qg(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Qt.MIN}maxPost(){return new Qt(Nu,_D)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Qt(e,_D)}toString(){return".key"}}const Fu=new e1;class yD{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let zx,Ic=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:Zo.EMPTY_NODE,this.right=null!=u?u:Zo.EMPTY_NODE}copy(t,r,i,s,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Zo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Zo{constructor(e,t=Zo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Zo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ic.BLACK,null,null))}remove(e){return new Zo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ic.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new yD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new yD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new yD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new yD(this.root_,null,this.comparator_,!0,e)}}function oq(n,e){return qg(n.name,e.name)}function Gx(n,e){return qg(n,e)}Zo.EMPTY_NODE=new class sq{copy(e,t,r,i,s){return this}insert(e,t,r){return new Ic(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const t1=function(n){return"number"==typeof n?"number:"+EN(n):"string:"+n},n1=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===zx||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===zx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let r1,s1,o1,dv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),n1(this.priorityNode_)}static set __childrenNodeConstructor(t){r1=t}static get __childrenNodeConstructor(){return r1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return zt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Gt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.hu)(".priority"!==i||1===zf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+t1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?EN(this.value_):this.value_,this.lazyHash_=yN(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.hu)(s>=0,"Unknown leaf type: "+r),(0,N.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const tr=new class uq extends mD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?qg(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Qt.MIN}maxPost(){return new Qt(Nu,new dv("[PRIORITY-POST]",o1))}makePost(e,t){const r=s1(e);return new Qt(t,new dv("[PRIORITY-POST]",r))}toString(){return".priority"}},dq=Math.log(2);class hq{constructor(e){this.count=parseInt(Math.log(e+1)/dq,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vD=function(n,e,t,r){n.sort(e);const i=function(p,y){const C=y-p;let I,x;if(0===C)return null;if(1===C)return I=n[p],x=t?t(I):I,new Ic(x,I.node,Ic.BLACK,null,null);{const P=parseInt(C/2,10)+p,U=i(p,P),X=i(P+1,y);return I=n[P],x=t?t(I):I,new Ic(x,I.node,Ic.BLACK,U,X)}},h=function(p){let y=null,C=null,I=n.length;const x=function(U,X){const le=I-U,je=I;I-=U;const Ke=i(le+1,je),Ye=n[le],Ze=t?t(Ye):Ye;P(new Ic(Ze,Ye.node,X,null,Ke))},P=function(U){y?(y.left=U,y=U):(C=U,y=U)};for(let U=0;U<p.count;++U){const X=p.nextBitIsOne(),le=Math.pow(2,p.count-(U+1));X?x(le,Ic.BLACK):(x(le,Ic.BLACK),x(le,Ic.RED))}return C}(new hq(n.length));return new Zo(r||e,h)};let Wx;const hv={};class Jd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(hv&&tr,"ChildrenNode.ts has not been loaded"),Wx=Wx||new Jd({".priority":hv},{".priority":tr}),Wx}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Zo?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==Fu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Qt.Wrap);let h,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();h=i?vD(r,e.getCompare()):hv;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const C=Object.assign({},this.indexes_);return C[p]=h,new Jd(C,y)}addToIndexes(e,t){const r=(0,N.UI)(this.indexes_,(i,s)=>{const u=(0,N.DV)(this.indexSet_,s);if((0,N.hu)(u,"Missing index implementation for "+s),i===hv){if(u.isDefinedOn(e.node)){const h=[],p=t.getIterator(Qt.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),vD(h,u.getCompare())}return hv}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new Qt(e.name,h))),p.insert(e,e.node)}});return new Jd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.UI)(this.indexes_,i=>{if(i===hv)return i;{const s=t.get(e.name);return s?i.remove(new Qt(e.name,s)):i}});return new Jd(r,this.indexSet_)}}let $0,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&n1(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $0||($0=new n(new Zo(Gx),null,Jd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$0:r}}getChild(t){const r=Gt(t);return null===r?this:this.getImmediateChild(r).getChild(Zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Qt(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?$0:this.priorityNode_;return new n(s,h,u)}}updateChild(t,r){const i=Gt(t);if(null===i)return r;{(0,N.hu)(".priority"!==Gt(t)||1===zf(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Zn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(tr,(h,p)=>{r[h]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!t&&u&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+t1(this.getPriority().val())+":"),this.forEachChild(tr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":yN(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new Qt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Qt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Qt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Qt.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Qt.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===G0?-1:0}withIndex(t){if(t===Fu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(tr),s=r.getIterator(tr);let u=i.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===Fu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const G0=new class fq extends Vt{constructor(){super(new Zo(Gx),Vt.EMPTY_NODE,Jd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function Ar(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new dv(n,Ar(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return Ki(n,(r,i)=>{if((0,N.r3)(n,r)&&"."!==r.substring(0,1)){const s=Ar(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Ar(e))}{const t=[];let r=!1;if(Ki(n,(u,h)=>{if("."!==u.substring(0,1)){const p=Ar(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new Qt(u,p)))}}),0===t.length)return Vt.EMPTY_NODE;const s=vD(t,oq,u=>u.name,Gx);if(r){const u=vD(t,tr.getCompare());return new Vt(s,Ar(e),new Jd({".priority":u},{".priority":tr}))}return new Vt(s,Ar(e),Jd.Default)}}Object.defineProperties(Qt,{MIN:{value:new Qt(Xd,Vt.EMPTY_NODE)},MAX:{value:new Qt(Nu,G0)}}),e1.__EMPTY_NODE=Vt.EMPTY_NODE,dv.__childrenNodeConstructor=Vt,function aq(n){zx=n}(G0),function cq(n){o1=n}(G0),function lq(n){s1=n}(Ar);class Zx extends mD{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!zt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?qg(e.name,t.name):s}makePost(e,t){const r=Ar(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Qt(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,G0);return new Qt(Nu,e)}toString(){return H0(this.indexPath_,0).join("/")}}const Kx=new class gq extends mD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?qg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Qt.MIN}maxPost(){return Qt.MAX}makePost(e,t){const r=Ar(e);return new Qt(t,r)}toString(){return".value"}},fv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mq=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=fv.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=fv.charAt(e[i]);return(0,N.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),c1=function(n){if(n===""+Ox)return"-";const e=fD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Nu;const s=fv.charAt(fv.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},u1=function(n){if(n===""+CN)return Xd;const e=fD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Ox:(delete t[t.length-1],t.join("")):(t[t.length-1]=fv.charAt(fv.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function d1(n){return{type:"value",snapshotNode:n}}function pv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function z0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function W0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Qx{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(z0(t,h)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(pv(t,r)):u.trackChildChange(W0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(tr,(i,s)=>{t.hasChild(i)||r.trackChildChange(z0(i,s))}),t.isLeafNode()||t.forEachChild(tr,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(W0(i,s,u))}else r.trackChildChange(pv(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Z0{constructor(e){this.indexedFilter_=new Qx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Z0.getStartPost_(e),this.endPost_=Z0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,u){return this.matches(new Qt(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const s=this;return t.forEachChild(tr,(u,h)=>{s.matches(new Qt(u,h))||(i=i.updateImmediateChild(u,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class yq{constructor(e){this.rangedFilter_=new Z0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new Qt(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Vt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();h=(x,P)=>I(P,x)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,C=!1;for(;p.hasNext();){const I=p.getNext();!C&&h(s,I)<=0&&(C=!0),C&&y<this.limit_&&h(I,u)<=0?y++:i=i.updateImmediateChild(I.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const I=this.index_.getCompare();u=(x,P)=>I(P,x)}else u=this.index_.getCompare();const h=e;(0,N.hu)(h.numChildren()===this.limit_,"");const p=new Qt(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(p);if(h.hasChild(t)){const I=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const P=null==x?1:u(x,p);if(C&&!r.isEmpty()&&P>=0)return null!=s&&s.trackChildChange(W0(t,r,I)),h.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(z0(t,I));const X=h.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=s&&s.trackChildChange(pv(x.name,x.node)),X.updateImmediateChild(x.name,x.node)):X}}return r.isEmpty()?e:C&&u(y,p)>=0?(null!=s&&(s.trackChildChange(z0(y.name,y.node)),s.trackChildChange(pv(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Vt.EMPTY_NODE)):e}}class bD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tr}copy(){const e=new bD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Xx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Jx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function wD(n,e){const t=n.copy();return t.index_=e,t}function h1(n){const e={};if(n.isDefault())return e;let t;return n.index_===tr?t="$priority":n.index_===Kx?t="$value":n.index_===Fu?t="$key":((0,N.hu)(n.index_ instanceof Zx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Pz)(t),n.startSet_&&(e.startAt=(0,N.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,N.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,N.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,N.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function f1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==tr&&(e.i=n.index_.toString()),e}class ED extends zN{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=F0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=ED.getListenId_(e,r),h={};this.listens_[u]=h;const p=h1(e._queryParams);this.restRequest_(s+".json",p,(y,C)=>{let I=C;if(404===y&&(I=null,y=null),null===y&&this.onDataUpdate_(s,I,!1,r),(0,N.DV)(this.listens_,u)===h){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(x,null)}})}unlisten(e,t){const r=ED.getListenId_(e,t);delete this.listens_[r]}get(e){const t=h1(e._queryParams),r=e._path.toString(),i=new N.BH;return this.restRequest_(r+".json",t,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,N.cI)(h.responseText)}catch(y){mo("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&mo("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class Tq{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function CD(){return{value:null,children:new Map}}function gv(n,e,t){if(zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Gt(e);n.children.has(r)||n.children.set(r,CD()),gv(n.children.get(r),e=Zn(e),t)}}function eR(n,e){if(zt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(tr,(r,i)=>{gv(n,new Pn(r),i)}),eR(n,e)}}if(n.children.size>0){const t=Gt(e);return e=Zn(e),n.children.has(t)&&eR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function tR(n,e,t){null!==n.value?t(e,n.value):function Iq(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tR(i,new Pn(e.toString()+"/"+r),t)})}class Dq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ki(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Mq{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Dq(e);const r=1e4+2e4*Math.random();V0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ki(e,(i,s)=>{s>0&&(0,N.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),V0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var bl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(bl||(bl={})),bl))();function iR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class TD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=bl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(zt(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pn(e));return new TD(wn(),t,this.revert)}}return(0,N.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new TD(Zn(this.path),this.affectedTree,this.revert)}}class K0{constructor(e,t){this.source=e,this.path=t,this.type=bl.LISTEN_COMPLETE}operationForChild(e){return zt(this.path)?new K0(this.source,wn()):new K0(this.source,Zn(this.path))}}class zg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=bl.OVERWRITE}operationForChild(e){return zt(this.path)?new zg(this.source,wn(),this.snap.getImmediateChild(e)):new zg(this.source,Zn(this.path),this.snap)}}class mv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=bl.MERGE}operationForChild(e){if(zt(this.path)){const t=this.children.subtree(new Pn(e));return t.isEmpty()?null:t.value?new zg(this.source,wn(),t.value):new mv(this.source,wn(),t)}return(0,N.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new mv(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Wf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class xq{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Y0(n,e,t,r,i,s){const u=r.filter(h=>h.type===t);u.sort((h,p)=>function Oq(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const r=new Qt(e.childName,e.snapshotNode),i=new Qt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),u.forEach(h=>{const p=function kq(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function ID(n,e){return{eventCache:n,serverCache:e}}function Q0(n,e,t,r){return ID(new Wf(e,t,r),n.serverCache)}function g1(n,e,t,r){return ID(n.eventCache,new Wf(e,t,r))}function DD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sR;class nr{constructor(e,t=(()=>(sR||(sR=new Zo(mH)),sR))()){this.value=e,this.children=t}static fromObject(e){let t=new nr(null);return Ki(e,(r,i)=>{t=t.set(new Pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:wn(),value:this.value};if(zt(e))return null;{const r=Gt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Zn(e),t);return null!=s?{path:yr(new Pn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zt(e))return this;{const t=Gt(e),r=this.children.get(t);return null!==r?r.subtree(Zn(e)):new nr(null)}}set(e,t){if(zt(e))return new nr(t,this.children);{const r=Gt(e),s=(this.children.get(r)||new nr(null)).set(Zn(e),t),u=this.children.insert(r,s);return new nr(this.value,u)}}remove(e){if(zt(e))return this.children.isEmpty()?new nr(null):new nr(null,this.children);{const t=Gt(e),r=this.children.get(t);if(r){const i=r.remove(Zn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new nr(null):new nr(this.value,s)}return this}}get(e){if(zt(e))return this.value;{const t=Gt(e),r=this.children.get(t);return r?r.get(Zn(e)):null}}setTree(e,t){if(zt(e))return t;{const r=Gt(e),s=(this.children.get(r)||new nr(null)).setTree(Zn(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new nr(this.value,u)}}fold(e){return this.fold_(wn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(yr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,wn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(zt(e))return null;{const s=Gt(e),u=this.children.get(s);return u?u.findOnPath_(Zn(e),yr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,wn(),t)}foreachOnPath_(e,t,r){if(zt(e))return this;{this.value&&r(t,this.value);const i=Gt(e),s=this.children.get(i);return s?s.foreachOnPath_(Zn(e),yr(t,i),r):new nr(null)}}foreach(e){this.foreach_(wn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(yr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Dc{constructor(e){this.writeTree_=e}static empty(){return new Dc(new nr(null))}}function X0(n,e,t){if(zt(e))return new Dc(new nr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=_o(i,e);return s=s.updateChild(u,t),new Dc(n.writeTree_.set(i,s))}{const i=new nr(t),s=n.writeTree_.setTree(e,i);return new Dc(s)}}}function oR(n,e,t){let r=n;return Ki(t,(i,s)=>{r=X0(r,yr(e,i),s)}),r}function m1(n,e){if(zt(e))return Dc.empty();{const t=n.writeTree_.setTree(e,new nr(null));return new Dc(t)}}function aR(n,e){return null!=Zg(n,e)}function Zg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(_o(t.path,e)):null}function _1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(tr,(r,i)=>{e.push(new Qt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Qt(r,i.value))}),e}function Zf(n,e){if(zt(e))return n;{const t=Zg(n,e);return new Dc(null!=t?new nr(t):n.writeTree_.subtree(e))}}function lR(n){return n.writeTree_.isEmpty()}function _v(n,e){return y1(wn(),n.writeTree_,e)}function y1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,N.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=y1(yr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(yr(n,".priority"),r)),t}}function SD(n,e){return C1(e,n)}function Uq(n,e){if(n.snap)return vl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&vl(yr(n.path,t),e))return!0;return!1}function jq(n){return n.visible}function v1(n,e,t){let r=Dc.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let h;if(s.snap)vl(t,u)?(h=_o(t,u),r=X0(r,h,s.snap)):vl(u,t)&&(h=_o(u,t),r=X0(r,wn(),s.snap.getChild(h)));else{if(!s.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(vl(t,u))h=_o(t,u),r=oR(r,h,s.children);else if(vl(u,t))if(h=_o(u,t),zt(h))r=oR(r,wn(),s.children);else{const p=(0,N.DV)(s.children,Gt(h));if(p){const y=p.getChild(Zn(h));r=X0(r,wn(),y)}}}}}return r}function b1(n,e,t,r,i){if(r||i){const s=Zf(n.visibleWrites,e);return!i&&lR(s)?t:i||null!=t||aR(s,wn())?_v(v1(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(vl(y.path,e)||vl(e,y.path))},e),t||Vt.EMPTY_NODE):null}{const s=Zg(n.visibleWrites,e);if(null!=s)return s;{const u=Zf(n.visibleWrites,e);return lR(u)?t:null!=t||aR(u,wn())?_v(u,t||Vt.EMPTY_NODE):null}}}function AD(n,e,t,r){return b1(n.writeTree,n.treePath,e,t,r)}function cR(n,e){return function Hq(n,e,t){let r=Vt.EMPTY_NODE;const i=Zg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(tr,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=Zf(n.visibleWrites,e);return t.forEachChild(tr,(u,h)=>{const p=_v(Zf(s,new Pn(u)),h);r=r.updateImmediateChild(u,p)}),_1(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return _1(Zf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function w1(n,e,t,r){return function qq(n,e,t,r,i){(0,N.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=yr(e,t);if(aR(n.visibleWrites,s))return null;{const u=Zf(n.visibleWrites,s);return lR(u)?i.getChild(t):_v(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function MD(n,e){return function Gq(n,e){return Zg(n.visibleWrites,e)}(n.writeTree,yr(n.treePath,e))}function uR(n,e,t){return function $q(n,e,t,r){const i=yr(e,t),s=Zg(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?_v(Zf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function E1(n,e){return C1(yr(n.treePath,e),n.writeTree)}function C1(n,e){return{treePath:n,writeTree:e}}class Kq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,W0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,z0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,pv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,W0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const T1=new class Yq{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class dR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Wf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wg(this.viewCache_),s=function Zq(n,e,t,r,i,s){return function zq(n,e,t,r,i,s,u){let h;const p=Zf(n.visibleWrites,e),y=Zg(p,wn());if(null!=y)h=y;else{if(null==t)return[];h=_v(p,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const C=[],I=u.getCompare(),x=s?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let P=x.getNext();for(;P&&C.length<i;)0!==I(P,r)&&C.push(P),P=x.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function I1(n,e,t,r,i,s){const u=e.eventCache;if(null!=MD(r,t))return e;{let h,p;if(zt(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Wg(e),I=cR(r,y instanceof Vt?y:Vt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),I,s)}else{const y=AD(r,Wg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Gt(t);if(".priority"===y){(0,N.hu)(1===zf(t),"Can't have a priority with additional path components");const C=u.getNode();p=e.serverCache.getNode();const I=w1(r,t,C,p);h=null!=I?n.filter.updatePriority(C,I):u.getNode()}else{const C=Zn(t);let I;if(u.isCompleteForChild(y)){p=e.serverCache.getNode();const x=w1(r,t,u.getNode(),p);I=null!=x?u.getNode().getImmediateChild(y).updateChild(C,x):u.getNode().getImmediateChild(y)}else I=uR(r,y,e.serverCache);h=null!=I?n.filter.updateChild(u.getNode(),y,I,C,i,s):u.getNode()}}return Q0(e,h,u.isFullyInitialized()||zt(t),n.filter.filtersNodes())}}function xD(n,e,t,r,i,s,u,h){const p=e.serverCache;let y;const C=u?n.filter:n.filter.getIndexedFilter();if(zt(t))y=C.updateFullNode(p.getNode(),r,null);else if(C.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(t,r);y=C.updateFullNode(p.getNode(),P,null)}else{const P=Gt(t);if(!p.isCompleteForPath(t)&&zf(t)>1)return e;const U=Zn(t),le=p.getNode().getImmediateChild(P).updateChild(U,r);y=".priority"===P?C.updatePriority(p.getNode(),le):C.updateChild(p.getNode(),P,le,U,T1,null)}const I=g1(e,y,p.isFullyInitialized()||zt(t),C.filtersNodes());return I1(n,I,t,i,new dR(i,I,s),h)}function hR(n,e,t,r,i,s,u){const h=e.eventCache;let p,y;const C=new dR(i,e,s);if(zt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=Q0(e,y,!0,n.filter.filtersNodes());else{const I=Gt(t);if(".priority"===I)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=Q0(e,y,h.isFullyInitialized(),h.isFiltered());else{const x=Zn(t),P=h.getNode().getImmediateChild(I);let U;if(zt(x))U=r;else{const X=C.getCompleteChild(I);U=null!=X?".priority"===Hx(x)&&X.getChild(YN(x)).isEmpty()?X:X.updateChild(x,r):Vt.EMPTY_NODE}p=P.equals(U)?e:Q0(e,n.filter.updateChild(h.getNode(),I,U,x,C,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function D1(n,e){return n.eventCache.isCompleteForChild(e)}function S1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fR(n,e,t,r,i,s,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=zt(t)?r:new nr(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((I,x)=>{if(C.hasChild(I)){const U=S1(0,e.serverCache.getNode().getImmediateChild(I),x);p=xD(n,p,new Pn(I),U,i,s,u,h)}}),y.children.inorderTraversal((I,x)=>{const P=!e.serverCache.isCompleteForChild(I)&&void 0===x.value;if(!C.hasChild(I)&&!P){const X=S1(0,e.serverCache.getNode().getImmediateChild(I),x);p=xD(n,p,new Pn(I),X,i,s,u,h)}}),p}class s3{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Qx(r.getIndex()),s=function vq(n){return n.loadsAllData()?new Qx(n.getIndex()):n.hasLimit()?new yq(n):new Z0(n)}(r);this.processor_=function Qq(n){return{filter:n}}(s);const u=t.serverCache,h=t.eventCache,p=i.updateFullNode(Vt.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(Vt.EMPTY_NODE,h.getNode(),null),C=new Wf(p,u.isFullyInitialized(),i.filtersNodes()),I=new Wf(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=ID(I,C),this.eventGenerator_=new xq(this.query_)}get query(){return this.query_}}function l3(n,e){const t=Wg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!zt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function A1(n){return 0===n.eventRegistrations_.length}function M1(n,e,t){const r=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function x1(n,e,t,r){e.type===bl.MERGE&&null!==e.source.queryId&&((0,N.hu)(Wg(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(DD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Jq(n,e,t,r,i){const s=new Kq;let u,h;if(t.type===bl.OVERWRITE){const y=t;y.source.fromUser?u=hR(n,e,y.path,y.snap,r,i,s):((0,N.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!zt(y.path),u=xD(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===bl.MERGE){const y=t;y.source.fromUser?u=function t3(n,e,t,r,i,s,u){let h=e;return r.foreach((p,y)=>{const C=yr(t,p);D1(e,Gt(C))&&(h=hR(n,h,C,y,i,s,u))}),r.foreach((p,y)=>{const C=yr(t,p);D1(e,Gt(C))||(h=hR(n,h,C,y,i,s,u))}),h}(n,e,y.path,y.children,r,i,s):((0,N.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=fR(n,e,y.path,y.children,r,i,h,s))}else if(t.type===bl.ACK_USER_WRITE){const y=t;u=y.revert?function i3(n,e,t,r,i,s){let u;if(null!=MD(r,t))return e;{const h=new dR(r,e,i),p=e.eventCache.getNode();let y;if(zt(t)||".priority"===Gt(t)){let C;if(e.serverCache.isFullyInitialized())C=AD(r,Wg(e));else{const I=e.serverCache.getNode();(0,N.hu)(I instanceof Vt,"serverChildren would be complete if leaf node"),C=cR(r,I)}C=C,y=n.filter.updateFullNode(p,C,s)}else{const C=Gt(t);let I=uR(r,C,e.serverCache);null==I&&e.serverCache.isCompleteForChild(C)&&(I=p.getImmediateChild(C)),y=null!=I?n.filter.updateChild(p,C,I,Zn(t),h,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,Vt.EMPTY_NODE,Zn(t),h,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=AD(r,Wg(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=MD(r,wn()),Q0(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function n3(n,e,t,r,i,s,u){if(null!=MD(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(zt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return xD(n,e,t,p.getNode().getChild(t),i,s,h,u);if(zt(t)){let y=new nr(null);return p.getNode().forEachChild(Fu,(C,I)=>{y=y.set(new Pn(C),I)}),fR(n,e,t,y,i,s,h,u)}return e}{let y=new nr(null);return r.foreach((C,I)=>{const x=yr(t,C);p.isCompleteForPath(x)&&(y=y.set(C,p.getNode().getChild(x)))}),fR(n,e,t,y,i,s,h,u)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==bl.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);u=function r3(n,e,t,r,i){const s=e.serverCache;return I1(n,g1(e,s.getNode(),s.isFullyInitialized()||zt(t),s.isFiltered()),t,r,T1,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function e3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=DD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(d1(DD(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function Xq(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,R1(n,s.changes,s.viewCache.eventCache.getNode(),null)}function R1(n,e,t,r){return function Rq(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function _q(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Y0(n,i,"child_removed",e,r,t),Y0(n,i,"child_added",e,r,t),Y0(n,i,"child_moved",s,r,t),Y0(n,i,"child_changed",e,r,t),Y0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let RD,OD;class k1{constructor(){this.views=new Map}}function pR(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,N.hu)(null!=s,"SyncTree gave us an op for an invalid query."),x1(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(x1(u,e,t,r));return s}}function O1(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=AD(t,i?r:null),p=!1;h?p=!0:r instanceof Vt?(h=cR(t,r),p=!1):(h=Vt.EMPTY_NODE,p=!1);const y=ID(new Wf(h,p,!1),new Wf(r,i,!1));return new s3(e,y)}return u}function P1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Kf(n,e){let t=null;for(const r of n.views.values())t=t||l3(r,e);return t}function N1(n,e){return e._queryParams.loadsAllData()?kD(n):n.views.get(e._queryIdentifier)}function F1(n,e){return null!=N1(n,e)}function Yf(n){return null!=kD(n)}function kD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let y3=1;class L1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nr(null),this.pendingWriteTree_=function Wq(){return{visibleWrites:Dc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gR(n,e,t,r,i){return function Nq(n,e,t,r,i){(0,N.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=X0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?yv(n,new zg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Qf(n,e,t=!1){const r=function Lq(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Vq(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&Uq(h,r.path)?i=!1:vl(r.path,h.path)&&(s=!0)),u--}return!!i&&(s?(function Bq(n){n.visibleWrites=v1(n.allWrites,jq,wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=m1(n.visibleWrites,r.path):Ki(r.children,p=>{n.visibleWrites=m1(n.visibleWrites,yr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new nr(null);return null!=r.snap?s=s.set(wn(),!0):Ki(r.children,u=>{s=s.set(new Pn(u),!0)}),yv(n,new TD(r.path,s,t))}return[]}function J0(n,e,t){return yv(n,new zg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function mR(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let u=[];if(s&&("default"===e._queryIdentifier||F1(s,e))){const h=function g3(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const h=Yf(n);if("default"===i)for(const[p,y]of n.views.entries())u=u.concat(M1(y,t,r)),A1(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(u=u.concat(M1(p,t,r)),A1(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Yf(n)&&s.push(new(function h3(){return(0,N.hu)(RD,"Reference.ts has not been loaded"),RD}())(e._repo,e._path)),{removed:s,events:u}}(s,e,t,r);(function f3(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=h.removed;u=h.events;const y=-1!==p.findIndex(I=>I._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(I,x)=>Yf(x));if(y&&!C){const I=n.syncPointTree_.subtree(i);if(!I.isEmpty()){const x=function D3(n){return n.fold((e,t,r)=>{if(t&&Yf(t))return[kD(t)];{let i=[];return t&&(i=P1(t)),Ki(r,(s,u)=>{i=i.concat(u)}),i}})}(I);for(let P=0;P<x.length;++P){const U=x[P],X=U.query,le=j1(n,U);n.listenProvider_.startListening(eE(X),ND(n,X),le.hashFn,le.onComplete)}}}!C&&p.length>0&&!r&&(y?n.listenProvider_.stopListening(eE(e),null):p.forEach(I=>{const x=n.queryToTagMap.get(FD(I));n.listenProvider_.stopListening(eE(I),x)})),function S3(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=FD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,p)}return u}function V1(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(I,x)=>{const P=_o(I,r);i=i||Kf(x,P),s=s||Yf(x)});let h,u=n.syncPointTree_.get(r);u?(s=s||Yf(u),i=i||Kf(u,wn())):(u=new k1,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?h=!0:(h=!1,i=Vt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((x,P)=>{const U=Kf(P,wn());U&&(i=i.updateImmediateChild(x,U))}));const p=F1(u,e);if(!p&&!e._queryParams.loadsAllData()){const I=FD(e);(0,N.hu)(!n.queryToTagMap.has(I),"View does not exist, but we have a tag");const x=function A3(){return y3++}();n.queryToTagMap.set(I,x),n.tagToQueryMap.set(x,I)}let C=function p3(n,e,t,r,i,s){const u=O1(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function c3(n,e){n.eventRegistrations_.push(e)}(u,t),function u3(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(tr,(s,u)=>{r.push(pv(s,u))}),t.isFullyInitialized()&&r.push(d1(t.getNode())),R1(n,r,t.getNode(),e)}(u,t)}(u,e,t,SD(n.pendingWriteTree_,r),i,h);if(!p&&!s){const I=N1(u,e);C=C.concat(function M3(n,e,t){const r=e._path,i=ND(n,e),s=j1(n,t),u=n.listenProvider_.startListening(eE(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,N.hu)(!Yf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,C,I)=>{if(!zt(y)&&C&&Yf(C))return[kD(C).query];{let x=[];return C&&(x=x.concat(P1(C).map(P=>P.query))),Ki(I,(P,U)=>{x=x.concat(U)}),x}});for(let y=0;y<p.length;++y){const C=p[y];n.listenProvider_.stopListening(eE(C),ND(n,C))}}return u}(n,e,I))}return C}function PD(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=Kf(h,_o(u,e));if(y)return y});return b1(i,e,s,t,!0)}function yv(n,e){return U1(e,n.syncPointTree_,null,SD(n.pendingWriteTree_,wn()))}function U1(n,e,t,r){if(zt(n.path))return B1(n,e,t,r);{const i=e.get(wn());null==t&&null!=i&&(t=Kf(i,wn()));let s=[];const u=Gt(n.path),h=n.operationForChild(u),p=e.children.get(u);if(p&&h){const y=t?t.getImmediateChild(u):null,C=E1(r,u);s=s.concat(U1(h,p,y,C))}return i&&(s=s.concat(pR(i,n,r,t))),s}}function B1(n,e,t,r){const i=e.get(wn());null==t&&null!=i&&(t=Kf(i,wn()));let s=[];return e.children.inorderTraversal((u,h)=>{const p=t?t.getImmediateChild(u):null,y=E1(r,u),C=n.operationForChild(u);C&&(s=s.concat(B1(C,h,p,y)))}),i&&(s=s.concat(pR(i,n,r,t))),s}function j1(n,e){const t=e.query,r=ND(n,t);return{hashFn:()=>(function o3(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function E3(n,e,t){const r=_R(n,t);if(r){const i=yR(r),s=i.path,u=i.queryId,h=_o(s,e);return vR(n,s,new K0(iR(u),h))}return[]}(n,t._path,r):function w3(n,e){return yv(n,new K0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function vH(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return mR(n,t,null,s)}}}}function ND(n,e){const t=FD(e);return n.queryToTagMap.get(t)}function FD(n){return n._path.toString()+"$"+n._queryIdentifier}function _R(n,e){return n.tagToQueryMap.get(e)}function yR(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pn(n.substr(0,e))}}function vR(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.hu)(r,"Missing sync point for query tag that we're tracking"),pR(r,t,SD(n.pendingWriteTree_,e),null)}function eE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function _3(){return(0,N.hu)(OD,"Reference.ts has not been loaded"),OD}())(n._repo,n._path):n}class bR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new bR(t)}node(){return this.node_}}class wR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=yr(this.path_,e);return new wR(this.syncTree_,t)}node(){return PD(this.syncTree_,this.path_)}}const H1=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?R3(n[".sv"],e,t):"object"==typeof n[".sv"]?k3(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},R3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},k3=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},q1=function(n,e,t,r){return CR(e,new wR(t,n),r)},ER=function(n,e,t){return CR(n,new bR(e),t)};function CR(n,e,t){const r=n.getPriority().val(),i=H1(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,h=H1(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new dv(h,Ar(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new dv(i))),u.forEachChild(tr,(h,p)=>{const y=CR(p,e.getImmediateChild(h),t);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class TR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function LD(n,e){let t=e instanceof Pn?e:new Pn(e),r=n,i=Gt(t);for(;null!==i;){const s=(0,N.DV)(r.node.children,i)||{children:{},childCount:0};r=new TR(i,r,s),t=Zn(t),i=Gt(t)}return r}function Kg(n){return n.node.value}function IR(n,e){n.node.value=e,DR(n)}function $1(n){return n.node.childCount>0}function VD(n,e){Ki(n.node.children,(t,r)=>{e(new TR(t,n,r))})}function G1(n,e,t,r){t&&!r&&e(n),VD(n,i=>{G1(i,e,!0,r)}),t&&r&&e(n)}function tE(n){return new Pn(null===n.parent?n.name:tE(n.parent)+"/"+n.name)}function DR(n){null!==n.parent&&function N3(n,e,t){const r=function O3(n){return void 0===Kg(n)&&!$1(n)}(t),i=(0,N.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,DR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,DR(n))}(n.parent,n.name,n)}const F3=/[\[\].#$\/\u0000-\u001F\u007F]/,L3=/[\[\].#$\u0000-\u001F\u007F]/,SR=10485760,UD=function(n){return"string"==typeof n&&0!==n.length&&!F3.test(n)},z1=function(n){return"string"==typeof n&&0!==n.length&&!L3.test(n)},nE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!hD(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},Lu=function(n,e,t,r){r&&void 0===e||rE((0,N.gK)(n,"value"),e,t)},rE=function(n,e,t){const r=t instanceof Pn?new QH(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+$g(r));if("function"==typeof e)throw new Error(n+"contains a function "+$g(r)+" with contents = "+e.toString());if(hD(e))throw new Error(n+"contains "+e.toString()+" "+$g(r));if("string"==typeof e&&e.length>SR/3&&(0,N.ug)(e)>SR)throw new Error(n+"contains a string greater than "+SR+" utf8 bytes "+$g(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Ki(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!UD(u)))throw new Error(n+" contains an invalid key ("+u+") "+$g(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function XH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),QN(n)})(r,u),rE(n,h,r),function JH(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+$g(r)+" in addition to actual children.")}},W1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Ki(e,(u,h)=>{const p=new Pn(u);if(rE(i,h,yr(t,p)),".priority"===Hx(p)&&!nE(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=H0(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!UD(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(YH);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&vl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},AR=function(n,e,t){if(!t||void 0!==e){if(hD(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!nE(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},iE=function(n,e,t,r){if(!(r&&void 0===t||UD(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},sE=function(n,e,t,r){if(!(r&&void 0===t||z1(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wl=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Z1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!UD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),z1(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class j3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function BD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!qx(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function MR(n,e,t){BD(n,t),K1(n,r=>qx(r,e))}function El(n,e,t){BD(n,t),K1(n,r=>vl(r,e)||vl(e,r))}function K1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(H3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function H3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Hg&&Zi("event: "+t.toString()),cv(r)}}}const Y1="repo_interrupt";class $3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new j3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=CD(),this.transactionQueueTree_=new TR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Q1(n){const t=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function oE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Q1(n)})}function X1(n,e,t,r,i){n.dataUpdateCount++;const s=new Pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,N.UI)(t,y=>Ar(y));u=function T3(n,e,t,r){const i=_R(n,r);if(i){const s=yR(i),u=s.path,h=s.queryId,p=_o(u,e),y=nr.fromObject(t);return vR(n,u,new mv(iR(h),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Ar(t);u=function C3(n,e,t,r){const i=_R(n,r);if(null!=i){const s=yR(i),u=s.path,h=s.queryId,p=_o(u,e);return vR(n,u,new zg(iR(h),p,t))}return[]}(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,N.UI)(t,y=>Ar(y));u=function b3(n,e,t){const r=nr.fromObject(t);return yv(n,new mv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Ar(t);u=J0(n.serverSyncTree_,s,p)}let h=s;u.length>0&&(h=bv(n,s)),El(n.eventQueue_,h,u)}function J1(n,e){xR(n,"connected",e),!1===e&&function K3(n){vv(n,"onDisconnectEvents");const e=oE(n),t=CD();tR(n.onDisconnect_,wn(),(i,s)=>{const u=q1(i,s,n.serverSyncTree_,e);gv(t,i,u)});let r=[];tR(t,wn(),(i,s)=>{r=r.concat(J0(n.serverSyncTree_,i,s));const u=PR(n,i);bv(n,u)}),n.onDisconnect_=CD(),El(n.eventQueue_,wn(),r)}(n)}function xR(n,e,t){const r=new Pn("/.info/"+e),i=Ar(t);n.infoData_.updateSnapshot(r,i);const s=J0(n.infoSyncTree_,r,i);El(n.eventQueue_,r,s)}function jD(n){return n.nextWriteId_++}function RR(n,e,t,r,i){vv(n,"set",{path:e.toString(),value:t,priority:r});const s=oE(n),u=Ar(t,r),h=PD(n.serverSyncTree_,e),p=ER(u,h,s),y=jD(n),C=gR(n.serverSyncTree_,e,p,y,!0);BD(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(x,P)=>{const U="ok"===x;U||mo("set at "+e+" failed: "+x);const X=Qf(n.serverSyncTree_,y,!U);El(n.eventQueue_,e,X),Xf(0,i,x,P)});const I=PR(n,e);bv(n,I),El(n.eventQueue_,I,[])}function Y3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&eR(n.onDisconnect_,e),Xf(0,t,r,i)})}function eF(n,e,t,r){const i=Ar(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&gv(n.onDisconnect_,e,i),Xf(0,r,s,u)})}function kR(n,e,t){let r;r=".info"===Gt(e._path)?mR(n.infoSyncTree_,e,t):mR(n.serverSyncTree_,e,t),MR(n.eventQueue_,e._path,r)}function tF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Y1)}function vv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Zi(t,...e)}function Xf(n,e,t,r){e&&cv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function OR(n,e,t){return PD(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function HD(n,e=n.transactionQueueTree_){if(e||qD(n,e),Kg(e)){const t=rF(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function n$(n,e,t){const r=t.map(y=>y.currentWriteId),i=OR(n,e,r);let s=i;const u=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,N.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const I=_o(e,C.path);s=s.updateChild(I,C.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,y=>{vv(n,"transaction put response",{path:p.toString(),status:y});let C=[];if("ok"===y){const I=[];for(let x=0;x<t.length;x++)t[x].status=2,C=C.concat(Qf(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&I.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();qD(n,LD(n.transactionQueueTree_,e)),HD(n,n.transactionQueueTree_),El(n.eventQueue_,e,C);for(let x=0;x<I.length;x++)cv(I[x])}else{if("datastale"===y)for(let I=0;I<t.length;I++)t[I].status=3===t[I].status?4:0;else{mo("transaction at "+p.toString()+" failed: "+y);for(let I=0;I<t.length;I++)t[I].status=4,t[I].abortReason=y}bv(n,e)}},u)}(n,tE(e),t)}else $1(e)&&VD(e,t=>{HD(n,t)})}function bv(n,e){const t=nF(n,e),r=tE(t);return function r$(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=_o(t,p.path);let I,C=!1;if((0,N.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,I=p.abortReason,i=i.concat(Qf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,I="maxretry",i=i.concat(Qf(n.serverSyncTree_,p.currentWriteId,!0));else{const x=OR(n,p.path,u);p.currentInputSnapshot=x;const P=e[h].update(x.val());if(void 0!==P){rE("transaction failed: Data returned ",P,p.path);let U=Ar(P);"object"==typeof P&&null!=P&&(0,N.r3)(P,".priority")||(U=U.updatePriority(x.getPriority()));const le=p.currentWriteId,je=oE(n),Ke=ER(U,x,je);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=Ke,p.currentWriteId=jD(n),u.splice(u.indexOf(le),1),i=i.concat(gR(n.serverSyncTree_,p.path,Ke,p.currentWriteId,p.applyLocally)),i=i.concat(Qf(n.serverSyncTree_,le,!0))}else C=!0,I="nodata",i=i.concat(Qf(n.serverSyncTree_,p.currentWriteId,!0))}El(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===I?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(I),!1,null)))}qD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)cv(r[h]);HD(n,n.transactionQueueTree_)}(n,rF(n,t),r),r}function nF(n,e){let t,r=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===Kg(r);)r=LD(r,t),t=Gt(e=Zn(e));return r}function rF(n,e){const t=[];return iF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function iF(n,e,t){const r=Kg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);VD(e,i=>{iF(n,i,t)})}function qD(n,e){const t=Kg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,IR(e,t.length>0?t:void 0)}VD(e,r=>{qD(n,r)})}function PR(n,e){const t=tE(nF(n,e)),r=LD(n.transactionQueueTree_,e);return function P3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{NR(n,i)}),NR(n,r),G1(r,i=>{NR(n,i)}),t}function NR(n,e){const t=Kg(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,N.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,N.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Qf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?IR(e,void 0):t.length=s+1,El(n.eventQueue_,tE(e),i);for(let u=0;u<r.length;u++)cv(r[u])}}const FR=function(n,e){const t=o$(n),r=t.namespace;return"firebase.com"===t.domain&&Pu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Pu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&mo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Nx(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Pn(t.pathString)}},o$=function(n){let e="",t="",r="",i="",s="",u=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),e=n.substring(0,Math.min(C,I)),C<I&&(i=function i$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(C,I)));const x=function s$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,I)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const P=e.slice(0,y);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),s=r}"ns"in x&&(s=x.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:s}};class sF{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class oF{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class aF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class lF{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return Y3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){wl("OnDisconnect.remove",this._path);const e=new N.BH;return eF(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){wl("OnDisconnect.set",this._path),Lu("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return eF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){wl("OnDisconnect.setWithPriority",this._path),Lu("OnDisconnect.setWithPriority",e,this._path,!1),AR("OnDisconnect.setWithPriority",t,!1);const r=new N.BH;return function Q3(n,e,t,r,i){const s=Ar(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,h)=>{"ok"===u&&gv(n.onDisconnect_,e,s),Xf(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){wl("OnDisconnect.update",this._path),W1("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function X3(n,e,t,r){if((0,N.xb)(t))return Zi("onDisconnect().update() called with empty data.  Don't do anything."),void Xf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Ki(t,(u,h)=>{const p=Ar(h);gv(n.onDisconnect_,yr(e,u),p)}),Xf(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ko{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return zt(this._path)?null:Hx(this._path)}get ref(){return new Cl(this._repo,this._path)}get _queryIdentifier(){const e=f1(this._queryParams),t=kx(e);return"{}"===t?"default":t}get _queryObject(){return f1(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof Ko))return!1;const t=this._repo===e._repo,r=qx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function KH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function $D(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Jf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Fu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Xd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Nu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===tr){if(null!=e&&!nE(e)||null!=t&&!nE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof Zx||n.getIndex()===Kx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function GD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Cl extends Ko{constructor(e,t){super(e,t,new bD,!1)}get parent(){const e=YN(this._path);return null===e?null:new Cl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Yg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pn(e),r=Qg(this.ref,e);return new Yg(this._node.getChild(t),r,tr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Yg(i,Qg(this.ref,r),tr)))}hasChild(e){const t=new Pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function cF(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?Qg(n._root,e):n._root}function uF(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=FR(e,n._repo.repoInfo_.nodeAdmin);Z1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Pu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),cF(n,t.path.toString())}function Qg(n,e){return null===Gt((n=(0,N.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sE("child","path",t,!1)):sE("child","path",e,!1),new Cl(n._repo,yr(n._path,e));var t}function LR(n,e){n=(0,N.m9)(n),wl("set",n._path),Lu("set",e,n._path,!1);const t=new N.BH;return RR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function d$(n,e){W1("update",e,n._path,!1);const t=new N.BH;return function Z3(n,e,t,r){vv(n,"update",{path:e.toString(),value:t});let i=!0;const s=oE(n),u={};if(Ki(t,(h,p)=>{i=!1,u[h]=q1(yr(e,h),Ar(p),n.serverSyncTree_,s)}),i)Zi("update() called with empty data.  Don't do anything."),Xf(0,r,"ok",void 0);else{const h=jD(n),p=function v3(n,e,t,r){!function Fq(n,e,t,r){(0,N.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=oR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=nr.fromObject(t);return yv(n,new mv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);BD(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,C)=>{const I="ok"===y;I||mo("update at "+e+" failed: "+y);const x=Qf(n.serverSyncTree_,h,!I),P=x.length>0?bv(n,e):e;El(n.eventQueue_,P,x),Xf(0,r,y,C)}),Ki(t,y=>{const C=PR(n,yr(e,y));bv(n,C)}),El(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function h$(n){return function W3(n,e){const t=function I3(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const I=_o(y,t);r=r||Kf(C,I)});let i=n.syncPointTree_.get(t);i?r=r||Kf(i,wn()):(i=new k1,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new Wf(r,!0,!1):null;return function a3(n){return DD(n.viewCache_)}(O1(i,e,SD(n.pendingWriteTree_,e._path),s?u.getNode():Vt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Ar(r).withIndex(e._queryParams.getIndex()),s=J0(n.serverSyncTree_,e._path,i);return MR(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(vv(n,"get for query "+(0,N.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,N.m9)(n))._repo,n).then(e=>new Yg(e,new Cl(n._repo,n._path),n._queryParams.getIndex()))}class zD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new sF("value",this,new Yg(e.snapshotNode,new Cl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oF(this,e,t):null}matches(e){return e instanceof zD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class WD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oF(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const r=Qg(new Cl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new sF(e.type,this,new Yg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof WD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function aE(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(C,I)=>{kR(n._repo,n,h),p(C,I)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new aF(t,s||void 0),h="value"===e?new zD(u):new WD(e,u);return function J3(n,e,t){let r;r=".info"===Gt(e._path)?V1(n.infoSyncTree_,e,t):V1(n.serverSyncTree_,e,t),MR(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>kR(n._repo,n,h)}function VR(n,e,t,r){return aE(n,"value",e,t,r)}function dF(n,e,t,r){return aE(n,"child_added",e,t,r)}function hF(n,e,t,r){return aE(n,"child_changed",e,t,r)}function fF(n,e,t,r){return aE(n,"child_moved",e,t,r)}function pF(n,e,t,r){return aE(n,"child_removed",e,t,r)}function gF(n,e,t){let r=null;const i=t?new aF(t):null;"value"===e?r=new zD(i):e&&(r=new WD(e,i)),kR(n._repo,n,r)}class Sc{}class mF extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lu("endAt",this._value,e._path,!0);const t=Jx(e._queryParams,this._value,this._key);if(GD(t),Jf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ko(e._repo,e._path,t,e._orderByCalled)}}class p$ extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lu("endBefore",this._value,e._path,!1);const t=function Cq(n,e,t){let r,i;return n.index_===Fu?("string"==typeof e&&(e=u1(e)),i=Jx(n,e,t)):(r=null==t?Xd:u1(t),i=Jx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(GD(t),Jf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ko(e._repo,e._path,t,e._orderByCalled)}}class _F extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lu("startAt",this._value,e._path,!0);const t=Xx(e._queryParams,this._value,this._key);if(GD(t),Jf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ko(e._repo,e._path,t,e._orderByCalled)}}class _$ extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Lu("startAfter",this._value,e._path,!1);const t=function Eq(n,e,t){let r;if(n.index_===Fu)"string"==typeof e&&(e=c1(e)),r=Xx(n,e,t);else{let i;i=null==t?Nu:c1(t),r=Xx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(GD(t),Jf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ko(e._repo,e._path,t,e._orderByCalled)}}class v$ extends Sc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ko(e._repo,e._path,function bq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class w$ extends Sc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ko(e._repo,e._path,function wq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class C$ extends Sc{constructor(e){super(),this._path=e}_apply(e){$D(e,"orderByChild");const t=new Pn(this._path);if(zt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Zx(t),i=wD(e._queryParams,r);return Jf(i),new Ko(e._repo,e._path,i,!0)}}class I$ extends Sc{_apply(e){$D(e,"orderByKey");const t=wD(e._queryParams,Fu);return Jf(t),new Ko(e._repo,e._path,t,!0)}}class S$ extends Sc{_apply(e){$D(e,"orderByPriority");const t=wD(e._queryParams,tr);return Jf(t),new Ko(e._repo,e._path,t,!0)}}class M$ extends Sc{_apply(e){$D(e,"orderByValue");const t=wD(e._queryParams,Kx);return Jf(t),new Ko(e._repo,e._path,t,!0)}}class R$ extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Lu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new mF(this._value,this._key)._apply(new _F(this._value,this._key)._apply(e))}}function Ac(n,...e){let t=(0,N.m9)(n);for(const r of e)t=r._apply(t);return t}(function d3(n){(0,N.hu)(!RD,"__referenceConstructor has already been defined"),RD=n})(Cl),function m3(n){(0,N.hu)(!OD,"__referenceConstructor has already been defined"),OD=n}(Cl);const UR={};function vF(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Pu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=FR(s,i),h=u.repoInfo;"undefined"!=typeof process&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,u=FR(s,i),h=u.repoInfo):p=!u.repoInfo.secure;const C=i&&p?new U0(U0.OWNER):new CH(n.name,n.options,e);Z1("Invalid Firebase Database URL",u),zt(u.path)||Pu("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function F$(n,e,t,r){let i=UR[e.name];i||(i={},UR[e.name]=i);let s=i[n.toURLString()];return s&&Pu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $3(n,false,t,r),i[n.toURLString()]=s,s}(h,n,C,new EH(n.name,t));return new V$(I,n)}class V${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function G3(n,e,t){if(n.stats_=Vx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ED(n.repoInfo_,(r,i,s,u)=>{X1(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>J1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Gg(n.repoInfo_,e,(r,i,s,u)=>{X1(n,r,i,s,u)},r=>{J1(n,r)},r=>{!function z3(n,e){Ki(e,(t,r)=>{xR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function SH(n,e){const t=n.toString();return Lx[t]||(Lx[t]=e()),Lx[t]}(n.repoInfo_,()=>new Mq(n.stats_,n.server_)),n.infoData_=new Tq,n.infoSyncTree_=new L1({startListening:(r,i,s,u)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=J0(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),xR(n,"connected",!1),n.serverSyncTree_=new L1({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(h,p)=>{const y=u(h,p);El(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cl(this._repo,wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function N$(n,e){const t=UR[e];(!t||t[n.key]!==n)&&Pu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),tF(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pu("Cannot call "+e+" on a deleted database.")}}function H$(n,e){bN(n,e)}const $$={".sv":"timestamp"};class W${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Gg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Gg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function q$(n){gN(sr.SDK_VERSION),(0,sr._registerComponent)(new ci.wA("database",(e,{instanceIdentifier:t})=>vF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,sr.registerVersion)(fN,"0.12.5",n),(0,sr.registerVersion)(fN,"0.12.5","esm2017")}();const Q$=new ui.Yd("@firebase/database-compat"),bF=function(n){Q$.warn("FIREBASE WARNING: "+n)};class eG{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,bF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class tG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ep{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),sE("DataSnapshot.child","path",e,!1),new ep(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),sE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ep(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ma(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ms{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const u=ms.getCancelAndContextArgs_("Query.on",r,i),h=(y,C)=>{t.call(u.context,new ep(this.database,y),C)};h.userCallback=t,h.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return VR(this._delegate,h,p),t;case"child_added":return dF(this._delegate,h,p),t;case"child_removed":return pF(this._delegate,h,p),t;case"child_changed":return hF(this._delegate,h,p),t;case"child_moved":return fF(this._delegate,h,p),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,gF(this._delegate,e,i)}else gF(this._delegate,e)}get(){return h$(this._delegate).then(e=>new ep(this.database,e))}once(e,t,r,i){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const s=ms.getCancelAndContextArgs_("Query.once",r,i),u=new N.BH,h=(y,C)=>{const I=new ep(this.database,y);t&&t.call(s.context,I,C),u.resolve(I)};h.userCallback=t,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(e){case"value":VR(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":dF(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":pF(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":hF(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":fF(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new ms(this.database,Ac(this._delegate,function b$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new v$(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new ms(this.database,Ac(this._delegate,function E$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new w$(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new ms(this.database,Ac(this._delegate,function T$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sE("orderByChild","path",n,!1),new C$(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new ms(this.database,Ac(this._delegate,function D$(){return new I$}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new ms(this.database,Ac(this._delegate,function A$(){return new S$}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new ms(this.database,Ac(this._delegate,function x$(){return new M$}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new ms(this.database,Ac(this._delegate,function m$(n=null,e){return iE("startAt","key",e,!0),new _F(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new ms(this.database,Ac(this._delegate,function y$(n,e){return iE("startAfter","key",e,!0),new _$(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new ms(this.database,Ac(this._delegate,function f$(n,e){return iE("endAt","key",e,!0),new mF(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new ms(this.database,Ac(this._delegate,function g$(n,e){return iE("endBefore","key",e,!0),new p$(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new ms(this.database,Ac(this._delegate,function k$(n,e){return iE("equalTo","key",e,!0),new R$(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ms))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,N.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ma(this.database,new Cl(this._delegate._repo,this._delegate._path))}}class Ma extends ms{constructor(e,t){super(e,new Ko(t._repo,t._path,new bD,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ma(this.database,Qg(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ma(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new Ma(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const r=LR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,bF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wl("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const r=d$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function u$(n,e,t){if(wl("setWithPriority",n._path),Lu("setWithPriority",e,n._path,!1),AR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.BH;return RR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function l$(n){return wl("remove",n._path),LR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Z$(n,e,t){var r;if(n=(0,N.m9)(n),wl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new N.BH,h=VR(n,()=>{});return function t$(n,e,t,r,i,s){vv(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:_N(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=OR(n,e,void 0);u.currentInputSnapshot=h;const p=u.update(h.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{rE("transaction failed: Data returned ",p,u.path),u.status=0;const y=LD(n.transactionQueueTree_,e),C=Kg(y)||[];let I;C.push(u),IR(y,C),"object"==typeof p&&null!==p&&(0,N.r3)(p,".priority")?(I=(0,N.DV)(p,".priority"),(0,N.hu)(nE(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(PD(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const x=oE(n),P=Ar(p,I),U=ER(P,h,x);u.currentOutputSnapshotRaw=P,u.currentOutputSnapshotResolved=U,u.currentWriteId=jD(n);const X=gR(n.serverSyncTree_,e,U,u.currentWriteId,u.applyLocally);El(n.eventQueue_,e,X),HD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,C)=>{let I=null;p?s.reject(p):(I=new Yg(C,new Cl(n._repo,n._path),tr),s.resolve(new W$(y,I)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new tG(s.committed,new ep(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const r=function c$(n,e){n=(0,N.m9)(n),wl("setPriority",n._path),AR("setPriority",e,!1);const t=new N.BH;return RR(n._repo,yr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const r=function a$(n,e){n=(0,N.m9)(n),wl("push",n._path),Lu("push",e,n._path,!0);const t=Q1(n._repo),r=mq(t),i=Qg(n,r),s=Qg(n,r);let u;return u=null!=e?LR(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Ma(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new Ma(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return wl("Reference.onDisconnect",this._delegate._path),new eG(new lF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class lE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function U$(n,e,t,r={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Pu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Pu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new U0(U0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Sg)(r.mockUserToken,n.app.options.projectId);s=new U0(u)}!function P$(n,e,t,r){n.repoInfo_=new Nx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof Ma){const t=uF(this._delegate,e.toString());return new Ma(this,t)}{const t=cF(this._delegate,e);return new Ma(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const r=uF(this._delegate,e);return new Ma(this,r)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function B$(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),tF(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function j$(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function e$(n){n.persistentConnection_&&n.persistentConnection_.resume(Y1)}(n._repo)}(this._delegate)}}lE.ServerValue={TIMESTAMP:function G$(){return $$}(),increment:n=>function z$(n){return{".sv":{increment:n}}}(n)};var rG=Object.freeze({__proto__:null,initStandalone:function nG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){gN(t);const u=new ci.zt("auth-internal",new ci.H0("database-standalone"));return u.setComponent(new ci.wA("auth-internal",()=>r,"PRIVATE")),{instance:new lE(vF(n,u,void 0,e,s),n),namespace:i}}});const iG=lE.ServerValue;function wF(n){return null==n}function EF(n){return"function"==typeof n.set}function CF(n,e){return EF(e)?e:n.ref(e)}function TF(n,e){if(function oG(n){return"string"==typeof n}(n))return e.stringCase();if(EF(n))return e.firebaseCase();if(function aG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function cE(n,e,t="on",r=rl.z){return new En.y(i=>{let s=null;return s=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ut.U)(i=>{const{snapshot:s,prevKey:u}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:u,key:h}}),(0,SI.B)())}function IF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function uG(n,e){const{payload:t,prevKey:r,key:i}=e,s=IF(n,i),u=function cG(n,e){if(wF(e))return 0;{const t=IF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function DF(n){return(wF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function SF(n,e,t){return function lG(n,e,t){return cE(n,"value","once",t).pipe(Sr(r=>{const i=[lt(r)];return e.forEach(s=>i.push(cE(n,s,"on",t))),(0,yl.T)(...i).pipe(ji(uG,[]))}),Qs())}(n,e=DF(e),t)}function AF(n,e,t){const r=(e=DF(e)).map(i=>cE(n,i,"on",t));return(0,yl.T)(...r)}function MF(n,e){return function(r,i){return TF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function pG(n){return function(t){return t?TF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function xF(n,e){return function(){return cE(n,"value","on",e)}}!function sG(n){n.INTERNAL.registerComponent(new ci.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new lE(i,r)},"PUBLIC").setServiceProps({Reference:Ma,Query:ms,Database:lE,DataSnapshot:ep,enableLogging:H$,INTERNAL:rG,ServerValue:iG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(li.Z);const _G=new c.OlP("angularfire2.realtimeDatabaseURL"),yG=new c.OlP("angularfire2.database.use-emulator");let vG=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,I,x,P,U,X,le){this.schedulers=h;const je=p,Ke=(0,kn.on)(t,u,r);y&&Ue(Ke,u,C,x,P,U,I,X),this.database=(0,kn.cc)(`${Ke.name}.database.${i}`,"AngularFireDatabase",Ke.name,()=>{const Ye=u.runOutsideAngular(()=>Ke.database(i||void 0));return je&&Ye.useEmulator(...je),Ye},[je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>CF(this.database,t));let s=i;return r&&(s=r(i)),function gG(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:MF(r,"update"),set:MF(r,"set"),push:i=>r.push(i),remove:pG(r),snapshotChanges:i=>SF(n,i,t).pipe(Lt.iC),stateChanges:i=>AF(n,i,t).pipe(Lt.iC),auditTrail:i=>function dG(n,e,t){return function fG(n,e,t){return function hG(n,e){return cE(n,"value","on",e).pipe((0,ut.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function uH(...n){const e=(0,Wr.jO)(n);return(0,Cn.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,wc.Xf)(n[p]).subscribe(new hn.Q(r,y=>{s[p]=y,!h&&!u[p]&&(u[p]=!0,(h=u.every(Oo.y))&&(u=null))},Ax.Z));t.subscribe(new hn.Q(r,p=>{if(h){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,ut.U)(([i,s])=>{const u=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),function dH(n){return(0,Cn.e)((e,t)=>{let r=!1,i=0;e.subscribe(new hn.Q(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ut.U)(i=>i.actions))}(n,AF(n,e).pipe(ji((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Lt.iC),valueChanges:(i,s)=>SF(n,i,t).pipe((0,ut.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Lt.iC)}}(s,this)}object(t){return function mG(n,e){return{query:n,snapshotChanges:()=>xF(n,e.schedulers.outsideAngular)().pipe(Lt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>xF(n,e.schedulers.outsideAngular)().pipe(Lt.iC,(0,ut.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>CF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(kn.Dh),c.LFG(kn.xv,8),c.LFG(_G,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Lt.HU),c.LFG(yG,8),c.LFG($e,8),c.LFG(M,8),c.LFG(R,8),c.LFG(V,8),c.LFG(z,8),c.LFG(ne,8),c.LFG(Ce,8),c.LFG(Jy,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bG=(()=>{class n{constructor(){E.Z.registerVersion("angularfire",Lt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[vG]}),n})();class RF{}const eh="*";function uE(n,e){return{type:7,name:n,definitions:e,options:{}}}function wv(n,e=null){return{type:4,styles:e,timings:n}}function kF(n,e=null){return{type:2,steps:n,options:e}}function xa(n){return{type:6,styles:n,offset:null}}function Ev(n,e,t){return{type:0,name:n,styles:e,options:t}}function Xg(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function EG(n=null){return{type:9,options:n}}function CG(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function OF(n){Promise.resolve(null).then(n)}class Cv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){OF(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class PF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?OF(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function NF(){return"undefined"!=typeof window&&void 0!==window.document}function jR(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function tp(n){switch(n.length){case 0:return new Cv;case 1:return n[0];default:return new PF(n)}}function FF(n,e,t,r,i={},s={}){const u=[],h=[];let p=-1,y=null;if(r.forEach(C=>{const I=C.offset,x=I==p,P=x&&y||{};Object.keys(C).forEach(U=>{let X=U,le=C[U];if("offset"!==U)switch(X=e.normalizePropertyName(X,u),le){case"!":le=i[U];break;case eh:le=s[U];break;default:le=e.normalizeStyleValue(U,X,le,u)}P[X]=le}),x||h.push(P),y=P,p=I}),u.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${u.join(C)}`)}return h}function HR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&qR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&qR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&qR(t,"destroy",n)))}}function qR(n,e,t){const r=t.totalTime,s=$R(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function $R(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function Ra(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function LF(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let GR=(n,e)=>!1,VF=(n,e,t)=>[];(jR()||"undefined"!=typeof Element)&&(GR=NF()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),VF=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Jg=null,UF=!1;function zR(n){Jg||(Jg=function IG(){return"undefined"!=typeof document?document.body:null}()||{},UF=!!Jg.style&&"WebkitAppearance"in Jg.style);let e=!0;return Jg.style&&!function TG(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Jg.style,!e&&UF&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Jg.style)),e}const WR=GR,ZR=VF;function BF(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let jF=(()=>{class n{validateStyleProperty(t){return zR(t)}matchesElement(t,r){return!1}containsElement(t,r){return WR(t,r)}query(t,r,i){return ZR(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,h=[],p){return new Cv(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),KR=(()=>{class n{}return n.NOOP=new jF,n})();const YR="ng-enter",ZD="ng-leave",KD="ng-trigger",YD=".ng-trigger",qF="ng-animating",QR=".ng-animating";function em(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:XR(parseFloat(e[1]),e[2])}function XR(n,e){return"s"===e?1e3*n:n}function QD(n,e,t){return n.hasOwnProperty("duration")?n:function AG(n,e,t){let i,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=XR(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=XR(parseFloat(p),h[4]));const y=h[5];y&&(u=y)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(p,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:s,easing:u}}(n,e,t)}function Tv(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function np(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Tv(n,t);return t}function GF(n,e,t){return t?e+":"+t+";":""}function zF(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=GF(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=GF(0,RG(t),n.style[t]));n.setAttribute("style",e)}function Vu(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=ek(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),jR()&&zF(n))}function tm(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=ek(t);n.style[r]=""}),jR()&&zF(n))}function dE(n){return Array.isArray(n)?1==n.length?n[0]:kF(n):n}const JR=new RegExp("{{\\s*(.+?)\\s*}}","g");function WF(n){let e=[];if("string"==typeof n){let t;for(;t=JR.exec(n);)e.push(t[1]);JR.lastIndex=0}return e}function XD(n,e,t){const r=n.toString(),i=r.replace(JR,(s,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return i==r?n:i}function JD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const xG=/-+([a-z0-9])/g;function ek(n){return n.replace(xG,(...e)=>e[1].toUpperCase())}function RG(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ZF(n,e){return 0===n||0===e}function KF(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],u=[];if(r.forEach(h=>{s.hasOwnProperty(h)||u.push(h),s[h]=t[h]}),u.length)for(var i=1;i<e.length;i++){let h=e[i];u.forEach(function(p){h[p]=tk(n,p)})}}return e}function ka(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function tk(n,e){return window.getComputedStyle(n)[e]}function kG(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function OG(n,e,t){if(":"==n[0]){const p=function PG(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],s=r[2],u=r[3];e.push(YF(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push(YF(u,i))}(r,t,e)):t.push(n),t}const tS=new Set(["true","1"]),nS=new Set(["false","0"]);function YF(n,e){const t=tS.has(n)||nS.has(n),r=tS.has(e)||nS.has(e);return(i,s)=>{let u="*"==n||n==i,h="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?tS.has(n):nS.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?tS.has(e):nS.has(e)),u&&h}}const NG=new RegExp("s*:selfs*,?","g");function nk(n,e,t){return new FG(n).build(e,t)}class FG{constructor(e){this._driver=e}build(e,t){const r=new UG(t);return this._resetContextStyleTimingState(r),ka(this,dE(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,s.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};if(r.styles.forEach(h=>{if(rS(h)){const p=h;Object.keys(p).forEach(y=>{WF(p[y]).forEach(C=>{u.hasOwnProperty(C)||s.add(C)})})}}),s.size){const h=JD(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ka(this,dE(e.animation),t);return{type:1,matchers:kG(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:nm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ka(this,r,t)),options:nm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const h=ka(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:nm(e.options)}}visitAnimate(e,t){const r=function jG(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return rk(QD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=rk(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||QD(r,e),rk(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:xa({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,h=!1;if(!u){h=!0;const y={};r.easing&&(y.easing=r.easing),u=xa(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==eh?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,s=null;return r.forEach(u=>{if(rS(u)){const h=u,p=h.easing;if(p&&(s=p,delete h.easing),!i)for(let y in h)if(h[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const p=t.collectedStyles[t.currentQuerySelector],y=p[h];let C=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${y.startTime}ms" and "${y.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),C=!1),s=y.startTime),C&&(p[h]={startTime:s,endTime:i}),t.options&&function MG(n,e,t){const r=e.params||{},i=WF(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const u=[];let h=!1,p=!1,y=0;const C=e.steps.map(je=>{const Ke=this._makeStyleAst(je,t);let Ye=null!=Ke.offset?Ke.offset:function BG(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(rS(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(rS(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ke.styles),Ze=0;return null!=Ye&&(s++,Ze=Ke.offset=Ye),p=p||Ze<0||Ze>1,h=h||Ze<y,y=Ze,u.push(Ze),Ke});p&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const I=e.steps.length;let x=0;s>0&&s<I?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(x=1/(I-1));const P=I-1,U=t.currentTime,X=t.currentAnimateTimings,le=X.duration;return C.forEach((je,Ke)=>{const Ye=x>0?Ke==P?1:x*Ke:u[Ke],Ze=Ye*le;t.currentTime=U+X.delay+Ze,X.duration=Ze,this._validateStyleAst(je,t),je.offset=Ye,r.styles.push(je)}),r}visitReference(e,t){return{type:8,animation:ka(this,dE(e.animation),t),options:nm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:nm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:nm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function LG(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(NG,"")),n=n.replace(/@\*/g,YD).replace(/@\w+/g,t=>YD+"-"+t.substr(1)).replace(/:animating/g,QR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Ra(t.collectedStyles,t.currentQuerySelector,{});const h=ka(this,dE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:nm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:QD(e.timings,t.errors,!0);return{type:12,animation:ka(this,dE(e.animation),t),timings:r,options:null}}}class UG{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function rS(n){return!Array.isArray(n)&&"object"==typeof n}function nm(n){return n?(n=Tv(n)).params&&(n.params=function VG(n){return n?Tv(n):null}(n.params)):n={},n}function rk(n,e,t){return{duration:n,delay:e,easing:t}}function ik(n,e,t,r,i,s,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:h}}class iS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const $G=new RegExp(":enter","g"),zG=new RegExp(":leave","g");function sk(n,e,t,r,i,s={},u={},h,p,y=[]){return(new WG).buildKeyframes(n,e,t,r,i,s,u,h,p,y)}class WG{buildKeyframes(e,t,r,i,s,u,h,p,y,C=[]){y=y||new iS;const I=new ok(e,t,y,i,s,C,[]);I.options=p,I.currentTimeline.setStyles([u],null,I.errors,p),ka(this,r,I);const x=I.timelines.filter(P=>P.containsAnimation());if(Object.keys(h).length){let P;for(let U=x.length-1;U>=0;U--){const X=x[U];if(X.element===t){P=X;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([h],null,I.errors,p)}return x.length?x.map(P=>P.buildKeyframes()):[ik(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?em(r.duration):null,h=null!=r.delay?em(r.delay):null;return 0!==u&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,u,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ka(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=sS);const u=em(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>ka(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?em(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),ka(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return QD(t.params?XD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?em(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=sS);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const I=t.createSubContext(e.options,y);s&&I.delayNextStep(s),y===t.element&&(p=I.currentTimeline),ka(this,e.animation,I),I.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,I.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),h=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const C=t.currentTimeline;p&&C.delayNextStep(p);const I=C.currentTime;ka(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-I+(i.startTime-r.currentTimeline.startTime)}}const sS={};class ok{constructor(e,t,r,i,s,u,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new oS(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=em(r.duration)),null!=r.delay&&(i.delay=em(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=XD(s[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new ok(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=sS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new ZG(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace($G,"."+this._enterClassName)).replace(zG,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class oS{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new oS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||eh,this._currentKeyframe[t]=eh}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},u=function KG(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=eh})):np(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const p=XD(u[h],s,r);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:eh),this._updateStyle(h,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const y=np(h,!0);Object.keys(y).forEach(C=>{const I=y[C];"!"==I?e.add(C):I==eh&&t.add(C)}),r||(y.offset=p/this.duration),i.push(y)});const s=e.size?JD(e.values()):[],u=t.size?JD(t.values()):[];if(r){const h=i[0],p=Tv(h);h.offset=0,p.offset=1,i=[h,p]}return ik(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class ZG extends oS{constructor(e,t,r,i,s,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,h=t/u,p=np(e[0],!1);p.offset=0,s.push(p);const y=np(e[0],!1);y.offset=JF(h),s.push(y);const C=e.length-1;for(let I=1;I<=C;I++){let x=np(e[I],!1);x.offset=JF((t+x.offset*r)/u),s.push(x)}r=u,t=0,i="",e=s}return ik(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function JF(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ak{}class YG extends ak{normalizePropertyName(e,t){return ek(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(QG[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+s}}const QG=(()=>function XG(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function eL(n,e,t,r,i,s,u,h,p,y,C,I,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:C,totalTime:I,errors:x}}const lk={};class tL{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function JG(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):u}build(e,t,r,i,s,u,h,p,y,C){const I=[],x=this.ast.options&&this.ast.options.params||lk,U=this.buildStyles(r,h&&h.params||lk,I),X=p&&p.params||lk,le=this.buildStyles(i,X,I),je=new Set,Ke=new Map,Ye=new Map,Ze="void"===i,Wt={params:Object.assign(Object.assign({},x),X)},Ln=C?[]:sk(e,t,this.ast.animation,s,u,U,le,Wt,y,I);let br=0;if(Ln.forEach(Na=>{br=Math.max(Na.duration+Na.delay,br)}),I.length)return eL(t,this._triggerName,r,i,Ze,U,le,[],[],Ke,Ye,br,I);Ln.forEach(Na=>{const sh=Na.element,l2=Ra(Ke,sh,{});Na.preStyleProps.forEach(pm=>l2[pm]=!0);const HE=Ra(Ye,sh,{});Na.postStyleProps.forEach(pm=>HE[pm]=!0),sh!==t&&je.add(sh)});const bo=JD(je.values());return eL(t,this._triggerName,r,i,Ze,U,le,Ln,bo,Ke,Ye,br)}}class ez{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Tv(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!=u&&(i[s]=u)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const u=s;Object.keys(u).forEach(h=>{let p=u[h];p.length>1&&(p=XD(p,i,t));const y=this.normalizer.normalizePropertyName(h,t);p=this.normalizer.normalizeStyleValue(h,y,p,t),r[y]=p})}}),r}}class nz{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new ez(i.style,i.options&&i.options.params||{},r)}),nL(this.states,"true","1"),nL(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new tL(e,i,this.states))}),this.fallbackTransition=function rz(n,e,t){return new tL(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function nL(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const iz=new iS;class sz{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=nk(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,s=FF(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let u;const h=new Map;if(s?(u=sk(this._driver,t,s,YR,ZD,{},{},r,iz,i),u.forEach(C=>{const I=Ra(h,C.element,{});C.postStyleProps.forEach(x=>I[x]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((C,I)=>{Object.keys(C).forEach(x=>{C[x]=this._driver.computeStyle(I,x,eh)})});const y=tp(u.map(C=>{const I=h.get(C.element);return this._buildPlayer(C,{},I)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const s=$R(t,"","","");return HR(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const rL="ng-animate-queued",ck="ng-animate-disabled",uz=[],iL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},dz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tl="__ng_removed";class uk{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function gz(n){return null!=n?n:null}(r?e.value:e),r){const s=Tv(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const hE="void",dk=new uk(hE);class hz{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Il(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function mz(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const s=Ra(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const h=Ra(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(Il(e,KD),Il(e,KD+"-"+t),h[t]=dk),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new hk(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Il(e,KD),Il(e,KD+"-"+t),this._engine.statesByElement.set(e,h={}));let p=h[t];const y=new uk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h[t]=y,p||(p=dk),y.value!==hE&&p.value===y.value){if(!function vz(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const X=[],le=s.matchStyles(p.value,p.params,X),je=s.matchStyles(y.value,y.params,X);X.length?this._engine.reportError(X):this._engine.afterFlush(()=>{tm(e,le),Vu(e,je)})}return}const x=Ra(this._engine.playersByElement,e,[]);x.forEach(X=>{X.namespaceId==this.id&&X.triggerName==t&&X.queued&&X.destroy()});let P=s.matchTransition(p.value,y.value,e,y.params),U=!1;if(!P){if(!i)return;P=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:y,player:u,isFallbackTransition:U}),U||(Il(e,rL),u.onStart(()=>{Iv(e,rL)})),u.onDone(()=>{let X=this.players.indexOf(u);X>=0&&this.players.splice(X,1);const le=this._engine.playersByElement.get(e);if(le){let je=le.indexOf(u);je>=0&&le.splice(je,1)}}),this.players.push(u),x.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,YD,!0);r.forEach(i=>{if(i[Tl])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const h=[];if(Object.keys(s).forEach(p=>{if(u.set(p,s[p].value),this._triggers[p]){const y=this.trigger(e,p,hE,i);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&tp(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const p=this._triggers[u].fallbackTransition,y=r[u]||dk,C=new uk(hE),I=new hk(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:y,toState:C,player:I,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Tl];(!s||s===iL)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Il(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==r.triggerName){const p=$R(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,HR(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class fz{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new hz(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const u=r[i[s]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(aS(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!aS(t))return;const s=t[Tl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Il(e,ck)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Iv(e,ck))}removeNode(e,t,r,i){if(aS(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Tl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return aS(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,YD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,QR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return tp(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Tl];if(r&&r.setForRemoval){if(e[Tl]=iL,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(ck))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Il(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?tp(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new iS,i=[],s=new Map,u=[],h=new Map,p=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(gt=>{C.add(gt);const Dt=this.driver.query(gt,".ng-animate-queued",!0);for(let Mt=0;Mt<Dt.length;Mt++)C.add(Dt[Mt])});const I=this.bodyNode,x=Array.from(this.statesByElement.keys()),P=aL(x,this.collectedEnterElements),U=new Map;let X=0;P.forEach((gt,Dt)=>{const Mt=YR+X++;U.set(Dt,Mt),gt.forEach(gn=>Il(gn,Mt))});const le=[],je=new Set,Ke=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const Dt=this.collectedLeaveElements[gt],Mt=Dt[Tl];Mt&&Mt.setForRemoval&&(le.push(Dt),je.add(Dt),Mt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(gn=>je.add(gn)):Ke.add(Dt))}const Ye=new Map,Ze=aL(x,Array.from(je));Ze.forEach((gt,Dt)=>{const Mt=ZD+X++;Ye.set(Dt,Mt),gt.forEach(gn=>Il(gn,Mt))}),e.push(()=>{P.forEach((gt,Dt)=>{const Mt=U.get(Dt);gt.forEach(gn=>Iv(gn,Mt))}),Ze.forEach((gt,Dt)=>{const Mt=Ye.get(Dt);gt.forEach(gn=>Iv(gn,Mt))}),le.forEach(gt=>{this.processLeaveNode(gt)})});const Wt=[],Ln=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(t).forEach(Mt=>{const gn=Mt.player,Xi=Mt.element;if(Wt.push(gn),this.collectedEnterElements.length){const wo=Xi[Tl];if(wo&&wo.setForMove){if(wo.previousTriggersValues&&wo.previousTriggersValues.has(Mt.triggerName)){const gm=wo.previousTriggersValues.get(Mt.triggerName),up=this.statesByElement.get(Mt.element);up&&up[Mt.triggerName]&&(up[Mt.triggerName].value=gm)}return void gn.destroy()}}const qu=!I||!this.driver.containsElement(I,Xi),Fa=Ye.get(Xi),cp=U.get(Xi),Mr=this._buildInstruction(Mt,r,cp,Fa,qu);if(Mr.errors&&Mr.errors.length)return void Ln.push(Mr);if(qu)return gn.onStart(()=>tm(Xi,Mr.fromStyles)),gn.onDestroy(()=>Vu(Xi,Mr.toStyles)),void i.push(gn);if(Mt.isFallbackTransition)return gn.onStart(()=>tm(Xi,Mr.fromStyles)),gn.onDestroy(()=>Vu(Xi,Mr.toStyles)),void i.push(gn);const d2=[];Mr.timelines.forEach(wo=>{wo.stretchStartingKeyframe=!0,this.disabledNodes.has(wo.element)||d2.push(wo)}),Mr.timelines=d2,r.append(Xi,Mr.timelines),u.push({instruction:Mr,player:gn,element:Xi}),Mr.queriedElements.forEach(wo=>Ra(h,wo,[]).push(gn)),Mr.preStyleProps.forEach((wo,gm)=>{const up=Object.keys(wo);if(up.length){let mm=p.get(gm);mm||p.set(gm,mm=new Set),up.forEach(FO=>mm.add(FO))}}),Mr.postStyleProps.forEach((wo,gm)=>{const up=Object.keys(wo);let mm=y.get(gm);mm||y.set(gm,mm=new Set),up.forEach(FO=>mm.add(FO))})});if(Ln.length){const gt=[];Ln.forEach(Dt=>{gt.push(`@${Dt.triggerName} has failed due to:\n`),Dt.errors.forEach(Mt=>gt.push(`- ${Mt}\n`))}),Wt.forEach(Dt=>Dt.destroy()),this.reportError(gt)}const br=new Map,bo=new Map;u.forEach(gt=>{const Dt=gt.element;r.has(Dt)&&(bo.set(Dt,Dt),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,br))}),i.forEach(gt=>{const Dt=gt.element;this._getPreviousPlayers(Dt,!1,gt.namespaceId,gt.triggerName,null).forEach(gn=>{Ra(br,Dt,[]).push(gn),gn.destroy()})});const Na=le.filter(gt=>cL(gt,p,y)),sh=new Map;oL(sh,this.driver,Ke,y,eh).forEach(gt=>{cL(gt,p,y)&&Na.push(gt)});const HE=new Map;P.forEach((gt,Dt)=>{oL(HE,this.driver,new Set(gt),p,"!")}),Na.forEach(gt=>{const Dt=sh.get(gt),Mt=HE.get(gt);sh.set(gt,Object.assign(Object.assign({},Dt),Mt))});const pm=[],c2=[],u2={};u.forEach(gt=>{const{element:Dt,player:Mt,instruction:gn}=gt;if(r.has(Dt)){if(C.has(Dt))return Mt.onDestroy(()=>Vu(Dt,gn.toStyles)),Mt.disabled=!0,Mt.overrideTotalTime(gn.totalTime),void i.push(Mt);let Xi=u2;if(bo.size>1){let Fa=Dt;const cp=[];for(;Fa=Fa.parentNode;){const Mr=bo.get(Fa);if(Mr){Xi=Mr;break}cp.push(Fa)}cp.forEach(Mr=>bo.set(Mr,Xi))}const qu=this._buildAnimation(Mt.namespaceId,gn,br,s,HE,sh);if(Mt.setRealPlayer(qu),Xi===u2)pm.push(Mt);else{const Fa=this.playersByElement.get(Xi);Fa&&Fa.length&&(Mt.parentPlayer=tp(Fa)),i.push(Mt)}}else tm(Dt,gn.fromStyles),Mt.onDestroy(()=>Vu(Dt,gn.toStyles)),c2.push(Mt),C.has(Dt)&&i.push(Mt)}),c2.forEach(gt=>{const Dt=s.get(gt.element);if(Dt&&Dt.length){const Mt=tp(Dt);gt.setRealPlayer(Mt)}}),i.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<le.length;gt++){const Dt=le[gt],Mt=Dt[Tl];if(Iv(Dt,ZD),Mt&&Mt.hasAnimation)continue;let gn=[];if(h.size){let qu=h.get(Dt);qu&&qu.length&&gn.push(...qu);let Fa=this.driver.query(Dt,QR,!0);for(let cp=0;cp<Fa.length;cp++){let Mr=h.get(Fa[cp]);Mr&&Mr.length&&gn.push(...Mr)}}const Xi=gn.filter(qu=>!qu.destroyed);Xi.length?_z(this,Dt,Xi):this.processLeaveNode(Dt)}return le.length=0,pm.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const Dt=this.players.indexOf(gt);this.players.splice(Dt,1)}),gt.play()}),pm}elementContainsData(e,t){let r=!1;const i=t[Tl];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==hE;h.forEach(y=>{y.queued||!p&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,C=y!==s,I=Ra(r,y,[]);this._getPreviousPlayers(y,C,u,h,t.toState).forEach(P=>{const U=P.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),P.destroy(),I.push(P)})}tm(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const h=t.triggerName,p=t.element,y=[],C=new Set,I=new Set,x=t.timelines.map(U=>{const X=U.element;C.add(X);const le=X[Tl];if(le&&le.removedBeforeQueried)return new Cv(U.duration,U.delay);const je=X!==p,Ke=function yz(n){const e=[];return lL(n,e),e}((r.get(X)||uz).map(br=>br.getRealPlayer())).filter(br=>!!br.element&&br.element===X),Ye=s.get(X),Ze=u.get(X),Wt=FF(0,this._normalizer,0,U.keyframes,Ye,Ze),Ln=this._buildPlayer(U,Wt,Ke);if(U.subTimeline&&i&&I.add(X),je){const br=new hk(e,h,X);br.setRealPlayer(Ln),y.push(br)}return Ln});y.forEach(U=>{Ra(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function pz(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,U.element,U))}),C.forEach(U=>Il(U,qF));const P=tp(x);return P.onDestroy(()=>{C.forEach(U=>Iv(U,qF)),Vu(p,t.toStyles)}),I.forEach(U=>{Ra(i,U,[]).push(P)}),P}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Cv(e.duration,e.delay)}}class hk{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Cv,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>HR(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ra(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function aS(n){return n&&1===n.nodeType}function sL(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function oL(n,e,t,r,i){const s=[];t.forEach(p=>s.push(sL(p)));const u=[];r.forEach((p,y)=>{const C={};p.forEach(I=>{const x=C[I]=e.computeStyle(y,I,i);(!x||0==x.length)&&(y[Tl]=dz,u.push(y))}),n.set(y,C)});let h=0;return t.forEach(p=>sL(p,s[h++])),u}function aL(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:i.has(y)?1:u(y),s.set(h,p),p}return e.forEach(h=>{const p=u(h);1!==p&&t.get(p).push(h)}),t}function Il(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Iv(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function _z(n,e,t){tp(t).onDone(()=>n.processLeaveNode(e))}function lL(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof PF?lL(r.players,e):e.push(r)}}function cL(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class lS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new fz(e,t,r),this._timelineEngine=new sz(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const p=[],y=nk(this._driver,s,p);if(p.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);h=function tz(n,e,t){return new nz(n,e,t)}(i,y,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=LF(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,h]=LF(r);return this._timelineEngine.listen(u,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function uL(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=fk(e[0]),e.length>1&&(r=fk(e[e.length-1]))):e&&(t=fk(e)),t||r?new bz(n,t,r):null}let bz=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Vu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vu(this._element,this._initialStyles),this._endStyles&&(Vu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(tm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tm(this._element,this._endStyles),this._endStyles=null),Vu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function fk(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];wz(i)&&(e=e||{},e[i]=n[i])}return e}function wz(n){return"display"===n||"position"===n}const dL="animation",hL="animationend";class Tz{constructor(e,t,r,i,s,u,h){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=s,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function Iz(n,e){const t=gk(n,"").trim();let r=0;t.length&&(r=function Sz(n,e){let t=0;for(let r=0;r<n.length;r++)n.charAt(r)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),cS(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),gL(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){fL(this._element,this._name,"paused")}resume(){fL(this._element,this._name,"running")}setPosition(e){const t=pL(this._element,this._name);this._position=e*this._duration,cS(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),gL(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function Dz(n,e){const r=gk(n,"").split(","),i=pk(r,e);i>=0&&(r.splice(i,1),cS(n,"",r.join(",")))}(this._element,this._name))}}function fL(n,e,t){cS(n,"PlayState",t,pL(n,e))}function pL(n,e){const t=gk(n,"");return t.indexOf(",")>0?pk(t.split(","),e):pk([t],e)}function pk(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function gL(n,e,t){t?n.removeEventListener(hL,e):n.addEventListener(hL,e)}function cS(n,e,t,r){const i=dL+e;if(null!=r){const s=n.style[i];if(s.length){const u=s.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function gk(n,e){return n.style[dL+e]||""}class mL{constructor(e,t,r,i,s,u,h,p){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=h,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Tz(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:tk(this.element,r))})}this.currentSnapshot=e}}class xz extends Cv{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=BF(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class yL{constructor(){this._count=0}validateStyleProperty(e){return zR(e)}matchesElement(e,t){return!1}containsElement(e,t){return WR(e,t)}query(e,t,r){return ZR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(h=>BF(h));let i=`@keyframes ${t} {\n`,s="";r.forEach(h=>{s=" ";const p=parseFloat(h.offset);i+=`${s}${100*p}% {\n`,s+=" ",Object.keys(h).forEach(y=>{const C=h[y];switch(y){case"offset":return;case"easing":return void(C&&(i+=`${s}animation-timing-function: ${C};\n`));default:return void(i+=`${s}${y}: ${C};\n`)}}),i+=`${s}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,s,u=[],h){const p=u.filter(le=>le instanceof mL),y={};ZF(r,i)&&p.forEach(le=>{let je=le.currentSnapshot;Object.keys(je).forEach(Ke=>y[Ke]=je[Ke])});const C=function Oz(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=KF(e,t,y));if(0==r)return new xz(e,C);const I="gen_css_kf_"+this._count++,x=this.buildKeyframeElement(e,I,t);(function kz(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(x);const U=uL(e,t),X=new mL(e,t,I,r,i,s,C,U);return X.onDestroy(()=>function Pz(n){n.parentNode.removeChild(n)}(x)),X}}class bL{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:tk(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Nz{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(wL().toString()),this._cssKeyframesDriver=new yL}validateStyleProperty(e){return zR(e)}matchesElement(e,t){return!1}containsElement(e,t){return WR(e,t)}query(e,t,r){return ZR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,s,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,s,u);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(C.easing=s);const I={},x=u.filter(U=>U instanceof bL);ZF(r,i)&&x.forEach(U=>{let X=U.currentSnapshot;Object.keys(X).forEach(le=>I[le]=X[le])});const P=uL(e,t=KF(e,t=t.map(U=>np(U,!1)),I));return new bL(e,t,C,P)}}function wL(){return NF()&&Element.prototype.animate||{}}let Lz=(()=>{class n extends RF{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?kF(t):t;return EL(this._renderer,null,r,"register",[i]),new Vz(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Vz extends class wG{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Uz(this._id,e,t||{},this._renderer)}}class Uz{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return EL(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function EL(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const CL="@.disabled";let Bz=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const h=null==u?void 0:u.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new TL("",s,this.engine),this._rendererCache.set(s,C)),C}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(u,h,t,C.name,C)};return r.data.animation.forEach(p),new jz(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(lS),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class TL{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==CL?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class jz extends TL{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==CL?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Hz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),u="";return"@"!=s.charAt(0)&&([s,u]=function qz(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let $z=(()=>{class n extends lS{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se),c.LFG(KR),c.LFG(ak))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Dv=new c.OlP("AnimationModuleType"),IL=[{provide:RF,useClass:Lz},{provide:ak,useFactory:function zz(){return new YG}},{provide:lS,useClass:$z},{provide:c.FYo,useFactory:function Wz(n,e,t){return new Bz(n,e,t)},deps:[bi,lS,c.R0b]}],DL=[{provide:KR,useFactory:function Gz(){return function Fz(){return"function"==typeof wL()}()?new Nz:new yL}},{provide:Dv,useValue:"BrowserAnimations"},...IL],Zz=[{provide:KR,useClass:jF},{provide:Dv,useValue:"NoopAnimations"},...IL];let Kz=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Zz:DL}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:DL,imports:[vh]}),n})();class Oa extends nn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:Yz}=Array,{getPrototypeOf:Qz,prototype:Xz,keys:Jz}=Object;function SL(n){if(1===n.length){const e=n[0];if(Yz(e))return{args:e,keys:null};if(function e6(n){return n&&"object"==typeof n&&Qz(n)===Xz}(e)){const t=Jz(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:t6}=Array;function mk(n){return(0,ut.U)(e=>function n6(n,e){return t6(e)?n(...e):n(e)}(n,e))}function AL(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var r6=F(9672);function ML(n,e,t){n?(0,r6.f)(t,n,e):e()}function dS(n){return new En.y(e=>{(0,wc.Xf)(n()).subscribe(e)})}var rm=F(515),yo=F(727);function xL(){return(0,Cn.e)((n,e)=>{let t=null;n._refCount++;const r=new hn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class o6 extends En.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Cn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yo.w0;const t=this.getSubject();e.add(this.source.subscribe(new hn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yo.w0.EMPTY)}return e}refCount(){return xL()(this)}}function th(n){return(0,Cn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new hn.Q(t,void 0,void 0,u=>{s=(0,wc.Xf)(n(u,th(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var Yi=F(5577);function Sv(n,e){return(0,Da.m)(e)?(0,Yi.z)(n,e,1):(0,Yi.z)(n,1)}function _k(n){return n<=0?()=>rm.E:(0,Cn.e)((e,t)=>{let r=[];e.subscribe(new hn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var Qi=F(8505);function yk(n){return(0,Cn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class nh{constructor(e,t){this.id=e,this.url=t}}class vk extends nh{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fE extends nh{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class RL extends nh{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class l6 extends nh{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class c6 extends nh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u6 extends nh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d6 extends nh{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class h6 extends nh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f6 extends nh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kL{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class OL{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class p6{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g6{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m6{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _6{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Xt="primary";class y6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Av(n){return new y6(n)}const NL="ngNavigationCancelingError";function bk(n){const e=Error("NavigationCancelingError: "+n);return e[NL]=!0,e}function b6(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],h=n[s];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Uu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!FL(n[i],e[i]))return!1;return!0}function FL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function LL(n){return Array.prototype.concat.apply([],n)}function VL(n){return n.length>0?n[n.length-1]:null}function _s(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Bu(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Rt.D)(Promise.resolve(n)):lt(n)}const C6={exact:function jL(n,e,t){if(!sm(n.segments,e.segments)||!hS(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!jL(n.children[r],e.children[r],t))return!1;return!0},subset:HL},UL={exact:function T6(n,e){return Uu(n,e)},subset:function I6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>FL(n[t],e[t]))},ignored:()=>!0};function BL(n,e,t){return C6[t.paths](n.root,e.root,t.matrixParams)&&UL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function HL(n,e,t){return qL(n,e,e.segments,t)}function qL(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!sm(i,t)||e.hasChildren()||!hS(i,t,r))}if(n.segments.length===t.length){if(!sm(n.segments,t)||!hS(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!HL(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(sm(n.segments,i)&&hS(n.segments,i,r)&&n.children[Xt])&&qL(n.children[Xt],e,s,r)}}function hS(n,e,t){return e.every((r,i)=>UL[t](n[i].parameters,r.parameters))}class im{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Av(this.queryParams)),this._queryParamMap}toString(){return A6.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,_s(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fS(this)}}class pE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Av(this.parameters)),this._parameterMap}toString(){return ZL(this)}}function sm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class $L{}class GL{parse(e){const t=new L6(e);return new im(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${gE(e.root,!0)}`,r=function R6(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${pS(t)}=${pS(i)}`).join("&"):`${pS(t)}=${pS(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function M6(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const A6=new GL;function fS(n){return n.segments.map(e=>ZL(e)).join("/")}function gE(n,e){if(!n.hasChildren())return fS(n);if(e){const t=n.children[Xt]?gE(n.children[Xt],!1):"",r=[];return _s(n.children,(i,s)=>{s!==Xt&&r.push(`${s}:${gE(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function S6(n,e){let t=[];return _s(n.children,(r,i)=>{i===Xt&&(t=t.concat(e(r,i)))}),_s(n.children,(r,i)=>{i!==Xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Xt?[gE(n.children[Xt],!1)]:[`${i}:${gE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${fS(n)}/${t[0]}`:`${fS(n)}/(${t.join("//")})`}}function zL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pS(n){return zL(n).replace(/%3B/gi,";")}function wk(n){return zL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gS(n){return decodeURIComponent(n)}function WL(n){return gS(n.replace(/\+/g,"%20"))}function ZL(n){return`${wk(n.path)}${function x6(n){return Object.keys(n).map(e=>`;${wk(e)}=${wk(n[e])}`).join("")}(n.parameters)}`}const k6=/^[^\/()?;=#]+/;function mS(n){const e=n.match(k6);return e?e[0]:""}const O6=/^[^=?&#]+/,N6=/^[^&#]+/;class L6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new rn(e,t)),r}parseSegment(){const e=mS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new pE(gS(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mS(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=mS(this.remaining);i&&(r=i,this.capture(r))}e[gS(t)]=gS(r)}parseQueryParam(e){const t=function P6(n){const e=n.match(O6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function F6(n){const e=n.match(N6);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=WL(t),s=WL(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Xt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Xt]:new rn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class KL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ek(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ek(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ck(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ck(e,this._root).map(t=>t.value)}}function Ek(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ek(n,t);if(r)return r}return null}function Ck(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ck(n,t);if(r.length)return r.unshift(e),r}return[]}class rh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mv(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class YL extends KL{constructor(e,t){super(e),this.snapshot=t,Tk(this,e)}toString(){return this.snapshot.toString()}}function QL(n,e){const t=function V6(n,e){const u=new _S([],{},{},"",{},Xt,e,null,n.root,-1,{});return new JL("",new rh(u,[]))}(n,e),r=new Oa([new pE("",{})]),i=new Oa({}),s=new Oa({}),u=new Oa({}),h=new Oa(""),p=new xv(r,i,u,h,s,Xt,e,t.root);return p.snapshot=t.root,new YL(new rh(p,[]),t)}class xv{constructor(e,t,r,i,s,u,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(e=>Av(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(e=>Av(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function XL(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function U6(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _S{constructor(e,t,r,i,s,u,h,p,y,C,I){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=C,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Av(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Av(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class JL extends KL{constructor(e,t){super(t),this.url=e,Tk(this,t)}toString(){return eV(this._root)}}function Tk(n,e){e.value._routerState=n,e.children.forEach(t=>Tk(n,t))}function eV(n){const e=n.children.length>0?` { ${n.children.map(eV).join(", ")} } `:"";return`${n.value}${e}`}function Ik(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Uu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Uu(e.params,t.params)||n.params.next(t.params),function w6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Uu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Uu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Dk(n,e){const t=Uu(n.params,e.params)&&function D6(n,e){return sm(n,e)&&n.every((t,r)=>Uu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Dk(n.parent,e.parent))}function mE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function j6(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return mE(n,r,i);return mE(n,r)})}(n,e,t);return new rh(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>mE(n,h)),u}}const r=function H6(n){return new xv(new Oa(n.url),new Oa(n.params),new Oa(n.queryParams),new Oa(n.fragment),new Oa(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>mE(n,s));return new rh(r,i)}}function yS(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _E(n){return"object"==typeof n&&null!=n&&n.outlets}function Sk(n,e,t,r,i){let s={};return r&&_s(r,(u,h)=>{s[h]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`}),new im(t.root===n?e:tV(t.root,n,e),s,i)}function tV(n,e,t){const r={};return _s(n.children,(i,s)=>{r[s]=i===e?t:tV(i,e,t)}),new rn(n.segments,r)}class nV{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yS(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(_E);if(i&&i!==VL(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ak{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function rV(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return vS(n,e,t);const r=function Z6(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],h=t[r];if(_E(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!sV(p,y,u))return s;r+=2}else{if(!sV(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new rn(n.segments.slice(0,r.pathIndex),{});return s.children[Xt]=new rn(n.segments.slice(r.pathIndex),n.children),vS(s,0,i)}return r.match&&0===i.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?Mk(n,e,t):r.match?vS(n,0,i):Mk(n,e,t)}function vS(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function W6(n){return _E(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};return _s(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=rV(n.children[u],e,s))}),_s(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new rn(n.segments,i)}}function Mk(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(_E(s)){const p=K6(s.outlets);return new rn(r,p)}if(0===i&&yS(t[0])){r.push(new pE(n.segments[e].path,iV(t[0]))),i++;continue}const u=_E(s)?s.outlets[Xt]:`${s}`,h=i<t.length-1?t[i+1]:null;u&&h&&yS(h)?(r.push(new pE(u,iV(h))),i+=2):(r.push(new pE(u,{})),i++)}return new rn(r,{})}function K6(n){const e={};return _s(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Mk(new rn([],{}),0,t))}),e}function iV(n){const e={};return _s(n,(t,r)=>e[r]=`${t}`),e}function sV(n,e,t){return n==t.path&&Uu(e,t.parameters)}class Q6{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ik(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Mv(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),_s(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mv(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mv(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Mv(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new _6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new g6(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Ik(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),Ik(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=function X6(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=p,u.outlet&&u.outlet.activateWith(i,p),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class xk{constructor(e,t){this.routes=e,this.module=t}}function rp(n){return"function"==typeof n}function om(n){return n instanceof im}const yE=Symbol("INITIAL_VALUE");function vE(){return Sr(n=>function i6(...n){const e=(0,Wr.yG)(n),t=(0,Wr.jO)(n),{args:r,keys:i}=SL(n);if(0===r.length)return(0,Rt.D)([],e);const s=new En.y(function s6(n,e,t=Oo.y){return r=>{ML(e,()=>{const{length:i}=n,s=new Array(i);let u=i,h=i;for(let p=0;p<i;p++)ML(e,()=>{const y=(0,Rt.D)(n[p],e);let C=!1;y.subscribe(new hn.Q(r,I=>{s[p]=I,C||(C=!0,h--),h||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>AL(i,u):Oo.y));return t?s.pipe(mk(t)):s}(n.map(e=>e.pipe((0,ei.q)(1),wi(yE)))).pipe(ji((e,t)=>{let r=!1;return t.reduce((i,s,u)=>i!==yE?i:(s===yE&&(r=!0),r||!1!==s&&u!==t.length-1&&!om(s)?i:s),e)},yE),fn(e=>e!==yE),(0,ut.U)(e=>om(e)?e:!0===e),(0,ei.q)(1)))}class iW{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bE,this.attachRef=null}}class bE{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new iW,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Rk=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||Xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new sW(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(bE),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class sW{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xv?this.route:e===bE?this.childContexts:this.parent.get(e,t)}}let oV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Rk],encapsulation:2}),n})();function aV(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];oW(r,aW(e,r))}}function oW(n,e){n.children&&aV(n.children,e)}function aW(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function kk(n){const e=n.children&&n.children.map(kk),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=oV),t}function Dl(n){return n.outlet||Xt}function lV(n,e){const t=n.filter(r=>Dl(r)===e);return t.push(...n.filter(r=>Dl(r)!==e)),t}const cV={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function bS(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},cV):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||b6)(t,n,e);if(!s)return Object.assign({},cV);const u={};_s(s.posParams,(p,y)=>{u[y]=p.path});const h=s.consumed.length>0?Object.assign(Object.assign({},u),s.consumed[s.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:h,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function wS(n,e,t,r,i="corrected"){if(t.length>0&&function uW(n,e,t){return t.some(r=>ES(n,e,r)&&Dl(r)!==Xt)}(n,t,r)){const u=new rn(e,function cW(n,e,t,r){const i={};i[Xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Dl(s)!==Xt){const u=new rn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Dl(s)]=u}return i}(n,e,r,new rn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function dW(n,e,t){return t.some(r=>ES(n,e,r))}(n,t,r)){const u=new rn(n.segments,function lW(n,e,t,r,i,s){const u={};for(const h of r)if(ES(n,t,h)&&!i[Dl(h)]){const p=new rn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[Dl(h)]=p}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new rn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ES(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function uV(n,e,t,r){return!!(Dl(n)===r||r!==Xt&&ES(e,t,n))&&("**"===n.path||bS(e,n,t).matched)}function dV(n,e,t){return 0===e.length&&!n.children[t]}class wE{constructor(e){this.segmentGroup=e||null}}class hV{constructor(e){this.urlTree=e}}function CS(n){return new En.y(e=>e.error(new wE(n)))}function fV(n){return new En.y(e=>e.error(new hV(n)))}function hW(n){return new En.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class gW{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=wS(this.urlTree.root,[],[],this.config).segmentGroup,t=new rn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Xt).pipe((0,ut.U)(s=>this.createUrlTree(Ok(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(th(s=>{if(s instanceof hV)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof wE?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Xt).pipe((0,ut.U)(i=>this.createUrlTree(Ok(i),e.queryParams,e.fragment))).pipe(th(i=>{throw i instanceof wE?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new rn([],{[Xt]:e}):e;return new im(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ut.U)(s=>new rn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Rt.D)(i).pipe(Sv(s=>{const u=r.children[s],h=lV(t,s);return this.expandSegmentGroup(e,h,u,s).pipe((0,ut.U)(p=>({segment:p,outlet:s})))}),ji((s,u)=>(s[u.outlet]=u.segment,s),{}),function a6(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fn((i,s)=>n(i,s,r)):Oo.y,_k(1),t?l0(e):AI(()=>new $f))}())}expandSegment(e,t,r,i,s,u){return(0,Rt.D)(r).pipe(Sv(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,u).pipe(th(y=>{if(y instanceof wE)return lt(null);throw y}))),Ec(h=>!!h),th((h,p)=>{if(h instanceof $f||"EmptyError"===h.name){if(dV(t,i,s))return lt(new rn([],{}));throw new wE(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,u,h){return uV(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):CS(t):CS(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?fV(s):this.lineralizeSegments(r,s).pipe((0,Yi.z)(u=>{const h=new rn(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:h,consumedSegments:p,lastChild:y,positionalParamSegments:C}=bS(t,i,s);if(!h)return CS(t);const I=this.applyRedirectCommands(p,i.redirectTo,C);return i.redirectTo.startsWith("/")?fV(I):this.lineralizeSegments(i,I).pipe((0,Yi.z)(x=>this.expandSegment(e,t,r,x.concat(s.slice(y)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?lt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ut.U)(x=>(r._loadedConfig=x,new rn(i,{})))):lt(new rn(i,{}));const{matched:u,consumedSegments:h,lastChild:p}=bS(t,r,i);if(!u)return CS(t);const y=i.slice(p);return this.getChildConfig(e,r,i).pipe((0,Yi.z)(I=>{const x=I.module,P=I.routes,{segmentGroup:U,slicedSegments:X}=wS(t,h,y,P),le=new rn(U.segments,U.children);if(0===X.length&&le.hasChildren())return this.expandChildren(x,P,le).pipe((0,ut.U)(Ze=>new rn(h,Ze)));if(0===P.length&&0===X.length)return lt(new rn(h,{}));const je=Dl(r)===s;return this.expandSegment(x,le,P,X,je?Xt:s,!0).pipe((0,ut.U)(Ye=>new rn(h.concat(Ye.segments),Ye.children)))}))}getChildConfig(e,t,r){return t.children?lt(new xk(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?lt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Yi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,ut.U)(s=>(t._loadedConfig=s,s))):function fW(n){return new En.y(e=>e.error(bk(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):lt(new xk([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return lt(!0);const s=i.map(u=>{const h=e.get(u);let p;if(function eW(n){return n&&rp(n.canLoad)}(h))p=h.canLoad(t,r);else{if(!rp(h))throw new Error("Invalid CanLoad guard");p=h(t,r)}return Bu(p)});return lt(s).pipe(vE(),(0,Qi.b)(u=>{if(!om(u))return;const h=bk(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,ut.U)(u=>!0===u))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return lt(r);if(i.numberOfChildren>1||!i.children[Xt])return hW(e.redirectTo);i=i.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new im(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return _s(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return _s(t.children,(h,p)=>{u[p]=this.createSegmentGroup(e,h,r,i)}),new rn(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Ok(n){const e={};for(const r of Object.keys(n.children)){const s=Ok(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function mW(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}class pV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class TS{constructor(e,t){this.component=e,this.route=t}}function yW(n,e,t){const r=n._root;return EE(r,e?e._root:null,t,[r.value])}function IS(n,e,t){const r=function bW(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function EE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Mv(e);return n.children.forEach(u=>{(function wW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function EW(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!sm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!sm(n.url,e.url)||!Uu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dk(n,e)||!Uu(n.queryParams,e.queryParams);default:return!Dk(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new pV(r)):(s.data=u.data,s._resolvedData=u._resolvedData),EE(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new TS(h.outlet.component,u))}else u&&CE(e,h,i),i.canActivateChecks.push(new pV(r)),EE(n,null,s.component?h?h.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),_s(s,(u,h)=>CE(u,t.getContext(h),i)),i}function CE(n,e,t){const r=Mv(n),i=n.value;_s(r,(s,u)=>{CE(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new TS(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class RW{}function gV(n){return new En.y(e=>e.error(n))}class OW{constructor(e,t,r,i,s,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=u}recognize(){const e=wS(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Xt);if(null===t)return null;const r=new _S([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new rh(r,t),s=new JL(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=XL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const u=t.children[s],h=lV(e,s),p=this.processSegmentGroup(h,u,s);if(null===p)return null;r.push(...p)}const i=mV(r);return function PW(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const u=this.processSegmentAgainstRoute(s,t,r,i);if(null!==u)return u}return dV(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!uV(e,t,r,i))return null;let s,u=[],h=[];if("**"===e.path){const P=r.length>0?VL(r).parameters:{};s=new _S(r,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vV(e),Dl(e),e.component,e,_V(t),yV(t)+r.length,bV(e))}else{const P=bS(t,e,r);if(!P.matched)return null;u=P.consumedSegments,h=r.slice(P.lastChild),s=new _S(u,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vV(e),Dl(e),e.component,e,_V(t),yV(t)+u.length,bV(e))}const p=function NW(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:C}=wS(t,u,h,p.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren()){const P=this.processChildren(p,y);return null===P?null:[new rh(s,P)]}if(0===p.length&&0===C.length)return[new rh(s,[])];const I=Dl(e)===i,x=this.processSegment(p,y,C,I?Xt:i);return null===x?null:[new rh(s,x)]}}function FW(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function mV(n){const e=[],t=new Set;for(const r of n){if(!FW(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=mV(r.children);e.push(new rh(r.value,i))}return e.filter(r=>!t.has(r))}function _V(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yV(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function vV(n){return n.data||{}}function bV(n){return n.resolve||{}}function Pk(n){return Sr(e=>{const t=n(e);return t?(0,Rt.D)(t).pipe((0,ut.U)(()=>e)):lt(e)})}class $W extends class qW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Nk=new c.OlP("ROUTES");class wV{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ut.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=s.create(e);return new xk(LL(u.injector.get(Nk,void 0,c.XFs.Self|c.XFs.Optional)).map(kk),u)}),th(s=>{throw t._loader$=void 0,s}));return t._loader$=new o6(i,()=>new nn.x).pipe(xL()),t._loader$}loadModuleFactory(e){return Bu(e()).pipe((0,Yi.z)(t=>t instanceof c.YKP?lt(t):(0,Rt.D)(this.compiler.compileModuleAsync(t))))}}class zW{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function WW(n){throw n}function ZW(n,e,t){return e.parse("/")}function EV(n,e){return lt(null)}const KW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xi=(()=>{class n{constructor(t,r,i,s,u,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nn.x,this.errorHandler=WW,this.malformedUriErrorHandler=ZW,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:EV,afterPreactivation:EV},this.urlHandlingStrategy=new zW,this.routeReuseStrategy=new $W,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(c.h0i),this.console=u.get(c.c2e);const I=u.get(c.R0b);this.isNgZoneEnabled=I instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function E6(){return new im(new rn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new wV(u,h,x=>this.triggerEvent(new kL(x)),x=>this.triggerEvent(new OL(x))),this.routerState=QL(this.currentUrlTree,this.rootComponentType),this.transitions=new Oa({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(fn(i=>0!==i.id),(0,ut.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Sr(i=>{let s=!1,u=!1;return lt(i).pipe((0,Qi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Sr(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return DS(h.source)&&(this.browserUrlTree=h.extractedUrl),lt(h).pipe(Sr(I=>{const x=this.transitions.getValue();return r.next(new vk(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),x!==this.transitions.getValue()?rm.E:Promise.resolve(I)}),function _W(n,e,t,r){return Sr(i=>function pW(n,e,t,r,i){return new gW(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ut.U)(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qi.b)(I=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function LW(n,e,t,r,i){return(0,Yi.z)(s=>function kW(n,e,t,r,i="emptyOnly",s="legacy"){try{const u=new OW(n,e,t,r,i,s).recognize();return null===u?gV(new RW):lt(u)}catch(u){return gV(u)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,ut.U)(u=>Object.assign(Object.assign({},s),{targetSnapshot:u}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qi.b)(I=>{if("eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(P,I)}this.browserUrlTree=I.urlAfterRedirects}const x=new c6(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:P,source:U,restoredState:X,extras:le}=h,je=new vk(x,this.serializeUrl(P),U,X);r.next(je);const Ke=QL(P,this.rootComponentType).snapshot;return lt(Object.assign(Object.assign({},h),{targetSnapshot:Ke,urlAfterRedirects:P,extras:Object.assign(Object.assign({},le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),rm.E}),Pk(h=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:I,extras:{skipLocationChange:x,replaceUrl:P}}=h;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:I,skipLocationChange:!!x,replaceUrl:!!P})}),(0,Qi.b)(h=>{const p=new u6(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,ut.U)(h=>Object.assign(Object.assign({},h),{guards:yW(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function CW(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?lt(Object.assign(Object.assign({},t),{guardsResult:!0})):function TW(n,e,t,r){return(0,Rt.D)(n).pipe((0,Yi.z)(i=>function xW(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?lt(s.map(h=>{const p=IS(h,e,i);let y;if(function rW(n){return n&&rp(n.canDeactivate)}(p))y=Bu(p.canDeactivate(n,e,t,r));else{if(!rp(p))throw new Error("Invalid CanDeactivate guard");y=Bu(p(n,e,t,r))}return y.pipe(Ec())})).pipe(vE()):lt(!0)}(i.component,i.route,t,e,r)),Ec(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Yi.z)(h=>h&&function J6(n){return"boolean"==typeof n}(h)?function IW(n,e,t,r){return(0,Rt.D)(e).pipe(Sv(i=>Rn(function SW(n,e){return null!==n&&e&&e(new p6(n)),lt(!0)}(i.route.parent,r),function DW(n,e){return null!==n&&e&&e(new m6(n)),lt(!0)}(i.route,r),function MW(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function vW(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>dS(()=>lt(u.guards.map(p=>{const y=IS(p,u.node,t);let C;if(function nW(n){return n&&rp(n.canActivateChild)}(y))C=Bu(y.canActivateChild(r,n));else{if(!rp(y))throw new Error("Invalid CanActivateChild guard");C=Bu(y(r,n))}return C.pipe(Ec())})).pipe(vE())));return lt(s).pipe(vE())}(n,i.path,t),function AW(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return lt(!0);const i=r.map(s=>dS(()=>{const u=IS(s,e,t);let h;if(function tW(n){return n&&rp(n.canActivate)}(u))h=Bu(u.canActivate(e,n));else{if(!rp(u))throw new Error("Invalid CanActivate guard");h=Bu(u(e,n))}return h.pipe(Ec())}));return lt(i).pipe(vE())}(n,i.route,t))),Ec(i=>!0!==i,!0))}(r,s,n,e):lt(h)),(0,ut.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Qi.b)(h=>{if(om(h.guardsResult)){const y=bk(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new d6(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),fn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),Pk(h=>{if(h.guards.canActivateChecks.length)return lt(h).pipe((0,Qi.b)(p=>{const y=new h6(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Sr(p=>{let y=!1;return lt(p).pipe(function VW(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return lt(t);let s=0;return(0,Rt.D)(i).pipe(Sv(u=>function UW(n,e,t,r){return function BW(n,e,t,r){const i=Object.keys(n);if(0===i.length)return lt({});const s={};return(0,Rt.D)(i).pipe((0,Yi.z)(u=>function jW(n,e,t,r){const i=IS(n,e,r);return Bu(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,Qi.b)(h=>{s[u]=h}))),_k(1),(0,Yi.z)(()=>Object.keys(s).length===i.length?lt(s):rm.E))}(n._resolve,n,e,r).pipe((0,ut.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),XL(n,t).resolve),null)))}(u.route,r,n,e)),(0,Qi.b)(()=>s++),_k(1),(0,Yi.z)(u=>s===i.length?lt(t):rm.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Qi.b)(p=>{const y=new f6(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),Pk(h=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:I,extras:{skipLocationChange:x,replaceUrl:P}}=h;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:I,skipLocationChange:!!x,replaceUrl:!!P})}),(0,ut.U)(h=>{const p=function B6(n,e,t){const r=mE(n,e._root,t?t._root:void 0);return new YL(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:p})}),(0,Qi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ut.U)(r=>(new Q6(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Qi.b)({next(){s=!0},complete(){s=!0}}),yk(()=>{var h;s||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),th(h=>{if(u=!0,function v6(n){return n&&n[NL]}(h)){const p=om(h.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new RL(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(y),p?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||DS(i.source)};this.scheduleNavigation(C,"imperative",null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new l6(i.id,this.serializeUrl(i.extractedUrl),h);r.next(p);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return rm.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const p=Object.assign({},u);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){aV(t),this.config=t.map(kk),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:p}=r,y=i||this.routerState.root,C=p?this.currentUrlTree.fragment:u;let I=null;switch(h){case"merge":I=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),function q6(n,e,t,r,i){if(0===t.length)return Sk(e.root,e.root,e,r,i);const s=function $6(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new nV(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return _s(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new nV(t,e,r)}(t);if(s.toRoot())return Sk(e.root,new rn([],{}),e,r,i);const u=function G6(n,e,t){if(n.isAbsolute)return new Ak(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Ak(s,s===e.root,0)}const r=yS(n.commands[0])?0:1;return function z6(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ak(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),h=u.processChildren?vS(u.segmentGroup,u.index,s.commands):rV(u.segmentGroup,u.index,s.commands);return Sk(u.segmentGroup,h,e,r,i)}(y,this.currentUrlTree,t,I,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=om(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function QW(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},KW):!1===r?Object.assign({},YW):r,om(t))return BL(this.currentUrlTree,t,i);const s=this.parseUrl(t);return BL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new fE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){var h,p,y;if(this.disposed)return Promise.resolve(!1);const C=this.transitions.value,I=DS(r)&&C&&!DS(C.source),x=C.rawUrl.toString()===t.toString(),P=C.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(I&&x&&P)return Promise.resolve(!0);let X,le,je;u?(X=u.resolve,le=u.reject,je=u.promise):je=new Promise((Ze,Wt)=>{X=Ze,le=Wt});const Ke=++this.navigationId;let Ye;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Ye=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):Ye=0,this.setTransition({id:Ke,targetPageId:Ye,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:X,reject:le,promise:je,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),je.catch(Ze=>Promise.reject(Ze))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new RL(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function DS(n){return"imperative"!==n}let SS=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this.commands=null,this.onChanges=new nn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Rv(this.skipLocationChange),replaceUrl:Rv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rv(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xi),c.Y36(xv),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),AS=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new nn.x,this.subscription=t.events.subscribe(s=>{s instanceof fE&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,u){if(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Rv(this.skipLocationChange),replaceUrl:Rv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rv(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xi),c.Y36(xv),c.Y36(te))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function Rv(n){return""===n||!!n}class CV{}class TV{preload(e,t){return lt(null)}}let IV=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new wV(i,r,p=>t.triggerEvent(new kL(p)),p=>t.triggerEvent(new OL(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(fn(t=>t instanceof fE),Sv(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const u=s._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,Rt.D)(i).pipe((0,Ys.J)(),(0,ut.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?lt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Yi.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xi),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(CV))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fk=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vk?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fE&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof PL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new PL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const am=new c.OlP("ROUTER_CONFIGURATION"),DV=new c.OlP("ROUTER_FORROOT_GUARD"),tZ=[Fe,{provide:$L,useClass:GL},{provide:xi,useFactory:function oZ(n,e,t,r,i,s,u={},h,p){const y=new xi(null,n,e,t,r,i,LL(s));return h&&(y.urlHandlingStrategy=h),p&&(y.routeReuseStrategy=p),function aZ(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(C=>{var I,x;null===(I=console.group)||void 0===I||I.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(x=console.groupEnd)||void 0===x||x.call(console)}),y},deps:[$L,bE,Fe,c.zs3,c.Sil,Nk,am,[class GW{},new c.FiY],[class HW{},new c.FiY]]},bE,{provide:xv,useFactory:function lZ(n){return n.routerState.root},deps:[xi]},IV,TV,class eZ{preload(e,t){return t().pipe(th(()=>lt(null)))}},{provide:am,useValue:{enableTracing:!1}}];function nZ(){return new c.PXZ("Router",xi)}let SV=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[tZ,AV(t),{provide:DV,useFactory:sZ,deps:[[xi,new c.FiY,new c.tp0]]},{provide:am,useValue:r||{}},{provide:te,useFactory:iZ,deps:[me,[new c.tBr(Ee),new c.FiY],am]},{provide:Fk,useFactory:rZ,deps:[xi,Ga,am]},{provide:CV,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:TV},{provide:c.PXZ,multi:!0,useFactory:nZ},[Lk,{provide:c.ip1,multi:!0,useFactory:cZ,deps:[Lk]},{provide:MV,useFactory:uZ,deps:[Lk]},{provide:c.tb,multi:!0,useExisting:MV}]]}}static forChild(t){return{ngModule:n,providers:[AV(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(DV,8),c.LFG(xi,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function rZ(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Fk(n,e,t)}function iZ(n,e,t={}){return t.useHash?new ge(n,e):new Ae(n,e)}function sZ(n){return"guarded"}function AV(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Nk,multi:!0,useValue:n}]}let Lk=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new nn.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),s=this.injector.get(xi),u=this.injector.get(am);return"disabled"===u.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?lt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(am),i=this.injector.get(IV),s=this.injector.get(Fk),u=this.injector.get(xi),h=this.injector.get(c.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),s.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function cZ(n){return n.appInitializer.bind(n)}function uZ(n){return n.bootstrapListener.bind(n)}const MV=new c.OlP("Router Initializer");function xV(...n){const e=(0,Wr.jO)(n),{args:t,keys:r}=SL(n),i=new En.y(s=>{const{length:u}=t;if(!u)return void s.complete();const h=new Array(u);let p=u,y=u;for(let C=0;C<u;C++){let I=!1;(0,wc.Xf)(t[C]).subscribe(new hn.Q(s,x=>{I||(I=!0,y--),h[C]=x},()=>p--,void 0,()=>{(!p||!I)&&(y||s.next(r?AL(r,h):h),s.complete())}))}});return e?i.pipe(mk(e)):i}let RV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),lm=(()=>{class n extends RV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const ju=new c.OlP("NgValueAccessor"),fZ={provide:ju,useExisting:(0,c.Gpc)(()=>kv),multi:!0},gZ=new c.OlP("CompositionEventMode");let kv=(()=>{class n extends RV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pZ(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(gZ,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[c._Bn([fZ]),c.qOj]}),n})();function ip(n){return null==n||0===n.length}function OV(n){return null!=n&&"number"==typeof n.length}const Ns=new c.OlP("NgValidators"),sp=new c.OlP("NgAsyncValidators"),mZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vr{static min(e){return function PV(n){return e=>{if(ip(e.value)||ip(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function NV(n){return e=>{if(ip(e.value)||ip(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function FV(n){return ip(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function LV(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function VV(n){return ip(n.value)||mZ.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function UV(n){return e=>ip(e.value)||!OV(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function BV(n){return e=>OV(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function jV(n){if(!n)return TE;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ip(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return WV(e)}static composeAsync(e){return ZV(e)}}function TE(n){return null}function HV(n){return null!=n}function qV(n){const e=(0,c.QGY)(n)?(0,Rt.D)(n):n;return(0,c.CqO)(e),e}function $V(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function GV(n,e){return e.map(t=>t(n))}function zV(n){return n.map(e=>function _Z(n){return!n.validate}(e)?e:t=>e.validate(t))}function WV(n){if(!n)return null;const e=n.filter(HV);return 0==e.length?null:function(t){return $V(GV(t,e))}}function Vk(n){return null!=n?WV(zV(n)):null}function ZV(n){if(!n)return null;const e=n.filter(HV);return 0==e.length?null:function(t){return xV(GV(t,e).map(qV)).pipe((0,ut.U)($V))}}function Uk(n){return null!=n?ZV(zV(n)):null}function KV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function YV(n){return n._rawValidators}function QV(n){return n._rawAsyncValidators}function Bk(n){return n?Array.isArray(n)?n:[n]:[]}function MS(n,e){return Array.isArray(n)?n.includes(e):n===e}function XV(n,e){const t=Bk(e);return Bk(n).forEach(i=>{MS(t,i)||t.push(i)}),t}function JV(n,e){return Bk(e).filter(t=>!MS(n,t))}class eU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Uk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Hu extends eU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vo extends eU{get formDirective(){return null}get path(){return null}}class tU{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let xS=(()=>{class n extends tU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Hu,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),RS=(()=>{class n extends tU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vo,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function IE(n,e){qk(n,e),e.valueAccessor.writeValue(n.value),function IZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&rU(n,e)})}(n,e),function SZ(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function DZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&rU(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function TZ(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function PS(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),FS(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function NS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qk(n,e){const t=YV(n);null!==e.validator?n.setValidators(KV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=QV(n);null!==e.asyncValidator?n.setAsyncValidators(KV(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();NS(e._rawValidators,i),NS(e._rawAsyncValidators,i)}function FS(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=YV(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=QV(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return NS(e._rawValidators,r),NS(e._rawAsyncValidators,r),t}function rU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function iU(n,e){qk(n,e)}function sU(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function LS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const DE="VALID",VS="INVALID",Ov="PENDING",SE="DISABLED";function Wk(n){return(Kk(n)?n.validators:n)||null}function oU(n){return Array.isArray(n)?Vk(n):n||null}function Zk(n,e){return(Kk(e)?e.asyncValidators:n)||null}function aU(n){return Array.isArray(n)?Uk(n):n||null}function Kk(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const lU=n=>n instanceof jr,Yk=n=>n instanceof cm;function cU(n){return lU(n)?n.value:n.getRawValue()}function uU(n,e){const t=Yk(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function dU(n,e){Yk(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new c.vHH(1002,"")})}class Qk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=oU(this._rawValidators),this._composedAsyncValidatorFn=aU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===DE}get invalid(){return this.status===VS}get pending(){return this.status==Ov}get disabled(){return this.status===SE}get enabled(){return this.status!==SE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=oU(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=aU(e)}addValidators(e){this.setValidators(XV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(JV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(JV(e,this._rawAsyncValidators))}hasValidator(e){return MS(this._rawValidators,e)}hasAsyncValidator(e){return MS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ov,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=SE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=DE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===DE||this.status===Ov)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?SE:DE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ov,this._hasOwnPendingAsyncValidator=!0;const t=qV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function RZ(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Yk(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof OZ)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?SE:this.errors?VS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ov)?Ov:this._anyControlsHaveStatus(VS)?VS:DE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kk(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class jr extends Qk{constructor(e=null,t,r){super(Wk(t),Zk(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class cm extends Qk{constructor(e,t,r){super(Wk(t),Zk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){dU(this,e),Object.keys(e).forEach(r=>{uU(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=cU(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class OZ extends Qk{constructor(e,t,r){super(Wk(t),Zk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){dU(this,e),e.forEach((r,i)=>{uU(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>cU(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const PZ={provide:vo,useExisting:(0,c.Gpc)(()=>ME)},AE=(()=>Promise.resolve(null))();let ME=(()=>{class n extends vo{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new c.vpe,this.form=new cm({},Vk(t),Uk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){AE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),IE(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){AE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),LS(this._directives,t)})}addFormGroup(t){AE.then(()=>{const r=this._findContainer(t.path),i=new cm({});iU(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){AE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){AE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,sU(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ns,10),c.Y36(sp,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([PZ]),c.qOj]}),n})(),US=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),_U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Xk=new c.OlP("NgModelWithFormControlWarning"),HZ={provide:vo,useExisting:(0,c.Gpc)(()=>op)};let op=(()=>{class n extends vo{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(FS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return IE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){PS(t.control||null,t,!1),LS(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,sU(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(PS(r||null,t),lU(i)&&(IE(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);iU(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function AZ(n,e){return FS(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qk(this.form,this),this._oldForm&&FS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ns,10),c.Y36(sp,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([HZ]),c.qOj,c.TTD]}),n})();const GZ={provide:Hu,useExisting:(0,c.Gpc)(()=>xE)};let xE=(()=>{class n extends Hu{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Gk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===kv?t=s:function xZ(n){return Object.getPrototypeOf(n.constructor)===lm}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function $k(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function OS(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(vo,13),c.Y36(Ns,10),c.Y36(sp,10),c.Y36(ju,10),c.Y36(Xk,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([GZ]),c.qOj,c.TTD]}),n})(),o4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[_U]]}),n})(),a4=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Xk,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[o4]}),n})(),BS=(()=>{class n{constructor(t){this._angularFireAuth=t,this.user=new Oa(null)}loginByEmail(t,r){return(0,Rt.D)(this._angularFireAuth.signInWithEmailAndPassword(t,r))}registerWithEmail(t,r){return(0,Rt.D)(this._angularFireAuth.createUserWithEmailAndPassword(t,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($e))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var l4=F(655);function iO(n){return n instanceof c.Rgc}function sO(n){return"function"==typeof n}function OU(n){return"string"==typeof n}let c4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["dynamic-view"]],inputs:{content:"content"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,r){1&t&&c._UZ(0,"div",0),2&t&&c.Q6J("innerHTML",r.content,c.oJD)},encapsulation:2}),n})();class u4{constructor(e){this.args=e,this.wrapper=null,this.args.vcr?(this.viewRef=this.args.vcr.createEmbeddedView(this.args.tpl,this.args.context||{}),this.viewRef.detectChanges()):(this.viewRef=this.args.tpl.createEmbeddedView(this.args.context||{}),this.viewRef.detectChanges(),this.args.appRef.attachView(this.viewRef))}detectChanges(){this.viewRef.detectChanges()}getElement(){const e=this.viewRef.rootNodes;return 1===e.length&&e[0]===Node.ELEMENT_NODE?this.element=e[0]:(this.element=document.createElement("div"),this.element.append(...e)),this.element}destroy(){var e;1!==this.viewRef.rootNodes[0]&&(null===(e=this.element)||void 0===e||e.parentNode.removeChild(this.element),this.element=null),this.args.vcr||this.args.appRef.detachView(this.viewRef),this.viewRef.destroy(),this.viewRef=null}}class d4{constructor(e){this.value=e}getElement(){return this.value}detectChanges(){}destroy(){}}class h4{constructor(e){if(this.options=e,e.vcr)this.compRef=e.vcr.createComponent(e.component,{index:e.vcr.length,injector:e.injector||e.vcr.injector});else{const t=e.resolver.resolveComponentFactory(e.component);this.compRef=t.create(e.injector),e.appRef.attachView(this.compRef.hostView)}}get ref(){return this.compRef}setInput(e,t){return this.compRef.instance[e]=t,this}setInputs(e){return Object.keys(e).forEach(t=>{this.compRef.instance[t]=e[t]}),this}detectChanges(){return this.compRef.hostView.detectChanges(),this}appendTo(e){return e.appendChild(this.getElement()),this}removeFrom(e){return e.removeChild(this.getElement()),this}getRawContent(){return this.getElement().outerHTML}getElement(){return this.compRef.location.nativeElement}destroy(){this.compRef.destroy(),!this.options.vcr&&this.options.appRef.detachView(this.compRef.hostView),this.compRef=null}}let PU=(()=>{class n{constructor(t,r,i){this.resolver=t,this.injector=r,this.appRef=i}createComponent(t,r={}){return new h4({component:t,vcr:r.vcr,injector:r.injector||this.injector,appRef:this.appRef,resolver:this.resolver})}createTemplate(t,r={}){return new u4({vcr:r.vcr,appRef:this.appRef,tpl:t,context:r.context})}createView(t,r={}){if(iO(t))return this.createTemplate(t,r);if(sO(t))return this.createComponent(t,r);if(OU(t))return new d4(t);throw"Type of content is not supported"}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(c.z2F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),f4=(()=>{class n{constructor(t,r,i){this.defaultTpl=t,this.vcr=r,this.viewService=i}ngOnInit(){this.resolveContentType()}ngOnChanges(t){t.view&&!t.view.isFirstChange()&&this.resolveContentType()}resolveContentType(){var t,r;null===(t=this.viewRef)||void 0===t||t.destroy(),OU(this.view)?(this.viewRef=this.viewService.createComponent(c4,{vcr:this.vcr,injector:this.injector}),this.viewRef.setInput("content",this.view).detectChanges()):this.viewRef=this.viewService.createView(this.view||this.defaultTpl,{vcr:this.vcr,injector:null!==(r=this.injector)&&void 0!==r?r:this.vcr.injector,context:this.context})}ngOnDestroy(){var t;null===(t=this.viewRef)||void 0===t||t.destroy()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.s_b),c.Y36(PU))},n.\u0275dir=c.lG2({type:n,selectors:[["","dynamicView",""]],inputs:{view:["dynamicView","view"],injector:["dynamicViewInjector","injector"],context:["dynamicViewContext","context"]},features:[c.TTD]}),n})(),p4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const{isArray:g4}=Array;const v4=["*"],b4=function(n,e){return{"border-color":n,"border-right-color":e}};function w4(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-error",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function E4(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-checkmark",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function C4(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-warning",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function T4(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-info",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function I4(n,e){if(1&n&&(c.TgZ(0,"div",4),c._uU(1,"\n    "),c.TgZ(2,"div",5),c._uU(3,"\n      "),c.YNc(4,w4,4,1,"div",6),c._uU(5,"\n      "),c.YNc(6,E4,4,1,"div",6),c._uU(7,"\n      "),c.YNc(8,C4,4,1,"div",6),c._uU(9,"\n      "),c.YNc(10,T4,4,1,"div",6),c._uU(11,"\n    "),c.qZA(),c._uU(12,"\n  "),c.qZA()),2&n){const t=c.oxw(2);c.xp6(2),c.Q6J("ngSwitch",t.type),c.xp6(2),c.Q6J("ngSwitchCase","error"),c.xp6(2),c.Q6J("ngSwitchCase","success"),c.xp6(2),c.Q6J("ngSwitchCase","warning"),c.xp6(2),c.Q6J("ngSwitchCase","info")}}function D4(n,e){if(1&n&&(c.TgZ(0,"div",1),c._uU(1,"\n  "),c._UZ(2,"hot-toast-loader",2),c._uU(3,"\n  "),c.YNc(4,I4,13,5,"div",3),c._uU(5,"\n"),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("theme",t.theme),c.xp6(2),c.Q6J("ngIf","loading"!==t.type)}}const S4=["hotToastBarBase"];function A4(n,e){if(1&n&&(c.ynx(0),c._uU(1,"\n          "),c.TgZ(2,"hot-toast-animated-icon",10),c._uU(3),c.qZA(),c._uU(4,"\n        "),c.BQk()),2&n){const t=c.oxw(2);c.xp6(2),c.Q6J("iconTheme",t.toast.iconTheme),c.xp6(1),c.Oqu(t.toast.icon)}}function M4(n,e){if(1&n&&(c._uU(0,"\n          "),c.TgZ(1,"div"),c._uU(2,"\n            "),c.GkF(3,11),c._uU(4,"\n          "),c.qZA(),c._uU(5,"\n        ")),2&n){const t=c.oxw(2);c.xp6(3),c.Q6J("dynamicView",t.toast.icon)}}function x4(n,e){if(1&n&&(c.ynx(0),c._uU(1,"\n        "),c.YNc(2,A4,5,2,"ng-container",4),c._uU(3,"\n        "),c.YNc(4,M4,6,1,"ng-template",null,9,c.W1O),c._uU(6,"\n      "),c.BQk()),2&n){const t=c.MAs(5),r=c.oxw();c.xp6(2),c.Q6J("ngIf",r.isIconString)("ngIfElse",t)}}function R4(n,e){if(1&n&&(c._uU(0,"\n        "),c._UZ(1,"hot-toast-indicator",12),c._uU(2,"\n      ")),2&n){const t=c.oxw();c.xp6(1),c.Q6J("theme",t.toast.iconTheme)("type",t.toast.type)}}function k4(n,e){1&n&&c.GkF(0)}function O4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().close()}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("ngStyle",t.toast.closeStyle)}}function P4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"hot-toast",3),c.NdJ("height",function(i){const u=c.CHM(t).$implicit;return c.oxw().updateHeight(i,u)})("beforeClosed",function(){const s=c.CHM(t).$implicit;return c.oxw().beforeClosed(s)})("afterClosed",function(i){return c.CHM(t),c.oxw().afterClosed(i)}),c.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=c.oxw();c.Q6J("toast",t)("offset",i.calculateOffset(t.id,t.position))("toastRef",i.toastRefs[r])}}const NU={blank:4e3,error:4e3,success:4e3,loading:3e4,warning:4e3,info:4e3};class LU{constructor(e){this.toast=e,this._onClosed=new nn.x}set dispose(e){this._dispose=e}getToast(){return this.toast}appendTo(e){const{dispose:t,updateMessage:r,updateToast:i,afterClosed:s}=e.addToast(this);return this.dispose=t,this.updateMessage=r,this.updateToast=i,this.afterClosed=function _4(...n){return 1===(n=function m4(n){return 1===n.length&&g4(n[0])?n[0]:n}(n)).length?(0,wc.Xf)(n[0]):new En.y(function y4(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,wc.Xf)(n[r]).subscribe(new hn.Q(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))}(this._onClosed.asObservable(),s),this}close(e={dismissedByAction:!1}){this._dispose(),this._onClosed.next({dismissedByAction:e.dismissedByAction,id:this.toast.id}),this._onClosed.complete()}get data(){return this.toast.data}}let V4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-animated-icon"]],inputs:{iconTheme:"iconTheme"},ngContentSelectors:v4,decls:5,vars:2,consts:[[1,"hot-toast-animated-icon"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c._uU(1,"\n  "),c.Hsn(2),c._uU(3,"\n"),c.qZA(),c._uU(4,"\n")),2&t&&c.Udp("color",null==r.iconTheme?null:r.iconTheme.primary)},styles:["@keyframes hotToastEnter{0%{transform:scale(0)}to{transform:scale(1)}}.hot-toast-animated-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-animated-icon-animation, hotToastEnter .3s ease-in-out forwards);position:var(--hot-toast-animated-icon-position, relative);transform:var(--hot-toast-animated-icon-transform, scale(0))}@media (prefers-reduced-motion: reduce){.hot-toast-animated-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-animated-icon-reduced-motion-animation-duration, none);opacity:var(--hot-toast-animated-icon-reduced-motion-opacity, 1);transform:var(--hot-toast-animated-icon-reduced-motion-transform, scale(1))}}"],changeDetection:0}),n})(),U4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-loader"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-loader-icon",3,"ngStyle"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Q6J("ngStyle",c.WLB(1,b4,null==r.theme?null:r.theme.primary,null==r.theme?null:r.theme.secondary))},directives:[Gu],styles:["@keyframes hotToastRotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.hot-toast-loader-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-loader-icon-animation, hotToastRotate 1s linear infinite);border:var(--hot-toast-loader-icon-border, 2px solid);border-bottom-color:var(--hot-toast-loader-icon-border-color, #e0e0e0);border-left-color:var(--hot-toast-loader-icon-border-color, #e0e0e0);border-radius:var(--hot-toast-loader-icon-border-radius, 100%);border-right-color:var(--hot-toast-loader-icon-border-right-color, #616161);border-top-color:var(--hot-toast-loader-icon-border-color, #e0e0e0);box-sizing:var(--hot-toast-loader-icon-box-sizing, border-box);height:var(--hot-toast-loader-icon-height, 18px);padding-top:var(--hot-toast-loader-icon-padding-top, 2px);width:var(--hot-toast-loader-icon-width, 18px)}@media (prefers-reduced-motion: reduce){.hot-toast-loader-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-loader-icon-reduced-motion-animation-duration, 5s)}}"],changeDetection:0}),n})(),B4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-error"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-error-icon"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--error-primary",null==r.theme?null:r.theme.primary)("--error-secondary",null==r.theme?null:r.theme.secondary)},styles:['@keyframes hotToastErrorCircleAnimation{0%{opacity:0;transform:scale(0) rotate(45deg)}to{opacity:1;transform:scale(1) rotate(45deg)}}@keyframes hotToastFirstLineAnimation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes hotToastSecondLineAnimation{0%{opacity:0;transform:scale(0) rotate(90deg)}to{opacity:1;transform:scale(1) rotate(90deg)}}.hot-toast-error-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-error-icon-animation, hotToastErrorCircleAnimation .3s cubic-bezier(.175, .885, .32, 1.275) forwards);animation-delay:var(--hot-toast-error-icon-animation-delay, .1s);background:var(--hot-toast-error-icon-background, var(--error-primary, #ff4b4b));border-radius:var(--hot-toast-error-icon-border-radius, 10px);height:var(--hot-toast-error-icon-height, 20px);opacity:var(--hot-toast-error-icon-opacity, 0);position:var(--hot-toast-error-icon-position, relative);transform:var(--hot-toast-error-icon-transform, rotate(45deg));width:var(--hot-toast-error-icon-width, 20px)}@media (prefers-reduced-motion: reduce){.hot-toast-error-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-error-icon-reduced-motion-animation-duration, 0ms)}}.hot-toast-error-icon[_ngcontent-%COMP%]:after, .hot-toast-error-icon[_ngcontent-%COMP%]:before{animation:var(--hot-toast-error-icon-after-before-animation, hotToastFirstLineAnimation .15s ease-out forwards);animation-delay:var(--hot-toast-error-icon-after-before-animation-delay, .15s);background:var(--hot-toast-error-icon-after-before-background, var(--error-secondary, #fff));border-radius:var(--hot-toast-error-icon-after-before-border-radius, 3px);bottom:var(--hot-toast-error-icon-after-before-bottom, 9px);content:var(--hot-toast-error-icon-after-before-content, "");height:var(--hot-toast-error-icon-after-before-height, 2px);left:var(--hot-toast-error-icon-after-before-left, 4px);opacity:var(--hot-toast-error-icon-after-before-opacity, 0);position:var(--hot-toast-error-icon-after-before-position, absolute);width:var(--hot-toast-error-icon-after-before-width, 12px)}@media (prefers-reduced-motion: reduce){.hot-toast-error-icon[_ngcontent-%COMP%]:after, .hot-toast-error-icon[_ngcontent-%COMP%]:before{animation-duration:var(--hot-toast-error-icon-after-before-reduced-motion-animation-duration, 0ms)}}.hot-toast-error-icon[_ngcontent-%COMP%]:before{animation:var(--hot-toast-error-icon-before-animation, hotToastSecondLineAnimation .15s ease-out forwards);animation-delay:var(--hot-toast-error-icon-before-animation-delay, .18s);transform:var(--hot-toast-error-icon-before-transform, rotate(90deg))}@media (prefers-reduced-motion: reduce){.hot-toast-error-icon[_ngcontent-%COMP%]:before{animation-duration:var(--hot-toast-error-icon-before-reduced-motion-animation-duration, 0ms)}}'],changeDetection:0}),n})(),j4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-checkmark"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-checkmark-icon"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--check-primary",null==r.theme?null:r.theme.primary)("--check-secondary",null==r.theme?null:r.theme.secondary)},styles:['@keyframes hotToastCircleAnimation{0%{opacity:0;transform:scale(0) rotate(45deg)}to{opacity:1;transform:scale(1) rotate(45deg)}}@keyframes hotToastCheckmarkAnimation{0%{height:0;opacity:0;width:0}40%{height:0;opacity:1;width:6px}to{height:10px;opacity:1}}.hot-toast-checkmark-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-checkmark-icon-animation, hotToastCircleAnimation .3s cubic-bezier(.175, .885, .32, 1.275) forwards);animation-delay:var(--hot-toast-checkmark-icon-animation-delay, .1s);background-color:var(--hot-toast-checkmark-icon-background-color, var(--check-primary, #61d345));border-radius:var(--hot-toast-checkmark-icon-border-radius, 10px);height:var(--hot-toast-checkmark-icon-height, 20px);opacity:var(--hot-toast-checkmark-icon-opacity, 0);position:var(--hot-toast-checkmark-icon-position, relative);transform:var(--hot-toast-checkmark-icon-transform, rotate(45deg));width:var(--hot-toast-checkmark-icon-width, 20px)}@media (prefers-reduced-motion: reduce){.hot-toast-checkmark-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-checkmark-icon-reduced-motion-animation-duration, 0ms)}}.hot-toast-checkmark-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-checkmark-icon-after-animation, hotToastCheckmarkAnimation .2s ease-out forwards);animation-delay:var(--hot-toast-checkmark-icon-after-animation-delay, .2s);border-bottom-style:solid;border-bottom-width:var(--hot-toast-checkmark-icon-after-border-bottom, 2px);border-color:var(--hot-toast-checkmark-icon-after-border-color, var(--check-secondary, #fff));border-right-style:solid;border-right-width:var(--hot-toast-checkmark-icon-after-border-right, 2px);bottom:var(--hot-toast-checkmark-icon-after-bottom, 6px);box-sizing:var(--hot-toast-checkmark-icon-after-box-sizing, border-box);content:var(--hot-toast-checkmark-icon-after-content, "");height:var(--hot-toast-checkmark-icon-after-height, 10px);left:var(--hot-toast-checkmark-icon-after-left, 6px);opacity:var(--hot-toast-checkmark-icon-after-opacity, 0);position:var(--hot-toast-checkmark-icon-after-position, absolute);width:var(--hot-toast-checkmark-icon-after-width, 6px)}@media (prefers-reduced-motion: reduce){.hot-toast-checkmark-icon[_ngcontent-%COMP%]:after{animation-duration:var(--hot-toast-checkmark-icon-after-reduced-motion-animation-duration, 0ms)}}'],changeDetection:0}),n})(),H4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-warning"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-warning-icon"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--warn-primary",null==r.theme?null:r.theme.primary)("--warn-secondary",null==r.theme?null:r.theme.secondary)},styles:['@keyframes animate-warn-background{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes animate-warn-line{0%{height:0;opacity:0}40%{height:4.8px;opacity:1}to{height:8px;opacity:1}}.hot-toast-warning-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-warning-icon-animation, animate-warn-background .3s cubic-bezier(.175, .885, .32, 1.275) forwards);animation-delay:var(--hot-toast-warning-icon-animation-delay, .1s);background-color:var(--hot-toast-warning-icon-background-color, var(--warn-primary, #ffab00));border-radius:var(--hot-toast-warning-icon-border-radius, 50%);display:var(--hot-toast-warning-icon-display, block);height:var(--hot-toast-warning-icon-height, 20px);opacity:var(--hot-toast-warning-icon-opacity, 0);position:var(--hot-toast-warning-icon-position, relative);transform:var(--hot-toast-warning-icon-transform, scale(0));width:var(--hot-toast-warning-icon-width, 20px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:after, .hot-toast-warning-icon[_ngcontent-%COMP%]:before{background-color:var(--hot-toast-warning-icon-after-before-background-color, var(--warn-secondary, #fff));border-radius:var(--hot-toast-warning-icon-after-before-border-radius, 3px);box-sizing:var(--hot-toast-warning-icon-after-before-box-sizing, border-box);content:var(--hot-toast-warning-icon-after-before-content, "");display:var(--hot-toast-warning-icon-after-before-display, block);left:var(--hot-toast-warning-icon-after-before-left, 8.5px);position:var(--hot-toast-warning-icon-after-before-position, absolute);width:var(--hot-toast-warning-icon-after-before-width, 2.5px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-warning-icon-after-animation, animate-warn-line .2s ease-out forwards);animation-delay:var(--hot-toast-warning-icon-after-animation-delay, .2s);height:var(--hot-toast-warning-icon-after-height, 0);opacity:var(--hot-toast-warning-icon-after-opacity, 0);top:var(--hot-toast-warning-icon-after-top, 4px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:before{bottom:var(--hot-toast-warning-icon-before-bottom, 4px);height:var(--hot-toast-warning-icon-before-height, 2px)}'],changeDetection:0}),n})(),q4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-info"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-info-icon"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--warn-primary",null==r.theme?null:r.theme.primary)("--warn-secondary",null==r.theme?null:r.theme.secondary)},styles:['@keyframes animate-info-background{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes animate-info-line{0%{height:0;opacity:0}40%{height:4.8px;opacity:1}to{height:8px;opacity:1}}.hot-toast-info-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-info-icon-animation, animate-info-background .3s cubic-bezier(.175, .885, .32, 1.275) forwards);animation-delay:var(--hot-toast-info-icon-animation-delay, .1s);background-color:var(--hot-toast-info-icon-background-color, var(--info-primary, #0d6efd));border-radius:var(--hot-toast-info-icon-border-radius, 50%);display:var(--hot-toast-info-icon-display, block);height:var(--hot-toast-info-icon-height, 20px);opacity:var(--hot-toast-info-icon-opacity, 0);position:var(--hot-toast-info-icon-position, relative);transform:var(--hot-toast-info-icon-transform, scale(0));width:var(--hot-toast-info-icon-width, 20px)}.hot-toast-info-icon[_ngcontent-%COMP%]:after, .hot-toast-info-icon[_ngcontent-%COMP%]:before{background-color:var(--hot-toast-info-icon-after-before-background-color, var(--info-secondary, #fff));border-radius:var(--hot-toast-info-icon-after-before-border-radius, 3px);box-sizing:var(--hot-toast-info-icon-after-before-box-sizing, border-box);content:var(--hot-toast-info-icon-after-before-content, "");display:var(--hot-toast-info-icon-after-before-display, block);left:var(--hot-toast-info-icon-after-before-left, 8.5px);position:var(--hot-toast-info-icon-after-before-position, absolute);width:var(--hot-toast-info-icon-after-before-width, 2.5px)}.hot-toast-info-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-info-icon-after-animation, animate-info-line .2s ease-out forwards);animation-delay:var(--hot-toast-info-icon-after-animation-delay, .2s);height:var(--hot-toast-info-icon-after-height, 0);opacity:var(--hot-toast-info-icon-after-opacity, 0);top:var(--hot-toast-info-icon-after-bottom, 8px)}.hot-toast-info-icon[_ngcontent-%COMP%]:before{height:var(--hot-toast-info-icon-before-height, 2px);top:var(--hot-toast-info-icon-before-top, 4px)}'],changeDetection:0}),n})(),$4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-indicator"]],inputs:{theme:"theme",type:"type"},decls:2,vars:1,consts:[["class","hot-toast-indicator-wrapper",4,"ngIf"],[1,"hot-toast-indicator-wrapper"],[3,"theme"],["class","hot-toast-status-wrapper",4,"ngIf"],[1,"hot-toast-status-wrapper"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,r){1&t&&(c.YNc(0,D4,6,2,"div",0),c._uU(1,"\n")),2&t&&c.Q6J("ngIf","blank"!==r.type)},directives:[U4,B4,j4,H4,q4,Un,ai,$r],styles:[".hot-toast-indicator-wrapper[_ngcontent-%COMP%]{align-items:var(--hot-toast-indicator-wrapper-align-items, center);display:var(--hot-toast-indicator-wrapper-display, flex);justify-content:var(--hot-toast-indicator-wrapper-justify-content, center);min-height:var(--hot-toast-indicator-wrapper-min-height, 20px);min-width:var(--hot-toast-indicator-wrapper-min-width, 20px);position:var(--hot-toast-indicator-wrapper-position, relative)}.hot-toast-status-wrapper[_ngcontent-%COMP%]{position:var(--hot-toast-status-wrapper-position, absolute)}"],changeDetection:0}),n})(),VU=(()=>{class n{constructor(t,r,i){this.injector=t,this.renderer=r,this.ngZone=i,this.offset=0,this.height=new c.vpe,this.beforeClosed=new c.vpe,this.afterClosed=new c.vpe,this.isManualClose=!1,this.unlisteners=[]}ngOnInit(){iO(this.toast.message)&&(this.context={$implicit:this.toastRef}),sO(this.toast.message)&&(this.toastComponentInjector=c.zs3.create({providers:[{provide:LU,useValue:this.toastRef}],parent:this.toast.injector||this.injector}))}ngAfterViewInit(){const t=this.toastBarBase.nativeElement;requestAnimationFrame(()=>{this.height.emit(t.offsetHeight)}),this.ngZone.runOutsideAngular(()=>{this.unlisteners.push(this.renderer.listen(t,"animationstart",r=>{this.isExitAnimation(r)&&this.ngZone.run(()=>this.beforeClosed.emit())}),this.renderer.listen(t,"animationend",r=>{this.isExitAnimation(r)&&this.ngZone.run(()=>this.afterClosed.emit({dismissedByAction:this.isManualClose,id:this.toast.id}))}))}),this.setToastAttributes()}get containerPositionStyle(){const t=this.toast.position.includes("top"),r=t?{top:0}:{bottom:0},i=this.toast.position.includes("left")?{left:0}:this.toast.position.includes("right")?{right:0}:{left:0,right:0,justifyContent:"center"};return Object.assign(Object.assign({transform:`translateY(${this.offset*(t?1:-1)}px)`},r),i)}get toastBarBaseStyles(){const t=this.toast.position.includes("top"),r=`hotToastEnterAnimation${t?"Negative":"Positive"} 350ms cubic-bezier(0.21, 1.02, 0.73, 1) forwards`,s=this.toast.autoClose?`${r}, hotToastExitAnimation${t?"Negative":"Positive"} 800ms forwards cubic-bezier(0.06, 0.71, 0.55, 1) ${this.toast.duration}ms`:r;return Object.assign(Object.assign({},this.toast.style),{animation:s})}get isIconString(){return"string"==typeof this.toast.icon}close(){this.isManualClose=!0;((n,e)=>{this.toastBarBase.nativeElement.style.animation=e})(0,`hotToastExitAnimation${this.toast.position.includes("top")?"Negative":"Positive"} 800ms forwards cubic-bezier(0.06, 0.71, 0.55, 1)`)}ngOnDestroy(){for(this.close();this.unlisteners.length;)this.unlisteners.pop()()}isExitAnimation(t){return t.animationName.includes("hotToastExitAnimation")}setToastAttributes(){const t=this.toast.attributes;for(const[r,i]of Object.entries(t))this.renderer.setAttribute(this.toastBarBase.nativeElement,r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.zs3),c.Y36(c.Qsj),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast"]],viewQuery:function(t,r){if(1&t&&c.Gf(S4,5),2&t){let i;c.iGM(i=c.CRH())&&(r.toastBarBase=i.first)}},inputs:{toast:"toast",offset:"offset",defaultConfig:"defaultConfig",toastRef:"toastRef"},outputs:{height:"height",beforeClosed:"beforeClosed",afterClosed:"afterClosed"},decls:25,vars:14,consts:[[1,"hot-toast-bar-base-container",3,"ngStyle","ngClass"],[1,"hot-toast-bar-base",3,"ngStyle","ngClass"],["hotToastBarBase",""],["aria-hidden","true",1,"hot-toast-icon"],[4,"ngIf","ngIfElse"],["indicator",""],[1,"hot-toast-message"],[4,"dynamicView","dynamicViewContext","dynamicViewInjector"],["type","button","class","hot-toast-close-btn","aria-label","Close",3,"ngStyle","click",4,"ngIf"],["iconTemplateOrComponent",""],[3,"iconTheme"],[3,"dynamicView"],[3,"theme","type"],["type","button","aria-label","Close",1,"hot-toast-close-btn",3,"ngStyle","click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1,2),c._uU(4,"\n    "),c.TgZ(5,"div",3),c._uU(6,"\n      "),c.YNc(7,x4,7,2,"ng-container",4),c._uU(8,"\n\n      "),c.YNc(9,R4,3,2,"ng-template",null,5,c.W1O),c._uU(11,"\n    "),c.qZA(),c._uU(12,"\n\n    "),c.TgZ(13,"div",6),c._uU(14,"\n      "),c.TgZ(15,"div"),c._uU(16,"\n        "),c.YNc(17,k4,1,0,"ng-container",7),c._uU(18,"\n      "),c.qZA(),c._uU(19,"\n    "),c.qZA(),c._uU(20,"\n\n    "),c.YNc(21,O4,1,1,"button",8),c._uU(22,"\n  "),c.qZA(),c._uU(23,"\n"),c.qZA(),c._uU(24,"\n")),2&t){const i=c.MAs(10);c.Q6J("ngStyle",r.containerPositionStyle)("ngClass","hot-toast-theme-"+r.toast.theme),c.xp6(2),c.Udp("--hot-toast-animation-state",r.isManualClose?"running":"paused"),c.Q6J("ngStyle",r.toastBarBaseStyles)("ngClass",r.toast.className),c.uIk("aria-live",r.toast.ariaLive)("role",r.toast.role),c.xp6(5),c.Q6J("ngIf",void 0!==r.toast.icon)("ngIfElse",i),c.xp6(10),c.Q6J("dynamicView",r.toast.message)("dynamicViewContext",r.context)("dynamicViewInjector",r.toastComponentInjector),c.xp6(4),c.Q6J("ngIf",r.toast.dismissible)}},directives:[V4,$4,Gu,js,Un,f4],styles:[".hot-toast-bar-base[_ngcontent-%COMP%]{align-items:var(--hot-toast-align-items, center);background-color:var(--hot-toast-bg, #fff);border-radius:var(--hot-toast-border-radius, 4px);box-shadow:var(--hot-toast-shadow, 0 3px 10px rgba(0, 0, 0, .1), 0 3px 3px rgba(0, 0, 0, .05));color:var(--hot-toast-color, #363636);display:var(--hot-toast-display, flex);line-height:var(--hot-toast-line, 1.3);margin:var(--hot-toast-margin, 16px);max-width:var(--hot-toast-max-width, 350px);padding:var(--hot-toast-padding, 8px 10px);pointer-events:var(--hot-toast-pointer-events, auto);width:var(--hot-toast-width, -moz-fit-content);width:var(--hot-toast-width, fit-content);will-change:var(--hot-toast-will-change, transform)}.hot-toast-bar-base[_ngcontent-%COMP%]:hover, .hot-toast-bar-base[_ngcontent-%COMP%]:focus{animation-play-state:var(--hot-toast-animation-state, paused)!important}@media (prefers-reduced-motion: reduce){.hot-toast-bar-base[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-reduced-motion-animation-duration, 10ms)!important}}.hot-toast-message[_ngcontent-%COMP%]{color:var(--hot-toast-message-color, inherit);display:var(--hot-toast-message-display, flex);flex:var(--hot-toast-message-flex, 1);justify-content:var(--hot-toast-message-justify-content, center);margin:var(--hot-toast-message-margin, 4px 10px)}.hot-toast-bar-base-container[_ngcontent-%COMP%]{display:var(--hot-toast-container-display, flex);pointer-events:var(--hot-toast-container-pointer-events, none);position:var(--hot-toast-container-position, absolute);transition:var(--hot-toast-container-transition, transform .23s cubic-bezier(.21, 1.02, .73, 1))}@media (prefers-reduced-motion: reduce){.hot-toast-bar-base-container[_ngcontent-%COMP%]{transition-duration:var(--hot-toast-container-reduced-motion-transition-duration, 10ms)!important}}.hot-toast-bar-base-container.hot-toast-theme-snackbar[_ngcontent-%COMP%]   .hot-toast-bar-base[_ngcontent-%COMP%]{background:var(--hot-toast-snackbar-bg, #323232);box-shadow:var(--hot-toast-snackbar-shadow, 0 3px 5px -1px rgba(0, 0, 0, .2), 0 6px 10px 0 rgba(0, 0, 0, .14), 0 1px 18px 0 rgba(0, 0, 0, .12));color:var(--hot-toast-snackbar-color, white)}.hot-toast-bar-base-container.hot-toast-theme-snackbar[_ngcontent-%COMP%]   .hot-toast-close-btn[_ngcontent-%COMP%]{filter:var(--hot-toast-snackbar-close-btn-filter, invert(1) grayscale(100%) brightness(200%))}@keyframes hotToastEnterAnimationNegative{0%{opacity:.5;transform:translateY(-80px) scale(.6)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes hotToastEnterAnimationPositive{0%{opacity:.5;transform:translateY(80px) scale(.6)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes hotToastExitAnimationPositive{0%{opacity:1;transform:translateZ(-1px) scale(1)}to{opacity:0;transform:translate3d(0,130px,-1px) scale(.5)}}@keyframes hotToastExitAnimationNegative{0%{opacity:1;transform:translateZ(-1px) scale(1)}to{opacity:0;transform:translate3d(0,-130px,-1px) scale(.5)}}.hot-toast-close-btn[_ngcontent-%COMP%]{align-self:var(--hot-toast-close-btn-align-self, flex-start);background-color:var(--hot-toast-close-btn-background-color, transparent);background-image:var(--hot-toast-close-btn-background-image, url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e\"));background-position:var(--hot-toast-close-btn-background-position, center);background-repeat:var(--hot-toast-close-btn-background-repeat, no-repeat);background-size:var(--hot-toast-close-btn-background-size, .75em);border:var(--hot-toast-close-btn-border, 0);border-radius:var(--hot-toast-close-btn-border-radius, .25rem);box-sizing:var(--hot-toast-close-btn-box-sizing, content-box);display:var(--hot-toast-close-btn-display, flex);height:var(--hot-toast-close-btn-height, .8em);margin-top:var(--hot-toast-close-btn-margin-top, .25em);opacity:var(--hot-toast-close-btn-opacity, .5);padding:var(--hot-toast-close-btn-padding, .25em);width:var(--hot-toast-close-btn-width, .8em)}.hot-toast-close-btn[_ngcontent-%COMP%]:focus{box-shadow:var(--hot-toast-close-btn-box-shadow, 0 0 0 .125rem rgba(13, 110, 253, .25));outline:var(--hot-toast-close-btn-outline, none)}.hot-toast-close-btn[_ngcontent-%COMP%]:hover, .hot-toast-close-btn[_ngcontent-%COMP%]:focus{opacity:var(--hot-toast-close-btn-opacity, .75)}.hot-toast-icon[_ngcontent-%COMP%]{align-self:var(--hot-toast-icon-align-self, flex-start);padding-top:var(--hot-toast-icon-padding-top, .25em)}"],changeDetection:0}),n})(),G4=(()=>{class n{constructor(t){this.cdr=t,this.toasts=[],this.toastRefs=[],this._onClosed=new nn.x,this.onClosed$=this._onClosed.asObservable()}trackById(t,r){return r.id}calculateOffset(t,r){const i=this.toasts.filter(h=>h.visible&&h.position===r),s=i.findIndex(h=>h.id===t);return-1!==s?i.slice(...this.defaultConfig.reverseOrder?[s+1]:[0,s]).reduce((h,p)=>h+(p.height||0)+8,0):0}updateHeight(t,r){r.height=t,this.cdr.detectChanges()}addToast(t){this.toastRefs.push(t);const r=t.getToast();return this.toasts.push(t.getToast()),this.cdr.detectChanges(),{dispose:()=>{this.closeToast(r.id)},updateMessage:i=>{r.message=i,this.cdr.detectChanges()},updateToast:i=>{this.updateToasts(r,i),this.cdr.detectChanges()},afterClosed:this.getAfterClosed(r)}}closeToast(t){if(t){const r=this.hotToastComponentList.find(i=>i.toast.id===t);r&&r.close()}else this.hotToastComponentList.forEach(r=>r.close())}beforeClosed(t){t.visible=!1}afterClosed(t){this.toasts.findIndex(i=>i.id===t.id)>-1&&(this._onClosed.next(t),this.toasts=this.toasts.filter(i=>i.id!==t.id),this.toastRefs=this.toastRefs.filter(i=>i.getToast().id!==t.id),this.cdr.detectChanges())}hasToast(t){return this.toasts.findIndex(r=>r.id===t)>-1}getAfterClosed(t){return this.onClosed$.pipe(fn(r=>r.id===t.id))}updateToasts(t,r){this.toasts=this.toasts.map(i=>Object.assign(Object.assign({},i),i.id===t.id&&Object.assign(Object.assign({},t),r)))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-container"]],viewQuery:function(t,r){if(1&t&&c.Gf(VU,5),2&t){let i;c.iGM(i=c.CRH())&&(r.hotToastComponentList=i)}},inputs:{defaultConfig:"defaultConfig"},decls:8,vars:2,consts:[[2,"position","fixed","z-index","9999","top","0","right","0","bottom","0","left","0","pointer-events","none"],[2,"position","relative","height","100%"],[3,"toast","offset","toastRef","height","beforeClosed","afterClosed",4,"ngFor","ngForOf","ngForTrackBy"],[3,"toast","offset","toastRef","height","beforeClosed","afterClosed"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3,"\n    "),c.YNc(4,P4,1,3,"hot-toast",2),c._uU(5,"\n  "),c.qZA(),c._uU(6,"\n"),c.qZA(),c._uU(7,"\n")),2&t&&(c.xp6(4),c.Q6J("ngForOf",r.toasts)("ngForTrackBy",r.trackById))},directives:[VU,rr],encapsulation:2,changeDetection:0}),n})();class oO{constructor(){this.reverseOrder=!1,this.ariaLive="polite",this.role="status",this.position="top-center",this.autoClose=!0,this.theme="toast",this.attributes={},this.success={content:""},this.error={content:""},this.loading={content:""},this.blank={content:""},this.warning={content:""}}}class Z4{constructor(){this.storage="local",this.key="ngneat/hototast-${id}",this.count=1,this.enabled=!1}}let aO=(()=>{class n{constructor(t,r,i){this._viewService=t,this.platformId=r,this._isInitialized=!1,this._defaultConfig=new oO,this._defaultPersistConfig=new Z4,i&&(this._defaultConfig=Object.assign(Object.assign({},this._defaultConfig),i))}get defaultConfig(){return this._defaultConfig}set defaultConfig(t){this._defaultConfig=Object.assign(Object.assign({},this._defaultConfig),t),this._componentRef&&this._componentRef.setInput("defaultConfig",this._defaultConfig)}show(t,r){return this.createToast(t||this._defaultConfig.blank.content,"blank",Object.assign(Object.assign({},this._defaultConfig),r))}error(t,r){var i;return this.createToast(t||this._defaultConfig.error.content,"error",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.error),r))}success(t,r){var i;return this.createToast(t||this._defaultConfig.success.content,"success",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.success),r))}loading(t,r){var i;return this.createToast(t||this._defaultConfig.loading.content,"loading",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.loading),r))}warning(t,r){var i;return this.createToast(t||this._defaultConfig.warning.content,"warning",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.warning),r))}info(t,r){var i;return this.createToast(t||this._defaultConfig.warning.content,"info",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.warning),r))}observe(t){return r=>{var i,s,u,h,p,y;let C,I=0;const x=null!==(i=t.loading)&&void 0!==i?i:null===(s=this._defaultConfig.loading)||void 0===s?void 0:s.content,P=null!==(u=t.success)&&void 0!==u?u:null===(h=this._defaultConfig.success)||void 0===h?void 0:h.content,U=null!==(p=t.error)&&void 0!==p?p:null===(y=this._defaultConfig.error)||void 0===y?void 0:y.content;return dS(()=>(x&&(C=this.createLoadingToast(x),I=Date.now()),r.pipe((0,Qi.b)(Object.assign(Object.assign({},P&&{next:X=>{C=this.createOrUpdateToast(t,X,C,"success",0===I?I:Date.now()-I)}}),U&&{error:X=>{C=this.createOrUpdateToast(t,X,C,"error",0===I?I:Date.now()-I)}})))))}}close(t){this._componentRef&&this._componentRef.ref.instance.closeToast(t)}init(){Gr(this.platformId)||(this._componentRef=this._viewService.createComponent(G4).setInput("defaultConfig",this._defaultConfig).appendTo(document.body))}createOrUpdateToast(t,r,i,s,u){let h=null,p={};if(({content:h,options:p}=this.getContentAndOptions(s,t[s]||(this._defaultConfig[s]?this._defaultConfig[s].content:""))),h=((n,e)=>(n=>"function"==typeof n)(n)?n(e):n)(h,r),i){i.updateMessage(h);const y=Object.assign(Object.assign({type:s,duration:u+NU[s]},p),p.duration&&{duration:u+p.duration});i.updateToast(y)}else this.createToast(h,s,p);return i}createToast(t,r,i,s){var u,h,p,y,C,I;this._isInitialized||(this._isInitialized=!0,this.init());const x=Date.now(),P=null!==(u=null==i?void 0:i.id)&&void 0!==u?u:x.toString();if(!this.isDuplicate(P)&&(!(null===(h=i.persist)||void 0===h?void 0:h.enabled)||(null===(p=i.persist)||void 0===p?void 0:p.enabled)&&this.handleStorageValue(P,i))){const U=Object.assign({ariaLive:null!==(y=null==i?void 0:i.ariaLive)&&void 0!==y?y:"polite",createdAt:x,duration:null!==(C=null==i?void 0:i.duration)&&void 0!==C?C:NU[r],id:P,message:t,role:null!==(I=null==i?void 0:i.role)&&void 0!==I?I:"status",type:r,visible:!0,observableMessages:null!=s?s:void 0},i);return new LU(U).appendTo(this._componentRef.ref.instance)}}isDuplicate(t){return this._componentRef.ref.instance.hasToast(t)}handleStorageValue(t,r){let i=1;const s=Object.assign(Object.assign({},this._defaultPersistConfig),r.persist),u="local"===s.storage?localStorage:sessionStorage,h=s.key.replace(/\${id}/g,t);let p=u.getItem(h);return p?(p=parseInt(p,10),i=p>0?p-1:p):i=s.count,u.setItem(h,i.toString()),i}getContentAndOptions(t,r){let i,s=Object.assign(Object.assign({},this._defaultConfig),this._defaultConfig[t]);if("string"==typeof r||iO(r)||sO(r))i=r;else{let u;({content:i}=r),u=(0,l4._T)(r,["content"]),s=Object.assign(Object.assign({},s),u)}return{content:i,options:s}}createLoadingToast(t){let r=null,i={};return({content:r,options:i}=this.getContentAndOptions("loading",t)),this.loading(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(PU),c.LFG(c.Lbi),c.LFG(oO,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K4=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:oO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Li,p4]]}),n})();function Ri(n){return null!=n&&"false"!=`${n}`}function lO(n,e=0){return function Y4(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function UU(n){return Array.isArray(n)?n:[n]}function gi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ih(n){return n instanceof c.SBq?n.nativeElement:n}let BU=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q4=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=ih(t);return new En.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new nn.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(BU))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X4=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Ri(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=lO(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(gx(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Q4),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),J4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[BU]}),n})();const e5=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function t5(){return(0,c.f3M)(se)}}),n5=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let cO,kE=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function r5(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n5.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(e5,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();try{cO="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){cO=!1}let Pv,Pa=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function kr(n){return n===fh}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!cO)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function qU(){if(Pv)return Pv;if("object"!=typeof document||!document)return Pv=new Set(HU),Pv;let n=document.createElement("input");return Pv=new Set(HU.filter(e=>(n.setAttribute("type",e),n.type===e))),Pv}let PE,um,uO;function NE(n){return function i5(){if(null==PE&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>PE=!0}))}finally{PE=PE||!1}return PE}()?n:!!n.capture}function s5(){if(null==um){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return um=!1,um;if("scrollBehavior"in document.documentElement.style)um=!0;else{const n=Element.prototype.scrollTo;um=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return um}function dm(n){return n.composedPath?n.composedPath()[0]:n.target}function dO(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Nv(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Fs(n){return(0,Cn.e)((e,t)=>{(0,wc.Xf)(n).subscribe(new hn.Q(t,()=>t.complete(),Ax.Z)),!t.closed&&e.subscribe(t)})}class ZU{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new nn.x,this._typeaheadSubscription=yo.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new nn.x,this.change=new nn.x,e instanceof c.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Qi.b)(t=>this._pressedLetters.push(t)),gx(e),fn(()=>this._pressedLetters.length>0),(0,ut.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,u=r[s];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Nv(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof c.n_E?this._items.toArray():this._items}}class E5 extends ZU{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class C5 extends ZU{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function hO(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function fO(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const M5=new c.OlP("cdk-input-modality-detector-options"),x5={ignoreKeys:[18,17,224,91,16]},Fv=NE({passive:!0,capture:!0});let R5=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Oa(null),this._lastTouchMs=0,this._onKeydown=u=>{var h,p;(null===(p=null===(h=this._options)||void 0===h?void 0:h.ignoreKeys)||void 0===p?void 0:p.some(y=>y===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=dm(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(hO(u)?"keyboard":"mouse"),this._mostRecentTarget=dm(u))},this._onTouchstart=u=>{fO(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=dm(u))},this._options=Object.assign(Object.assign({},x5),s),this.modalityDetected=this._modality.pipe(function v5(n){return fn((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(Qs()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Fv),i.addEventListener("mousedown",this._onMousedown,Fv),i.addEventListener("touchstart",this._onTouchstart,Fv)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fv),document.removeEventListener("mousedown",this._onMousedown,Fv),document.removeEventListener("touchstart",this._onTouchstart,Fv))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Pa),c.LFG(c.R0b),c.LFG(se),c.LFG(M5,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const k5=new c.OlP("liveAnnouncerElement",{providedIn:"root",factory:function O5(){return null}}),P5=new c.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let N5=(()=>{class n{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let s,u;return 1===r.length&&"number"==typeof r[0]?u=r[0]:[s,u]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==u&&i&&(u=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>new Promise(h=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,h(),"number"==typeof u&&(this._previousTimeout=setTimeout(()=>this.clear(),u))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(k5,8),c.LFG(c.R0b),c.LFG(se),c.LFG(P5,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const F5=new c.OlP("cdk-focus-monitor-default-options"),ZS=NE({passive:!0,capture:!0});let pO=(()=>{class n{constructor(t,r,i,s,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new nn.x,this._rootNodeFocusAndBlurListener=h=>{const p=dm(h),y="focus"===h.type?this._onFocus:this._onBlur;for(let C=p;C;C=C.parentElement)y.call(this,h,C)},this._document=s,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const i=ih(t);if(!this._platform.isBrowser||1!==i.nodeType)return lt(null);const s=function a5(n){if(function o5(){if(null==uO){const n="undefined"!=typeof document?document.head:null;uO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return uO}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const h={checkChildren:r,subject:new nn.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=ih(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=ih(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=dm(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ZS),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ZS)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Fs(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ZS),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ZS),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(Pa),c.LFG(R5),c.LFG(se,8),c.LFG(F5,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QU="cdk-high-contrast-black-on-white",XU="cdk-high-contrast-white-on-black",gO="cdk-high-contrast-active";let L5=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(gO),t.remove(QU),t.remove(XU),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(gO),t.add(QU)):2===r&&(t.add(gO),t.add(XU))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Pa),c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function V5(n,e){if(1&n&&c._UZ(0,"mat-pseudo-checkbox",4),2&n){const t=c.oxw();c.Q6J("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function U5(n,e){if(1&n&&(c.TgZ(0,"span",5),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.hij("(",t.group.label,")")}}const B5=["*"],H5=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function j5(){return!0}});let ys=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!dO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(L5),c.LFG(H5,8),c.LFG(se))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[OE],OE]}),n})();function mO(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Ri(e)}}}function KS(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function _O(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Ri(e)}}}function q5(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?lO(t):this.defaultTabIndex}}}function eB(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new nn.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let yO=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class G5{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const tB={enterDuration:225,exitDuration:150},vO=NE({passive:!0}),nB=["mousedown","touchstart"],rB=["mouseup","mouseleave","touchend","touchcancel"];class W5{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ih(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},tB),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function K5(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,y=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-u+"px",C.style.top=p-u+"px",C.style.height=2*u+"px",C.style.width=2*u+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C),function Z5(n){window.getComputedStyle(n).getPropertyValue("opacity")}(C),C.style.transform="scale(1)";const I=new G5(this,C,r);return I.state=0,this._activeRipples.add(I),r.persistent||(this._mostRecentTransientRipple=I),this._runTimeoutOutsideZone(()=>{const x=I===this._mostRecentTransientRipple;I.state=1,!r.persistent&&(!x||!this._isPointerDown)&&I.fadeOut()},y),I}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},tB),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ih(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(nB))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(rB),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=hO(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!fO(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,vO)})})}_removeTriggerEvents(){this._triggerElement&&(nB.forEach(e=>{this._triggerElement.removeEventListener(e,this,vO)}),this._pointerUpEventsRegistered&&rB.forEach(e=>{this._triggerElement.removeEventListener(e,this,vO)}))}}const Y5=new c.OlP("mat-ripple-global-options");let YS=(()=>{class n{constructor(t,r,i,s,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new W5(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Pa),c.Y36(Y5,8),c.Y36(Dv,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),bO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ys],ys]}),n})(),Q5=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Dv,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,r){2&t&&c.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),X5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ys]]}),n})();const iB=new c.OlP("MAT_OPTION_PARENT_COMPONENT"),sB=new c.OlP("MatOptgroup");let J5=0;class e8{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let t8=(()=>{class n{constructor(t,r,i,s){this._element=t,this._changeDetectorRef=r,this._parent=i,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+J5++,this.onSelectionChange=new c.vpe,this._stateChanges=new nn.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Ri(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Nv(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new e8(this,t))}}return n.\u0275fac=function(t){c.$Z()},n.\u0275dir=c.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),wO=(()=>{class n extends t8{constructor(t,r,i,s){super(t,r,i,s)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(iB,8),c.Y36(sB,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),2&t&&(c.Ikx("id",r.id),c.uIk("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),c.ekj("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[c.qOj],ngContentSelectors:B5,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,r){1&t&&(c.F$t(),c.YNc(0,V5,1,2,"mat-pseudo-checkbox",0),c.TgZ(1,"span",1),c.Hsn(2),c.qZA(),c.YNc(3,U5,2,1,"span",2),c._UZ(4,"div",3)),2&t&&(c.Q6J("ngIf",r.multiple),c.xp6(3),c.Q6J("ngIf",r.group&&r.group._inert),c.xp6(1),c.Q6J("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},directives:[Q5,Un,YS],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function oB(n,e,t){if(t.length){let r=e.toArray(),i=t.toArray(),s=0;for(let u=0;u<n+1;u++)r[u].group&&r[u].group===i[s]&&s++;return s}return 0}let aB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[bO,Li,ys,X5]]}),n})();var r8=F(1144);const i8=["addListener","removeListener"],s8=["addEventListener","removeEventListener"],o8=["on","off"];function QS(n,e,t,r){if((0,Da.m)(t)&&(r=t,t=void 0),r)return QS(n,e,t).pipe(mk(r));const[i,s]=function c8(n){return(0,Da.m)(n.addEventListener)&&(0,Da.m)(n.removeEventListener)}(n)?s8.map(u=>h=>n[u](e,h,t)):function a8(n){return(0,Da.m)(n.addListener)&&(0,Da.m)(n.removeListener)}(n)?i8.map(lB(n,e)):function l8(n){return(0,Da.m)(n.on)&&(0,Da.m)(n.off)}(n)?o8.map(lB(n,e)):[];if(!i&&(0,r8.z)(n))return(0,Yi.z)(u=>QS(u,e,t))((0,wc.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new En.y(u=>{const h=(...p)=>u.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function lB(n,e){return t=>r=>n[t](e,r)}const u8=["connectionContainer"],d8=["inputContainer"],h8=["label"];function f8(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",14),c._UZ(2,"div",15),c._UZ(3,"div",16),c._UZ(4,"div",17),c.qZA(),c.TgZ(5,"div",18),c._UZ(6,"div",15),c._UZ(7,"div",16),c._UZ(8,"div",17),c.qZA(),c.BQk())}function p8(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.Hsn(1,1),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function g8(n,e){if(1&n&&(c.ynx(0),c.Hsn(1,2),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(3),c.Oqu(t._control.placeholder)}}function m8(n,e){1&n&&c.Hsn(0,3,["*ngSwitchCase","true"])}function _8(n,e){1&n&&(c.TgZ(0,"span",23),c._uU(1," *"),c.qZA())}function y8(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"label",20,21),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.YNc(2,g8,4,1,"ng-container",12),c.YNc(3,m8,1,0,"ng-content",12),c.YNc(4,_8,2,0,"span",22),c.qZA()}if(2&n){const t=c.oxw();c.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),c.uIk("for",t._control.id)("aria-owns",t._control.id),c.xp6(2),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function v8(n,e){1&n&&(c.TgZ(0,"div",24),c.Hsn(1,4),c.qZA())}function b8(n,e){if(1&n&&(c.TgZ(0,"div",25),c._UZ(1,"span",26),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function w8(n,e){if(1&n&&(c.TgZ(0,"div"),c.Hsn(1,5),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState)}}function E8(n,e){if(1&n&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("id",t._hintLabelId),c.xp6(1),c.Oqu(t.hintLabel)}}function C8(n,e){if(1&n&&(c.TgZ(0,"div",27),c.YNc(1,E8,2,2,"div",28),c.Hsn(2,6),c._UZ(3,"div",29),c.Hsn(4,7),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",t.hintLabel)}}const T8=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],I8=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let D8=0;const cB=new c.OlP("MatError");let EO=(()=>{class n{constructor(t,r){this.id="mat-error-"+D8++,t||r.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(c.$8M("aria-live"),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("id",r.id)},inputs:{id:"id"},features:[c._Bn([{provide:cB,useExisting:n}])]}),n})();const S8={transitionMessages:uE("transitionMessages",[Ev("enter",xa({opacity:1,transform:"translateY(0%)"})),Xg("void => enter",[xa({opacity:0,transform:"translateY(-5px)"}),wv("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let XS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n}),n})(),A8=0;const uB=new c.OlP("MatHint");let dB=(()=>{class n{constructor(){this.align="start",this.id="mat-hint-"+A8++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(t,r){2&t&&(c.uIk("id",r.id)("align",null),c.ekj("mat-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"},features:[c._Bn([{provide:uB,useExisting:n}])]}),n})(),JS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})(),M8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const x8=new c.OlP("MatPrefix"),R8=new c.OlP("MatSuffix");let hB=0;const O8=KS(class{constructor(n){this._elementRef=n}},"primary"),P8=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),CO=new c.OlP("MatFormField");let TO=(()=>{class n extends O8{constructor(t,r,i,s,u,h,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=u,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new nn.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+hB++,this._labelId="mat-form-field-label-"+hB++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Ri(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(wi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Fs(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Fs(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,yl.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(wi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(wi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Fs(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,QS(this._label.nativeElement,"transitionend").pipe((0,ei.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${s}`);for(let I=0;I<C.length;I++)C[I].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,h=0;const p=r.querySelectorAll(i),y=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const I=this._getStartEnd(C),x=t.children,P=this._getStartEnd(x[0].getBoundingClientRect());let U=0;for(let X=0;X<x.length;X++)U+=x[X].offsetWidth;u=Math.abs(P-I)-5,h=U>0?.75*U+10:0}for(let C=0;C<p.length;C++)p[C].style.width=`${u}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(kE,8),c.Y36(P8,8),c.Y36(Pa),c.Y36(c.R0b),c.Y36(Dv,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,XS,5),c.Suo(i,XS,7),c.Suo(i,JS,5),c.Suo(i,JS,7),c.Suo(i,M8,5),c.Suo(i,cB,5),c.Suo(i,uB,5),c.Suo(i,x8,5),c.Suo(i,R8,5)),2&t){let s;c.iGM(s=c.CRH())&&(r._controlNonStatic=s.first),c.iGM(s=c.CRH())&&(r._controlStatic=s.first),c.iGM(s=c.CRH())&&(r._labelChildNonStatic=s.first),c.iGM(s=c.CRH())&&(r._labelChildStatic=s.first),c.iGM(s=c.CRH())&&(r._placeholderChild=s.first),c.iGM(s=c.CRH())&&(r._errorChildren=s),c.iGM(s=c.CRH())&&(r._hintChildren=s),c.iGM(s=c.CRH())&&(r._prefixChildren=s),c.iGM(s=c.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(c.Gf(u8,7),c.Gf(d8,5),c.Gf(h8,5)),2&t){let i;c.iGM(i=c.CRH())&&(r._connectionContainerRef=i.first),c.iGM(i=c.CRH())&&(r._inputContainerRef=i.first),c.iGM(i=c.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&c.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:CO,useExisting:n}]),c.qOj],ngContentSelectors:I8,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(c.F$t(T8),c.TgZ(0,"div",0),c.TgZ(1,"div",1,2),c.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),c.YNc(3,f8,9,0,"ng-container",3),c.YNc(4,p8,2,1,"div",4),c.TgZ(5,"div",5,6),c.Hsn(7),c.TgZ(8,"span",7),c.YNc(9,y8,5,16,"label",8),c.qZA(),c.qZA(),c.YNc(10,v8,2,0,"div",9),c.qZA(),c.YNc(11,b8,2,4,"div",10),c.TgZ(12,"div",11),c.YNc(13,w8,2,1,"div",12),c.YNc(14,C8,5,2,"div",13),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngIf","outline"==r.appearance),c.xp6(1),c.Q6J("ngIf",r._prefixChildren.length),c.xp6(5),c.Q6J("ngIf",r._hasFloatingLabel()),c.xp6(1),c.Q6J("ngIf",r._suffixChildren.length),c.xp6(1),c.Q6J("ngIf","outline"!=r.appearance),c.xp6(1),c.Q6J("ngSwitch",r._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},directives:[Un,X4,ai,$r],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[S8.transitionMessages]},changeDetection:0}),n})(),eA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Li,ys,J4],ys]}),n})();const pB=NE({passive:!0});let N8=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return rm.E;const r=ih(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new nn.x,u="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,pB),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,pB)}}),s}stopMonitoring(t){const r=ih(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Pa),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const F8=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),L8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let V8=0;const U8=eB(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let IO=(()=>{class n extends U8{constructor(t,r,i,s,u,h,p,y,C,I){super(h,s,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=I,this._uid="mat-input-"+V8++,this.focused=!1,this.stateChanges=new nn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>qU().has(U));const x=this._elementRef.nativeElement,P=x.nodeName.toLowerCase();this._inputValueAccessor=p||x,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",U=>{const X=U.target;!X.value&&0===X.selectionStart&&0===X.selectionEnd&&(X.setSelectionRange(1,1),X.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!I,this._isNativeSelect&&(this.controlType=x.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Ri(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(vr.required))&&void 0!==s&&s}set required(t){this._required=Ri(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&qU().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Ri(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,r;const i=(null===(r=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===r?void 0:r.call(t))?null:this.placeholder;if(i!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=i,i?s.setAttribute("placeholder",i):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){L8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Pa),c.Y36(Hu,10),c.Y36(ME,8),c.Y36(op,8),c.Y36(yO),c.Y36(F8,10),c.Y36(N8),c.Y36(c.R0b),c.Y36(CO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&c.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(c.Ikx("disabled",r.disabled)("required",r.required),c.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),c.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:XS,useExisting:n}]),c.qOj,c.TTD]}),n})(),B8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[yO],imports:[[gB,eA,ys],gB,eA]}),n})();const j8=["mat-button",""],H8=["*"],$8=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],G8=KS(mO(_O(class{constructor(n){this._elementRef=n}})));let tA=(()=>{class n extends G8{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of $8)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(pO),c.Y36(Dv,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&c.Gf(YS,5),2&t){let i;c.iGM(i=c.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:j8,ngContentSelectors:H8,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1),c._UZ(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),c.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[YS],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),z8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[bO,ys],ys]}),n})();function W8(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Email address is required "),c.qZA())}function Z8(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Please enter a valid email address "),c.qZA())}function K8(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Password is required "),c.qZA())}let Y8=(()=>{class n{constructor(t,r,i){this.authservice=t,this._router=r,this.toast=i,this.loginForm=new cm({email:new jr("",[vr.required,vr.email]),password:new jr("",[vr.required])})}ngOnInit(){}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}submit(){if(!this.loginForm.valid)return;const{email:t,password:r}=this.loginForm.value;this.authservice.loginByEmail(t,r).pipe(this.toast.observe({success:"Logged in successfully",loading:"Logging in...",error:i=>`There was an error: ${i} `})).subscribe(i=>{this.authservice.user.next(i.user),console.log(i.user),localStorage.setItem("uid",i.user.uid),this._router.navigate(["/profile"])})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(BS),c.Y36(xi),c.Y36(aO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:18,vars:4,consts:[[1,"form-container","mat-elevation-z5"],[3,"formGroup","ngSubmit"],["matInput","","placeholder","Email address","formControlName","email"],[4,"ngIf"],["matInput","","type","password","placeholder","Password","formControlName","password"],[1,"center","margin-top"],["type","submit","mat-raised-button","","color","primary"],["routerLink","/signup",1,"sign-up-link"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h1"),c._uU(2,"Login"),c.qZA(),c.TgZ(3,"form",1),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(4,"mat-form-field"),c._UZ(5,"input",2),c.YNc(6,W8,2,0,"mat-error",3),c.YNc(7,Z8,2,0,"mat-error",3),c.qZA(),c.TgZ(8,"mat-form-field"),c._UZ(9,"input",4),c.YNc(10,K8,2,0,"mat-error",3),c.qZA(),c.TgZ(11,"div",5),c.TgZ(12,"button",6),c._uU(13,"Login"),c.qZA(),c.qZA(),c.TgZ(14,"span",5),c._uU(15,"New to our platform? "),c.TgZ(16,"a",7),c._uU(17,"Sign up!"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("formGroup",r.loginForm),c.xp6(3),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email),c.xp6(3),c.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.required))},directives:[US,RS,op,TO,IO,kv,xS,xE,Un,EO,tA,AS],styles:[".sign-up-link[_ngcontent-%COMP%]{font-size:1.2rem;margin-left:8px}"]}),n})();class X8{}class ap{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ap?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ap;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ap?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===s.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class J8{encodeKey(e){return mB(e)}encodeValue(e){return mB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tK=/%(\d[a-f0-9])/gi,nK={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function mB(n){return encodeURIComponent(n).replace(tK,(e,t)=>{var r;return null!==(r=nK[t])&&void 0!==r?r:e})}function _B(n){return`${n}`}class lp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new J8,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eK(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(u)||[];p.push(h),t.set(u,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new lp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(_B(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(_B(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rK{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function yB(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function vB(n){return"undefined"!=typeof Blob&&n instanceof Blob}function bB(n){return"undefined"!=typeof FormData&&n instanceof FormData}class LE{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function iK(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ap),this.context||(this.context=new rK),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new lp,this.urlWithParams=t}serializeBody(){return null===this.body?null:yB(this.body)||vB(this.body)||bB(this.body)||function sK(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof lp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bB(this.body)?null:vB(this.body)?this.body.type||null:yB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,C=e.params||this.params;const I=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((x,P)=>x.set(P,e.setHeaders[P]),y)),e.setParams&&(C=Object.keys(e.setParams).reduce((x,P)=>x.set(P,e.setParams[P]),C)),new LE(r,i,u,{params:C,headers:y,context:I,reportProgress:p,responseType:s,withCredentials:h})}}var vs=(()=>((vs=vs||{})[vs.Sent=0]="Sent",vs[vs.UploadProgress=1]="UploadProgress",vs[vs.ResponseHeader=2]="ResponseHeader",vs[vs.DownloadProgress=3]="DownloadProgress",vs[vs.Response=4]="Response",vs[vs.User=5]="User",vs))();class DO extends class oK{constructor(e,t=200,r="OK"){this.headers=e.headers||new ap,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=vs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new DO({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function SO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let EB=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof LE)s=t;else{let p,y;p=i.headers instanceof ap?i.headers:new ap(i.headers),i.params&&(y=i.params instanceof lp?i.params:new lp({fromObject:i.params})),s=new LE(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=lt(s).pipe(Sv(p=>this.handler.handle(p)));if(t instanceof LE||"events"===i.observe)return u;const h=u.pipe(fn(p=>p instanceof DO));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,ut.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,ut.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,ut.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,ut.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new lp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,SO(i,r))}post(t,r,i={}){return this.request("POST",t,SO(i,r))}put(t,r,i={}){return this.request("PUT",t,SO(i,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(X8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const lK=["*"];let nA;function VE(n){var e;return(null===(e=function cK(){if(void 0===nA&&(nA=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(nA=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return nA}())||void 0===e?void 0:e.createHTML(n))||n}function CB(n){return Error(`Unable to find icon with the name "${n}"`)}function TB(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function IB(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class hm{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let rA=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new hm(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const u=this._sanitizer.sanitize(c.q3G.HTML,i);if(!u)throw IB(i);const h=VE(u);return this._addSvgIconConfig(t,r,new hm("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new hm(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(c.q3G.HTML,r);if(!s)throw IB(r);const u=VE(s);return this._addSvgIconSetConfig(t,new hm("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,t);if(!r)throw TB(t);const i=this._cachedIconsByUrl.get(r);return i?lt(iA(i)):this._loadSvgIconFromConfig(new hm(t,null)).pipe((0,Qi.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,ut.U)(s=>iA(s)))}getNamedSvgIcon(t,r=""){const i=DB(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):function Q8(n,e){const t=(0,Da.m)(n)?n:()=>n,r=i=>i.error(t());return new En.y(e?i=>e.schedule(r,0,i):r)}(CB(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?lt(iA(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ut.U)(r=>iA(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?lt(i):xV(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(th(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,u.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),lt(null)})))).pipe((0,ut.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw CB(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(u,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Qi.b)(r=>t.svgText=r),(0,ut.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?lt(null):this._fetchIcon(t).pipe((0,Qi.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const u=s.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const h=this._svgElementFromString(VE("<svg></svg>"));return h.appendChild(u),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(VE("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:u,value:h}=i[s];"id"!==u&&r.setAttribute(u,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,u=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function uK(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const h=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,i);if(!h)throw TB(i);const p=this._inProgressUrlFetches.get(h);if(p)return p;const y=this._httpClient.get(h,{responseType:"text",withCredentials:u}).pipe((0,ut.U)(C=>VE(C)),yk(()=>this._inProgressUrlFetches.delete(h)),(0,SI.B)());return this._inProgressUrlFetches.set(h,y),y}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(DB(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return hK(s)?new hm(s.url,null,s.options):new hm(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(EB,8),c.LFG(Hc),c.LFG(se,8),c.LFG(c.qLn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iA(n){return n.cloneNode(!0)}function DB(n,e){return n+":"+e}function hK(n){return!(!n.url||!n.options)}const fK=KS(class{constructor(n){this._elementRef=n}}),pK=new c.OlP("mat-icon-location",{providedIn:"root",factory:function gK(){const n=(0,c.f3M)(se),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),SB=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],mK=SB.map(n=>`[${n}]`).join(", "),_K=/^url\(['"]?#(.*?)['"]?\)$/;let AB=(()=>{class n extends fK{constructor(t,r,i,s,u){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=u,this._inline=!1,this._currentIconFetch=yo.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Ri(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=t.querySelectorAll("style");for(let s=0;s<r.length;s++)r[s].textContent+=" ";const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(u=>{s.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(mK),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)SB.forEach(u=>{const h=r[s],p=h.getAttribute(u),y=p?p.match(_K):null;if(y){let C=i.get(h);C||(C=[],i.set(h,C)),C.push({name:u,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,ei.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(rA),c.$8M("aria-hidden"),c.Y36(pK),c.Y36(c.qLn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(c.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),c.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:lK,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(),c.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),yK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ys],ys]}),n})();var MB=F(4408);const UE={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=UE;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new yo.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=UE;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=UE;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var xB=F(7565);new class bK extends xB.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class vK extends MB.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=UE.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(UE.cancelAnimationFrame(t),e._scheduled=void 0)}});let AO,EK=1;const sA={};function RB(n){return n in sA&&(delete sA[n],!0)}const CK={setImmediate(n){const e=EK++;return sA[e]=!0,AO||(AO=Promise.resolve()),AO.then(()=>RB(e)&&n()),e},clearImmediate(n){RB(n)}},{setImmediate:TK,clearImmediate:IK}=CK,oA={setImmediate(...n){const{delegate:e}=oA;return((null==e?void 0:e.setImmediate)||TK)(...n)},clearImmediate(n){const{delegate:e}=oA;return((null==e?void 0:e.clearImmediate)||IK)(n)},delegate:void 0},MO=new class SK extends xB.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class DK extends MB.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=oA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(oA.clearImmediate(t),e._scheduled=void 0)}});var MK=F(3532);function kB(n=0,e,t=rl.P){let r=-1;return null!=e&&((0,MK.K)(e)?t=e:r=e),new En.y(i=>{let s=function xK(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function OB(n,e=rl.P){return function AK(n){return(0,Cn.e)((e,t)=>{let r=!1,i=null,s=null,u=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}u&&t.complete()},p=()=>{s=null,u&&t.complete()};e.subscribe(new hn.Q(t,y=>{r=!0,i=y,s||(0,wc.Xf)(n(y)).subscribe(s=new hn.Q(t,h,p))},()=>{u=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>kB(n,e))}let kK=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new nn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new En.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(OB(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):lt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(fn(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=ih(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>QS(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(Pa),c.LFG(se,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xO=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new nn.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(OB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Pa),c.LFG(c.R0b),c.LFG(se,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),PB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[OE,aA],OE,aA]}),n})();class RO{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class PK extends RO{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class kO extends RO{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class NK extends RO{constructor(e){super(),this.element=e instanceof c.SBq?e.nativeElement:e}}class LK extends class FK{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof PK?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof kO?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof NK?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=u=>{const h=u.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=u,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let VK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const NB=s5();class BK{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=gi(-this._previousScrollPosition.left),e.style.top=gi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",u=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),NB&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),NB&&(r.scrollBehavior=s,i.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class jK{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class FB{enable(){}disable(){}attach(){}}function OO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function LB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class HK{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();OO(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let qK=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new FB,this.close=u=>new jK(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new BK(this._viewportRuler,this._document),this.reposition=u=>new HK(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(kK),c.LFG(xO),c.LFG(c.R0b),c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class PO{constructor(e){if(this.scrollStrategy=new FB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class $K{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class GK{constructor(e,t,r,i,s,u,h,p,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=u,this._document=h,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new nn.x,this._attachments=new nn.x,this._detachments=new nn.x,this._locationChanges=yo.w0.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._backdropTransitionendHandler=C=>{this._disposeBackdrop(C.target)},this._keydownEvents=new nn.x,this._outsidePointerEvents=new nn.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ei.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=gi(this._config.width),e.height=gi(this._config.height),e.minWidth=gi(this._config.minWidth),e.minHeight=gi(this._config.minHeight),e.maxWidth=gi(this._config.maxWidth),e.maxHeight=gi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{console.log("fallback"),this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=UU(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Fs((0,yl.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let VB=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||dO()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),dO()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se),c.LFG(Pa))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UB="cdk-overlay-connected-position-bounding-box",zK=/([A-Za-z%]+)$/;class WK{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new nn.x,this._resizeSubscription=yo.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(UB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let u;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,i,h),y=this._getOverlayPoint(p,t,h),C=this._getOverlayFit(y,t,r,h);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(C,y,r)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!u||u.overlayFit.visibleArea<C.visibleArea)&&(u={overlayFit:C,overlayPoint:y,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const y of s){const C=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);C>p&&(p=C,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&fm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(UB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;i="start"==r.originX?u:h}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=jB(t);let{x:u,y:h}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(u+=p),y&&(h+=y);let x=0-h,P=h+s.height-r.height,U=this._subtractOverflows(s.width,0-u,u+s.width-r.width),X=this._subtractOverflows(s.height,x,P),le=U*X;return{visibleArea:le,isCompletelyWithinViewport:s.width*s.height===le,fitsInViewportVertically:X===s.height,fitsInViewportHorizontally:U==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,u=BB(this._overlayRef.getConfig().minHeight),h=BB(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=u&&u<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=jB(t),s=this._viewportRect,u=Math.max(e.x+i.width-s.width,0),h=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let C=0,I=0;return C=i.width<=s.width?y||-u:e.x<this._viewportMargin?s.left-r.left-e.x:0,I=i.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:C,y:I},{x:e.x+C,y:e.y+I}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new $K(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,u,h,C,I,x;if("top"===t.overlayY)u=e.y,s=r.height-u+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,s=r.height-h+this._viewportMargin;else{const P=Math.min(r.bottom-e.y+r.top,e.y),U=this._lastBoundingBoxSize.height;s=2*P,u=e.y-P,s>U&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-U/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)x=r.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)I=e.x,C=r.right-e.x;else{const P=Math.min(r.right-e.x+r.left,e.x),U=this._lastBoundingBoxSize.width;C=2*P,I=e.x-P,C>U&&!this._isInitialRender&&!this._growAfterOpen&&(I=e.x-U/2)}return{top:u,left:I,bottom:h,right:x,width:C,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;i.height=gi(r.height),i.top=gi(r.top),i.bottom=gi(r.bottom),i.width=gi(r.width),i.left=gi(r.left),i.right=gi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=gi(s)),u&&(i.maxWidth=gi(u))}this._lastBoundingBoxSize=r,fm(this._boundingBox.style,i)}_resetBoundingBoxStyles(){fm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){fm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();fm(r,this._getExactOverlayY(t,e,C)),fm(r,this._getExactOverlayX(t,e,C))}else r.position="static";let h="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),y&&(h+=`translateY(${y}px)`),r.transform=h.trim(),u.maxHeight&&(i?r.maxHeight=gi(u.maxHeight):s&&(r.maxHeight="")),u.maxWidth&&(i?r.maxWidth=gi(u.maxWidth):s&&(r.maxWidth="")),fm(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=gi(s.y),i}_getExactOverlayX(e,t,r){let u,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=gi(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:LB(e,r),isOriginOutsideView:OO(e,r),isOverlayClipped:LB(t,r),isOverlayOutsideView:OO(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&UU(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof c.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function fm(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function BB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(zK);return t&&"px"!==t?null:parseFloat(e)}return n||null}function jB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const HB="cdk-global-overlay-wrapper";class ZK{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(HB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:u,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||u&&"100%"!==u&&"100vw"!==u),y=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(HB),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let KK=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new ZK}flexibleConnectedTo(t){return new WK(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xO),c.LFG(se),c.LFG(Pa),c.LFG(VB))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YK=(()=>{class n extends qB{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let u=s.length-1;u>-1;u--)if(s[u]._keydownEvents.observers.length>0){const h=s[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QK=(()=>{class n extends qB{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=dm(s)},this._clickListener=s=>{const u=dm(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const C=p[y];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(u)||C.overlayElement.contains(h))break;const I=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>I.next(s)):I.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se),c.LFG(Pa),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XK=0,Lv=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,I,x){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=u,this._injector=h,this._ngZone=p,this._document=y,this._directionality=C,this._location=I,this._outsideClickDispatcher=x}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),u=new PO(t);return u.direction=u.direction||this._directionality.value,new GK(s,r,i,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+XK++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new LK(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qK),c.LFG(VB),c.LFG(c._Vd),c.LFG(KK),c.LFG(YK),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(se),c.LFG(kE),c.LFG(Fe),c.LFG(QK))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const JK=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],$B=new c.OlP("cdk-connected-overlay-scroll-strategy");let GB=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),zB=(()=>{class n{constructor(t,r,i,s,u){this._overlay=t,this._dir=u,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=yo.w0.EMPTY,this._attachSubscription=yo.w0.EMPTY,this._detachSubscription=yo.w0.EMPTY,this._positionSubscription=yo.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new c.vpe,this.positionChange=new c.vpe,this.attach=new c.vpe,this.detach=new c.vpe,this.overlayKeydown=new c.vpe,this.overlayOutsideClick=new c.vpe,this._templatePortal=new kO(r,i),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Ri(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Ri(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Ri(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Ri(t)}get push(){return this._push}set push(t){this._push=Ri(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=JK);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!Nv(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),r=new PO({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(t){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof GB?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function UK(n,e=!1){return(0,Cn.e)((t,r)=>{let i=0;t.subscribe(new hn.Q(r,s=>{const u=n(s,i++);(u||e)&&r.next(s),!u&&r.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Lv),c.Y36(c.Rgc),c.Y36(c.s_b),c.Y36($B),c.Y36(kE,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[c.TTD]}),n})();const tY={provide:$B,deps:[Lv],useFactory:function eY(n){return()=>n.scrollStrategies.reposition()}};let WB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Lv,tY],imports:[[OE,VK,PB],PB]}),n})();class nY{constructor(e=!1,t,r=!0){this._multiple=e,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new nn.x,t&&t.length&&(e?t.forEach(i=>this._markSelected(i)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}const rY=["trigger"],iY=["panel"];function sY(n,e){if(1&n&&(c.TgZ(0,"span",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Oqu(t.placeholder)}}function oY(n,e){if(1&n&&(c.TgZ(0,"span",12),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Oqu(t.triggerValue)}}function aY(n,e){1&n&&c.Hsn(0,0,["*ngSwitchCase","true"])}function lY(n,e){if(1&n&&(c.TgZ(0,"span",9),c.YNc(1,oY,2,1,"span",10),c.YNc(2,aY,1,0,"ng-content",11),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngSwitch",!!t.customTrigger),c.xp6(2),c.Q6J("ngSwitchCase",!0)}}function cY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",14,15),c.NdJ("@transformPanel.done",function(i){return c.CHM(t),c.oxw()._panelDoneAnimatingStream.next(i.toState)})("keydown",function(i){return c.CHM(t),c.oxw()._handleKeydown(i)}),c.Hsn(3,1),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("@transformPanelWrap",void 0),c.xp6(1),c.Gre("mat-select-panel ",t._getPanelTheme(),""),c.Udp("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),c.Q6J("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),c.uIk("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const uY=[[["mat-select-trigger"]],"*"],dY=["mat-select-trigger","*"],ZB={transformPanelWrap:uE("transformPanelWrap",[Xg("* => void",CG("@transformPanel",[EG()],{optional:!0}))]),transformPanel:uE("transformPanel",[Ev("void",xa({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Ev("showing",xa({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Ev("showing-multiple",xa({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Xg("void => *",wv("120ms cubic-bezier(0, 0, 0.2, 1)")),Xg("* => void",wv("100ms 25ms linear",xa({opacity:0})))])};let KB=0;const QB=new c.OlP("mat-select-scroll-strategy"),gY=new c.OlP("MAT_SELECT_CONFIG"),mY={provide:QB,deps:[Lv],useFactory:function pY(n){return()=>n.scrollStrategies.reposition()}};class _Y{constructor(e,t){this.source=e,this.value=t}}const yY=_O(q5(mO(eB(class{constructor(n,e,t,r,i){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=r,this.ngControl=i}})))),vY=new c.OlP("MatSelectTrigger");let bY=(()=>{class n extends yY{constructor(t,r,i,s,u,h,p,y,C,I,x,P,U,X){var le,je,Ke;super(u,s,p,y,I),this._viewportRuler=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=h,this._parentFormField=C,this._liveAnnouncer=U,this._defaultOptions=X,this._panelOpen=!1,this._compareWith=(Ye,Ze)=>Ye===Ze,this._uid="mat-select-"+KB++,this._triggerAriaLabelledBy=null,this._destroy=new nn.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+KB++,this._panelDoneAnimatingStream=new nn.x,this._overlayPanelClass=(null===(le=this._defaultOptions)||void 0===le?void 0:le.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(Ke=null===(je=this._defaultOptions)||void 0===je?void 0:je.disableOptionCentering)&&void 0!==Ke&&Ke,this.ariaLabel="",this.optionSelectionChanges=dS(()=>{const Ye=this.options;return Ye?Ye.changes.pipe(wi(Ye),Sr(()=>(0,yl.T)(...Ye.map(Ze=>Ze.onSelectionChange)))):this._ngZone.onStable.pipe((0,ei.q)(1),Sr(()=>this.optionSelectionChanges))}),this.openedChange=new c.vpe,this._openedStream=this.openedChange.pipe(fn(Ye=>Ye),(0,ut.U)(()=>{})),this._closedStream=this.openedChange.pipe(fn(Ye=>!Ye),(0,ut.U)(()=>{})),this.selectionChange=new c.vpe,this.valueChange=new c.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==X?void 0:X.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=X.typeaheadDebounceInterval),this._scrollStrategyFactory=P,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(x)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){var t,r,i,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(vr.required))&&void 0!==s&&s}set required(t){this._required=Ri(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Ri(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Ri(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=lO(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new nY(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Qs(),Fs(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Fs(this._destroy)).subscribe(t=>{t.added.forEach(r=>r.select()),t.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(wi(null),Fs(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),r=this.ngControl;if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this.value=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var t,r;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(r=this._selectionModel)||void 0===r?void 0:r.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const r=t.keyCode,i=40===r||38===r||37===r||39===r,s=13===r||32===r,u=this._keyManager;if(!u.isTyping()&&s&&!Nv(t)||(this.multiple||t.altKey)&&i)t.preventDefault(),this.open();else if(!this.multiple){const h=this.selected;u.onKeydown(t);const p=this.selected;p&&h!==p&&this._liveAnnouncer.announce(p.viewValue,1e4)}}_handleOpenKeydown(t){const r=this._keyManager,i=t.keyCode,s=40===i||38===i,u=r.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(u||13!==i&&32!==i||!r.activeItem||Nv(t))if(!u&&this._multiple&&65===i&&t.ctrlKey){t.preventDefault();const h=this.options.some(p=>!p.disabled&&!p.selected);this.options.forEach(p=>{p.disabled||(h?p.select():p.deselect())})}else{const h=r.activeItemIndex;r.onKeydown(t),this._multiple&&s&&t.shiftKey&&r.activeItem&&r.activeItemIndex!==h&&r.activeItem._selectViaInteraction()}else t.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,ei.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(r=>this._selectValue(r)),this._sortValues();else{const r=this._selectValue(t);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(t){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,t)}catch(s){return!1}});return r&&this._selectionModel.select(r),r}_initKeyManager(){this._keyManager=new E5(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Fs(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Fs(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,yl.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Fs(t)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,yl.T)(...this.options.map(r=>r._stateChanges)).pipe(Fs(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,r){const i=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(i!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),r&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),r&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),i!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,t):t.indexOf(r)-t.indexOf(i)),this.stateChanges.next()}}_propagateChanges(t){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const r=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(r?r+" ":"")+this.ariaLabelledby:r}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const r=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let i=(r?r+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xO),c.Y36(c.sBO),c.Y36(c.R0b),c.Y36(yO),c.Y36(c.SBq),c.Y36(kE,8),c.Y36(ME,8),c.Y36(op,8),c.Y36(CO,8),c.Y36(Hu,10),c.$8M("tabindex"),c.Y36(QB),c.Y36(N5),c.Y36(gY,8))},n.\u0275dir=c.lG2({type:n,viewQuery:function(t,r){if(1&t&&(c.Gf(rY,5),c.Gf(iY,5),c.Gf(zB,5)),2&t){let i;c.iGM(i=c.CRH())&&(r.trigger=i.first),c.iGM(i=c.CRH())&&(r.panel=i.first),c.iGM(i=c.CRH())&&(r._overlayDir=i.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[c.qOj,c.TTD]}),n})(),XB=(()=>{class n extends bY{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,r,i){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-r+s/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Fs(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,ei.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const r=oB(t,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===r?0:function n8(n,e,t,r){return n<t?n:n+e>t+r?Math.max(0,n-r+e):t}((t+r)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new _Y(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),i=this._isRtl(),s=this.multiple?56:32;let u;if(this.multiple)u=40;else if(this.disableOptionCentering)u=16;else{let y=this._selectionModel.selected[0]||this.options.first;u=y&&y.group?32:16}i||(u*=-1);const h=0-(t.left+u-(i?s:0)),p=t.right+u-r.width+(i?0:s);h>0?u+=h+8:p>0&&(u-=p+8),this._overlayDir.offsetX=Math.round(u),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,r,i){const s=this._getItemHeight(),u=(s-this._triggerRect.height)/2,h=Math.floor(256/s);let p;return this.disableOptionCentering?0:(p=0===this._scrollTop?t*s:this._scrollTop===i?(t-(this._getItemCount()-h))*s+(s-(this._getItemCount()*s-256)%s):r-s/2,Math.round(-1*p-u))}_checkOverlayWithinViewport(t){const r=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,u=i.height-this._triggerRect.bottom-8,h=Math.abs(this._offsetY),y=Math.min(this._getItemCount()*r,256)-h-this._triggerRect.height;y>u?this._adjustPanelUp(y,u):h>s?this._adjustPanelDown(h,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,r){const i=Math.round(t-r);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,r,i){const s=Math.round(t-r);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),r=this._getItemCount(),i=Math.min(r*t,256),u=r*t-i;let h;h=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),h+=oB(h,this.options,this.optionGroups);const p=i/2;this._scrollTop=this._calculateOverlayScroll(h,p,u),this._offsetY=this._calculateOverlayOffsetY(h,p,u),this._checkOverlayWithinViewport(u)}_getOriginBasedOnOption(){const t=this._getItemHeight(),r=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,vY,5),c.Suo(i,wO,5),c.Suo(i,sB,5)),2&t){let s;c.iGM(s=c.CRH())&&(r.customTrigger=s.first),c.iGM(s=c.CRH())&&(r.options=s),c.iGM(s=c.CRH())&&(r.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,r){1&t&&c.NdJ("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&t&&(c.uIk("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-describedby",r._ariaDescribedby||null)("aria-activedescendant",r._getAriaActiveDescendant()),c.ekj("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[c._Bn([{provide:XS,useExisting:n},{provide:iB,useExisting:n}]),c.qOj],ngContentSelectors:dY,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,r){if(1&t&&(c.F$t(uY),c.TgZ(0,"div",0,1),c.NdJ("click",function(){return r.toggle()}),c.TgZ(3,"div",2),c.YNc(4,sY,2,1,"span",3),c.YNc(5,lY,3,2,"span",4),c.qZA(),c.TgZ(6,"div",5),c._UZ(7,"div",6),c.qZA(),c.qZA(),c.YNc(8,cY,4,14,"ng-template",7),c.NdJ("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&t){const i=c.MAs(1);c.uIk("aria-owns",r.panelOpen?r.id+"-panel":null),c.xp6(3),c.Q6J("ngSwitch",r.empty),c.uIk("id",r._valueId),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngSwitchCase",!1),c.xp6(3),c.Q6J("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},directives:[GB,ai,$r,$u,zB,js],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[ZB.transformPanelWrap,ZB.transformPanel]},changeDetection:0}),n})(),wY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[mY],imports:[[Li,WB,aB,ys],aA,eA,aB,ys]}),n})();function EY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," FirstName is required "),c.qZA())}function CY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," LastName is required "),c.qZA())}function TY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Phone is required "),c.qZA())}function IY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," invalid Phome Number "),c.qZA())}function DY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," BirthDate is required "),c.qZA())}function SY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1,"You must make a selection"),c.qZA())}function AY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1,"You must make a selection"),c.qZA())}let MY=(()=>{class n{constructor(t,r,i,s){this.fs=t,this.auth=r,this.storage=i,this.toast=s,this.userId=localStorage.getItem("uid"),this.updateForm=new cm({firstName:new jr("",[vr.required]),lastName:new jr("",[vr.required]),birthDate:new jr("",[vr.required]),mobile:new jr("",[vr.required,vr.pattern("^01(1|0|2|5)[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$")]),doctor:new jr("",[vr.required]),male:new jr("",[vr.required])}),this.imageUpload=new cm({caption:new jr(""),category:new jr(""),imageUrl:new jr("")}),this.imgSrc="assets/images/image-placeholder.png",this.selectedImage=null}ngOnInit(){this.getUser()}getUser(){var t;this.fs.collection("Users").ref.doc(null===(t=localStorage.getItem("uid"))||void 0===t?void 0:t.toString()).get().then(r=>{this.dataProfile=r.data(),this.updateForm.controls.firstName.setValue(this.dataProfile.firstName),this.updateForm.controls.lastName.setValue(this.dataProfile.lastName),this.updateForm.controls.mobile.setValue(this.dataProfile.mobile),this.updateForm.controls.birthDate.setValue(this.dataProfile.birthDate),this.updateForm.controls.doctor.setValue(this.dataProfile.doctor),this.updateForm.controls.male.setValue(this.dataProfile.male)})}submit(){this.fs.collection("Users").doc(this.dataProfile.userId).update({firstName:this.updateForm.controls.firstName.value,lastName:this.updateForm.controls.lastName.value,mobile:this.updateForm.controls.mobile.value,birthDate:this.updateForm.controls.birthDate.value,doctor:this.updateForm.controls.doctor.value,male:this.updateForm.controls.male.value}).then(()=>{this.getUser()})}uploadFile(t){if(t.target.files&&t.target.files[0]){const r=new FileReader;r.onload=i=>this.imgSrc=i.target.result,r.readAsDataURL(t.target.files[0]),this.selectedImage=t.target.files[0]}else this.imgSrc="assets/images/image-placeholder.png",this.selectedImage=null}addImg(){var t;if(this.imageUpload.valid){var r=`${null===(t=this.dataProfile)||void 0===t?void 0:t.email}`;const i=this.storage.ref(r);this.storage.upload(r,this.selectedImage).snapshotChanges().pipe(this.toast.observe({success:"Uploaded in successfully",loading:"Uploading in...",error:s=>`There was an error: ${s} `}),yk(()=>{i.getDownloadURL().subscribe(s=>{this.fs.collection("Users").doc(this.dataProfile.userId).update({imageProfile:s}).then(()=>{this.auth.user.next(s),this.getUser()})})})).subscribe()}}get confirmPassword(){return this.updateForm.get("confirmPassword")}get firstName(){return this.updateForm.get("firstName")}get lastName(){return this.updateForm.get("lastName")}get birthDate(){return this.updateForm.get("birthDate")}get mobile(){return this.updateForm.get("mobile")}get doctor(){return this.updateForm.get("doctor")}get male(){return this.updateForm.get("male")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(iD),c.Y36(BS),c.Y36(hN),c.Y36(aO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-profile"]],decls:106,vars:20,consts:[[1,"text-right",2,"overflow","hidden"],["mat-button","","onclick","window.print()",2,"float","right","background-color","#3F51B5","outline","none","border","none","margin","20px 0px","color","white","cursor","pointer","padding","5px 20px","font-size","21px"],[1,"row"],[1,"col-md-6","bg-light"],[1,"card"],[1,"border"],[2,"position","relative"],[1,"avatar"],[1,"mat-elevation-z1",3,"src","alt"],["mat-mini-fab","","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"bImg"],[1,"stats"],["mat-button","","color","warn","data-bs-toggle","modal","data-bs-target","#exampleModal1",2,"background-color","#FF4081","color","white"],[1,"col-md-5","bg-light"],[1,"shadow","p-2",2,"margin","50px auto 0"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup","ngSubmit"],["type","file","formControlName","imageUrl",1,"form-control",3,"change"],[1,"center","margin-top"],["type","submit","mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"disabled"],[1,"modal-footer"],["type","button","mat-raised-button","","color","warn","data-bs-dismiss","modal"],["id","exampleModal1","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[2,"margin","auto","width","50%","display","flex","justify-content","space-around"],[2,"padding","5px"],["matInput","","placeholder","FirstName","formControlName","firstName"],[4,"ngIf"],["matInput","","placeholder","LastName","formControlName","lastName"],["matInput","","type","text","placeholder","Phone","formControlName","mobile"],["matInput","","type","date","placeholder","BirthDate","formControlName","birthDate"],["formControlName","male",2,"z-index","999"],["value","true",2,"position","relative","z-index","9999999"],["value","false",2,"z-index","9999999"],["formControlName","doctor"],["value","true"],["value","false"],["mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"disabled"]],template:function(t,r){if(1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"button",1),c._uU(2,"Print"),c.qZA(),c.qZA(),c.TgZ(3,"div"),c.TgZ(4,"div",2),c.TgZ(5,"div",3),c.TgZ(6,"div",4),c._UZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"div",7),c._UZ(10,"img",8),c.qZA(),c.TgZ(11,"button",9),c.TgZ(12,"mat-icon"),c._uU(13,"edit"),c.qZA(),c.qZA(),c.qZA(),c._UZ(14,"hr"),c.TgZ(15,"div",10),c.TgZ(16,"h2"),c._uU(17),c.qZA(),c._UZ(18,"hr"),c.TgZ(19,"div"),c.TgZ(20,"blockquote"),c._uU(21),c.qZA(),c.TgZ(22,"p"),c._uU(23),c.qZA(),c.TgZ(24,"p"),c._uU(25),c.qZA(),c.TgZ(26,"p"),c._uU(27),c.qZA(),c.TgZ(28,"p"),c._uU(29),c.qZA(),c.TgZ(30,"button",11),c._uU(31,"Edit Profile"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(32,"div",12),c.TgZ(33,"div",13),c.TgZ(34,"p"),c._uU(35,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel molestiae consequatur voluptatibus alias ut fugit accusamus ipsum? Dolore iusto quam, veniam debitis voluptatibus a, odio non ratione vero asperiores officiis! Ipsa, necessitatibus dolorum est esse, repellat tempora corporis dolor, quae exercitationem tenetur quidem facilis non. Maxime, adipisci tempora nesciunt velit excepturi necessitatibus libero id numquam magnam ad esse. Animi id odit distinctio earum cumque amet, explicabo laborum magni adipisci temporibus delectus minus dignissimos recusandae! Labore corrupti, necessitatibus iste soluta aliquid non provident minus tempora quod voluptates molestias ab porro quaerat animi blanditiis doloremque maiores repellendus quasi, atque earum. Voluptates numquam qui facere ducimus dolore ab! Repellat vel similique in, earum inventore, quidem pariatur distinctio assumenda consequuntur illum atque aliquid sunt eligendi cumque sequi autem error obcaecati repudiandae necessitatibus ut. Adipisci quidem laborum minus ipsa ex a voluptates ipsum sit libero reprehenderit eaque, minima quod perspiciatis, nulla quam maxime porro impedit enim? Pariatur quia voluptatum quod dicta eveniet quas soluta nam itaque omnis! Laborum, quis reiciendis explicabo officia similique, facilis omnis quam eligendi alias ipsa numquam sequi optio nesciunt error quo consequatur rem necessitatibus ipsam aliquid cupiditate consequuntur cumque? Laborum libero ipsum quo? Alias ea laborum non exercitationem sed aliquam quam voluptatum voluptas corporis, unde hic vitae placeat facilis, fuga error illo est velit adipisci quos commodi maiores assumenda. Quisquam velit magni, odit accusantium ipsam ullam veritatis sint dignissimos quia! Aspernatur veniam eum unde dolore voluptatem nisi corporis optio vero facilis, ea quaerat dolor molestias praesentium. Nulla eaque asperiores magni, reiciendis veniam, totam iure in possimus excepturi modi ex tempore suscipit perspiciatis! Doloremque possimus ut reprehenderit, at id nam dolor, modi aspernatur eaque excepturi nesciunt! Tempore illum praesentium ut suscipit, facere consequuntur molestiae atque eos, officia iure perferendis ducimus aspernatur. Asperiores molestias officia est perferendis minima ut esse quis libero in?"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(36,"div",14),c.TgZ(37,"div",15),c.TgZ(38,"div",16),c.TgZ(39,"div",17),c.TgZ(40,"h5",18),c._uU(41,"Edit Image Profile"),c.qZA(),c._UZ(42,"button",19),c.qZA(),c.TgZ(43,"div",20),c.TgZ(44,"form",21),c.NdJ("ngSubmit",function(){return r.addImg()}),c.TgZ(45,"input",22),c.NdJ("change",function(s){return r.uploadFile(s)}),c.qZA(),c.TgZ(46,"div",23),c.TgZ(47,"button",24),c._uU(48,"Edit"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(49,"div",25),c.TgZ(50,"button",26),c._uU(51,"Close"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(52,"div",27),c.TgZ(53,"div",15),c.TgZ(54,"div",16),c.TgZ(55,"div",17),c.TgZ(56,"h5",18),c._uU(57,"Edit User Info"),c.qZA(),c._UZ(58,"button",19),c.qZA(),c.TgZ(59,"div",20),c.TgZ(60,"form",21),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(61,"div",28),c.TgZ(62,"mat-form-field",29),c._UZ(63,"input",30),c.YNc(64,EY,2,0,"mat-error",31),c.qZA(),c.TgZ(65,"mat-form-field",29),c._UZ(66,"input",32),c.YNc(67,CY,2,0,"mat-error",31),c.qZA(),c.qZA(),c.TgZ(68,"div",28),c.TgZ(69,"mat-form-field",29),c._UZ(70,"input",33),c.YNc(71,TY,2,0,"mat-error",31),c.YNc(72,IY,2,0,"mat-error",31),c.qZA(),c.TgZ(73,"mat-form-field",29),c._UZ(74,"input",34),c.YNc(75,DY,2,0,"mat-error",31),c.qZA(),c.qZA(),c.TgZ(76,"div",28),c.TgZ(77,"mat-form-field",29),c.TgZ(78,"mat-label"),c._uU(79,"Gender"),c.qZA(),c.TgZ(80,"mat-select",35),c.TgZ(81,"mat-option",36),c._uU(82,"Male"),c.qZA(),c.TgZ(83,"mat-option",37),c._uU(84,"Female"),c.qZA(),c.qZA(),c.TgZ(85,"mat-hint"),c._uU(86,"Errors appear instantly!"),c.qZA(),c.YNc(87,SY,2,0,"mat-error",31),c.qZA(),c.TgZ(88,"mat-form-field",29),c.TgZ(89,"mat-label"),c._uU(90,"Doctor"),c.qZA(),c.TgZ(91,"mat-select",38),c.TgZ(92,"mat-option",39),c._uU(93,"Doctor"),c.qZA(),c.TgZ(94,"mat-option",40),c._uU(95,"Other"),c.qZA(),c.qZA(),c.TgZ(96,"mat-hint"),c._uU(97,"Errors appear instantly!"),c.qZA(),c.YNc(98,AY,2,0,"mat-error",31),c.qZA(),c.qZA(),c._UZ(99,"div",28),c._UZ(100,"br"),c.TgZ(101,"button",41),c._uU(102,"Update"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(103,"div",25),c.TgZ(104,"button",26),c._uU(105,"Close"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){let i;c.xp6(10),c.Q6J("src",null!==(i=null==r.dataProfile?null:r.dataProfile.imageProfile)&&void 0!==i?i:"assets/images/image-placeholder.png",c.LSH)("alt",(null==r.dataProfile?null:r.dataProfile.firstName)+(null==r.dataProfile?null:r.dataProfile.lastName)),c.xp6(7),c.AsE("",null==r.dataProfile?null:r.dataProfile.firstName," ",null==r.dataProfile?null:r.dataProfile.lastName,""),c.xp6(4),c.hij("\u201c",null==r.dataProfile?null:r.dataProfile.email,"\u201d"),c.xp6(2),c.hij("BirthDate: ",null==r.dataProfile?null:r.dataProfile.birthDate,""),c.xp6(2),c.hij("Phone: ",null==r.dataProfile?null:r.dataProfile.mobile,""),c.xp6(2),c.hij("Male: ",null==r.dataProfile?null:r.dataProfile.male,""),c.xp6(2),c.hij("Doctor: ",null==r.dataProfile?null:r.dataProfile.doctor,""),c.xp6(15),c.Q6J("formGroup",r.imageUpload),c.xp6(3),c.Q6J("disabled",r.imageUpload.invalid),c.xp6(13),c.Q6J("formGroup",r.updateForm),c.xp6(4),c.Q6J("ngIf",null==r.firstName||null==r.firstName.errors?null:r.firstName.errors.required),c.xp6(3),c.Q6J("ngIf",null==r.lastName||null==r.lastName.errors?null:r.lastName.errors.required),c.xp6(4),c.Q6J("ngIf",null==r.mobile||null==r.mobile.errors?null:r.mobile.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.mobile||null==r.mobile.errors?null:r.mobile.errors.pattern),c.xp6(3),c.Q6J("ngIf",null==r.birthDate||null==r.birthDate.errors?null:r.birthDate.errors.required),c.xp6(12),c.Q6J("ngIf",null==r.male||null==r.male.errors?null:r.male.errors.required),c.xp6(11),c.Q6J("ngIf",null==r.doctor||null==r.doctor.errors?null:r.doctor.errors.required),c.xp6(3),c.Q6J("disabled",r.updateForm.invalid)}},directives:[tA,AB,US,RS,op,kv,xS,xE,TO,IO,Un,EO,JS,XB,wO,dB],styles:['@import"https://fonts.googleapis.com/css?family=Vidaloka|Oswald:400,300";.container[_ngcontent-%COMP%]{height:100vh;width:100%;overflow:auto;background:#fff3e0}.card[_ngcontent-%COMP%]{position:relative;height:520px;width:300px;background:#fff;margin:50px auto 0;overflow:hidden;box-shadow:0 5px 20px #0000004d}.card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0 30px}.border[_ngcontent-%COMP%]{position:absolute;top:13px;left:13px;height:490px;width:270px;border:3px double #aaa}.avatar[_ngcontent-%COMP%]{height:180px;width:180px;border-radius:50%;border:1px solid #aaa;overflow:hidden;margin:50px auto 30px}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;margin-left:-10px}.bImg[_ngcontent-%COMP%]{position:absolute;top:150px;right:50px}.stats[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;padding:0;height:250px;width:300px}.stats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:10px 0 0 25px}.stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px}.stats[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-family:Vidaloka,cursive;font-size:2em;margin:5px 0 10px}']}),n})();function xY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," FirstName is required "),c.qZA())}function RY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," LastName is required "),c.qZA())}function kY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Email address is required "),c.qZA())}function OY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Please enter a valid email address "),c.qZA())}function PY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," BirthDate is required "),c.qZA())}function NY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1,"You must make a selection"),c.qZA())}function FY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1,"You must make a selection"),c.qZA())}function LY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Phone is required "),c.qZA())}function VY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," invalid Phome Number "),c.qZA())}function UY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Password is required "),c.qZA())}function BY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," At least 6 characters in length Lowercase letters Uppercase letters Numbers Special characters "),c.qZA())}function jY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Confirm Password is required "),c.qZA())}function HY(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Passwords should match "),c.qZA())}let $Y=(()=>{class n{constructor(t,r,i,s,u){this.authService=t,this.router=r,this.toast=i,this._router=s,this.fs=u,this.signUpForm=new cm({email:new jr("",[vr.required,vr.email]),password:new jr("",[vr.required,vr.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{5,}")]),confirmPassword:new jr("",vr.required),firstName:new jr("",[vr.required]),lastName:new jr("",[vr.required]),birthDate:new jr("",[vr.required]),mobile:new jr("",[vr.required,vr.pattern("^01(1|0|2|5)[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$")]),doctor:new jr("",[vr.required]),male:new jr("",[vr.required])},{validators:n=>{var e,t;const r=null===(e=n.get("password"))||void 0===e?void 0:e.value,i=null===(t=n.get("confirmPassword"))||void 0===t?void 0:t.value;return r&&i&&r!==i?{passwordsDontMatch:!0}:null}})}ngOnInit(){}get email(){return this.signUpForm.get("email")}get password(){return this.signUpForm.get("password")}get confirmPassword(){return this.signUpForm.get("confirmPassword")}get firstName(){return this.signUpForm.get("firstName")}get lastName(){return this.signUpForm.get("lastName")}get birthDate(){return this.signUpForm.get("birthDate")}get mobile(){return this.signUpForm.get("mobile")}get doctor(){return this.signUpForm.get("doctor")}get male(){return this.signUpForm.get("male")}submit(){if(!this.signUpForm.valid)return;const{email:t,password:r}=this.signUpForm.value;this.authService.registerWithEmail(t,r).pipe(this.toast.observe({success:"Signed in successfully",loading:"Signing in...",error:C=>`There was an error: ${C} `})).subscribe(C=>{var I,x,P,U,X,le,je,Ke,Ye,Ze;localStorage.setItem("uid",null===(I=C.user)||void 0===I?void 0:I.uid),this.fs.collection("Users").doc(null===(x=C.user)||void 0===x?void 0:x.uid).set({firstName:null===(P=this.firstName)||void 0===P?void 0:P.value,lastName:null===(U=this.lastName)||void 0===U?void 0:U.value,mobile:null===(X=this.mobile)||void 0===X?void 0:X.value,birthDate:null===(le=this.birthDate)||void 0===le?void 0:le.value,male:null===(je=this.male)||void 0===je?void 0:je.value,doctor:null===(Ke=this.doctor)||void 0===Ke?void 0:Ke.value,email:null===(Ye=this.email)||void 0===Ye?void 0:Ye.value,userId:null===(Ze=C.user)||void 0===Ze?void 0:Ze.uid,imageProfile:""}).then(()=>{this._router.navigate(["/profile"])})})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(BS),c.Y36(xi),c.Y36(aO),c.Y36(xi),c.Y36(iD))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-signup"]],decls:55,vars:15,consts:[[1,"form-container","mat-elevation-z5"],[3,"formGroup","ngSubmit"],[2,"margin","auto","width","50%","display","flex","justify-content","space-around"],[2,"padding","2px"],["matInput","","placeholder","FirstName","formControlName","firstName"],[4,"ngIf"],["matInput","","placeholder","LastName","formControlName","lastName"],["matInput","","placeholder","Email address","formControlName","email"],["matInput","","type","date","placeholder","BirthDate","formControlName","birthDate"],["appearance","fill"],["formControlName","male"],["value","true"],["value","false"],["formControlName","doctor"],["matInput","","type","text","placeholder","Phone","formControlName","mobile"],["matInput","","type","password","placeholder","Password","formControlName","password"],["matInput","","type","password","placeholder","Confirm Password","formControlName","confirmPassword"],[1,"center","margin-top"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h1"),c._uU(2,"Sign Up a New User!"),c.qZA(),c.TgZ(3,"form",1),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(4,"div",2),c.TgZ(5,"mat-form-field",3),c._UZ(6,"input",4),c.YNc(7,xY,2,0,"mat-error",5),c.qZA(),c.TgZ(8,"mat-form-field",3),c._UZ(9,"input",6),c.YNc(10,RY,2,0,"mat-error",5),c.qZA(),c.qZA(),c.TgZ(11,"mat-form-field"),c._UZ(12,"input",7),c.YNc(13,kY,2,0,"mat-error",5),c.YNc(14,OY,2,0,"mat-error",5),c.qZA(),c.TgZ(15,"mat-form-field"),c._UZ(16,"input",8),c.YNc(17,PY,2,0,"mat-error",5),c.qZA(),c.TgZ(18,"mat-form-field",9),c.TgZ(19,"mat-label"),c._uU(20,"Gender"),c.qZA(),c.TgZ(21,"mat-select",10),c.TgZ(22,"mat-option",11),c._uU(23,"Male"),c.qZA(),c.TgZ(24,"mat-option",12),c._uU(25,"Female"),c.qZA(),c.qZA(),c.TgZ(26,"mat-hint"),c._uU(27,"Errors appear instantly!"),c.qZA(),c.YNc(28,NY,2,0,"mat-error",5),c.qZA(),c.TgZ(29,"mat-form-field",9),c.TgZ(30,"mat-label"),c._uU(31,"Doctor"),c.qZA(),c.TgZ(32,"mat-select",13),c.TgZ(33,"mat-option",11),c._uU(34,"Doctor"),c.qZA(),c.TgZ(35,"mat-option",12),c._uU(36,"Other"),c.qZA(),c.qZA(),c.TgZ(37,"mat-hint"),c._uU(38,"Errors appear instantly!"),c.qZA(),c.YNc(39,FY,2,0,"mat-error",5),c.qZA(),c.TgZ(40,"mat-form-field"),c._UZ(41,"input",14),c.YNc(42,LY,2,0,"mat-error",5),c.YNc(43,VY,2,0,"mat-error",5),c.qZA(),c.TgZ(44,"mat-form-field"),c._UZ(45,"input",15),c.YNc(46,UY,2,0,"mat-error",5),c.YNc(47,BY,2,0,"mat-error",5),c.qZA(),c.TgZ(48,"mat-form-field"),c._UZ(49,"input",16),c.YNc(50,jY,2,0,"mat-error",5),c.qZA(),c.YNc(51,HY,2,0,"mat-error",5),c.TgZ(52,"div",17),c.TgZ(53,"button",18),c._uU(54,"Sign Up!"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("formGroup",r.signUpForm),c.xp6(4),c.Q6J("ngIf",null==r.firstName||null==r.firstName.errors?null:r.firstName.errors.required),c.xp6(3),c.Q6J("ngIf",null==r.lastName||null==r.lastName.errors?null:r.lastName.errors.required),c.xp6(3),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email),c.xp6(3),c.Q6J("ngIf",null==r.birthDate||null==r.birthDate.errors?null:r.birthDate.errors.required),c.xp6(11),c.Q6J("ngIf",null==r.male||null==r.male.errors?null:r.male.errors.required),c.xp6(11),c.Q6J("ngIf",null==r.doctor||null==r.doctor.errors?null:r.doctor.errors.required),c.xp6(3),c.Q6J("ngIf",null==r.mobile||null==r.mobile.errors?null:r.mobile.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.mobile||null==r.mobile.errors?null:r.mobile.errors.pattern),c.xp6(3),c.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.pattern),c.xp6(3),c.Q6J("ngIf",null==r.confirmPassword||null==r.confirmPassword.errors?null:r.confirmPassword.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.signUpForm.errors?null:r.signUpForm.errors.passwordsDontMatch),c.xp6(2),c.Q6J("disabled",r.signUpForm.invalid))},directives:[US,RS,op,TO,IO,kv,xS,xE,Un,EO,JS,XB,wO,dB,tA],styles:[""]}),n})(),GY=(()=>{class n{constructor(t,r){this._angularFireAuth=t,this._router=r}canActivate(t,r){return new Promise(i=>{this._angularFireAuth.user.subscribe(s=>{s?i(!0):(this._router.navigate(["/login"]),i(!1))})})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($e),c.LFG(xi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JB=(()=>{class n{constructor(t,r){this._angularFireAuth=t,this._router=r}canActivate(t,r){return new Promise(i=>{this._angularFireAuth.user.subscribe(s=>{s?(this._router.navigate(["/profile"]),i(!1)):i(!0)})})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($e),c.LFG(xi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zY=[{path:"",pathMatch:"full",redirectTo:"profile"},{path:"login",canActivate:[JB],component:Y8},{path:"signup",canActivate:[JB],component:$Y},{path:"profile",canActivate:[GY],component:MY}];let WY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[SV.forRoot(zY)],SV]}),n})();const ZY=["*",[["mat-toolbar-row"]]],KY=["*","mat-toolbar-row"],YY=KS(class{constructor(n){this._elementRef=n}});let QY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),XY=(()=>{class n extends YY{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Pa),c.Y36(se))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,QY,5),2&t){let s;c.iGM(s=c.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&c.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[c.qOj],ngContentSelectors:KY,decls:2,vars:0,template:function(t,r){1&t&&(c.F$t(ZY),c.Hsn(0),c.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),JY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ys],ys]}),n})();function e2(n,e){return e?t=>Rn(e.pipe((0,ei.q)(1),function e7(){return(0,Cn.e)((n,e)=>{n.subscribe(new hn.Q(e,Ax.Z))})}()),t.pipe(e2(n))):(0,Yi.z)((t,r)=>n(t,r).pipe((0,ei.q)(1),function t7(n){return(0,ut.U)(()=>n)}(t)))}function t2(n,e=rl.z){const t=kB(n,e);return e2(()=>t)}const n7=["mat-menu-item",""];function r7(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",2),c._UZ(1,"polygon",3),c.qZA())}const n2=["*"];function i7(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",0),c.NdJ("keydown",function(i){return c.CHM(t),c.oxw()._handleKeydown(i)})("click",function(){return c.CHM(t),c.oxw().closed.emit("click")})("@transformMenu.start",function(i){return c.CHM(t),c.oxw()._onAnimationStart(i)})("@transformMenu.done",function(i){return c.CHM(t),c.oxw()._onAnimationDone(i)}),c.TgZ(1,"div",1),c.Hsn(2),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),c.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const cA={transformMenu:uE("transformMenu",[Ev("void",xa({opacity:0,transform:"scale(0.8)"})),Xg("void => enter",wv("120ms cubic-bezier(0, 0, 0.2, 1)",xa({opacity:1,transform:"scale(1)"}))),Xg("* => void",wv("100ms 25ms linear",xa({opacity:0})))]),fadeInItems:uE("fadeInItems",[Ev("showing",xa({opacity:1})),Xg("void => *",[xa({opacity:0}),wv("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},s7=new c.OlP("MatMenuContent"),NO=new c.OlP("MAT_MENU_PANEL"),o7=_O(mO(class{}));let uA=(()=>{class n extends o7{constructor(t,r,i,s,u){var h;super(),this._elementRef=t,this._document=r,this._focusMonitor=i,this._parentMenu=s,this._changeDetectorRef=u,this.role="menuitem",this._hovered=new nn.x,this._focused=new nn.x,this._highlighted=!1,this._triggersSubmenu=!1,null===(h=null==s?void 0:s.addItem)||void 0===h||h.call(s,this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const r=this._elementRef.nativeElement.cloneNode(!0),i=r.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<i.length;s++)i[s].remove();return(null===(t=r.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var r;this._highlighted=t,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(se),c.Y36(pO),c.Y36(NO,8),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._checkDisabled(s)})("mouseenter",function(){return r._handleMouseEnter()}),2&t&&(c.uIk("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),c.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[c.qOj],attrs:n7,ngContentSelectors:n2,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,r){1&t&&(c.F$t(),c.Hsn(0),c._UZ(1,"div",0),c.YNc(2,r7,2,0,"svg",1)),2&t&&(c.xp6(1),c.Q6J("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),c.xp6(1),c.Q6J("ngIf",r._triggersSubmenu))},directives:[YS,Un],encapsulation:2,changeDetection:0}),n})();const r2=new c.OlP("mat-menu-default-options",{providedIn:"root",factory:function a7(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let l7=0,jE=(()=>{class n{constructor(t,r,i,s){this._elementRef=t,this._ngZone=r,this._defaultOptions=i,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new c.n_E,this._tabSubscription=yo.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new nn.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new c.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+l7++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Ri(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Ri(t)}set panelClass(t){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(i=>{this._classList[i]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(i=>{this._classList[i]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new C5(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(wi(this._directDescendantItems),Sr(t=>(0,yl.T)(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var r;const i=this._keyManager;if("enter"===this._panelAnimationState&&(null===(r=i.activeItem)||void 0===r?void 0:r._hasFocus())){const s=t.toArray(),u=Math.max(0,Math.min(s.length-1,i.activeItemIndex||0));s[u]&&!s[u].disabled?i.setActiveItem(u):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(wi(this._directDescendantItems),Sr(r=>(0,yl.T)(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:Nv(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this.lazyContent?this._ngZone.onStable.pipe((0,ei.q)(1)).subscribe(()=>this._focusFirstItem(t)):this._focusFirstItem(t)}_focusFirstItem(t){const r=this._keyManager;if(r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&this._directDescendantItems.length){let i=this._directDescendantItems.first._getHostElement().parentElement;for(;i;){if("menu"===i.getAttribute("role")){i.focus();break}i=i.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const r=Math.min(this._baseElevation+t,24),i=`${this._elevationPrefix}${r}`,s=Object.keys(this._classList).find(u=>u.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[i]=!0,this._previousElevation=i)}setPositionClasses(t=this.xPosition,r=this.yPosition){var i;const s=this._classList;s["mat-menu-before"]="before"===t,s["mat-menu-after"]="after"===t,s["mat-menu-above"]="above"===r,s["mat-menu-below"]="below"===r,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(wi(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(r2),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,s7,5),c.Suo(i,uA,5),c.Suo(i,uA,4)),2&t){let s;c.iGM(s=c.CRH())&&(r.lazyContent=s.first),c.iGM(s=c.CRH())&&(r._allItems=s),c.iGM(s=c.CRH())&&(r.items=s)}},viewQuery:function(t,r){if(1&t&&c.Gf(c.Rgc,5),2&t){let i;c.iGM(i=c.CRH())&&(r.templateRef=i.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),c7=(()=>{class n extends jE{constructor(t,r,i,s){super(t,r,i,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(r2),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,r){2&t&&c.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[c._Bn([{provide:NO,useExisting:n}]),c.qOj],ngContentSelectors:n2,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,r){1&t&&(c.F$t(),c.YNc(0,i7,3,6,"ng-template"))},directives:[js],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[cA.transformMenu,cA.fadeInItems]},changeDetection:0}),n})();const s2=new c.OlP("mat-menu-scroll-strategy"),d7={provide:s2,deps:[Lv],useFactory:function u7(n){return()=>n.scrollStrategies.reposition()}},a2=NE({passive:!0});let h7=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C){this._overlay=t,this._element=r,this._viewContainerRef=i,this._menuItemInstance=h,this._dir=p,this._focusMonitor=y,this._ngZone=C,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=yo.w0.EMPTY,this._hoverSubscription=yo.w0.EMPTY,this._menuCloseSubscription=yo.w0.EMPTY,this._handleTouchStart=I=>{fO(I)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new c.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new c.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=u instanceof jE?u:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,a2),h&&(h._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,a2),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),r=t.getConfig(),i=r.positionStrategy;this._setPosition(i),r.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof jE&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Fs(this.menu.close)).subscribe(()=>{i.withLockedPosition(!1).reapplyLastPosition(),i.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof jE?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(fn(i=>"void"===i.toState),(0,ei.q)(1),Fs(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r.lazyContent&&r.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,r=this.menu.parentMenu;for(;r;)t++,r=r.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new PO({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(r=>{const i="start"===r.connectionPair.overlayX?"after":"before",s="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(i,s)):this.menu.setPositionClasses(i,s)})}_setPosition(t){let[r,i]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,u]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[h,p]=[s,u],[y,C]=[r,i],I=0;this.triggersSubmenu()?(C=r="before"===this.menu.xPosition?"start":"end",i=y="end"===r?"start":"end",I="bottom"===s?8:-8):this.menu.overlapTrigger||(h="top"===s?"bottom":"top",p="top"===u?"bottom":"top"),t.withPositions([{originX:r,originY:h,overlayX:y,overlayY:s,offsetY:I},{originX:i,originY:h,overlayX:C,overlayY:s,offsetY:I},{originX:r,originY:p,overlayX:y,overlayY:u,offsetY:-I},{originX:i,originY:p,overlayX:C,overlayY:u,offsetY:-I}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments(),i=this._parentMaterialMenu?this._parentMaterialMenu.closed:lt(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(fn(u=>u!==this._menuItemInstance),fn(()=>this._menuOpen)):lt();return(0,yl.T)(t,i,s,r)}_handleMousedown(t){hO(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(fn(t=>t===this._menuItemInstance&&!t.disabled),t2(0,MO)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof jE&&this.menu._isAnimating?this.menu._animationDone.pipe((0,ei.q)(1),t2(0,MO),Fs(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new kO(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Lv),c.Y36(c.SBq),c.Y36(c.s_b),c.Y36(s2),c.Y36(NO,8),c.Y36(uA,10),c.Y36(kE,8),c.Y36(pO),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._handleClick(s)})("mousedown",function(s){return r._handleMousedown(s)})("keydown",function(s){return r._handleKeydown(s)}),2&t&&c.uIk("aria-expanded",r.menuOpen||null)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),f7=(()=>{class n extends h7{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[c.qOj]}),n})(),p7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[d7],imports:[[Li,ys,bO,WB],aA,ys]}),n})();function g7(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"button",5),c._UZ(2,"img",6),c._uU(3),c.TgZ(4,"mat-icon"),c._uU(5,"expand_more"),c.qZA(),c.qZA(),c.BQk()),2&n){const t=c.oxw(),r=c.MAs(9);let i;c.xp6(1),c.Q6J("matMenuTriggerFor",r),c.xp6(1),c.Q6J("src",null!==(i=null==t.dataProfile?null:t.dataProfile.imageProfile)&&void 0!==i?i:"assets/images/image-placeholder.png",c.LSH),c.xp6(1),c.hij(" ",null==t.dataProfile?null:t.dataProfile.email," ")}}function m7(n,e){1&n&&(c.ynx(0),c.TgZ(1,"button",7),c.TgZ(2,"mat-icon"),c._uU(3,"login"),c.qZA(),c._uU(4," Login "),c.qZA(),c.BQk())}let _7=(()=>{class n{constructor(t,r,i,s){this._angularFireAuth=t,this.auth=r,this._router=i,this.fs=s}ngOnInit(){this.auth.user.subscribe(()=>{this.getUser()})}logOut(){this._angularFireAuth.signOut().then(()=>{localStorage.removeItem("uid"),this._router.navigate(["/login"])}).catch(()=>{console.log("Error")})}getUser(){var t;this.fs.collection("Users").ref.doc(null===(t=localStorage.getItem("uid"))||void 0===t?void 0:t.toString()).get().then(r=>{this.dataProfile=r.data()})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($e),c.Y36(BS),c.Y36(xi),c.Y36(iD))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:14,vars:6,consts:[["color","primary"],[4,"ngIf"],[1,"content"],["userMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-button","",3,"matMenuTriggerFor"],["width","30","height","30",1,"profile-image-toolbar",3,"src"],["mat-button","","routerLink","login"]],template:function(t,r){1&t&&(c.TgZ(0,"mat-toolbar",0),c._uU(1," Health Wise "),c.YNc(2,g7,6,3,"ng-container",1),c.ALo(3,"async"),c.YNc(4,m7,5,0,"ng-container",1),c.ALo(5,"async"),c.qZA(),c.TgZ(6,"div",2),c._UZ(7,"router-outlet"),c.qZA(),c.TgZ(8,"mat-menu",null,3),c.TgZ(10,"button",4),c.NdJ("click",function(){return r.logOut()}),c.TgZ(11,"mat-icon"),c._uU(12,"logout"),c.qZA(),c._uU(13," Logout "),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("ngIf",c.lcZ(3,2,r._angularFireAuth.authState)),c.xp6(2),c.Q6J("ngIf",null===c.lcZ(5,4,r._angularFireAuth.authState)))},directives:[XY,Un,tA,f7,AB,SS,Rk,c7,uA],pipes:[zu],styles:["mat-toolbar[_ngcontent-%COMP%]{justify-content:space-between}.content[_ngcontent-%COMP%]{padding:32px}.profile-image-toolbar[_ngcontent-%COMP%]{border-radius:100%;margin-right:8px}"]}),n})(),y7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[_7]}),n.\u0275inj=c.cJS({providers:[],imports:[[vh,Kz,WY,a4,JY,yK,z8,eA,B8,p7,wY,K4.forRoot(),kn.hO.initializeApp({apiKey:"AIzaSyByxzk2NBtBPWJyMzr4QWzUrRPeJVcfRyI",authDomain:"chatapp-458db.firebaseapp.com",databaseURL:"https://chatapp-458db.firebaseio.com",projectId:"chatapp-458db",storageBucket:"chatapp-458db.appspot.com",messagingSenderId:"135681967410",appId:"1:135681967410:web:50cb571c434e9e96ef032b"}),at,w2,cH,bG]]}),n})();(0,c.G48)(),Yu().bootstrapModule(y7).catch(n=>console.error(n))},5867:(ht,Se,F)=>{"use strict";F.d(Se,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=F(9681);(0,c.registerVersion)("firebase","9.6.8","app")},127:(ht,Se,F)=>{"use strict";F.d(Se,{Z:()=>c.Z});var c=F(3942);c.Z.registerVersion("firebase","9.6.8","app-compat")},3059:(ht,Se,F)=>{"use strict";F.r(Se);var c=F(5861),re=F(3942),L=F(2090),he=F(9681),ce=F(655),we=F(1877),se=F(4859);const Ne=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},He=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},te=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new we.Yd("@firebase/auth");function Ae(v,...g){Ee.logLevel<=we.in.ERROR&&Ee.error(`Auth (${he.SDK_VERSION}): ${v}`,...g)}function ge(v,...g){throw Qe(v,...g)}function Fe(v,...g){return Qe(v,...g)}function Me(v,g,_){const w=Object.assign(Object.assign({},He()),{[g]:_});return new L.LL("auth","Firebase",w).create(g,{appName:v.name})}function nt(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&ge(v,"argument-error"),Me(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(v,...g){if("string"!=typeof v){const _=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return te.create(v,...g)}function fe(v,g,..._){if(!v)throw Qe(g,..._)}function B(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Ae(g),new Error(g)}function q(v,g){v||B(g)}const W=new Map;function Z(v){q(v instanceof Function,"Expected a class definition");let g=W.get(v);return g?(q(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,W.set(v,g),g)}function ze(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function _t(){return"http:"===dn()||"https:"===dn()}function dn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ln{constructor(g,_){this.shortDelay=g,this.longDelay=_,q(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Le(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function It(v,g){q(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class An{static initialize(g,_,w){this.fetchImpl=g,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void B("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void B("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void B("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ni=new ln(3e4,6e4);function en(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Ut(v,g,_,w){return bs.apply(this,arguments)}function bs(){return(bs=(0,c.Z)(function*(v,g,_,w,A={}){return ki(v,A,(0,c.Z)(function*(){let O={},ee={};w&&("GET"===g?ee=w:O={body:JSON.stringify(w)});const ve=(0,L.xO)(Object.assign({key:v.config.apiKey},ee)).slice(1),We=yield v._getAdditionalHeaders();return We["Content-Type"]="application/json",v.languageCode&&(We["X-Firebase-Locale"]=v.languageCode),An.fetch()(Eo(v,v.config.apiHost,_,ve),Object.assign({method:g,headers:We,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ki(v,g,_){return xr.apply(this,arguments)}function xr(){return(xr=(0,c.Z)(function*(v,g,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Jt),g);try{const A=new mi(v),O=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const ee=yield O.json();if("needConfirmation"in ee)throw Es(v,"account-exists-with-different-credential",ee);if(O.ok&&!("errorMessage"in ee))return ee;{const ve=O.ok?ee.errorMessage:ee.error.message,[We,it]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===We)throw Es(v,"credential-already-in-use",ee);if("EMAIL_EXISTS"===We)throw Es(v,"email-already-in-use",ee);const Et=w[We]||We.toLowerCase().replace(/[_\s]+/g,"-");if(it)throw Me(v,Et,it);ge(v,Et)}}catch(A){if(A instanceof L.ZR)throw A;ge(v,"network-request-failed")}})).apply(this,arguments)}function ri(v,g,_,w){return ws.apply(this,arguments)}function ws(){return(ws=(0,c.Z)(function*(v,g,_,w,A={}){const O=yield Ut(v,g,_,w,A);return"mfaPendingCredential"in O&&ge(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Eo(v,g,_,w){const A=`${g}${_}?${w}`;return v.config.emulator?It(v.config,A):`${v.config.apiScheme}://${A}`}class mi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(Fe(this.auth,"network-request-failed")),ni.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Es(v,g,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const A=Fe(v,g,w);return A.customData._tokenResponse=_,A}function Oi(){return(Oi=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function qn(v,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Co(v,g){return _i.apply(this,arguments)}function _i(){return(_i=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function wr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function To(){return(To=(0,c.Z)(function*(v,g=!1){const _=(0,L.m9)(v),w=yield _.getIdToken(g),A=ft(w);fe(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,ee=null==O?void 0:O.sign_in_provider;return{claims:A,token:w,authTime:wr(Ht(A.auth_time)),issuedAtTime:wr(Ht(A.iat)),expirationTime:wr(Ht(A.exp)),signInProvider:ee||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Ht(v){return 1e3*Number(v)}function ft(v){const[g,_,w]=v.split(".");if(void 0===g||void 0===_||void 0===w)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(_);return A?JSON.parse(A):(Ae("Failed to decode base64 JWT payload"),null)}catch(A){return Ae("Caught error parsing JWT payload as JSON",A),null}}function Hr(v,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,c.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(w){throw w instanceof L.ZR&&Ft(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Ft({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Ls{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),w)}iteration(){var g=this;return(0,c.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class qr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ii(v){return H.apply(this,arguments)}function H(){return(H=(0,c.Z)(function*(v){var g;const _=v.auth,w=yield v.getIdToken(),A=yield Hr(v,Co(_,{idToken:w}));fe(null==A?void 0:A.users.length,_,"internal-error");const O=A.users[0];v._notifyReloadListener(O);const ee=(null===(g=O.providerUserInfo)||void 0===g?void 0:g.length)?oe(O.providerUserInfo):[],ve=Ie(v.providerData,ee),Et=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==ve?void 0:ve.length)),pt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ve,metadata:new qr(O.createdAt,O.lastLoginAt),isAnonymous:Et};Object.assign(v,pt)})).apply(this,arguments)}function Q(){return(Q=(0,c.Z)(function*(v){const g=(0,L.m9)(v);yield ii(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Ie(v,g){return[...v.filter(w=>!g.some(A=>A.providerId===w.providerId)),...g]}function oe(v){return v.map(g=>{var{providerId:_}=g,w=(0,ce._T)(g,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function De(){return(De=(0,c.Z)(function*(v,g){const _=yield ki(v,{},(0,c.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:O}=v.config,ee=Eo(v,A,"/v1/token",`key=${O}`),ve=yield v._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",An.fetch()(ee,{method:"POST",headers:ve,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){fe(g.idToken,"internal-error"),fe(void 0!==g.idToken,"internal-error"),fe(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function wt(v){const g=ft(v);return fe(g,"internal-error"),fe(void 0!==g.exp,"internal-error"),fe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var w=this;return(0,c.Z)(function*(){return fe(!w.accessToken||w.refreshToken,g,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var w=this;return(0,c.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:ee}=yield function Je(v,g){return De.apply(this,arguments)}(g,_);w.updateTokensAndExpiration(A,O,Number(ee))})()}updateTokensAndExpiration(g,_,w){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,_){const{refreshToken:w,accessToken:A,expirationTime:O}=_,ee=new Te;return w&&(fe("string"==typeof w,"internal-error",{appName:g}),ee.refreshToken=w),A&&(fe("string"==typeof A,"internal-error",{appName:g}),ee.accessToken=A),O&&(fe("number"==typeof O,"internal-error",{appName:g}),ee.expirationTime=O),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Te,this.toJSON())}_performRefresh(){return B("not implemented")}}function qe(v,g){fe("string"==typeof v||void 0===v,"internal-error",{appName:g})}class st{constructor(g){var{uid:_,auth:w,stsTokenManager:A}=g,O=(0,ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ls(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new qr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,c.Z)(function*(){const w=yield Hr(_,_.stsTokenManager.getToken(_.auth,g));return fe(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(g){return function Pi(v){return To.apply(this,arguments)}(this,g)}reload(){return function Y(v){return Q.apply(this,arguments)}(this)}_assign(g){this!==g&&(fe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new st(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var w=this;return(0,c.Z)(function*(){let A=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),A=!0),_&&(yield ii(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,c.Z)(function*(){const _=yield g.getIdToken();return yield Hr(g,function Ct(v,g){return Oi.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var w,A,O,ee,ve,We,it,Et;const pt=null!==(w=_.displayName)&&void 0!==w?w:void 0,ar=null!==(A=_.email)&&void 0!==A?A:void 0,qi=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,ya=null!==(ee=_.photoURL)&&void 0!==ee?ee:void 0,Qm=null!==(ve=_.tenantId)&&void 0!==ve?ve:void 0,va=null!==(We=_._redirectEventId)&&void 0!==We?We:void 0,ru=null!==(it=_.createdAt)&&void 0!==it?it:void 0,md=null!==(Et=_.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:ef,emailVerified:rc,isAnonymous:Lp,providerData:tf,stsTokenManager:dl}=_;fe(ef&&dl,g,"internal-error");const Xm=Te.fromJSON(this.name,dl);fe("string"==typeof ef,g,"internal-error"),qe(pt,g.name),qe(ar,g.name),fe("boolean"==typeof rc,g,"internal-error"),fe("boolean"==typeof Lp,g,"internal-error"),qe(qi,g.name),qe(ya,g.name),qe(Qm,g.name),qe(va,g.name),qe(ru,g.name),qe(md,g.name);const nf=new st({uid:ef,auth:g,email:ar,emailVerified:rc,displayName:pt,isAnonymous:Lp,photoURL:ya,phoneNumber:qi,tenantId:Qm,stsTokenManager:Xm,createdAt:ru,lastLoginAt:md});return tf&&Array.isArray(tf)&&(nf.providerData=tf.map(Jm=>Object.assign({},Jm))),va&&(nf._redirectEventId=va),nf}static _fromIdTokenResponse(g,_,w=!1){return(0,c.Z)(function*(){const A=new Te;A.updateFromServerResponse(_);const O=new st({uid:_.localId,auth:g,stsTokenManager:A,isAnonymous:w});return yield ii(O),O})()}}const mt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,w){var A=this;return(0,c.Z)(function*(){A.storage[_]=w})()}_get(_){var w=this;return(0,c.Z)(function*(){const A=w.storage[_];return void 0===A?null:A})()}_remove(_){var w=this;return(0,c.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function sn(v,g,_){return`firebase:${v}:${g}:${_}`}class Nn{constructor(g,_,w){this.persistence=g,this.auth=_,this.userKey=w;const{config:A,name:O}=this.auth;this.fullUserKey=sn(this.userKey,A.apiKey,O),this.fullPersistenceKey=sn("persistence",A.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?st._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,c.Z)(function*(){if(_.persistence===g)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,w="authUser"){return(0,c.Z)(function*(){if(!_.length)return new Nn(Z(mt),g,w);const A=(yield Promise.all(_.map(function(){var it=(0,c.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return it.apply(this,arguments)}}()))).filter(it=>it);let O=A[0]||Z(mt);const ee=sn(w,g.config.apiKey,g.name);let ve=null;for(const it of _)try{const Et=yield it._get(ee);if(Et){const pt=st._fromJSON(g,Et);it!==O&&(ve=pt),O=it;break}}catch(Et){}const We=A.filter(it=>it._shouldAllowMigration);return O._shouldAllowMigration&&We.length?(O=We[0],ve&&(yield O._set(ee,ve.toJSON())),yield Promise.all(_.map(function(){var it=(0,c.Z)(function*(Et){if(Et!==O)try{yield Et._remove(ee)}catch(pt){}});return function(Et){return it.apply(this,arguments)}}())),new Nn(O,g,w)):new Nn(O,g,w)})()}}function Mc(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(pr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Sl(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Vs(g))return"Blackberry";if(gr(g))return"Webos";if(xc(g))return"Safari";if((g.includes("chrome/")||Al(g))&&!g.includes("edge/"))return"Chrome";if(si(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Sl(v=(0,L.z$)()){return/firefox\//i.test(v)}function xc(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Al(v=(0,L.z$)()){return/crios\//i.test(v)}function pr(v=(0,L.z$)()){return/iemobile/i.test(v)}function si(v=(0,L.z$)()){return/android/i.test(v)}function Vs(v=(0,L.z$)()){return/blackberry/i.test(v)}function gr(v=(0,L.z$)()){return/webos/i.test(v)}function yi(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Io(v=(0,L.z$)()){return yi(v)||si(v)||gr(v)||Vs(v)||/windows phone/i.test(v)||pr(v)}function La(v,g=[]){let _;switch(v){case"Browser":_=Mc((0,L.z$)());break;case"Worker":_=`${Mc((0,L.z$)())}-${v}`;break;default:_=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${he.SDK_VERSION}/${w}`}class vi{constructor(g,_){this.app=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pt(this),this.idTokenSubscription=new Pt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=te,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(g,_){var w=this;return _&&(this._popupRedirectResolver=Z(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var A,O;if(!w._deleted&&(w.persistenceManager=yield Nn.create(w,g),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(ee){}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_)}})()}initializeCurrentUser(g){var _=this;return(0,c.Z)(function*(){var w;let A=yield _.assertedPersistence.getCurrentUser();if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const O=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,ee=null==A?void 0:A._redirectEventId,ve=yield _.tryRedirectSignIn(g);(!O||O===ee)&&(null==ve?void 0:ve.user)&&(A=ve.user)}return A?A._redirectEventId?(fe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===A._redirectEventId?_.directlySetCurrentUser(A):_.reloadAndSetCurrentUserOrClear(A)):_.reloadAndSetCurrentUserOrClear(A):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var _=this;return(0,c.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(A){yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,c.Z)(function*(){try{yield ii(g)}catch(w){if("auth/network-request-failed"!==w.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ct(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,c.Z)(function*(){const w=g?(0,L.m9)(g):null;return w&&fe(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(g){var _=this;return(0,c.Z)(function*(){if(!_._deleted)return g&&fe(_.tenantId===g.tenantId,_,"tenant-id-mismatch"),_.queue((0,c.Z)(function*(){yield _.directlySetCurrentUser(g),_.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(Z(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,w){return this.registerStateListener(this.authStateSubscription,g,_,w)}onIdTokenChanged(g,_,w){return this.registerStateListener(this.idTokenSubscription,g,_,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var w=this;return(0,c.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(_);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const w=g&&Z(g)||_._popupRedirectResolver;fe(w,_,"argument-error"),_.redirectPersistenceManager=yield Nn.create(_,[Z(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,c.Z)(function*(){var w,A;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===g?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,c.Z)(function*(){if(g===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,w,A){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return fe(ee,this,"internal-error"),ee.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,w,A):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=La(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){const _={"X-Client-Version":g.clientVersion};return g.app.options.appId&&(_["X-Firebase-gmpid"]=g.app.options.appId),_})()}}function Ve(v){return(0,L.m9)(v)}class Pt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function oi(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Yn(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class tn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return B("not implemented")}_getIdTokenResponse(g){return B("not implemented")}_linkToIdToken(g,_){return B("not implemented")}_getReauthenticationResolver(g){return B("not implemented")}}function Qo(v,g){return $n.apply(this,arguments)}function $n(){return($n=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:resetPassword",en(v,g))})).apply(this,arguments)}function kt(v,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function js(v,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:update",en(v,g))})).apply(this,arguments)}function rr(){return(rr=(0,c.Z)(function*(v,g){return ri(v,"POST","/v1/accounts:signInWithPassword",en(v,g))})).apply(this,arguments)}function Do(v,g){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:sendOobCode",en(v,g))})).apply(this,arguments)}function Un(v,g){return cn.apply(this,arguments)}function cn(){return(cn=(0,c.Z)(function*(v,g){return Do(v,g)})).apply(this,arguments)}function ah(v,g){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,c.Z)(function*(v,g){return Do(v,g)})).apply(this,arguments)}function ai(v,g){return $r.apply(this,arguments)}function $r(){return($r=(0,c.Z)(function*(v,g){return Do(v,g)})).apply(this,arguments)}function $u(v,g){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,c.Z)(function*(v,g){return Do(v,g)})).apply(this,arguments)}function Ni(){return(Ni=(0,c.Z)(function*(v,g){return ri(v,"POST","/v1/accounts:signInWithEmailLink",en(v,g))})).apply(this,arguments)}function lh(){return(lh=(0,c.Z)(function*(v,g){return ri(v,"POST","/v1/accounts:signInWithEmailLink",en(v,g))})).apply(this,arguments)}class kc extends tn{constructor(g,_,w,A=null){super("password",w),this._email=g,this._password=_,this._tenantId=A}static _fromEmailAndPassword(g,_){return new kc(g,_,"password")}static _fromEmailAndCode(g,_,w=null){return new kc(g,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,c.Z)(function*(){switch(_.signInMethod){case"password":return function Ba(v,g){return rr.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function So(v,g){return Ni.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:ge(g,"internal-error")}})()}_linkToIdToken(g,_){var w=this;return(0,c.Z)(function*(){switch(w.signInMethod){case"password":return kt(g,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Gu(v,g){return lh.apply(this,arguments)}(g,{idToken:_,email:w._email,oobCode:w._password});default:ge(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ir(v,g){return ch.apply(this,arguments)}function ch(){return(ch=(0,c.Z)(function*(v,g){return ri(v,"POST","/v1/accounts:signInWithIdp",en(v,g))})).apply(this,arguments)}class Hs extends tn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Hs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):ge("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A}=_,O=(0,ce._T)(_,["providerId","signInMethod"]);if(!w||!A)return null;const ee=new Hs(w,A);return ee.idToken=O.idToken||void 0,ee.accessToken=O.accessToken||void 0,ee.secret=O.secret,ee.nonce=O.nonce,ee.pendingToken=O.pendingToken||null,ee}_getIdTokenResponse(g){return ir(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,ir(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ir(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function ym(v,g){return zu.apply(this,arguments)}function zu(){return(zu=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:sendVerificationCode",en(v,g))})).apply(this,arguments)}function xl(){return(xl=(0,c.Z)(function*(v,g){return ri(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,g))})).apply(this,arguments)}function uh(){return(uh=(0,c.Z)(function*(v,g){const _=yield ri(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,g));if(_.temporaryProof)throw Es(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const bm={USER_NOT_FOUND:"user-not-found"};function dh(){return(dh=(0,c.Z)(function*(v,g){return ri(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),bm)})).apply(this,arguments)}class Ha extends tn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Ha({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Ha({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function vm(v,g){return xl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function ja(v,g){return uh.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function wm(v,g){return dh.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:w,verificationCode:A}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:w,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:O}=g;return w||_||A||O?new Ha({verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:O}):null}}class qs{constructor(g){var _,w,A,O,ee,ve;const We=(0,L.zd)((0,L.pd)(g)),it=null!==(_=We.apiKey)&&void 0!==_?_:null,Et=null!==(w=We.oobCode)&&void 0!==w?w:null,pt=function Em(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=We.mode)&&void 0!==A?A:null);fe(it&&Et&&pt,"argument-error"),this.apiKey=it,this.operation=pt,this.code=Et,this.continueUrl=null!==(O=We.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ee=We.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(ve=We.tenantId)&&void 0!==ve?ve:null}static parseLink(g){const _=function dp(v){const g=(0,L.zd)((0,L.pd)(v)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||_||g||v}(g);try{return new qs(_)}catch(w){return null}}}let Rl=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return kc._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const A=qs.parseLink(w);return fe(A,"argument-error"),kc._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ao{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Fi extends Ao{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ea extends Fi{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return fe("providerId"in _&&"signInMethod"in _,"argument-error"),Hs._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return fe(g.idToken||g.accessToken,"argument-error"),Hs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ea.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ea.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:O,nonce:ee,providerId:ve}=g;if(!w&&!A&&!_&&!O||!ve)return null;try{return new ea(ve)._credential({idToken:_,accessToken:w,nonce:ee,pendingToken:O})}catch(We){return null}}}let qa=(()=>{class v extends Fi{constructor(){super("facebook.com")}static credential(_){return Hs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),$a=(()=>{class v extends Fi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Hs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:A}=_;if(!w&&!A)return null;try{return v.credential(w,A)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),hh=(()=>{class v extends Fi{constructor(){super("github.com")}static credential(_){return Hs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Li extends tn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return ir(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,ir(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ir(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A,pendingToken:O}=_;return w&&A&&O&&w===A?new Li(w,O):null}static _create(g,_){return new Li(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $s extends Ao{constructor(g){fe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return $s.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return $s.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Li.fromJSON(g);return fe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:w}=g;if(!_||!w)return null;try{return Li._create(w,_)}catch(A){return null}}}let Vi=(()=>{class v extends Fi{constructor(){super("twitter.com")}static credential(_,w){return Hs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=_;if(!w||!A)return null;try{return v.credential(w,A)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ph(v,g){return kr.apply(this,arguments)}function kr(){return(kr=(0,c.Z)(function*(v,g){return ri(v,"POST","/v1/accounts:signUp",en(v,g))})).apply(this,arguments)}class Gr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,w,A=!1){return(0,c.Z)(function*(){const O=yield st._fromIdTokenResponse(g,w,A),ee=Wu(w);return new Gr({user:O,providerId:ee,_tokenResponse:w,operationType:_})})()}static _forOperation(g,_,w){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const A=Wu(w);return new Gr({user:g,providerId:A,_tokenResponse:w,operationType:_})})()}}function Wu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Oc(){return(Oc=(0,c.Z)(function*(v){var g;const _=Ve(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Gr({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield ph(_,{returnSecureToken:!0}),A=yield Gr._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ga extends L.ZR{constructor(g,_,w,A){var O;super(_.code,_.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Ga.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,_,w,A){return new Ga(g,_,w,A)}}function hp(v,g,_,w){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Ga._fromErrorAndOperation(v,O,g,w):O})}function Mn(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Pc(){return(Pc=(0,c.Z)(function*(v,g){const _=(0,L.m9)(v);yield ta(!0,_,g);const{providerUserInfo:w}=yield qn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),A=Mn(w||[]);return _.providerData=_.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function xn(v,g){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,c.Z)(function*(v,g,_=!1){const w=yield Hr(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return Gr._forOperation(v,"link",w)})).apply(this,arguments)}function ta(v,g,_){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,c.Z)(function*(v,g,_){yield ii(g);const A=!1===v?"provider-already-linked":"no-such-provider";fe(Mn(g.providerData).has(_)===v,g.auth,A)})).apply(this,arguments)}function zr(v,g){return za.apply(this,arguments)}function za(){return(za=(0,c.Z)(function*(v,g,_=!1){const{auth:w}=v,A="reauthenticate";try{const O=yield Hr(v,hp(w,A,g,v),_);fe(O.idToken,w,"internal-error");const ee=ft(O.idToken);fe(ee,w,"internal-error");const{sub:ve}=ee;return fe(v.uid===ve,w,"user-mismatch"),Gr._forOperation(v,A,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&ge(w,"user-mismatch"),O}})).apply(this,arguments)}function Wa(v,g){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(v,g,_=!1){const w="signIn",A=yield hp(v,w,g),O=yield Gr._fromIdTokenResponse(v,w,A);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Or(v,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,c.Z)(function*(v,g){return Wa(Ve(v),g)})).apply(this,arguments)}function Za(v,g){return kl.apply(this,arguments)}function kl(){return(kl=(0,c.Z)(function*(v,g){const _=(0,L.m9)(v);return yield ta(!1,_,g.providerId),xn(_,g)})).apply(this,arguments)}function Bi(v,g){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,c.Z)(function*(v,g){return zr((0,L.m9)(v),g)})).apply(this,arguments)}function Ol(v,g){return vt.apply(this,arguments)}function vt(){return(vt=(0,c.Z)(function*(v,g){return ri(v,"POST","/v1/accounts:signInWithCustomToken",en(v,g))})).apply(this,arguments)}function Ya(){return(Ya=(0,c.Z)(function*(v,g){const _=Ve(v),w=yield Ol(_,{token:g,returnSecureToken:!0}),A=yield Gr._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class xo{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Qa._fromServerResponse(g,_):ge(g,"internal-error")}}class Qa extends xo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Qa(_)}}function Xa(v,g,_){var w;fe((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),fe(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(fe(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(fe(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Pl(){return(Pl=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v),A={requestType:"PASSWORD_RESET",email:g};_&&Xa(w,A,_),yield ah(w,A)})).apply(this,arguments)}function Nt(){return(Nt=(0,c.Z)(function*(v,g,_){yield Qo((0,L.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(v,g){yield js((0,L.m9)(v),{oobCode:g})})).apply(this,arguments)}function Nl(v,g){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,c.Z)(function*(v,g){const _=(0,L.m9)(v),w=yield Qo(_,{oobCode:g}),A=w.requestType;switch(fe(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(w.mfaInfo,_,"internal-error");default:fe(w.email,_,"internal-error")}let O=null;return w.mfaInfo&&(O=xo._fromServerResponse(Ve(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function zs(){return(zs=(0,c.Z)(function*(v,g){const{data:_}=yield Nl((0,L.m9)(v),g);return _.email})).apply(this,arguments)}function Fc(){return(Fc=(0,c.Z)(function*(v,g,_){const w=Ve(v),A=yield ph(w,{returnSecureToken:!0,email:g,password:_}),O=yield Gr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function Ja(){return(Ja=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};fe(_.handleCodeInApp,w,"argument-error"),_&&Xa(w,A,_),yield ai(w,A)})).apply(this,arguments)}function Vc(){return(Vc=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v),A=Rl.credentialWithLink(g,_||ze());return fe(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Or(w,A)})).apply(this,arguments)}function Ws(v,g){return ts.apply(this,arguments)}function ts(){return(ts=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:createAuthUri",en(v,g))})).apply(this,arguments)}function el(){return(el=(0,c.Z)(function*(v,g){const w={identifier:g,continueUri:_t()?ze():"http://localhost"},{signinMethods:A}=yield Ws((0,L.m9)(v),w);return A||[]})).apply(this,arguments)}function Fl(){return(Fl=(0,c.Z)(function*(v,g){const _=(0,L.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Xa(_.auth,A,g);const{email:O}=yield Un(_.auth,A);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function na(){return(na=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&Xa(w.auth,O,_);const{email:ee}=yield $u(w.auth,O);ee!==v.email&&(yield v.reload())})).apply(this,arguments)}function Yu(v,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,c.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ll(){return(Ll=(0,c.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const w=(0,L.m9)(v),O={idToken:yield w.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ee=yield Hr(w,Yu(w.auth,O));w.displayName=ee.displayName||null,w.photoURL=ee.photoUrl||null;const ve=w.providerData.find(({providerId:We})=>"password"===We);ve&&(ve.displayName=w.displayName,ve.photoURL=w.photoURL),yield w._updateTokensIfNecessary(ee)})).apply(this,arguments)}function Bc(v,g,_){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,c.Z)(function*(v,g,_){const{auth:w}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const ee=yield Hr(v,kt(w,O));yield v._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class Zs{constructor(g,_,w={}){this.isNewUser=g,this.providerId=_,this.profile=w}}class mp extends Zs{constructor(g,_,w,A){super(g,_,w),this.username=A}}class Tm extends Zs{constructor(g,_){super(g,"facebook.com",_)}}class Er extends mp{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Cr extends Zs{constructor(g,_){super(g,"google.com",_)}}class Bn extends mp{constructor(g,_,w){super(g,"twitter.com",_,w)}}function jc(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Qu(v){var g,_;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const ee=null===(_=null===(g=ft(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ee)return new Zs(O,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!w)return null;switch(w){case"facebook.com":return new Tm(O,A);case"github.com":return new Er(O,A);case"google.com":return new Cr(O,A);case"twitter.com":return new Bn(O,A,v.screenName||null);case"custom":case"anonymous":return new Zs(O,null);default:return new Zs(O,w,A)}}(_)}class ko{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new ko("enroll",g)}static _fromMfaPendingCredential(g){return new ko("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,w;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return ko._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return ko._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Xu{constructor(g,_,w){this.session=g,this.hints=_,this.signInResolver=w}static _fromError(g,_){const w=Ve(g),A=_.customData._serverResponse,O=(A.mfaInfo||[]).map(ve=>xo._fromServerResponse(w,ve));fe(A.mfaPendingCredential,w,"internal-error");const ee=ko._fromMfaPendingCredential(A.mfaPendingCredential);return new Xu(ee,O,function(){var ve=(0,c.Z)(function*(We){const it=yield We._process(w,ee);delete A.mfaInfo,delete A.mfaPendingCredential;const Et=Object.assign(Object.assign({},A),{idToken:it.idToken,refreshToken:it.refreshToken});switch(_.operationType){case"signIn":const pt=yield Gr._fromIdTokenResponse(w,_.operationType,Et);return yield w._updateCurrentUser(pt.user),pt;case"reauthenticate":return fe(_.user,w,"internal-error"),Gr._forOperation(_.user,_.operationType,Et);default:ge(w,"internal-error")}});return function(We){return ve.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,c.Z)(function*(){return _.signInResolver(g)})()}}function Ks(v,g){return Ut(v,"POST","/v2/accounts/mfaEnrollment:start",en(v,g))}class Eh{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>xo._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new Eh(g)}getSession(){var g=this;return(0,c.Z)(function*(){return ko._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var w=this;return(0,c.Z)(function*(){const A=g,O=yield w.getSession(),ee=yield Hr(w.user,A._process(w.user.auth,O,_));return yield w.user._updateTokensIfNecessary(ee),w.user.reload()})()}unenroll(g){var _=this;return(0,c.Z)(function*(){const w="string"==typeof g?g:g.uid,A=yield _.user.getIdToken(),O=yield Hr(_.user,function yp(v,g){return Ut(v,"POST","/v2/accounts/mfaEnrollment:withdraw",en(v,g))}(_.user.auth,{idToken:A,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ee})=>ee!==w),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(ee){if("auth/user-token-expired"!==ee.code)throw ee}})()}}const nl=new WeakMap,Bl="__sak";class Hc{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Bl,"1"),this.storage.removeItem(Bl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const En=(()=>{class v extends Hc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Th(){const v=(0,L.z$)();return xc(v)||yi(v)}()&&function Rr(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Io(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),O=this.localCache[w];A!==O&&_(w,O,A)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((ve,We,it)=>{this.notifyListeners(ve,it)});const A=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(A);if(_.newValue!==ve)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!w)return}const O=()=>{const ve=this.storage.getItem(A);!w&&this.localCache[A]===ve||this.notifyListeners(A,ve)},ee=this.storage.getItem(A);!function Ml(){return(0,L.w1)()&&10===document.documentMode}()||ee===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var A=()=>super._set,O=this;return(0,c.Z)(function*(){yield A().call(O,_,w),O.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,A=this;return(0,c.Z)(function*(){const O=yield w().call(A,_);return A.localCache[_]=JSON.stringify(O),O})()}_remove(_){var w=()=>super._remove,A=this;return(0,c.Z)(function*(){yield w().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),Wr=(()=>{class v extends Hc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let Lt=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(O=>O.isListeningto(_));if(w)return w;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,c.Z)(function*(){const A=_,{eventId:O,eventType:ee,data:ve}=A.data,We=w.handlersMap[ee];if(!(null==We?void 0:We.size))return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:ee});const it=Array.from(We).map(function(){var pt=(0,c.Z)(function*(ar){return ar(A.origin,ve)});return function(ar){return pt.apply(this,arguments)}}()),Et=yield function lt(v){return Promise.all(v.map(function(){var g=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return g.apply(this,arguments)}}()))}(it);A.ports[0].postMessage({status:"done",eventId:O,eventType:ee,response:Et})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ys(v="",g=10){let _="";for(let w=0;w<g;w++)_+=Math.floor(10*Math.random());return v+_}class il{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,w=50){var A=this;return(0,c.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ee,ve;return new Promise((We,it)=>{const Et=Ys("",20);O.port1.start();const pt=setTimeout(()=>{it(new Error("unsupported_event"))},w);ve={messageChannel:O,onMessage(ar){const qi=ar;if(qi.data.eventId===Et)switch(qi.data.status){case"ack":clearTimeout(pt),ee=setTimeout(()=>{it(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),We(qi.data.response);break;default:clearTimeout(pt),clearTimeout(ee),it(new Error("invalid_response"))}}},A.handlers.add(ve),O.port1.addEventListener("message",ve.onMessage),A.target.postMessage({eventType:g,eventId:Et,data:_},[O.port2])}).finally(()=>{ve&&A.removeMessageHandler(ve)})})()}}function Rn(){return window}function wi(){return void 0!==Rn().WorkerGlobalScope&&"function"==typeof Rn().importScripts}function ia(){return(ia=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const ji="firebaseLocalStorageDb",Qs="firebaseLocalStorage",sa="fbase_key";class fn{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function kn(v,g){return v.transaction([Qs],g?"readwrite":"readonly").objectStore(Qs)}function li(){const v=indexedDB.open(ji,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Qs,{keyPath:sa})}catch(A){_(A)}}),v.addEventListener("success",(0,c.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Qs)?g(w):(w.close(),yield function wp(){const v=indexedDB.deleteDatabase(ji);return new fn(v).toPromise()}(),g(yield li()))}))})}function ye(v,g,_){return sr.apply(this,arguments)}function sr(){return(sr=(0,c.Z)(function*(v,g,_){const w=kn(v,!0).put({[sa]:g,value:_});return new fn(w).toPromise()})).apply(this,arguments)}function ui(){return(ui=(0,c.Z)(function*(v,g){const _=kn(v,!1).get(g),w=yield new fn(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function N(v,g){const _=kn(v,!0).delete(g);return new fn(_).toPromise()}const Js=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield li()),_.db})()}_withRetries(_){var w=this;return(0,c.Z)(function*(){let A=0;for(;;)try{const O=yield w._openDb();return yield _(O)}catch(O){if(A++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return wi()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=Lt._getInstance(function bp(){return wi()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,c.Z)(function*(A,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(A,O){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,c.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var w,A;if(_.activeServiceWorker=yield function hn(){return ia.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new il(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,c.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ut(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield li();return yield ye(_,Bl,"1"),yield N(_,Bl),!0}catch(_){}return!1})()}_withPendingWrite(_){var w=this;return(0,c.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(O=>ye(O,_,w)),A.localCache[_]=w,A.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,c.Z)(function*(){const A=yield w._withRetries(O=>function ci(v,g){return ui.apply(this,arguments)}(O,_));return w.localCache[_]=A,A})()}_remove(_){var w=this;return(0,c.Z)(function*(){return w._withPendingWrite((0,c.Z)(function*(){return yield w._withRetries(A=>N(A,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const w=yield _._withRetries(ee=>{const ve=kn(ee,!1).getAll();return new fn(ve).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:ee,value:ve}of w)O.add(ee),JSON.stringify(_.localCache[ee])!==JSON.stringify(ve)&&(_.notifyListeners(ee,ve),A.push(ee));for(const ee of Object.keys(_.localCache))_.localCache[ee]&&!O.has(ee)&&(_.notifyListeners(ee,null),A.push(ee));return A})()}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function bt(v,g){return Ut(v,"POST","/v2/accounts/mfaSignIn:start",en(v,g))}function eo(){return(eo=(0,c.Z)(function*(v){return(yield Ut(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function to(v){return new Promise((g,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=A=>{const O=Fe("internal-error");O.customData=A,_(O)},w.type="text/javascript",w.charset="UTF-8",function Po(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function no(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Tn=1e12;class ql{constructor(g){this.auth=g,this.counter=Tn,this._widgets=new Map}render(g,_){const w=this.counter;return this._widgets.set(w,new Nr(g,this.auth.name,_||{})),this.counter++,w}reset(g){var _;const w=g||Tn;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Tn))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,c.Z)(function*(){var w;return null===(w=_._widgets.get(g||Tn))||void 0===w||w.execute(),""})()}}class Nr{constructor(g,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;fe(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function on(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ed=no("rcb"),Dh=new ln(3e4,6e4);class Am{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rn().grecaptcha}load(g,_=""){return fe(function Bv(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Rn().grecaptcha):new Promise((w,A)=>{const O=Rn().setTimeout(()=>{A(Fe(g,"network-request-failed"))},Dh.get());Rn()[ed]=()=>{Rn().clearTimeout(O),delete Rn()[ed];const ve=Rn().grecaptcha;if(!ve)return void A(Fe(g,"internal-error"));const We=ve.render;ve.render=(it,Et)=>{const pt=We(it,Et);return this.counter++,pt},this.hostLanguage=_,w(ve)},to(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:ed,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),A(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Rn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mm{load(g){return(0,c.Z)(function*(){return new ql(g)})()}clearedOneInstance(){}}const td="recaptcha",ro={theme:"light",type:"image"};class Sh{constructor(g,_=Object.assign({},ro),w){this.parameters=_,this.type=td,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ve(w),this.isInvisible="invisible"===this.parameters.size,fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;fe(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mm:new Am,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(_)||new Promise(O=>{const ee=ve=>{!ve||(g.tokenChangeListeners.delete(ee),O(ve))};g.tokenChangeListeners.add(ee),g.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof g)g(_);else if("string"==typeof g){const w=Rn()[g];"function"==typeof w&&w(_)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){fe(_t()&&!wi(),g.auth,"internal-error"),yield function qt(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function oa(v){return eo.apply(this,arguments)}(g.auth);fe(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class aa{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Ha._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function nd(){return(nd=(0,c.Z)(function*(v,g,_){const w=Ve(v),A=yield No(w,g,(0,L.m9)(_));return new aa(A,O=>Or(w,O))})).apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v);yield ta(!1,w,"phone");const A=yield No(w.auth,g,(0,L.m9)(_));return new aa(A,O=>Za(w,O))})).apply(this,arguments)}function $l(){return($l=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v),A=yield No(w.auth,g,(0,L.m9)(_));return new aa(A,O=>Bi(w,O))})).apply(this,arguments)}function No(v,g,_){return Is.apply(this,arguments)}function Is(){return(Is=(0,c.Z)(function*(v,g,_){var w;const A=yield _.verify();try{let O;if(fe("string"==typeof A,v,"argument-error"),fe(_.type===td,v,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const ee=O.session;if("phoneNumber"in O)return fe("enroll"===ee.type,v,"internal-error"),(yield Ks(v,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{fe("signin"===ee.type,v,"internal-error");const ve=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return fe(ve,v,"missing-multi-factor-info"),(yield bt(v,{mfaPendingCredential:ee.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield ym(v,{phoneNumber:O.phoneNumber,recaptchaToken:A});return ee}}finally{_._reset()}})).apply(this,arguments)}function rd(){return(rd=(0,c.Z)(function*(v,g){yield xn((0,L.m9)(v),g)})).apply(this,arguments)}let Hi=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Ve(_)}verifyPhoneNumber(_,w){return No(this.auth,_,(0,L.m9)(w))}static credential(_,w){return Ha._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:A}=_;return w&&A?Ha._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function io(v,g){return g?Z(g):(fe(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class sl extends tn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ir(g,this._buildIdpRequest())}_linkToIdToken(g,_){return ir(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return ir(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Gl(v){return Wa(v.auth,new sl(v),v.bypassAuthState)}function Zr(v){const{auth:g,user:_}=v;return fe(_,g,"internal-error"),zr(_,new sl(v),v.bypassAuthState)}function ol(v){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,c.Z)(function*(v){const{auth:g,user:_}=v;return fe(_,g,"internal-error"),xn(_,new sl(v),v.bypassAuthState)})).apply(this,arguments)}class xh{constructor(g,_,w,A,O=!1){this.auth=g,this.resolver=w,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,c.Z)(function*(w,A){g.pendingPromise={resolve:w,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(w,A){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,c.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:O,tenantId:ee,error:ve,type:We}=g;if(ve)return void _.reject(ve);const it={auth:_.auth,requestUri:w,sessionId:A,tenantId:ee||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(We)(it))}catch(Et){_.reject(Et)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Gl;case"linkViaPopup":case"linkViaRedirect":return ol;case"reauthViaPopup":case"reauthViaRedirect":return Zr;default:ge(this.auth,"internal-error")}}resolve(g){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const id=new ln(2e3,1e4);function sd(){return(sd=(0,c.Z)(function*(v,g,_){const w=Ve(v);nt(v,g,Ao);const A=io(w,_);return new zl(w,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function Ds(){return(Ds=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v);nt(w.auth,g,Ao);const A=io(w.auth,_);return new zl(w.auth,"reauthViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}function qc(){return(qc=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v);nt(w.auth,g,Ao);const A=io(w.auth,_);return new zl(w.auth,"linkViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}let zl=(()=>{class v extends xh{constructor(_,w,A,O,ee){super(_,w,O,ee),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const w=yield _.execute();return fe(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,c.Z)(function*(){q(1===_.filter.length,"Popup operations only handle one event");const w=Ys();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(Fe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,id.get())};_()}}return v.currentPopupAction=null,v})();const la=new Map;class rs extends xh{constructor(g,_,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,c.Z)(function*(){let w=la.get(_.auth._key());if(!w){try{const O=(yield function ca(v,g){return Wl.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;w=()=>Promise.resolve(O)}catch(A){w=()=>Promise.reject(A)}la.set(_.auth._key(),w)}return _.bypassAuthState||la.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,w=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(w,g);if("unknown"!==g.type){if(g.eventId){const A=yield w.auth._redirectUserForId(g.eventId);if(A)return w.user=A,_().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Wl(){return(Wl=(0,c.Z)(function*(v,g){const _=D(g),w=zc(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(_));return yield w._remove(_),A})).apply(this,arguments)}function $c(v,g){return al.apply(this,arguments)}function al(){return(al=(0,c.Z)(function*(v,g){return zc(v)._set(D(g),"true")})).apply(this,arguments)}function zc(v){return Z(v._redirectPersistence)}function D(v){return sn("pendingRedirect",v.config.apiKey,v.name)}function j(){return(j=(0,c.Z)(function*(v,g,_){const w=Ve(v);nt(v,g,Ao);const A=io(w,_);return yield $c(A,w),A._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function Pe(){return(Pe=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v);nt(w.auth,g,Ao);const A=io(w.auth,_);yield $c(A,w.auth);const O=yield Fn(w);return A._openRedirect(w.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function Bt(){return(Bt=(0,c.Z)(function*(v,g,_){const w=(0,L.m9)(v);nt(w.auth,g,Ao);const A=io(w.auth,_);yield ta(!1,w,g.providerId),yield $c(A,w.auth);const O=yield Fn(w);return A._openRedirect(w.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Tr(){return(Tr=(0,c.Z)(function*(v,g){return yield Ve(v)._initializationPromise,Gn(v,g,!1)})).apply(this,arguments)}function Gn(v,g){return pn.apply(this,arguments)}function pn(){return(pn=(0,c.Z)(function*(v,g,_=!1){const w=Ve(v),A=io(w,g),ee=yield new rs(w,A,_).execute();return ee&&!_&&(delete ee.user._redirectEventId,yield w._persistUserIfCurrent(ee.user),yield w._setRedirectUser(null,g)),ee})).apply(this,arguments)}function Fn(v){return vn.apply(this,arguments)}function vn(){return(vn=(0,c.Z)(function*(v){const g=Ys(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class is{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(_=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Cp(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ll(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var w;if(g.error&&!ll(g)){const A=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(Fe(this.auth,A))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const w=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(so(g))}saveEventToCache(g){this.cachedEventUids.add(so(g)),this.lastProcessedEventTime=Date.now()}}function so(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function ll({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function xm(v){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,c.Z)(function*(v,g={}){return Ut(v,"GET","/v1/projects",g)})).apply(this,arguments)}const cl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zl=/^https?/;function kh(){return(kh=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield xm(v);for(const _ of g)try{if(Ip(_))return}catch(w){}ge(v,"unauthorized-domain")})).apply(this,arguments)}function Ip(v){const g=ze(),{protocol:_,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const ee=new URL(v);return""===ee.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ee.hostname===w}if(!Zl.test(_))return!1;if(cl.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Hv=new ln(3e4,6e4);function Oh(){const v=Rn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Wc=null;function Rm(v){return Wc=Wc||function Dp(v){return new Promise((g,_)=>{var w,A,O;function ee(){Oh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Oh(),_(Fe(v,"network-request-failed"))},timeout:Hv.get()})}if(null===(A=null===(w=Rn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)g(gapi.iframes.getContext());else{if(!(null===(O=Rn().gapi)||void 0===O?void 0:O.load)){const ve=no("iframefcb");return Rn()[ve]=()=>{gapi.load?ee():_(Fe(v,"network-request-failed"))},to(`https://apis.google.com/js/api.js?onload=${ve}`).catch(We=>_(We))}ee()}}).catch(g=>{throw Wc=null,g})}(v),Wc}const Ph=new ln(5e3,15e3),km={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Om=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sp(v){const g=v.config;fe(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?It(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:he.SDK_VERSION},A=Om.get(v.config.apiHost);A&&(w.eid=A);const O=v._getFrameworks();return O.length&&(w.fw=O.join(",")),`${_}?${(0,L.xO)(w).slice(1)}`}function ad(){return ad=(0,c.Z)(function*(v){const g=yield Rm(v),_=Rn().gapi;return fe(_,v,"internal-error"),g.open({where:document.body,url:Sp(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:km,dontclear:!0},w=>new Promise(function(){var A=(0,c.Z)(function*(O,ee){yield w.restyle({setHideOnLeave:!1});const ve=Fe(v,"network-request-failed"),We=Rn().setTimeout(()=>{ee(ve)},Ph.get());function it(){Rn().clearTimeout(We),O(w)}w.ping(it).then(it,()=>{ee(ve)})});return function(O,ee){return A.apply(this,arguments)}}()))}),ad.apply(this,arguments)}const Ql={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ld{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function ua(v,g,_,w,A,O){fe(v.config.authDomain,v,"auth-domain-config-required"),fe(v.config.apiKey,v,"invalid-api-key");const ee={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:he.SDK_VERSION,eventId:A};if(g instanceof Ao){g.setDefaultLanguage(v.languageCode),ee.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(ee.customParameters=JSON.stringify(g.getCustomParameters()));for(const[We,it]of Object.entries(O||{}))ee[We]=it}if(g instanceof Fi){const We=g.getScopes().filter(it=>""!==it);We.length>0&&(ee.scopes=We.join(","))}v.tenantId&&(ee.tid=v.tenantId);const ve=ee;for(const We of Object.keys(ve))void 0===ve[We]&&delete ve[We];return`${function Zc({config:v}){return v.emulator?It(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(ve).slice(1)}`}const Kc="webStorageSupport";class Lh extends class Bm{constructor(g){this.factorId=g}_process(g,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,w);case"signin":return this._finalizeSignIn(g,_.credential);default:return B("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Lh(g)}_finalizeEnroll(g,_,w){return function Xn(v,g){return Ut(v,"POST","/v2/accounts/mfaEnrollment:finalize",en(v,g))}(g,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function jl(v,g){return Ut(v,"POST","/v2/accounts/mfaSignIn:finalize",en(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yc=(()=>{class v{constructor(){}static assertion(_){return Lh._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Vh="@firebase/auth";class Ap{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(w=>{var A;g((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oo(){return window}function da(){return(da=(0,c.Z)(function*(v,g,_){var w;const{BuildInfo:A}=oo();q(g.sessionId,"AuthEvent did not contain a session ID");const O=yield Xc(g.sessionId),ee={};return yi()?ee.ibi=A.packageName:si()?ee.apn=A.packageName:ge(v,"operation-not-supported-in-this-environment"),A.displayName&&(ee.appDisplayName=A.displayName),ee.sessionId=O,ua(v,_,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,ee)})).apply(this,arguments)}function ud(){return(ud=(0,c.Z)(function*(v){const{BuildInfo:g}=oo(),_={};yi()?_.iosBundleId=g.packageName:si()?_.androidPackageName=g.packageName:ge(v,"operation-not-supported-in-this-environment"),yield xm(v,_)})).apply(this,arguments)}function Qc(){return(Qc=(0,c.Z)(function*(v,g,_){const{cordova:w}=oo();let A=()=>{};try{yield new Promise((O,ee)=>{let ve=null;function We(){var pt;O();const ar=null===(pt=w.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof ar&&ar(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function it(){ve||(ve=window.setTimeout(()=>{ee(Fe(v,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===(null==document?void 0:document.visibilityState)&&it()}g.addPassiveListener(We),document.addEventListener("resume",it,!1),si()&&document.addEventListener("visibilitychange",Et,!1),A=()=>{g.removePassiveListener(We),document.removeEventListener("resume",it,!1),document.removeEventListener("visibilitychange",Et,!1),ve&&window.clearTimeout(ve)}})}finally{A()}})).apply(this,arguments)}function Xc(v){return ha.apply(this,arguments)}function ha(){return(ha=(0,c.Z)(function*(v){const g=fa(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function fa(v){if(q(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function jh(v){(0,he._registerComponent)(new se.wA("auth",(g,{options:_})=>{const w=g.getProvider("app").getImmediate(),{apiKey:A,authDomain:O}=w.options;return(ee=>{fe(A&&!A.includes(":"),"invalid-api-key",{appName:ee.name}),fe(!(null==O?void 0:O.includes(":")),"argument-error",{appName:ee.name});const ve={apiKey:A,authDomain:O,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:La(v)},We=new vi(ee,ve);return function K(v,g){const _=(null==g?void 0:g.persistence)||[],w=(Array.isArray(_)?_:[_]).map(Z);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(We,_),We})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,w)=>{g.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new se.wA("auth-internal",g=>{const _=Ve(g.getProvider("auth").getImmediate());return new Ap(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(Vh,"0.19.9",function Bh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,he.registerVersion)(Vh,"0.19.9","esm2017")}("Browser");class zE extends is{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,c.Z)(function*(){yield g.initPromise})()}}function $h(v){return pa.apply(this,arguments)}function pa(){return(pa=(0,c.Z)(function*(v){const g=yield Ss()._get(As(v));return g&&(yield Ss()._remove(As(v))),g})).apply(this,arguments)}function qm(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*g.length);v.push(g.charAt(w))}return v.join("")}function Ss(){return Z(En)}function As(v){return sn("authEvent",v.config.apiKey,v.name)}function Dn(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,..._]=v.split("?");return(0,L.zd)(_.join("?"))}function kp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fe("no-auth-event")}}function fd(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function Wv(v=(0,L.z$)()){return!("file:"!==fd()&&"ionic:"!==fd()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function zh(){try{const v=self.localStorage,g=Ys();if(v)return v.setItem(g,"1"),v.removeItem(g),!function ga(v=(0,L.z$)()){return function Ci(){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Xl(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch(v){return Ir()&&(0,L.hl)()}return!1}function Ir(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ul(){return(function WE(){return"http:"===fd()||"https:"===fd()}()||(0,L.ru)()||Wv())&&!function pd(){return(0,L.b$)()||(0,L.UG)()}()&&zh()&&!Ir()}function ma(){return Wv()&&"undefined"!=typeof document}function Op(){return(Op=(0,c.Z)(function*(){return!!ma()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const as={LOCAL:"local",NONE:"none",SESSION:"session"},Jl=fe,Np="persistence";function gd(v){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,c.Z)(function*(v){yield v._initializationPromise;const g=Yh(),_=sn(Np,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function Yh(){var v;try{return(null===(v=function Pp(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(g){return null}}const Kv=fe;class Lo{constructor(){this.browserResolver=Z(class Um{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wr,this._completeRedirectFn=Gn}_openPopup(g,_,w,A){var O=this;return(0,c.Z)(function*(){var ee;q(null===(ee=O.eventManagers[g._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const ve=ua(g,_,w,ze(),A);return function Lm(v,g,_,w=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),ee=Math.max((window.screen.availWidth-w)/2,0).toString();let ve="";const We=Object.assign(Object.assign({},Ql),{width:w.toString(),height:A.toString(),top:O,left:ee}),it=(0,L.z$)().toLowerCase();_&&(ve=Al(it)?"_blank":_),Sl(it)&&(g=g||"http://localhost",We.scrollbars="yes");const Et=Object.entries(We).reduce((ar,[qi,ya])=>`${ar}${qi}=${ya},`,"");if(function Yo(v=(0,L.z$)()){var g;return yi(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(it)&&"_self"!==ve)return function cd(v,g){const _=document.createElement("a");_.href=v,_.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(g||"",ve),new ld(null);const pt=window.open(g||"",ve,Et);fe(pt,v,"popup-blocked");try{pt.focus()}catch(ar){}return new ld(pt)}(g,ve,Ys())})()}_openRedirect(g,_,w,A){var O=this;return(0,c.Z)(function*(){return yield O._originValidation(g),function Cn(v){Rn().location.href=v}(ua(g,_,w,ze(),A)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:A,promise:O}=this.eventManagers[_];return A?Promise.resolve(A):(q(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(g);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(g){var _=this;return(0,c.Z)(function*(){const w=yield function Nh(v){return ad.apply(this,arguments)}(g),A=new is(g);return w.register("authEvent",O=>(fe(null==O?void 0:O.authEvent,g,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:A},_.iframes[g._key()]=w,A})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Kc,{type:Kc},A=>{var O;const ee=null===(O=null==A?void 0:A[0])||void 0===O?void 0:O[Kc];void 0!==ee&&_(!!ee),ge(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function jv(v){return kh.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Io()||xc()||yi()}}),this.cordovaResolver=Z(class jn{constructor(){this._redirectPersistence=Wr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gn}_initialize(g){var _=this;return(0,c.Z)(function*(){const w=g._key();let A=_.eventManagers.get(w);return A||(A=new zE(g),_.eventManagers.set(w,A),_.attachCallbackListeners(g,A)),A})()}_openPopup(g){ge(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,w,A){var O=this;return(0,c.Z)(function*(){!function $v(v){var g,_,w,A,O,ee,ve,We,it,Et;const pt=oo();fe("function"==typeof(null===(g=null==pt?void 0:pt.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fe(void 0!==(null===(_=null==pt?void 0:pt.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fe("function"==typeof(null===(O=null===(A=null===(w=null==pt?void 0:pt.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(We=null===(ve=null===(ee=null==pt?void 0:pt.cordova)||void 0===ee?void 0:ee.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===We?void 0:We.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(Et=null===(it=null==pt?void 0:pt.cordova)||void 0===it?void 0:it.InAppBrowser)||void 0===Et?void 0:Et.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ee=yield O._initialize(g);yield ee.initialized(),ee.resetRedirect(),function Gc(){la.clear()}(),yield O._originValidation(g);const ve=function qh(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:qm(),postBody:null,tenantId:v.tenantId,error:Fe(v,"no-auth-event")}}(g,w,A);yield function Jc(v,g){return Ss()._set(As(v),g)}(g,ve);const We=yield function os(v,g,_){return da.apply(this,arguments)}(g,ve,_),it=yield function xp(v){const{cordova:g}=oo();return new Promise(_=>{g.plugins.browsertab.isAvailable(w=>{let A=null;w?g.plugins.browsertab.openUrl(v):A=g.InAppBrowser.open(v,function oh(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(We);return function GE(v,g,_){return Qc.apply(this,arguments)}(g,ee,it)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Mp(v){return ud.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:w,handleOpenURL:A,BuildInfo:O}=oo(),ee=setTimeout((0,c.Z)(function*(){yield $h(g),_.onEvent(kp())}),500),ve=function(){var Et=(0,c.Z)(function*(pt){clearTimeout(ee);const ar=yield $h(g);let qi=null;ar&&(null==pt?void 0:pt.url)&&(qi=function Hm(v,g){var _,w;const A=function Gh(v){const g=Dn(v),_=g.link?decodeURIComponent(g.link):void 0,w=Dn(_).link,A=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Dn(A).link||A||w||_||v}(g);if(A.includes("/__/auth/callback")){const O=Dn(A),ee=O.firebaseError?function eu(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(O.firebaseError)):null,ve=null===(w=null===(_=null==ee?void 0:ee.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],We=ve?Fe(ve):null;return We?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:We,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(ar,pt.url)),_.onEvent(qi||kp())});return function(ar){return Et.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ve);const We=A,it=`${O.packageName.toLowerCase()}://`;oo().handleOpenURL=function(){var Et=(0,c.Z)(function*(pt){if(pt.toLowerCase().startsWith(it)&&ve({url:pt}),"function"==typeof We)try{We(pt)}catch(ar){console.error(ar)}});return function(pt){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Wr,this._completeRedirectFn=Gn}_initialize(g){var _=this;return(0,c.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,w,A){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,_,w,A)})()}_openRedirect(g,_,w,A){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,_,w,A)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return ma()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Kv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,c.Z)(function*(){if(g.underlyingResolver)return;const _=yield function Zv(){return Op.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function $m(v){return v.unwrap()}function _a(v){return Jh(v)}function Jh(v){const{_tokenResponse:g}=v instanceof L.ZR?v.customData:v;if(!g)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Hi.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=$a;break;case"facebook.com":w=qa;break;case"github.com":w=hh;break;case"twitter.com":w=Vi;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:ee,pendingToken:ve,nonce:We}=g;return O||ee||A||ve?ve?_.startsWith("saml.")?Li._create(_,ve):Hs._fromParams({providerId:_,signInMethod:_,pendingToken:ve,idToken:A,accessToken:O}):new ea(_).credential({idToken:A,accessToken:O,rawNonce:We}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function Ti(v,g){return g.catch(_=>{throw _ instanceof L.ZR&&function Xh(v,g){var _;const w=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Gm(v,function Dm(v,g){var _;const w=(0,L.m9)(v),A=g;return fe(g.customData.operationType,w,"argument-error"),fe(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),Xu._fromError(w,A)}(v,g));else if(w){const A=Jh(g),O=g;A&&(O.credential=A,O.tenantId=w.tenantId||void 0,O.email=w.email||void 0,O.phoneNumber=w.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:_a(_),additionalUserInfo:jc(_),user:bn.getOrCreate(A)}})}function ec(v,g){return tc.apply(this,arguments)}function tc(){return(tc=(0,c.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:w=>Ti(v,_.confirm(w))}})).apply(this,arguments)}class Gm{constructor(g,_){this.resolver=_,this.auth=function Qh(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Ti($m(this.auth),this.resolver.resolveSignIn(g))}}class bn{constructor(g){this._delegate=g,this.multiFactor=function Ch(v){const g=(0,L.m9)(v);return nl.has(g)||nl.set(g,Eh._fromUser(g)),nl.get(g)}(g)}static getOrCreate(g){return bn.USER_MAP.has(g)||bn.USER_MAP.set(g,new bn(g)),bn.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,c.Z)(function*(){return Ti(_.auth,Za(_._delegate,g))})()}linkWithPhoneNumber(g,_){var w=this;return(0,c.Z)(function*(){return ec(w.auth,function Ah(v,g,_){return Fr.apply(this,arguments)}(w._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,c.Z)(function*(){return Ti(_.auth,function od(v,g,_){return qc.apply(this,arguments)}(_._delegate,g,Lo))})()}linkWithRedirect(g){var _=this;return(0,c.Z)(function*(){return yield gd(Ve(_.auth)),function tt(v,g,_){return function et(v,g,_){return Bt.apply(this,arguments)}(v,g,_)}(_._delegate,g,Lo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,c.Z)(function*(){return Ti(_.auth,Bi(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return ec(this.auth,function Ts(v,g,_){return $l.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return Ti(this.auth,function Ep(v,g,_){return Ds.apply(this,arguments)}(this._delegate,g,Lo))}reauthenticateWithRedirect(g){var _=this;return(0,c.Z)(function*(){return yield gd(Ve(_.auth)),function J(v,g,_){return function de(v,g,_){return Pe.apply(this,arguments)}(v,g,_)}(_._delegate,g,Lo)})()}sendEmailVerification(g){return function pp(v,g){return Fl.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,c.Z)(function*(){return yield function Mo(v,g){return Pc.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Uc(v,g){return Bc((0,L.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function gp(v,g){return Bc((0,L.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Mh(v,g){return rd.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function vh(v,g){return Ll.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Ku(v,g,_){return na.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bn.USER_MAP=new WeakMap;const nu=fe;let zm=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;nu(A,"invalid-api-key",{appName:_.name}),nu(A,"invalid-api-key",{appName:_.name});const O="undefined"!=typeof window?Lo:void 0;this._delegate=w.initialize({options:{persistence:Zm(A,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function mn(v,g,_){const w=Ve(v);fe(w._canInitEmulator,w,"emulator-config-failed"),fe(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),O=oi(g),{host:ee,port:ve}=function Us(v){const g=oi(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const O=A[1];return{host:O,port:Yn(w.substr(O.length+1))}}{const[O,ee]=w.split(":");return{host:O,port:Yn(ee)}}}(g);w.config.emulator={url:`${O}//${ee}${null===ve?"":`:${ve}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:ee,port:ve,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Bs(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function _h(v,g){return _n.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Nl(this._delegate,_)}confirmPasswordReset(_,w){return function ke(v,g,_){return Nt.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var A=this;return(0,c.Z)(function*(){return Ti(A._delegate,function Zu(v,g,_){return Fc.apply(this,arguments)}(A._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function yh(v,g){return el.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Pr(v,g){const _=qs.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,c.Z)(function*(){nu(ul(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function yn(v,g){return Tr.apply(this,arguments)}(_._delegate,Lo);return w?Ti(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Gv(v,g){Ve(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,w,A){const{next:O,error:ee,complete:ve}=Wm(_,w,A);return this._delegate.onAuthStateChanged(O,ee,ve)}onIdTokenChanged(_,w,A){const{next:O,error:ee,complete:ve}=Wm(_,w,A);return this._delegate.onIdTokenChanged(O,ee,ve)}sendSignInLinkToEmail(_,w){return function Lc(v,g,_){return Ja.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function mh(v,g,_){return Pl.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,c.Z)(function*(){let A;switch(function Wh(v,g){Jl(Object.values(as).includes(g),v,"invalid-persistence-type"),(0,L.b$)()?Jl(g!==as.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Jl(g===as.NONE,v,"unsupported-persistence-type"):Ir()?Jl(g===as.NONE||g===as.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Jl(g===as.NONE||zh(),v,"unsupported-persistence-type")}(w._delegate,_),_){case as.SESSION:A=Wr;break;case as.LOCAL:A=(yield Z(Js)._isAvailable())?Js:En;break;case as.NONE:A=mt;break;default:return ge("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Ti(this._delegate,function gh(v){return Oc.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Ti(this._delegate,Or(this._delegate,_))}signInWithCustomToken(_){return Ti(this._delegate,function Ka(v,g){return Ya.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return Ti(this._delegate,function fp(v,g,_){return Or((0,L.m9)(v),Rl.credential(g,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return Ti(this._delegate,function Cs(v,g,_){return Vc.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return ec(this._delegate,function or(v,g,_){return nd.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,c.Z)(function*(){return nu(ul(),w._delegate,"operation-not-supported-in-this-environment"),Ti(w._delegate,function Rh(v,g,_){return sd.apply(this,arguments)}(w._delegate,_,Lo))})()}signInWithRedirect(_){var w=this;return(0,c.Z)(function*(){return nu(ul(),w._delegate,"operation-not-supported-in-this-environment"),yield gd(w._delegate),function S(v,g,_){return function k(v,g,_){return j.apply(this,arguments)}(v,g,_)}(w._delegate,_,Lo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function bi(v,g){return zs.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=as,v})();function Wm(v,g,_){let w=v;"function"!=typeof v&&({next:w,error:g,complete:_}=v);const A=w;return{next:ee=>A(ee&&bn.getOrCreate(ee)),error:g,complete:_}}function Zm(v,g){const _=function Kh(v,g){const _=Yh();if(!_)return[];const w=sn(Np,v,g);switch(_.getItem(w)){case as.NONE:return[mt];case as.LOCAL:return[Js,Wr];case as.SESSION:return[Wr];default:return[]}}(v,g);if("undefined"!=typeof self&&!_.includes(Js)&&_.push(Js),"undefined"!=typeof window)for(const w of[En,Wr])_.includes(w)||_.push(w);return _.includes(mt)||_.push(mt),_}class Fp{constructor(){this.providerId="phone",this._delegate=new Hi($m(re.Z.auth()))}static credential(g,_){return Hi.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}Fp.PHONE_SIGN_IN_METHOD=Hi.PHONE_SIGN_IN_METHOD,Fp.PROVIDER_ID=Hi.PROVIDER_ID;const Km=fe;class Ym{constructor(g,_,w=re.Z.app()){var A;Km(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Sh(g,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ls(v){v.INTERNAL.registerComponent(new se.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new zm(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Rl,FacebookAuthProvider:qa,GithubAuthProvider:hh,GoogleAuthProvider:$a,OAuthProvider:ea,SAMLAuthProvider:$s,PhoneAuthProvider:Fp,PhoneMultiFactorGenerator:Yc,RecaptchaVerifier:Ym,TwitterAuthProvider:Vi,Auth:zm,AuthCredential:tn,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.9")}(re.Z)},2940:function(ht,Se){!function(F){"use strict";function c(te){return Array.prototype.slice.call(te)}function re(te){return new Promise(function(ae,Ee){te.onsuccess=function(){ae(te.result)},te.onerror=function(){Ee(te.error)}})}function L(te,ae,Ee){var Ae,ge=new Promise(function(Fe,Me){re(Ae=te[ae].apply(te,Ee)).then(Fe,Me)});return ge.request=Ae,ge}function he(te,ae,Ee){var Ae=L(te,ae,Ee);return Ae.then(function(ge){if(ge)return new $(ge,Ae.request)})}function ce(te,ae,Ee){Ee.forEach(function(Ae){Object.defineProperty(te.prototype,Ae,{get:function(){return this[ae][Ae]},set:function(ge){this[ae][Ae]=ge}})})}function we(te,ae,Ee,Ae){Ae.forEach(function(ge){ge in Ee.prototype&&(te.prototype[ge]=function(){return L(this[ae],ge,arguments)})})}function se(te,ae,Ee,Ae){Ae.forEach(function(ge){ge in Ee.prototype&&(te.prototype[ge]=function(){return this[ae][ge].apply(this[ae],arguments)})})}function me(te,ae,Ee,Ae){Ae.forEach(function(ge){ge in Ee.prototype&&(te.prototype[ge]=function(){return he(this[ae],ge,arguments)})})}function pe(te){this._index=te}function $(te,ae){this._cursor=te,this._request=ae}function G(te){this._store=te}function ie(te){this._tx=te,this.complete=new Promise(function(ae,Ee){te.oncomplete=function(){ae()},te.onerror=function(){Ee(te.error)},te.onabort=function(){Ee(te.error)}})}function Ge(te,ae,Ee){this._db=te,this.oldVersion=ae,this.transaction=new ie(Ee)}function xe(te){this._db=te}ce(pe,"_index",["name","keyPath","multiEntry","unique"]),we(pe,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),me(pe,"_index",IDBIndex,["openCursor","openKeyCursor"]),ce($,"_cursor",["direction","key","primaryKey","value"]),we($,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(te){te in IDBCursor.prototype&&($.prototype[te]=function(){var ae=this,Ee=arguments;return Promise.resolve().then(function(){return ae._cursor[te].apply(ae._cursor,Ee),re(ae._request).then(function(Ae){if(Ae)return new $(Ae,ae._request)})})})}),G.prototype.createIndex=function(){return new pe(this._store.createIndex.apply(this._store,arguments))},G.prototype.index=function(){return new pe(this._store.index.apply(this._store,arguments))},ce(G,"_store",["name","keyPath","indexNames","autoIncrement"]),we(G,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),me(G,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),se(G,"_store",IDBObjectStore,["deleteIndex"]),ie.prototype.objectStore=function(){return new G(this._tx.objectStore.apply(this._tx,arguments))},ce(ie,"_tx",["objectStoreNames","mode"]),se(ie,"_tx",IDBTransaction,["abort"]),Ge.prototype.createObjectStore=function(){return new G(this._db.createObjectStore.apply(this._db,arguments))},ce(Ge,"_db",["name","version","objectStoreNames"]),se(Ge,"_db",IDBDatabase,["deleteObjectStore","close"]),xe.prototype.transaction=function(){return new ie(this._db.transaction.apply(this._db,arguments))},ce(xe,"_db",["name","version","objectStoreNames"]),se(xe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(te){[G,pe].forEach(function(ae){te in ae.prototype&&(ae.prototype[te.replace("open","iterate")]=function(){var Ee=c(arguments),Ae=Ee[Ee.length-1],ge=this._store||this._index,Fe=ge[te].apply(ge,Ee.slice(0,-1));Fe.onsuccess=function(){Ae(Fe.result)}})})}),[pe,G].forEach(function(te){te.prototype.getAll||(te.prototype.getAll=function(ae,Ee){var Ae=this,ge=[];return new Promise(function(Fe){Ae.iterateCursor(ae,function(Me){Me?(ge.push(Me.value),void 0===Ee||ge.length!=Ee?Me.continue():Fe(ge)):Fe(ge)})})})}),F.openDb=function Ne(te,ae,Ee){var Ae=L(indexedDB,"open",[te,ae]),ge=Ae.request;return ge&&(ge.onupgradeneeded=function(Fe){Ee&&Ee(new Ge(ge.result,Fe.oldVersion,ge.transaction))}),Ae.then(function(Fe){return new xe(Fe)})},F.deleteDb=function He(te){return L(indexedDB,"deleteDatabase",[te])},Object.defineProperty(F,"__esModule",{value:!0})}(Se)},8306:(ht,Se,F)=>{"use strict";F.d(Se,{y:()=>$});var c=F(930),re=F(727),L=F(8822),he=F(4671);var se=F(2416),me=F(576),pe=F(2806);let $=(()=>{class xe{constructor(He){He&&(this._subscribe=He)}lift(He){const te=new xe;return te.source=this,te.operator=He,te}subscribe(He,te,ae){const Ee=function Ge(xe){return xe&&xe instanceof c.Lv||function ie(xe){return xe&&(0,me.m)(xe.next)&&(0,me.m)(xe.error)&&(0,me.m)(xe.complete)}(xe)&&(0,re.Nn)(xe)}(He)?He:new c.Hp(He,te,ae);return(0,pe.x)(()=>{const{operator:Ae,source:ge}=this;Ee.add(Ae?Ae.call(Ee,ge):ge?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(He){try{return this._subscribe(He)}catch(te){He.error(te)}}forEach(He,te){return new(te=G(te))((ae,Ee)=>{let Ae;Ae=this.subscribe(ge=>{try{He(ge)}catch(Fe){Ee(Fe),null==Ae||Ae.unsubscribe()}},Ee,ae)})}_subscribe(He){var te;return null===(te=this.source)||void 0===te?void 0:te.subscribe(He)}[L.L](){return this}pipe(...He){return function we(xe){return 0===xe.length?he.y:1===xe.length?xe[0]:function(He){return xe.reduce((te,ae)=>ae(te),He)}}(He)(this)}toPromise(He){return new(He=G(He))((te,ae)=>{let Ee;this.subscribe(Ae=>Ee=Ae,Ae=>ae(Ae),()=>te(Ee))})}}return xe.create=Ne=>new xe(Ne),xe})();function G(xe){var Ne;return null!==(Ne=null!=xe?xe:se.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(ht,Se,F)=>{"use strict";F.d(Se,{x:()=>se});var c=F(8306),re=F(727);const he=(0,F(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=F(8737),we=F(2806);let se=(()=>{class pe extends c.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ie=new me(this,this);return ie.operator=G,ie}_throwIfClosed(){if(this.closed)throw new he}next(G){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ie=this.observers.slice();for(const Ge of ie)Ge.next(G)}})}error(G){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ie}=this;for(;ie.length;)ie.shift().error(G)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ie,isStopped:Ge,observers:xe}=this;return ie||Ge?re.Lc:(xe.push(G),new re.w0(()=>(0,ce.P)(xe,G)))}_checkFinalizedStatuses(G){const{hasError:ie,thrownError:Ge,isStopped:xe}=this;ie?G.error(Ge):xe&&G.complete()}asObservable(){const G=new c.y;return G.source=this,G}}return pe.create=($,G)=>new me($,G),pe})();class me extends se{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,ie;null===(ie=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ie||ie.call(G,$)}error($){var G,ie;null===(ie=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ie||ie.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,ie;return null!==(ie=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==ie?ie:re.Lc}}},930:(ht,Se,F)=>{"use strict";F.d(Se,{Hp:()=>Ge,Lv:()=>ie});var c=F(576),re=F(727),L=F(2416),he=F(7849),ce=F(5032);const we=pe("C",void 0,void 0);function pe(ae,Ee,Ae){return{kind:ae,value:Ee,error:Ae}}var $=F(3410),G=F(2806);class ie extends re.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,re.Nn)(Ee)&&Ee.add(this)):this.destination=te}static create(Ee,Ae,ge){return new Ge(Ee,Ae,ge)}next(Ee){this.isStopped?He(function me(ae){return pe("N",ae,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?He(function se(ae){return pe("E",void 0,ae)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?He(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ge extends ie{constructor(Ee,Ae,ge){let Fe;if(super(),(0,c.m)(Ee))Fe=Ee;else if(Ee){let Me;({next:Fe,error:Ae,complete:ge}=Ee),this&&L.v.useDeprecatedNextContext?(Me=Object.create(Ee),Me.unsubscribe=()=>this.unsubscribe()):Me=Ee,Fe=null==Fe?void 0:Fe.bind(Me),Ae=null==Ae?void 0:Ae.bind(Me),ge=null==ge?void 0:ge.bind(Me)}this.destination={next:Fe?xe(Fe):ce.Z,error:xe(null!=Ae?Ae:Ne),complete:ge?xe(ge):ce.Z}}}function xe(ae,Ee){return(...Ae)=>{try{ae(...Ae)}catch(ge){L.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(ge):(0,he.h)(ge)}}}function Ne(ae){throw ae}function He(ae,Ee){const{onStoppedNotification:Ae}=L.v;Ae&&$.z.setTimeout(()=>Ae(ae,Ee))}const te={closed:!0,next:ce.Z,error:Ne,complete:ce.Z}},727:(ht,Se,F)=>{"use strict";F.d(Se,{Lc:()=>we,w0:()=>ce,Nn:()=>se});var c=F(576);const L=(0,F(3888).d)(pe=>function(G){pe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ie,Ge)=>`${Ge+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var he=F(8737);class ce{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const xe of G)xe.remove(this);else G.remove(this);const{initialTeardown:ie}=this;if((0,c.m)(ie))try{ie()}catch(xe){$=xe instanceof L?xe.errors:[xe]}const{_teardowns:Ge}=this;if(Ge){this._teardowns=null;for(const xe of Ge)try{me(xe)}catch(Ne){$=null!=$?$:[],Ne instanceof L?$=[...$,...Ne.errors]:$.push(Ne)}}if($)throw new L($)}}add($){var G;if($&&$!==this)if(this.closed)me($);else{if($ instanceof ce){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._teardowns=null!==(G=this._teardowns)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,he.P)(G,$)}remove($){const{_teardowns:G}=this;G&&(0,he.P)(G,$),$ instanceof ce&&$._removeParent(this)}}ce.EMPTY=(()=>{const pe=new ce;return pe.closed=!0,pe})();const we=ce.EMPTY;function se(pe){return pe instanceof ce||pe&&"closed"in pe&&(0,c.m)(pe.remove)&&(0,c.m)(pe.add)&&(0,c.m)(pe.unsubscribe)}function me(pe){(0,c.m)(pe)?pe():pe.unsubscribe()}},2416:(ht,Se,F)=>{"use strict";F.d(Se,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Se,F)=>{"use strict";F.d(Se,{E:()=>re});const re=new(F(8306).y)(ce=>ce.complete())},8996:(ht,Se,F)=>{"use strict";F.d(Se,{D:()=>Fe});var c=F(8421),re=F(5363),L=F(9468),we=F(8306),me=F(2202),pe=F(576),$=F(9672);function ie(Me,nt){if(!Me)throw new Error("Iterable cannot be null");return new we.y(Qe=>{(0,$.f)(Qe,nt,()=>{const fe=Me[Symbol.asyncIterator]();(0,$.f)(Qe,nt,()=>{fe.next().then(B=>{B.done?Qe.complete():Qe.next(B.value)})},0,!0)})})}var Ge=F(3670),xe=F(8239),Ne=F(1144),He=F(6495),te=F(2206),ae=F(4532),Ee=F(3260);function Fe(Me,nt){return nt?function ge(Me,nt){if(null!=Me){if((0,Ge.c)(Me))return function he(Me,nt){return(0,c.Xf)(Me).pipe((0,L.R)(nt),(0,re.Q)(nt))}(Me,nt);if((0,Ne.z)(Me))return function se(Me,nt){return new we.y(Qe=>{let fe=0;return nt.schedule(function(){fe===Me.length?Qe.complete():(Qe.next(Me[fe++]),Qe.closed||this.schedule())})})}(Me,nt);if((0,xe.t)(Me))return function ce(Me,nt){return(0,c.Xf)(Me).pipe((0,L.R)(nt),(0,re.Q)(nt))}(Me,nt);if((0,te.D)(Me))return ie(Me,nt);if((0,He.T)(Me))return function G(Me,nt){return new we.y(Qe=>{let fe;return(0,$.f)(Qe,nt,()=>{fe=Me[me.h](),(0,$.f)(Qe,nt,()=>{let B,q;try{({value:B,done:q}=fe.next())}catch(W){return void Qe.error(W)}q?Qe.complete():Qe.next(B)},0,!0)}),()=>(0,pe.m)(null==fe?void 0:fe.return)&&fe.return()})}(Me,nt);if((0,Ee.L)(Me))return function Ae(Me,nt){return ie((0,Ee.Q)(Me),nt)}(Me,nt)}throw(0,ae.z)(Me)}(Me,nt):(0,c.Xf)(Me)}},8421:(ht,Se,F)=>{"use strict";F.d(Se,{Xf:()=>Ge});var c=F(5987),re=F(1144),L=F(8239),he=F(8306),ce=F(3670),we=F(2206),se=F(4532),me=F(6495),pe=F(3260),$=F(576),G=F(7849),ie=F(8822);function Ge(ge){if(ge instanceof he.y)return ge;if(null!=ge){if((0,ce.c)(ge))return function xe(ge){return new he.y(Fe=>{const Me=ge[ie.L]();if((0,$.m)(Me.subscribe))return Me.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,re.z)(ge))return function Ne(ge){return new he.y(Fe=>{for(let Me=0;Me<ge.length&&!Fe.closed;Me++)Fe.next(ge[Me]);Fe.complete()})}(ge);if((0,L.t)(ge))return function He(ge){return new he.y(Fe=>{ge.then(Me=>{Fe.closed||(Fe.next(Me),Fe.complete())},Me=>Fe.error(Me)).then(null,G.h)})}(ge);if((0,we.D)(ge))return ae(ge);if((0,me.T)(ge))return function te(ge){return new he.y(Fe=>{for(const Me of ge)if(Fe.next(Me),Fe.closed)return;Fe.complete()})}(ge);if((0,pe.L)(ge))return function Ee(ge){return ae((0,pe.Q)(ge))}(ge)}throw(0,se.z)(ge)}function ae(ge){return new he.y(Fe=>{(function Ae(ge,Fe){var Me,nt,Qe,fe;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Me=(0,c.KL)(ge);!(nt=yield Me.next()).done;)if(Fe.next(nt.value),Fe.closed)return}catch(B){Qe={error:B}}finally{try{nt&&!nt.done&&(fe=Me.return)&&(yield fe.call(Me))}finally{if(Qe)throw Qe.error}}Fe.complete()})})(ge,Fe).catch(Me=>Fe.error(Me))})}},6451:(ht,Se,F)=>{"use strict";F.d(Se,{T:()=>we});var c=F(8189),re=F(8421),L=F(515),he=F(3269),ce=F(8996);function we(...se){const me=(0,he.yG)(se),pe=(0,he._6)(se,1/0),$=se;return $.length?1===$.length?(0,re.Xf)($[0]):(0,c.J)(pe)((0,ce.D)($,me)):L.E}},5403:(ht,Se,F)=>{"use strict";F.d(Se,{Q:()=>re});var c=F(930);class re extends c.Lv{constructor(he,ce,we,se,me){super(he),this.onFinalize=me,this._next=ce?function(pe){try{ce(pe)}catch($){he.error($)}}:super._next,this._error=se?function(pe){try{se(pe)}catch($){he.error($)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(pe){he.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}},4004:(ht,Se,F)=>{"use strict";F.d(Se,{U:()=>L});var c=F(4482),re=F(5403);function L(he,ce){return(0,c.e)((we,se)=>{let me=0;we.subscribe(new re.Q(se,pe=>{se.next(he.call(ce,pe,me++))}))})}},8189:(ht,Se,F)=>{"use strict";F.d(Se,{J:()=>L});var c=F(5577),re=F(4671);function L(he=1/0){return(0,c.z)(re.y,he)}},5577:(ht,Se,F)=>{"use strict";F.d(Se,{z:()=>me});var c=F(4004),re=F(8421),L=F(4482),he=F(9672),ce=F(5403),se=F(576);function me(pe,$,G=1/0){return(0,se.m)($)?me((ie,Ge)=>(0,c.U)((xe,Ne)=>$(ie,xe,Ge,Ne))((0,re.Xf)(pe(ie,Ge))),G):("number"==typeof $&&(G=$),(0,L.e)((ie,Ge)=>function we(pe,$,G,ie,Ge,xe,Ne,He){const te=[];let ae=0,Ee=0,Ae=!1;const ge=()=>{Ae&&!te.length&&!ae&&$.complete()},Fe=nt=>ae<ie?Me(nt):te.push(nt),Me=nt=>{xe&&$.next(nt),ae++;let Qe=!1;(0,re.Xf)(G(nt,Ee++)).subscribe(new ce.Q($,fe=>{null==Ge||Ge(fe),xe?Fe(fe):$.next(fe)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(ae--;te.length&&ae<ie;){const fe=te.shift();Ne?(0,he.f)($,Ne,()=>Me(fe)):Me(fe)}ge()}catch(fe){$.error(fe)}}))};return pe.subscribe(new ce.Q($,Fe,()=>{Ae=!0,ge()})),()=>{null==He||He()}}(ie,Ge,pe,G)))}},5363:(ht,Se,F)=>{"use strict";F.d(Se,{Q:()=>he});var c=F(9672),re=F(4482),L=F(5403);function he(ce,we=0){return(0,re.e)((se,me)=>{se.subscribe(new L.Q(me,pe=>(0,c.f)(me,ce,()=>me.next(pe),we),()=>(0,c.f)(me,ce,()=>me.complete(),we),pe=>(0,c.f)(me,ce,()=>me.error(pe),we)))})}},3099:(ht,Se,F)=>{"use strict";F.d(Se,{B:()=>we});var c=F(8996),re=F(5698),L=F(7579),he=F(930),ce=F(4482);function we(me={}){const{connector:pe=(()=>new L.x),resetOnError:$=!0,resetOnComplete:G=!0,resetOnRefCountZero:ie=!0}=me;return Ge=>{let xe=null,Ne=null,He=null,te=0,ae=!1,Ee=!1;const Ae=()=>{null==Ne||Ne.unsubscribe(),Ne=null},ge=()=>{Ae(),xe=He=null,ae=Ee=!1},Fe=()=>{const Me=xe;ge(),null==Me||Me.unsubscribe()};return(0,ce.e)((Me,nt)=>{te++,!Ee&&!ae&&Ae();const Qe=He=null!=He?He:pe();nt.add(()=>{te--,0===te&&!Ee&&!ae&&(Ne=se(Fe,ie))}),Qe.subscribe(nt),xe||(xe=new he.Hp({next:fe=>Qe.next(fe),error:fe=>{Ee=!0,Ae(),Ne=se(ge,$,fe),Qe.error(fe)},complete:()=>{ae=!0,Ae(),Ne=se(ge,G),Qe.complete()}}),(0,c.D)(Me).subscribe(xe))})(Ge)}}function se(me,pe,...$){return!0===pe?(me(),null):!1===pe?null:pe(...$).pipe((0,re.q)(1)).subscribe(()=>me())}},9468:(ht,Se,F)=>{"use strict";F.d(Se,{R:()=>re});var c=F(4482);function re(L,he=0){return(0,c.e)((ce,we)=>{we.add(L.schedule(()=>ce.subscribe(we),he))})}},5698:(ht,Se,F)=>{"use strict";F.d(Se,{q:()=>he});var c=F(515),re=F(4482),L=F(5403);function he(ce){return ce<=0?()=>c.E:(0,re.e)((we,se)=>{let me=0;we.subscribe(new L.Q(se,pe=>{++me<=ce&&(se.next(pe),ce<=me&&se.complete())}))})}},8505:(ht,Se,F)=>{"use strict";F.d(Se,{b:()=>ce});var c=F(576),re=F(4482),L=F(5403),he=F(4671);function ce(we,se,me){const pe=(0,c.m)(we)||se||me?{next:we,error:se,complete:me}:we;return pe?(0,re.e)(($,G)=>{var ie;null===(ie=pe.subscribe)||void 0===ie||ie.call(pe);let Ge=!0;$.subscribe(new L.Q(G,xe=>{var Ne;null===(Ne=pe.next)||void 0===Ne||Ne.call(pe,xe),G.next(xe)},()=>{var xe;Ge=!1,null===(xe=pe.complete)||void 0===xe||xe.call(pe),G.complete()},xe=>{var Ne;Ge=!1,null===(Ne=pe.error)||void 0===Ne||Ne.call(pe,xe),G.error(xe)},()=>{var xe,Ne;Ge&&(null===(xe=pe.unsubscribe)||void 0===xe||xe.call(pe)),null===(Ne=pe.finalize)||void 0===Ne||Ne.call(pe)}))}):he.y}},4408:(ht,Se,F)=>{"use strict";F.d(Se,{o:()=>ce});var c=F(727);class re extends c.w0{constructor(se,me){super()}schedule(se,me=0){return this}}const L={setInterval(...we){const{delegate:se}=L;return((null==se?void 0:se.setInterval)||setInterval)(...we)},clearInterval(we){const{delegate:se}=L;return((null==se?void 0:se.clearInterval)||clearInterval)(we)},delegate:void 0};var he=F(8737);class ce extends re{constructor(se,me){super(se,me),this.scheduler=se,this.work=me,this.pending=!1}schedule(se,me=0){if(this.closed)return this;this.state=se;const pe=this.id,$=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId($,pe,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId($,this.id,me),this}requestAsyncId(se,me,pe=0){return L.setInterval(se.flush.bind(se,this),pe)}recycleAsyncId(se,me,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return me;L.clearInterval(me)}execute(se,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(se,me);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,me){let $,pe=!1;try{this.work(se)}catch(G){pe=!0,$=G||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:se,scheduler:me}=this,{actions:pe}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(pe,this),null!=se&&(this.id=this.recycleAsyncId(me,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Se,F)=>{"use strict";F.d(Se,{v:()=>L});var c=F(6063);class re{constructor(ce,we=re.now){this.schedulerActionCtor=ce,this.now=we}schedule(ce,we=0,se){return new this.schedulerActionCtor(this,ce).schedule(se,we)}}re.now=c.l.now;class L extends re{constructor(ce,we=re.now){super(ce,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:we}=this;if(this._active)return void we.push(ce);let se;this._active=!0;do{if(se=ce.execute(ce.state,ce.delay))break}while(ce=we.shift());if(this._active=!1,se){for(;ce=we.shift();)ce.unsubscribe();throw se}}}},4986:(ht,Se,F)=>{"use strict";F.d(Se,{P:()=>he,z:()=>L});var c=F(4408);const L=new(F(7565).v)(c.o),he=L},6063:(ht,Se,F)=>{"use strict";F.d(Se,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ht,Se,F)=>{"use strict";F.d(Se,{z:()=>c});const c={setTimeout(...re){const{delegate:L}=c;return((null==L?void 0:L.setTimeout)||setTimeout)(...re)},clearTimeout(re){const{delegate:L}=c;return((null==L?void 0:L.clearTimeout)||clearTimeout)(re)},delegate:void 0}},2202:(ht,Se,F)=>{"use strict";F.d(Se,{h:()=>re});const re=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Se,F)=>{"use strict";F.d(Se,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ht,Se,F)=>{"use strict";F.d(Se,{_6:()=>we,jO:()=>he,yG:()=>ce});var c=F(576),re=F(3532);function L(se){return se[se.length-1]}function he(se){return(0,c.m)(L(se))?se.pop():void 0}function ce(se){return(0,re.K)(L(se))?se.pop():void 0}function we(se,me){return"number"==typeof L(se)?se.pop():me}},8737:(ht,Se,F)=>{"use strict";function c(re,L){if(re){const he=re.indexOf(L);0<=he&&re.splice(he,1)}}F.d(Se,{P:()=>c})},3888:(ht,Se,F)=>{"use strict";function c(re){const he=re(ce=>{Error.call(ce),ce.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}F.d(Se,{d:()=>c})},2806:(ht,Se,F)=>{"use strict";F.d(Se,{O:()=>he,x:()=>L});var c=F(2416);let re=null;function L(ce){if(c.v.useDeprecatedSynchronousErrorHandling){const we=!re;if(we&&(re={errorThrown:!1,error:null}),ce(),we){const{errorThrown:se,error:me}=re;if(re=null,se)throw me}}else ce()}function he(ce){c.v.useDeprecatedSynchronousErrorHandling&&re&&(re.errorThrown=!0,re.error=ce)}},9672:(ht,Se,F)=>{"use strict";function c(re,L,he,ce=0,we=!1){const se=L.schedule(function(){he(),we?re.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(re.add(se),!we)return se}F.d(Se,{f:()=>c})},4671:(ht,Se,F)=>{"use strict";function c(re){return re}F.d(Se,{y:()=>c})},1144:(ht,Se,F)=>{"use strict";F.d(Se,{z:()=>c});const c=re=>re&&"number"==typeof re.length&&"function"!=typeof re},2206:(ht,Se,F)=>{"use strict";F.d(Se,{D:()=>re});var c=F(576);function re(L){return Symbol.asyncIterator&&(0,c.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(ht,Se,F)=>{"use strict";function c(re){return"function"==typeof re}F.d(Se,{m:()=>c})},3670:(ht,Se,F)=>{"use strict";F.d(Se,{c:()=>L});var c=F(8822),re=F(576);function L(he){return(0,re.m)(he[c.L])}},6495:(ht,Se,F)=>{"use strict";F.d(Se,{T:()=>L});var c=F(2202),re=F(576);function L(he){return(0,re.m)(null==he?void 0:he[c.h])}},8239:(ht,Se,F)=>{"use strict";F.d(Se,{t:()=>re});var c=F(576);function re(L){return(0,c.m)(null==L?void 0:L.then)}},3260:(ht,Se,F)=>{"use strict";F.d(Se,{L:()=>he,Q:()=>L});var c=F(5987),re=F(576);function L(ce){return(0,c.FC)(this,arguments,function*(){const se=ce.getReader();try{for(;;){const{value:me,done:pe}=yield(0,c.qq)(se.read());if(pe)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(me)}}finally{se.releaseLock()}})}function he(ce){return(0,re.m)(null==ce?void 0:ce.getReader)}},3532:(ht,Se,F)=>{"use strict";F.d(Se,{K:()=>re});var c=F(576);function re(L){return L&&(0,c.m)(L.schedule)}},4482:(ht,Se,F)=>{"use strict";F.d(Se,{A:()=>re,e:()=>L});var c=F(576);function re(he){return(0,c.m)(null==he?void 0:he.lift)}function L(he){return ce=>{if(re(ce))return ce.lift(function(we){try{return he(we,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ht,Se,F)=>{"use strict";function c(){}F.d(Se,{Z:()=>c})},7849:(ht,Se,F)=>{"use strict";F.d(Se,{h:()=>L});var c=F(2416),re=F(3410);function L(he){re.z.setTimeout(()=>{const{onUnhandledError:ce}=c.v;if(!ce)throw he;ce(he)})}},4532:(ht,Se,F)=>{"use strict";function c(re){return new TypeError(`You provided ${null!==re&&"object"==typeof re?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Se,{z:()=>c})},5987:(ht,Se,F)=>{"use strict";function me(B,q,W,Z){return new(W||(W=Promise))(function(K,ze){function _t(ct){try{Le(Z.next(ct))}catch(ln){ze(ln)}}function dn(ct){try{Le(Z.throw(ct))}catch(ln){ze(ln)}}function Le(ct){ct.done?K(ct.value):function ue(K){return K instanceof W?K:new W(function(ze){ze(K)})}(ct.value).then(_t,dn)}Le((Z=Z.apply(B,q||[])).next())})}function te(B){return this instanceof te?(this.v=B,this):new te(B)}function ae(B,q,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,Z=W.apply(B,q||[]),K=[];return ue={},ze("next"),ze("throw"),ze("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function ze(It){Z[It]&&(ue[It]=function(An){return new Promise(function(Jt,ni){K.push([It,An,Jt,ni])>1||_t(It,An)})})}function _t(It,An){try{!function dn(It){It.value instanceof te?Promise.resolve(It.value.v).then(Le,ct):ln(K[0][2],It)}(Z[It](An))}catch(Jt){ln(K[0][3],Jt)}}function Le(It){_t("next",It)}function ct(It){_t("throw",It)}function ln(It,An){It(An),K.shift(),K.length&&_t(K[0][0],K[0][1])}}function Ae(B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,q=B[Symbol.asyncIterator];return q?q.call(B):(B=function ie(B){var q="function"==typeof Symbol&&Symbol.iterator,W=q&&B[q],Z=0;if(W)return W.call(B);if(B&&"number"==typeof B.length)return{next:function(){return B&&Z>=B.length&&(B=void 0),{value:B&&B[Z++],done:!B}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")}(B),W={},Z("next"),Z("throw"),Z("return"),W[Symbol.asyncIterator]=function(){return this},W);function Z(K){W[K]=B[K]&&function(ze){return new Promise(function(_t,dn){!function ue(K,ze,_t,dn){Promise.resolve(dn).then(function(Le){K({value:Le,done:_t})},ze)}(_t,dn,(ze=B[K](ze)).done,ze.value)})}}}F.d(Se,{FC:()=>ae,KL:()=>Ae,mG:()=>me,qq:()=>te})},655:(ht,Se,F)=>{"use strict";function he(B,q){var W={};for(var Z in B)Object.prototype.hasOwnProperty.call(B,Z)&&q.indexOf(Z)<0&&(W[Z]=B[Z]);if(null!=B&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(Z=Object.getOwnPropertySymbols(B);ue<Z.length;ue++)q.indexOf(Z[ue])<0&&Object.prototype.propertyIsEnumerable.call(B,Z[ue])&&(W[Z[ue]]=B[Z[ue]])}return W}F.d(Se,{_T:()=>he})},5e3:(ht,Se,F)=>{"use strict";F.d(Se,{$8M:()=>eo,$Z:()=>JC,AFp:()=>l0,ALo:()=>Ry,AaK:()=>me,AsE:()=>ug,BQk:()=>H_,CHM:()=>_h,CRH:()=>fI,CZH:()=>ei,CqO:()=>G_,EJc:()=>QM,EiD:()=>As,EpF:()=>$_,F$t:()=>rT,F4k:()=>og,FYo:()=>Nw,FiY:()=>pn,G48:()=>sx,Gf:()=>Su,GfV:()=>JT,GkF:()=>q_,Gpc:()=>G,Gre:()=>wT,Hsn:()=>Bb,Ikx:()=>dg,JOm:()=>A,JVY:()=>Kc,L6k:()=>Um,LAX:()=>Bm,LFG:()=>J,LSH:()=>tu,Lbi:()=>c0,MAs:()=>P_,NdJ:()=>Nb,O4$:()=>jc,OlP:()=>on,Oqu:()=>Of,PXZ:()=>gs,Q6J:()=>Mf,QGY:()=>kd,Qsj:()=>XT,R0b:()=>zo,RDi:()=>Oc,Rgc:()=>Uf,SBq:()=>Lf,Sil:()=>u0,Suo:()=>hI,TTD:()=>qa,TgZ:()=>Rb,Udp:()=>Nd,VLi:()=>ex,W1O:()=>_I,WLB:()=>bg,X6Q:()=>VI,XFs:()=>Ct,Xpm:()=>qe,Y36:()=>sg,YKP:()=>ml,YNc:()=>Cb,Yjl:()=>Al,Yz7:()=>Jt,ZZ4:()=>Xy,_Bn:()=>kw,_UZ:()=>Ob,_Vd:()=>Sn,_c5:()=>CP,_uU:()=>Q_,aQg:()=>Vg,c2e:()=>Mg,cJS:()=>en,cg1:()=>hg,dDg:()=>xg,deG:()=>ed,dqk:()=>Ft,eBb:()=>Fh,eFA:()=>f0,ekj:()=>Rf,f3M:()=>Pe,g9A:()=>Da,h0i:()=>qd,hGG:()=>tD,hij:()=>bu,iGM:()=>dI,ifc:()=>Ht,ip1:()=>$f,kL8:()=>ay,lG2:()=>xc,lcZ:()=>Eg,mCW:()=>oo,n5z:()=>jl,n_E:()=>Oy,oAB:()=>Nn,oJD:()=>Rp,oxw:()=>Vb,pB0:()=>Lh,q3G:()=>Dn,q4F:()=>Wn,qLn:()=>_a,qOj:()=>jo,qZA:()=>kb,qzn:()=>ua,sBO:()=>BI,sIi:()=>Tf,s_b:()=>Ny,soG:()=>$y,tBr:()=>Gn,tb:()=>qy,tp0:()=>vn,uIk:()=>hc,vHH:()=>Ne,vpe:()=>Os,wAp:()=>Tt,xp6:()=>eb,yhl:()=>Zc,ynx:()=>Pb,z2F:()=>kg,z3N:()=>zn,zSh:()=>S_,zs3:()=>co});var c=F(7579),re=F(727),L=F(8306),he=F(6451),ce=F(3099);function we(o){for(let a in o)if(o[a]===we)return a;throw Error("Could not find renamed property on target object.")}function se(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function pe(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const $=we({__forward_ref__:we});function G(o){return o.__forward_ref__=G,o.toString=function(){return me(this())},o}function ie(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty($)&&o.__forward_ref__===G}class Ne extends Error{constructor(a,l){super(function He(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,l)),this.code=a}}function te(o){return"string"==typeof o?o:null==o?"":String(o)}function ae(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():te(o)}function Fe(o,a){const l=a?` in ${a}`:"";throw new Ne(-201,`No provider for ${ae(o)} found${l}`)}function Le(o,a){null==o&&function ct(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function Jt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function en(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ut(o){return bs(o,ws)||bs(o,mi)}function bs(o,a){return o.hasOwnProperty(a)?o[a]:null}function ri(o){return o&&(o.hasOwnProperty(Eo)||o.hasOwnProperty(Es))?o[Eo]:null}const ws=we({\u0275prov:we}),Eo=we({\u0275inj:we}),mi=we({ngInjectableDef:we}),Es=we({ngInjectorDef:we});var Ct=(()=>((Ct=Ct||{})[Ct.Default=0]="Default",Ct[Ct.Host=1]="Host",Ct[Ct.Self=2]="Self",Ct[Ct.SkipSelf=4]="SkipSelf",Ct[Ct.Optional=8]="Optional",Ct))();let Oi;function Kn(o){const a=Oi;return Oi=o,a}function Co(o,a,l){const d=Ut(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&Ct.Optional?null:void 0!==a?a:void Fe(me(o),"Injector")}function wr(o){return{toString:o}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),Ht=(()=>{return(o=Ht||(Ht={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ht;var o})();const ft="undefined"!=typeof globalThis&&globalThis,wt="undefined"!=typeof window&&window,Hr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=ft||"undefined"!=typeof global&&global||wt||Hr,ii={},H=[],Y=we({\u0275cmp:we}),Q=we({\u0275dir:we}),Ie=we({\u0275pipe:we}),oe=we({\u0275mod:we}),Je=we({\u0275fac:we}),De=we({__NG_ELEMENT_ID__:we});let Te=0;function qe(o){return wr(()=>{const l={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||H,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Ht.Emulated,id:"c",styles:o.styles||H,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,b=o.pipes;return d.id+=Te++,d.inputs=Sl(o.inputs,l),d.outputs=Sl(o.outputs),m&&m.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ot):null,d.pipeDefs=b?()=>("function"==typeof b?b():b).map(mt):null,d})}function Ot(o){return pr(o)||function si(o){return o[Q]||null}(o)}function mt(o){return function Vs(o){return o[Ie]||null}(o)}const sn={};function Nn(o){return wr(()=>{const a={type:o.type,bootstrap:o.bootstrap||H,declarations:o.declarations||H,imports:o.imports||H,exports:o.exports||H,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(sn[o.id]=o.type),a})}function Sl(o,a){if(null==o)return ii;const l={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),l[f]=d,a&&(a[f]=m)}return l}const xc=qe;function Al(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function pr(o){return o[Y]||null}function gr(o,a){const l=o[oe]||null;if(!l&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return l}function ai(o){return Array.isArray(o)&&"object"==typeof o[1]}function $r(o){return Array.isArray(o)&&!0===o[1]}function $u(o){return 0!=(8&o.flags)}function Rc(o){return 2==(2&o.flags)}function So(o){return 1==(1&o.flags)}function Ni(o){return null!==o.template}function Gu(o){return 0!=(512&o[2])}function Fi(o,a){return o.hasOwnProperty(Je)?o[Je]:null}class ea{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function qa(){return $a}function $a(o){return o.type.prototype.ngOnChanges&&(o.setInput=Cm),hh}function hh(){const o=fh(this),a=null==o?void 0:o.current;if(a){const l=o.previous;if(l===ii)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Cm(o,a,l,d){const f=fh(o)||function $s(o,a){return o[Li]=a}(o,{previous:ii,current:null}),m=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[l],T=b[E];m[E]=new ea(T&&T.currentValue,a,b===ii),o[d]=a}qa.ngInherit=!0;const Li="__ngSimpleChanges__";function fh(o){return o[Li]||null}const Gr="http://www.w3.org/2000/svg";let gh;function Oc(o){gh=o}function Ga(){return void 0!==gh?gh:"undefined"!=typeof document?document:void 0}function Mn(o){return!!o.listen}const Mo={createRenderer:(o,a)=>Ga()};function xn(o){for(;Array.isArray(o);)o=o[0];return o}function Ui(o,a){return xn(a[o])}function zr(o,a){return xn(a[o.index])}function Wa(o,a){return o.data[a]}function es(o,a){return o[a]}function Or(o,a){const l=a[o];return ai(l)?l:l[0]}function Qn(o){return 4==(4&o[2])}function Za(o){return 128==(128&o[2])}function Bi(o,a){return null==a?null:o[a]}function Gs(o){o[18]=0}function Ol(o,a){o[5]+=a;let l=o,d=o[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const vt={lFrame:Bc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xa(){return vt.bindingsEnabled}function ke(){return vt.lFrame.lView}function Nt(){return vt.lFrame.tView}function _h(o){return vt.lFrame.contextLView=o,o[8]}function _n(){let o=Nl();for(;null!==o&&64===o.type;)o=o.parent;return o}function Nl(){return vt.lFrame.currentTNode}function bi(o,a){const l=vt.lFrame;l.currentTNode=o,l.isParent=a}function zs(){return vt.lFrame.isParent}function Zu(){vt.lFrame.isParent=!1}function Lc(){return vt.isInCheckNoChangesMode}function Ja(o){vt.isInCheckNoChangesMode=o}function Pr(){const o=vt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Ws(){return vt.lFrame.bindingIndex++}function ts(o){const a=vt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function pp(o,a){const l=vt.lFrame;l.bindingIndex=l.bindingRootIndex=o,Ku(a)}function Ku(o){vt.lFrame.currentDirectiveIndex=o}function Yu(){return vt.lFrame.currentQueryIndex}function ra(o){vt.lFrame.currentQueryIndex=o}function vh(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Ll(o,a,l){if(l&Ct.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||l&Ct.Host||(f=vh(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const d=vt.lFrame=gp();return d.currentTNode=a,d.lView=o,!0}function Uc(o){const a=gp(),l=o[1];vt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function gp(){const o=vt.lFrame,a=null===o?null:o.child;return null===a?Bc(o):a}function Bc(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Vl(){const o=vt.lFrame;return vt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Qu=Vl;function Zs(){const o=Vl();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Er(){return vt.lFrame.selectedIndex}function Cr(o){vt.lFrame.selectedIndex=o}function Bn(){const o=vt.lFrame;return Wa(o.tView,o.selectedIndex)}function jc(){vt.lFrame.currentNamespace=Gr}function wh(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const m=o.data[l].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:M,ngOnDestroy:R}=m;b&&(o.contentHooks||(o.contentHooks=[])).push(-l,b),E&&((o.contentHooks||(o.contentHooks=[])).push(l,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,E)),T&&(o.viewHooks||(o.viewHooks=[])).push(-l,T),M&&((o.viewHooks||(o.viewHooks=[])).push(l,M),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,M)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(l,R)}}function Ul(o,a,l){Xu(o,a,3,l)}function tl(o,a,l,d){(3&o[2])===l&&Xu(o,a,l,d)}function ko(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function Xu(o,a,l,d){const m=null!=d?d:-1,b=a.length-1;let E=0;for(let T=void 0!==d?65535&o[18]:0;T<b;T++)if("number"==typeof a[T+1]){if(E=a[T],null!=d&&E>=d)break}else a[T]<0&&(o[18]+=65536),(E<m||-1==m)&&(Dm(o,l,a,T),o[18]=(4294901760&o[18])+T+2),T++}function Dm(o,a,l,d){const f=l[d]<0,m=l[d+1],E=o[f?-l[d]:l[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class Xn{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Ju(o,a,l){const d=Mn(o);let f=0;for(;f<l.length;){const m=l[f];if("number"==typeof m){if(0!==m)break;f++;const b=l[f++],E=l[f++],T=l[f++];d?o.setAttribute(a,E,T,b):a.setAttributeNS(b,E,T)}else{const b=m,E=l[++f];En(b)?d&&o.setProperty(a,b,E):d?o.setAttribute(a,b,E):a.setAttribute(b,E),f++}}return f}function rl(o){return 3===o||4===o||6===o}function En(o){return 64===o.charCodeAt(0)}function Rt(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||Wr(o,l,f,null,-1===l||2===l?a[++d]:null)}}return o}function Wr(o,a,l,d,f){let m=0,b=o.length;if(-1===a)b=-1;else for(;m<o.length;){const E=o[m++];if("number"==typeof E){if(E===a){b=-1;break}if(E>a){b=m-1;break}}}for(;m<o.length;){const E=o[m];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==f&&(o[m+1]=f));if(d===o[m+1])return void(o[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==b&&(o.splice(b,0,a),m=b+1),o.splice(m++,0,l),null!==d&&o.splice(m++,0,d),null!==f&&o.splice(m++,0,f)}function lt(o){return-1!==o}function Lt(o){return 32767&o}function il(o,a){let l=function Ys(o){return o>>16}(o),d=a;for(;l>0;)d=d[15],l--;return d}let Rn=!0;function Cn(o){const a=Rn;return Rn=o,a}let ut=0;function ji(o,a){const l=Qs(o,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Oo(d.data,o),Oo(a,null),Oo(d.blueprint,null));const f=sa(o,a),m=o.injectorIndex;if(lt(f)){const b=Lt(f),E=il(f,a),T=E[1].data;for(let M=0;M<8;M++)a[m+M]=E[b+M]|T[b+M]}return a[m+8]=f,m}function Oo(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Qs(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function sa(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){const m=f[1],b=m.type;if(d=2===b?m.declTNode:1===b?f[6]:null,null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function fn(o,a,l){!function bp(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(De)&&(d=l[De]),null==d&&(d=l[De]=ut++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function wp(o,a,l){if(l&Ct.Optional)return o;Fe(a,"NodeInjector")}function li(o,a,l,d){if(l&Ct.Optional&&void 0===d&&(d=null),0==(l&(Ct.Self|Ct.Host))){const f=o[9],m=Kn(void 0);try{return f?f.get(a,d,l&Ct.Optional):Co(a,d,l&Ct.Optional)}finally{Kn(m)}}return wp(d,a,l)}function ye(o,a,l,d=Ct.Default,f){if(null!==o){const m=function ns(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(De)?o[De]:void 0;return"number"==typeof a?a>=0?255&a:ci:a}(l);if("function"==typeof m){if(!Ll(a,o,d))return d&Ct.Host?wp(f,l,d):li(a,l,d,f);try{const b=m(d);if(null!=b||d&Ct.Optional)return b;Fe(l)}finally{Qu()}}else if("number"==typeof m){let b=null,E=Qs(o,a),T=-1,M=d&Ct.Host?a[16][6]:null;for((-1===E||d&Ct.SkipSelf)&&(T=-1===E?sa(o,a):a[E+8],-1!==T&&Js(d,!1)?(b=a[1],E=Lt(T),a=il(T,a)):E=-1);-1!==E;){const R=a[1];if(rt(m,E,R.data)){const V=ui(E,a,l,b,d,M);if(V!==sr)return V}T=a[E+8],-1!==T&&Js(d,a[1].data[E+8]===M)&&rt(m,E,a)?(b=R,E=Lt(T),a=il(T,a)):E=-1}}}return li(a,l,d,f)}const sr={};function ci(){return new bt(_n(),ke())}function ui(o,a,l,d,f,m){const b=a[1],E=b.data[o+8],R=N(E,b,l,null==d?Rc(E)&&Rn:d!=b&&0!=(3&E.type),f&Ct.Host&&m===E);return null!==R?Xs(a,b,R,E):sr}function N(o,a,l,d,f){const m=o.providerIndexes,b=a.data,E=1048575&m,T=o.directiveStart,R=m>>20,z=f?E+R:o.directiveEnd;for(let ne=d?E:E+R;ne<z;ne++){const Ce=b[ne];if(ne<T&&l===Ce||ne>=T&&Ce.type===l)return ne}if(f){const ne=b[T];if(ne&&Ni(ne)&&ne.type===l)return T}return null}function Xs(o,a,l,d){let f=o[l];const m=a.data;if(function yp(o){return o instanceof Xn}(f)){const b=f;b.resolving&&function Ee(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${o}${l}`)}(ae(m[l]));const E=Cn(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?Kn(b.injectImpl):null;Ll(o,d,Ct.Default);try{f=o[l]=b.factory(void 0,m,o,d),a.firstCreatePass&&l>=d.directiveStart&&function $E(o,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(d){const b=$a(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,b),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,b)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,m))}(l,m[l],a)}finally{null!==T&&Kn(T),Cn(E),b.resolving=!1,Qu()}}return f}function rt(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function Js(o,a){return!(o&Ct.Self||o&Ct.Host&&a)}class bt{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return ye(this._tNode,this._lView,a,d,l)}}function jl(o){return wr(()=>{const a=o.prototype.constructor,l=a[Je]||oa(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const m=f[Je]||oa(f);if(m&&m!==l)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function oa(o){return Ge(o)?()=>{const a=oa(ie(o));return a&&a()}:Fi(o)}function eo(o){return function kn(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const m=l[f];if(rl(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(m===a)return l[f+1];f+=2}}}return null}(_n(),o)}const to="__parameters__";function Tn(o,a,l){return wr(()=>{const d=function Hl(o){return function(...l){if(o){const d=o(...l);for(const f in d)this[f]=d[f]}}}(a);function f(...m){if(this instanceof f)return d.apply(this,m),this;const b=new f(...m);return E.annotation=b,E;function E(T,M,R){const V=T.hasOwnProperty(to)?T[to]:Object.defineProperty(T,to,{value:[]})[to];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(b),T}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class on{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Jt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ed=new on("AnalyzeForEntryComponents");function Fr(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(a===o&&(a=o.slice(0,l)),Fr(d,a)):a!==o&&a.push(d)}return a}function Ts(o,a){o.forEach(l=>Array.isArray(l)?Ts(l,a):a(l))}function $l(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function No(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Is(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}function Zr(o,a,l){let d=Ei(o,a);return d>=0?o[1|d]=l:(d=~d,function Hi(o,a,l,d){let f=o.length;if(f==a)o.push(l,d);else if(1===f)o.push(d,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function ol(o,a){const l=Ei(o,a);if(l>=0)return o[1|l]}function Ei(o,a){return function id(o,a,l){let d=0,f=o.length>>l;for(;f!==d;){const m=d+(f-d>>1),b=o[m<<l];if(a===b)return m<<l;b>a?f=m:d=m+1}return~(f<<l)}(o,a,1)}const rs={},ca="__NG_DI_FLAG__",Wl="ngTempTokenPath",al=/\n/gm,zc="__source",D=we({provide:String,useValue:we});let S;function k(o){const a=S;return S=o,a}function j(o,a=Ct.Default){if(void 0===S)throw new Ne(203,"");return null===S?Co(o,void 0,a):S.get(o,a&Ct.Optional?null:void 0,a)}function J(o,a=Ct.Default){return(function qn(){return Oi}()||j)(ie(o),a)}const Pe=J;function tt(o){const a=[];for(let l=0;l<o.length;l++){const d=ie(o[l]);if(Array.isArray(d)){if(0===d.length)throw new Ne(900,"");let f,m=Ct.Default;for(let b=0;b<d.length;b++){const E=d[b],T=Bt(E);"number"==typeof T?-1===T?f=E.token:m|=T:f=E}a.push(J(f,m))}else a.push(J(d))}return a}function et(o,a){return o[ca]=a,o.prototype[ca]=a,o}function Bt(o){return o[ca]}const Gn=et(Tn("Inject",o=>({token:o})),-1),pn=et(Tn("Optional"),8),vn=et(Tn("SkipSelf"),4);let Ph,Nh;function Yl(o){var a;return(null===(a=function Kl(){if(void 0===Ph&&(Ph=null,Ft.trustedTypes))try{Ph=Ft.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Ph}())||void 0===a?void 0:a.createHTML(o))||o}function Ql(o){var a;return(null===(a=function ad(){if(void 0===Nh&&(Nh=null,Ft.trustedTypes))try{Nh=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Nh}())||void 0===a?void 0:a.createHTML(o))||o}class ss{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fm extends ss{getTypeName(){return"HTML"}}class ld extends ss{getTypeName(){return"Style"}}class Lm extends ss{getTypeName(){return"Script"}}class cd extends ss{getTypeName(){return"URL"}}class Vm extends ss{getTypeName(){return"ResourceURL"}}function zn(o){return o instanceof ss?o.changingThisBreaksApplicationSecurity:o}function ua(o,a){const l=Zc(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function Zc(o){return o instanceof ss&&o.getTypeName()||null}function Kc(o){return new Fm(o)}function Um(o){return new ld(o)}function Fh(o){return new Lm(o)}function Bm(o){return new cd(o)}function Lh(o){return new Vm(o)}class Vh{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(Yl(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class Uh{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Yl(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=Yl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const b=l.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Bh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qv=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function oo(o){return(o=String(o)).match(Bh)||o.match(qv)?o:"unsafe:"+o}function os(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function da(...o){const a={};for(const l of o)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const Mp=os("area,br,col,hr,img,wbr"),ud=os("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xp=os("rp,rt"),Xc=da(Mp,da(ud,os("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),da(xp,os("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),da(xp,ud)),ha=os("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fa=os("srcset"),qh=da(ha,fa,os("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),os("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jc=os("script,style,template");class $h{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Xc.hasOwnProperty(l))return this.sanitizedSomething=!0,!Jc.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),b=m.name,E=b.toLowerCase();if(!qh.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let T=m.value;ha[E]&&(T=oo(T)),fa[E]&&(o=T,T=(o=String(o)).split(",").map(a=>oo(a.trim())).join(", ")),this.buf.push(" ",b,'="',qm(T),'"')}var o;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Xc.hasOwnProperty(l)&&!Mp.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(qm(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const pa=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hm=/([^\#-~ |!])/g;function qm(o){return o.replace(/&/g,"&amp;").replace(pa,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Hm,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ss;function As(o,a){let l=null;try{Ss=Ss||function Yc(o){const a=new Uh(o);return function Ap(){try{return!!(new window.DOMParser).parseFromString(Yl(""),"text/html")}catch(o){return!1}}()?new Vh(a):a}(o);let d=a?String(a):"";l=Ss.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=l.innerHTML,l=Ss.getInertBodyElement(d)}while(d!==m);return Yl((new $h).sanitizeChildren(eu(l)||l))}finally{if(l){const d=eu(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function eu(o){return"content"in o&&function Gh(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Dn=(()=>((Dn=Dn||{})[Dn.NONE=0]="NONE",Dn[Dn.HTML=1]="HTML",Dn[Dn.STYLE=2]="STYLE",Dn[Dn.SCRIPT=3]="SCRIPT",Dn[Dn.URL=4]="URL",Dn[Dn.RESOURCE_URL=5]="RESOURCE_URL",Dn))();function Rp(o){const a=pd();return a?Ql(a.sanitize(Dn.HTML,o)||""):ua(o,"HTML")?Ql(zn(o)):As(Ga(),te(o))}function tu(o){const a=pd();return a?a.sanitize(Dn.URL,o)||"":ua(o,"URL")?zn(o):oo(te(o))}function pd(){const o=ke();return o&&o[12]}const zh="__ngContext__";function Ir(o,a){o[zh]=a}function ma(o){const a=function ul(o){return o[zh]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Lo(o){return o.ngOriginalError}function Qh(o,...a){o.error(...a)}class _a{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=function $m(o){return o&&o.ngErrorLogger||Qh}(a);d(this._console,"ERROR",a),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Lo(a);for(;l&&Lo(l);)l=Lo(l);return l||null}}const Zm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function ls(o){return o instanceof Function?o():o}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function ee(o,a){return undefined(o,a)}function it(o){const a=o[3];return $r(a)?a[3]:a}function ar(o){return ya(o[13])}function qi(o){return ya(o[4])}function ya(o){for(;null!==o&&!$r(o);)o=o[4];return o}function va(o,a,l,d,f){if(null!=d){let m,b=!1;$r(d)?m=d:ai(d)&&(b=!0,d=d[0]);const E=xn(d);0===o&&null!==l?null==f?QE(a,l,E):ic(a,l,E,f||null,!0):1===o&&null!==l?ic(a,l,E,f||null,!0):2===o?function lf(o,a,l){const d=t_(o,a);d&&function JE(o,a,l,d){Mn(o)?o.removeChild(a,l,d):a.removeChild(l)}(o,d,a,l)}(a,E,b):3===o&&a.destroyNode(E),null!=m&&function Xe(o,a,l,d,f){const m=l[7];m!==xn(l)&&va(a,o,d,m,f);for(let E=10;E<l.length;E++){const T=l[E];dt(T[1],T,o,a,d,m)}}(a,o,m,l,f)}}function rc(o,a,l){return Mn(o)?o.createElement(a,l):null===l?o.createElement(a):o.createElementNS(l,a)}function Yv(o,a){const l=o[9],d=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Ol(f,-1)),l.splice(d,1)}function rf(o,a){if(o.length<=10)return;const l=10+a,d=o[l];if(d){const f=d[17];null!==f&&f!==o&&Yv(f,d),a>0&&(o[l-1][4]=d[4]);const m=No(o,10+a);!function Lp(o,a){dt(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const b=m[19];null!==b&&b.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Ms(o,a){if(!(256&a[2])){const l=a[11];Mn(l)&&l.destroyNode&&dt(o,a,l,3,null,null),function Xm(o){let a=o[13];if(!a)return e_(o[1],o);for(;a;){let l=null;if(ai(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==o;)ai(a)&&e_(a[1],a),a=a[3];null===a&&(a=o),ai(a)&&e_(a[1],a),l=a&&a[4]}a=l}}(a)}}function e_(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function sf(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof Xn)){const m=l[d+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const E=f[m[b]],T=m[b+1];try{T.call(E)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function ZE(o,a){const l=o.cleanup,d=a[7];let f=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const b=l[m+1],E="function"==typeof b?b(a):xn(a[b]),T=d[f=l[m+2]],M=l[m+3];"boolean"==typeof M?E.removeEventListener(l[m],T,M):M>=0?d[f=M]():d[f=-M].unsubscribe(),m+=2}else{const b=d[f=l[m+1]];l[m].call(b)}if(null!==d){for(let m=f+1;m<d.length;m++)d[m]();a[7]=null}}(o,a),1===a[1].type&&Mn(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&$r(a[3])){l!==a[3]&&Yv(l,a);const d=a[19];null!==d&&d.detachView(o)}}}function KE(o,a,l){return function YE(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===Ht.None||f===Ht.Emulated)return null}return zr(d,l)}(o,a.parent,l)}function ic(o,a,l,d,f){Mn(o)?o.insertBefore(a,l,d,f):a.insertBefore(l,d,f)}function QE(o,a,l){Mn(o)?o.appendChild(a,l):a.appendChild(l)}function XE(o,a,l,d,f){null!==d?ic(o,a,l,d,f):QE(o,a,l)}function t_(o,a){return Mn(o)?o.parentNode(a):a.parentNode}function eC(o,a,l){return di(o,a,l)}let di=function Qv(o,a,l){return 40&o.type?zr(o,l):null};function af(o,a,l,d){const f=KE(o,d,a),m=a[11],E=eC(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(l))for(let T=0;T<l.length;T++)XE(m,f,l[T],E,!1);else XE(m,f,l,E,!1)}function r_(o,a){if(null!==a){const l=a.type;if(3&l)return zr(a,o);if(4&l)return mr(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return r_(o,d);{const f=o[a.index];return $r(f)?mr(-1,f):xn(f)}}if(32&l)return ee(a,o)()||xn(o[a.index]);{const d=Be(o,a);return null!==d?Array.isArray(d)?d[0]:r_(it(o[16]),d):r_(o,a.next)}}return null}function Be(o,a){return null!==a?o[16][6].projection[a.projection]:null}function mr(o,a){const l=10+o+1;if(l<a.length){const d=a[l],f=d[1].firstChild;if(null!==f)return r_(d,f)}return a[7]}function Vp(o,a,l,d,f,m,b){for(;null!=l;){const E=d[l.index],T=l.type;if(b&&0===a&&(E&&Ir(xn(E),d),l.flags|=4),64!=(64&l.flags))if(8&T)Vp(o,a,l.child,d,f,m,!1),va(a,o,f,E,m);else if(32&T){const M=ee(l,d);let R;for(;R=M();)va(a,o,f,R,m);va(a,o,f,E,m)}else 16&T?tC(o,a,d,l,f,m):va(a,o,f,E,m);l=b?l.projectionNext:l.next}}function dt(o,a,l,d,f,m){Vp(l,d,o.firstChild,a,f,m,!1)}function tC(o,a,l,d,f,m){const b=l[16],T=b[6].projection[d.projection];if(Array.isArray(T))for(let M=0;M<T.length;M++)va(a,o,f,T[M],m);else Vp(o,a,T,b[3],f,m,!0)}function Oe(o,a,l){Mn(o)?o.setAttribute(a,"style",l):a.style.cssText=l}function Lr(o,a,l){Mn(o)?""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l):a.className=l}function Xv(o,a,l){let d=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===d||o.charCodeAt(f+m)<=32)return f}l=f+1}}const nC="ng-template";function dA(o,a,l){let d=0;for(;d<o.length;){let f=o[d++];if(l&&"class"===f){if(f=o[d],-1!==Xv(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function rC(o){return 4===o.type&&o.value!==nC}function hA(o,a,l){return a===(4!==o.type||l?o.value:nC)}function iC(o,a,l){let d=4;const f=o.attrs||[],m=function sC(o){for(let a=0;a<o.length;a++)if(rl(o[a]))return a;return o.length}(f);let b=!1;for(let E=0;E<a.length;E++){const T=a[E];if("number"!=typeof T){if(!b)if(4&d){if(d=2|1&d,""!==T&&!hA(o,T,l)||""===T&&1===a.length){if(ba(d))return!1;b=!0}}else{const M=8&d?T:a[++E];if(8&d&&null!==o.attrs){if(!dA(o.attrs,M,l)){if(ba(d))return!1;b=!0}continue}const V=VO(8&d?"class":T,f,rC(o),l);if(-1===V){if(ba(d))return!1;b=!0;continue}if(""!==M){let z;z=V>m?"":f[V+1].toLowerCase();const ne=8&d?z:null;if(ne&&-1!==Xv(ne,M,0)||2&d&&M!==z){if(ba(d))return!1;b=!0}}}}else{if(!b&&!ba(d)&&!ba(T))return!1;if(b&&ba(T))continue;b=!1,d=T|1&d}}return ba(d)||b}function ba(o){return 0==(1&o)}function VO(o,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let m=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function Zt(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function xs(o,a,l=!1){for(let d=0;d<a.length;d++)if(iC(o,a[d],l))return!0;return!1}function cf(o,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function Jv(o,a){return o?":not("+a.trim()+")":a}function hi(o){let a=o[0],l=1,d=2,f="",m=!1;for(;l<o.length;){let b=o[l];if("string"==typeof b)if(2&d){const E=o[++l];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!ba(b)&&(a+=Jv(m,f),f=""),d=b,m=m||!ba(d);l++}return""!==f&&(a+=Jv(m,f)),a}const St={};function eb(o){uf(Nt(),ke(),Er()+o,Lc())}function uf(o,a,l,d){if(!d)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&Ul(a,m,l)}else{const m=o.preOrderHooks;null!==m&&tl(a,m,0,l)}Cr(l)}function i_(o,a){return o<<17|a<<2}function On(o){return o>>17&32767}function Dr(o){return 2|o}function oc(o){return(131068&o)>>2}function hl(o,a){return-131069&o|a<<2}function ac(o){return 1|o}function fC(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],m=l[d+1];if(-1!==m){const b=o.data[m];ra(f),b.contentQueries(2,a[m],m)}}}function pl(o,a,l,d,f,m,b,E,T,M){const R=a.blueprint.slice();return R[0]=f,R[2]=140|d,Gs(R),R[3]=R[15]=o,R[8]=l,R[10]=b||o&&o[10],R[11]=E||o&&o[11],R[12]=T||o&&o[12]||null,R[9]=M||o&&o[9]||null,R[6]=m,R[16]=2==a.type?o[16]:R,R}function pf(o,a,l,d,f){let m=o.data[a];if(null===m)m=function p_(o,a,l,d,f){const m=Nl(),b=zs(),T=o.data[a]=function lb(o,a,l,d,f,m){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,l,a,d,f);return null===o.firstChild&&(o.firstChild=T),null!==m&&(b?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T)),T}(o,a,l,d,f),function yh(){return vt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=d,m.attrs=f;const b=function Ro(){const o=vt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return bi(m,!0),m}function wd(o,a,l,d){if(0===l)return-1;const f=a.length;for(let m=0;m<l;m++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function ao(o,a,l){Uc(a);try{const d=o.viewQuery;null!==d&&E_(1,d,l);const f=o.template;null!==f&&qp(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&fC(o,a),o.staticViewQueries&&E_(2,o.viewQuery,l);const m=o.components;null!==m&&function ff(o,a){for(let l=0;l<a.length;l++)fb(o,a[l])}(a,m)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Zs()}}function Ed(o,a,l,d){const f=a[2];if(256==(256&f))return;Uc(a);const m=Lc();try{Gs(a),function Vc(o){return vt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&qp(o,a,l,2,d);const b=3==(3&f);if(!m)if(b){const M=o.preOrderCheckHooks;null!==M&&Ul(a,M,null)}else{const M=o.preOrderHooks;null!==M&&tl(a,M,0,null),ko(a,0)}if(function EC(o){for(let a=ar(o);null!==a;a=qi(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const f=l[d],m=f[3];0==(1024&f[2])&&Ol(m,1),f[2]|=1024}}}(a),function wC(o){for(let a=ar(o);null!==a;a=qi(a))for(let l=10;l<a.length;l++){const d=a[l],f=d[1];Za(d)&&Ed(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&fC(o,a),!m)if(b){const M=o.contentCheckHooks;null!==M&&Ul(a,M)}else{const M=o.contentHooks;null!==M&&tl(a,M,1),ko(a,1)}!function bA(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)Cr(~f);else{const m=f,b=l[++d],E=l[++d];pp(b,m),E(2,a[m])}}}finally{Cr(-1)}}(o,a);const E=o.components;null!==E&&function wA(o,a){for(let l=0;l<a.length;l++)CC(o,a[l])}(a,E);const T=o.viewQuery;if(null!==T&&E_(2,T,d),!m)if(b){const M=o.viewCheckHooks;null!==M&&Ul(a,M)}else{const M=o.viewHooks;null!==M&&tl(a,M,2),ko(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Ol(a[3],-1))}finally{Zs()}}function gf(o,a,l,d){const f=a[10],m=!Lc(),b=Qn(a);try{m&&!b&&f.begin&&f.begin(),b&&ao(o,a,d),Ed(o,a,l,d)}finally{m&&!b&&f.end&&f.end()}}function qp(o,a,l,d,f){const m=Er(),b=2&d;try{Cr(-1),b&&a.length>20&&uf(o,a,20,Lc()),l(d,f)}finally{Cr(m)}}function $p(o,a,l){if($u(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const b=o.data[m];b.contentQueries&&b.contentQueries(1,l[m],m)}}}function Gp(o,a,l){!Xa()||(function mf(o,a,l,d){const f=l.directiveStart,m=l.directiveEnd;o.firstCreatePass||ji(l,a),Ir(d,a);const b=l.initialInputs;for(let E=f;E<m;E++){const T=o.data[E],M=Ni(T);M&&TA(a,l,T);const R=Xs(a,o,E,l);Ir(R,a),null!==b&&vC(0,E-f,R,T,0,b),M&&(Or(l.index,a)[8]=R)}}(o,a,l,zr(l,a)),128==(128&l.flags)&&function _C(o,a,l){const d=l.directiveStart,f=l.directiveEnd,b=l.index,E=function Fl(){return vt.lFrame.currentDirectiveIndex}();try{Cr(b);for(let T=d;T<f;T++){const M=o.data[T],R=a[T];Ku(T),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&db(M,R)}}finally{Cr(-1),Ku(E)}}(o,a,l))}function zp(o,a,l=zr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let m=0;m<d.length;m+=2){const b=d[m+1],E=-1===b?l(a,o):o[b];o[f++]=E}}}function g_(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=cc(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function cc(o,a,l,d,f,m,b,E,T,M){const R=20+d,V=R+f,z=function Vo(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:St);return l}(R,V),ne="function"==typeof M?M():M;return z[1]={type:o,blueprint:z,template:l,queries:null,viewQuery:E,declTNode:a,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:ne,incompleteFirstPass:!1}}function __(o,a,l,d){const f=lo(a);null===l?f.push(d):(f.push(l),o.firstCreatePass&&IC(o).push(d,f.length-1))}function cb(o,a,l){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,f):l[d]=[a,f]}return l}function Rs(o,a,l,d,f,m,b,E){const T=zr(a,l);let R,M=a.inputs;!E&&null!=M&&(R=M[d])?(SC(o,l,R,d,f),Rc(a)&&function gC(o,a){const l=Or(a,o);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function pC(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=b?b(f,a.value||"",d):f,Mn(m)?m.setProperty(T,d,f):En(d)||(T.setProperty?T.setProperty(d,f):T[d]=f))}function v_(o,a,l,d){let f=!1;if(Xa()){const m=function Zp(o,a,l){const d=o.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const b=d[m];xs(l,b.selectors,!1)&&(f||(f=[]),fn(ji(l,a),o,b.type),Ni(b)?(yC(o,l),f.unshift(b)):f.push(b))}return f}(o,a,l),b=null===d?null:{"":-1};if(null!==m){f=!0,Kp(l,o.data.length,m.length);for(let R=0;R<m.length;R++){const V=m[R];V.providersResolver&&V.providersResolver(V)}let E=!1,T=!1,M=wd(o,a,m.length,null);for(let R=0;R<m.length;R++){const V=m[R];l.mergedAttrs=Rt(l.mergedAttrs,V.hostAttrs),Yp(o,l,a,M,V),Vr(M,V,b),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const z=V.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),E=!0),!T&&(z.ngOnChanges||z.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),T=!0),M++}!function EA(o,a){const d=a.directiveEnd,f=o.data,m=a.attrs,b=[];let E=null,T=null;for(let M=a.directiveStart;M<d;M++){const R=f[M],V=R.inputs,z=null===m||rC(a)?null:bC(V,m);b.push(z),E=cb(V,M,E),T=cb(R.outputs,M,T)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=E,a.outputs=T}(o,l)}b&&function CA(o,a,l){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=l[a[f+1]];if(null==m)throw new Ne(-301,`Export of name '${a[f+1]}' not found!`);d.push(a[f],m)}}}(l,d,b)}return l.mergedAttrs=Rt(l.mergedAttrs,l.attrs),f}function au(o,a,l,d,f,m){const b=m.hostBindings;if(b){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const T=~a.index;(function mC(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=T&&E.push(T),E.push(d,f,b)}}function db(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function yC(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Vr(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;Ni(a)&&(l[""]=o)}}function Kp(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function Yp(o,a,l,d,f){o.data[d]=f;const m=f.factory||(f.factory=Fi(f.type)),b=new Xn(m,Ni(f),null);o.blueprint[d]=b,l[d]=b,au(o,a,0,d,wd(o,l,f.hostVars,St),f)}function TA(o,a,l){const d=zr(a,o),f=g_(l),m=o[10],b=cr(o,pl(o,f,null,l.onPush?64:16,d,a,m,m.createRenderer(d,l),null,null));o[a.index]=b}function Uo(o,a,l,d,f,m){const b=zr(o,a);!function hb(o,a,l,d,f,m,b){if(null==m)Mn(o)?o.removeAttribute(a,f,l):a.removeAttribute(f);else{const E=null==b?te(m):b(m,d||"",f);Mn(o)?o.setAttribute(a,f,E,l):l?a.setAttributeNS(l,f,E):a.setAttribute(f,E)}}(a[11],b,m,o.value,l,d,f)}function vC(o,a,l,d,f,m){const b=m[a];if(null!==b){const E=d.setInput;for(let T=0;T<b.length;){const M=b[T++],R=b[T++],V=b[T++];null!==E?d.setInput(l,V,M,R):l[R]=V}}}function bC(o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return l}function lu(o,a,l,d){return new Array(o,!0,!1,a,null,0,d,l,null,null)}function CC(o,a){const l=Or(a,o);if(Za(l)){const d=l[1];80&l[2]?Ed(d,l,d.template,l[8]):l[5]>0&&Td(l)}}function Td(o){for(let d=ar(o);null!==d;d=qi(d))for(let f=10;f<d.length;f++){const m=d[f];if(1024&m[2]){const b=m[1];Ed(b,m,b.template,m[8])}else m[5]>0&&Td(m)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=Or(l[d],o);Za(f)&&f[5]>0&&Td(f)}}function fb(o,a){const l=Or(a,o),d=l[1];(function IA(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(d,l),ao(d,l,l[8])}function cr(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Kt(o){for(;o;){o[2]|=64;const a=it(o);if(Gu(o)&&!a)return o;o=a}return null}function ur(o,a,l){const d=a[10];d.begin&&d.begin();try{Ed(o,a,o.template,l)}catch(f){throw DC(a,f),f}finally{d.end&&d.end()}}function Qp(o){!function w_(o){for(let a=0;a<o.components.length;a++){const l=o.components[a],d=ma(l),f=d[1];gf(f,d,f.template,l)}}(o[8])}function E_(o,a,l){ra(0),a(o,l)}const DA=(()=>Promise.resolve(null))();function lo(o){return o[7]||(o[7]=[])}function IC(o){return o.cleanup||(o.cleanup=[])}function DC(o,a){const l=o[9],d=l?l.get(_a,null):null;d&&d.handleError(a)}function SC(o,a,l,d,f){for(let m=0;m<l.length;){const b=l[m++],E=l[m++],T=a[b],M=o.data[b];null!==M.setInput?M.setInput(T,f,d,E):T[E]=f}}function jt(o,a,l){const d=Ui(a,o);!function md(o,a,l){Mn(o)?o.setValue(a,l):a.textContent=l}(o[11],d,l)}function T_(o,a,l){let d=l?o.styles:null,f=l?o.classes:null,m=0;if(null!==a)for(let b=0;b<a.length;b++){const E=a[b];"number"==typeof E?m=E:1==m?f=pe(f,E):2==m&&(d=pe(d,E+": "+a[++b]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=f:o.classesWithoutHost=f}const _f=new on("INJECTOR",-1);class pb{get(a,l=rs){if(l===rs){const d=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw d.name="NullInjectorError",d}return l}}const S_=new on("Set Injector scope."),yf={},SA={};let A_;function gb(){return void 0===A_&&(A_=new pb),A_}function AC(o,a=null,l=null,d){const f=MC(o,a,l,d);return f._resolveInjectorDefTypes(),f}function MC(o,a=null,l=null,d){return new AA(o,l,a||gb(),d)}class AA{constructor(a,l,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&Ts(l,E=>this.processProvider(E,a,l)),Ts([a],E=>this.processInjectorType(E,[],m)),this.records.set(_f,cu(void 0,this));const b=this.records.get(S_);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:me(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=rs,d=Ct.Default){this.assertNotDestroyed();const f=k(this),m=Kn(void 0);try{if(!(d&Ct.SkipSelf)){let E=this.records.get(a);if(void 0===E){const T=function OC(o){return"function"==typeof o||"object"==typeof o&&o instanceof on}(a)&&Ut(a);E=T&&this.injectableDefInScope(T)?cu(Id(a),yf):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&Ct.Self?gb():this.parent).get(a,l=d&Ct.Optional&&l===rs?null:l)}catch(b){if("NullInjectorError"===b.name){if((b[Wl]=b[Wl]||[]).unshift(me(a)),f)throw b;return function yn(o,a,l,d){const f=o[Wl];throw a[zc]&&f.unshift(a[zc]),o.message=function Tr(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let m=[];for(let b in a)if(a.hasOwnProperty(b)){let E=a[b];m.push(b+":"+("string"==typeof E?JSON.stringify(E):me(E)))}f=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${o.replace(al,"\n  ")}`}("\n"+o.message,f,l,d),o.ngTokenPath=f,o[Wl]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{Kn(m),k(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(me(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,"")}processInjectorType(a,l,d){if(!(a=ie(a)))return!1;let f=ri(a);const m=null==f&&a.ngModule||void 0,b=void 0===m?a:m,E=-1!==d.indexOf(b);if(void 0!==m&&(f=ri(m)),null==f)return!1;if(null!=f.imports&&!E){let R;d.push(b);try{Ts(f.imports,V=>{this.processInjectorType(V,l,d)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:z,providers:ne}=R[V];Ts(ne,Ce=>this.processProvider(Ce,z,ne||H))}}this.injectorDefTypes.add(b);const T=Fi(b)||(()=>new b);this.records.set(b,cu(T,yf));const M=f.providers;if(null!=M&&!E){const R=a;Ts(M,V=>this.processProvider(V,R,M))}return void 0!==m&&void 0!==a.providers}processProvider(a,l,d){let f=uu(a=ie(a))?a:ie(a&&a.provide);const m=function MA(o,a,l){return mb(o)?cu(void 0,o.useValue):cu(Kr(o),yf)}(a);if(uu(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=cu(void 0,yf,!0),b.factory=()=>tt(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,m)}hydrate(a,l){return l.value===yf&&(l.value=SA,l.value=l.factory()),"object"==typeof l.value&&l.value&&function kC(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ie(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Id(o){const a=Ut(o),l=null!==a?a.factory:Fi(o);if(null!==l)return l;if(o instanceof on)throw new Ne(204,"");if(o instanceof Function)return function xC(o){const a=o.length;if(a>0)throw Is(a,"?"),new Ne(204,"");const l=function ki(o){const a=o&&(o[ws]||o[mi]);if(a){const l=function xr(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Ne(204,"")}function Kr(o,a,l){let d;if(uu(o)){const f=ie(o);return Fi(f)||Id(f)}if(mb(o))d=()=>ie(o.useValue);else if(function gl(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...tt(o.deps||[]));else if(function eg(o){return!(!o||!o.useExisting)}(o))d=()=>J(ie(o.useExisting));else{const f=ie(o&&(o.useClass||o.provide));if(!function tg(o){return!!o.deps}(o))return Fi(f)||Id(f);d=()=>new f(...tt(o.deps))}return d}function cu(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function mb(o){return null!==o&&"object"==typeof o&&D in o}function uu(o){return"function"==typeof o}let co=(()=>{class o{static create(l,d){var f;if(Array.isArray(l))return AC({name:""},d,l,"");{const m=null!==(f=l.name)&&void 0!==f?f:"";return AC({name:m},l.parent,l.providers,m)}}}return o.THROW_IF_NOT_FOUND=rs,o.NULL=new pb,o.\u0275prov=Jt({token:o,providedIn:"any",factory:()=>J(_f)}),o.__NG_ELEMENT_ID__=-1,o})();function kA(o,a){wh(ma(o)[1],_n())}function jo(o){let a=function dr(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let f;if(Ni(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ne(903,"");f=a.\u0275dir}if(f){if(l){d.push(f);const b=o;b.inputs=Qr(o.inputs),b.declaredInputs=Qr(o.declaredInputs),b.outputs=Qr(o.outputs);const E=f.hostBindings;E&&dc(o,E);const T=f.viewQuery,M=f.contentQueries;if(T&&uo(o,T),M&&Dd(o,M),se(o.inputs,f.inputs),se(o.declaredInputs,f.declaredInputs),se(o.outputs,f.outputs),Ni(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const E=m[b];E&&E.ngInherit&&E(o),E===jo&&(l=!1)}}a=Object.getPrototypeOf(a)}!function ks(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Rt(f.hostAttrs,l=Rt(l,f.hostAttrs))}}(d)}function Qr(o){return o===ii?{}:o===H?[]:o}function uo(o,a){const l=o.viewQuery;o.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function Dd(o,a){const l=o.contentQueries;o.contentQueries=l?(d,f,m)=>{a(d,f,m),l(d,f,m)}:a}function dc(o,a){const l=o.hostBindings;o.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}let us=null;function Ai(){if(!us){const o=Ft.Symbol;if(o&&o.iterator)us=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(us=d)}}}return us}function Tf(o){return!!x_(o)&&(Array.isArray(o)||!(o instanceof Map)&&Ai()in o)}function x_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ea(o,a,l){return o[a]=l}function Xr(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Mi(o,a,l,d){const f=Xr(o,a,l);return Xr(o,a+1,d)||f}function hc(o,a,l,d){const f=ke();return Xr(f,Ws(),a)&&(Nt(),Uo(Bn(),f,o,a,l,d)),hc}function Ho(o,a,l,d){return Xr(o,Ws(),l)?a+te(l)+d:St}function Sd(o,a,l,d,f,m){const E=Mi(o,function Cs(){return vt.lFrame.bindingIndex}(),l,f);return ts(2),E?a+te(l)+d+te(f)+m:St}function Cb(o,a,l,d,f,m,b,E){const T=ke(),M=Nt(),R=o+20,V=M.firstCreatePass?function ng(o,a,l,d,f,m,b,E,T){const M=a.consts,R=pf(a,o,4,b||null,Bi(M,E));v_(a,l,R,Bi(M,T)),wh(a,R);const V=R.tViews=cc(2,R,d,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,R),V.queries=a.queries.embeddedTView(R)),R}(R,M,T,a,l,d,f,m,b):M.data[R];bi(V,!1);const z=T[11].createComment("");af(M,T,z,V),Ir(z,T),cr(T,T[R]=lu(z,T,z,V)),So(V)&&Gp(M,T,V),null!=b&&zp(T,V,E)}function P_(o){return es(function fp(){return vt.lFrame.contextLView}(),20+o)}function sg(o,a=Ct.Default){const l=ke();return null===l?J(o,a):ye(_n(),l,ie(o),a)}function JC(){throw new Error("invalid")}function Mf(o,a,l){const d=ke();return Xr(d,Ws(),a)&&Rs(Nt(),Bn(),d,o,a,d[11],l,!1),Mf}function yu(o,a,l,d,f){const b=f?"class":"style";SC(o,l,a.inputs[b],b,d)}function Rb(o,a,l,d){const f=ke(),m=Nt(),b=20+o,E=f[11],T=f[b]=rc(E,a,function _p(){return vt.lFrame.currentNamespace}()),M=m.firstCreatePass?function eT(o,a,l,d,f,m,b){const E=a.consts,M=pf(a,o,2,f,Bi(E,m));return v_(a,l,M,Bi(E,b)),null!==M.attrs&&T_(M,M.attrs,!1),null!==M.mergedAttrs&&T_(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(b,m,f,0,a,l,d):m.data[b];bi(M,!0);const R=M.mergedAttrs;null!==R&&Ju(E,T,R);const V=M.classes;null!==V&&Lr(E,T,V);const z=M.styles;null!==z&&Oe(E,T,z),64!=(64&M.flags)&&af(m,f,T,M),0===function Ya(){return vt.lFrame.elementDepthCount}()&&Ir(T,f),function xo(){vt.lFrame.elementDepthCount++}(),So(M)&&(Gp(m,f,M),$p(m,M,f)),null!==d&&zp(f,M)}function kb(){let o=_n();zs()?Zu():(o=o.parent,bi(o,!1));const a=o;!function Qa(){vt.lFrame.elementDepthCount--}();const l=Nt();l.firstCreatePass&&(wh(l,o),$u(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Bl(o){return 0!=(16&o.flags)}(a)&&yu(l,a,ke(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Hc(o){return 0!=(32&o.flags)}(a)&&yu(l,a,ke(),a.stylesWithoutHost,!1)}function Ob(o,a,l,d){Rb(o,a,l,d),kb()}function Pb(o,a,l){const d=ke(),f=Nt(),m=o+20,b=f.firstCreatePass?function j_(o,a,l,d,f){const m=a.consts,b=Bi(m,d),E=pf(a,o,8,"ng-container",b);return null!==b&&T_(E,b,!0),v_(a,l,E,Bi(m,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(m,f,d,a,l):f.data[m];bi(b,!0);const E=d[m]=d[11].createComment("");af(f,d,E,b),Ir(E,d),So(b)&&(Gp(f,d,b),$p(f,b,d)),null!=l&&zp(d,b)}function H_(){let o=_n();const a=Nt();zs()?Zu():(o=o.parent,bi(o,!1)),a.firstCreatePass&&(wh(a,o),$u(o)&&a.queries.elementEnd(o))}function q_(o,a,l){Pb(o,a,l),H_()}function $_(){return ke()}function kd(o){return!!o&&"function"==typeof o.then}function og(o){return!!o&&"function"==typeof o.subscribe}const G_=og;function Nb(o,a,l,d){const f=ke(),m=Nt(),b=_n();return function Lb(o,a,l,d,f,m,b,E){const T=So(d),R=o.firstCreatePass&&IC(o),V=a[8],z=lo(a);let ne=!0;if(3&d.type||E){const $e=zr(d,a),at=E?E($e):$e,Re=z.length,yt=E?$t=>E(xn($t[d.index])):d.index;if(Mn(l)){let $t=null;if(!E&&T&&($t=function Fb(o,a,l,d){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===l&&f[m+1]===d){const E=a[7],T=f[m+2];return E.length>T?E[T]:null}"string"==typeof b&&(m+=2)}return null}(o,a,f,d.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=m,$t.__ngLastListenerFn__=m,ne=!1;else{m=z_(d,a,V,m,!1);const un=l.listen(at,f,m);z.push(m,un),R&&R.push(f,yt,Re,Re+1)}}else m=z_(d,a,V,m,!0),at.addEventListener(f,m,b),z.push(m),R&&R.push(f,yt,Re,b)}else m=z_(d,a,V,m,!1);const Ce=d.outputs;let Ue;if(ne&&null!==Ce&&(Ue=Ce[f])){const $e=Ue.length;if($e)for(let at=0;at<$e;at+=2){const Wi=a[Ue[at]][Ue[at+1]].subscribe(m),xu=z.length;z.push(m,Wi),R&&R.push(f,d.index,xu,-(xu+1))}}}(m,f,f[11],b,o,a,!!l,d),Nb}function nT(o,a,l,d){try{return!1!==l(d)}catch(f){return DC(o,f),!1}}function z_(o,a,l,d,f){return function m(b){if(b===Function)return d;const E=2&o.flags?Or(o.index,a):a;0==(32&a[2])&&Kt(E);let T=nT(a,0,d,b),M=m.__ngNextListenerFn__;for(;M;)T=nT(a,0,M,b)&&T,M=M.__ngNextListenerFn__;return f&&!1===T&&(b.preventDefault(),b.returnValue=!1),T}}function Vb(o=1){return function mp(o){return(vt.lFrame.contextLView=function Tm(o,a){for(;o>0;)a=a[15],o--;return a}(o,vt.lFrame.contextLView))[8]}(o)}function Ub(o,a){let l=null;const d=function fA(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===d?xs(o,m,!0):cf(d,m))return f}else l=f}return l}function rT(o){const a=ke()[16][6];if(!a.projection){const d=a.projection=Is(o?o.length:1,null),f=d.slice();let m=a.child;for(;null!==m;){const b=o?Ub(m,o):0;null!==b&&(f[b]?f[b].projectionNext=m:d[b]=m,f[b]=m),m=m.next}}}function Bb(o,a=0,l){const d=ke(),f=Nt(),m=pf(f,20+o,16,null,l||null);null===m.projection&&(m.projection=a),Zu(),64!=(64&m.flags)&&function xt(o,a,l){tC(a[11],0,a,l,KE(o,l,a),eC(l.parent||a[6],l,a))}(f,d,m)}function lT(o,a,l,d,f){const m=o[l+1],b=null===a;let E=d?On(m):oc(m),T=!1;for(;0!==E&&(!1===T||b);){const R=o[E+1];$b(o[E],a)&&(T=!0,o[E+1]=d?ac(R):Dr(R)),E=d?On(R):oc(R)}T&&(o[l+1]=d?Dr(m):ac(m))}function $b(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Ei(o,a)>=0}const Jr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function cT(o){return o.substring(Jr.key,Jr.keyEnd)}function uT(o,a){const l=Jr.textEnd;return l===a?-1:(a=Jr.keyEnd=function qA(o,a,l){for(;a<l&&o.charCodeAt(a)>32;)a++;return a}(o,Jr.key=a,l),xf(o,a,l))}function xf(o,a,l){for(;a<l&&o.charCodeAt(a)<=32;)a++;return a}function Nd(o,a,l){return Ta(o,a,l,!1),Nd}function Rf(o,a){return Ta(o,a,null,!0),Rf}function Ca(o,a){for(let l=function pi(o){return function hT(o){Jr.key=0,Jr.keyEnd=0,Jr.value=0,Jr.valueEnd=0,Jr.textEnd=o.length}(o),uT(o,xf(o,0,Jr.textEnd))}(a);l>=0;l=uT(a,l))Zr(o,cT(a),!0)}function Ta(o,a,l,d){const f=ke(),m=Nt(),b=ts(2);m.firstUpdatePass&&gT(m,o,b,d),a!==St&&Xr(f,b,a)&&yT(m,m.data[Er()],f,f[11],o,f[b+1]=function Qb(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(zn(o)))),o}(a,l),d,b)}function pT(o,a){return a>=o.expandoStartIndex}function gT(o,a,l,d){const f=o.data;if(null===f[l+1]){const m=f[Er()],b=pT(o,l);Fd(m,d)&&null===a&&!b&&(a=!1),a=function $A(o,a,l,d){const f=function na(o){const a=vt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=kf(l=cg(null,o,a,l,d),a.attrs,d),m=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(l=cg(f,o,a,l,d),null===m){let T=function mT(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==oc(d))return o[On(d)]}(o,a,d);void 0!==T&&Array.isArray(T)&&(T=cg(null,o,a,T[1],d),T=kf(T,a.attrs,d),function Y_(o,a,l,d){o[On(l?a.classBindings:a.styleBindings)]=d}(o,a,d,T))}else m=function lg(o,a,l){let d;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)d=kf(d,o[m].hostAttrs,l);return kf(d,a.attrs,l)}(o,a,d)}return void 0!==m&&(d?a.residualClasses=m:a.residualStyles=m),l}(f,m,a,d),function jA(o,a,l,d,f,m){let b=m?a.classBindings:a.styleBindings,E=On(b),T=oc(b);o[d]=l;let R,M=!1;if(Array.isArray(l)){const V=l;R=V[1],(null===R||Ei(V,R)>0)&&(M=!0)}else R=l;if(f)if(0!==T){const z=On(o[E+1]);o[d+1]=i_(z,E),0!==z&&(o[z+1]=hl(o[z+1],d)),o[E+1]=function pA(o,a){return 131071&o|a<<17}(o[E+1],d)}else o[d+1]=i_(E,0),0!==E&&(o[E+1]=hl(o[E+1],d)),E=d;else o[d+1]=i_(T,0),0===E?E=d:o[T+1]=hl(o[T+1],d),T=d;M&&(o[d+1]=Dr(o[d+1])),lT(o,R,d,!0),lT(o,R,d,!1),function qb(o,a,l,d,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Ei(m,a)>=0&&(l[d+1]=ac(l[d+1]))}(a,R,o,d,m),b=i_(E,T),m?a.classBindings=b:a.styleBindings=b}(f,m,a,l,b,d)}}function cg(o,a,l,d,f){let m=null;const b=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<b&&(m=a[E],d=kf(d,m.hostAttrs,f),m!==o);)E++;return null!==o&&(l.directiveStylingLast=E),d}function kf(o,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const b=a[m];"number"==typeof b?f=b:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Zr(o,b,!!l||a[++m]))}return void 0===o?null:o}function yT(o,a,l,d,f,m,b,E){if(!(3&a.type))return;const T=o.data,M=T[E+1];vu(function lr(o){return 1==(1&o)}(M)?vT(T,a,l,f,oc(M),b):void 0)||(vu(m)||function _d(o){return 2==(2&o)}(M)&&(m=vT(T,null,l,f,E,b)),function _e(o,a,l,d,f){const m=Mn(o);if(a)f?m?o.addClass(l,d):l.classList.add(d):m?o.removeClass(l,d):l.classList.remove(d);else{let b=-1===d.indexOf("-")?void 0:A.DashCase;if(null==f)m?o.removeStyle(l,d,b):l.style.removeProperty(d);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),b|=A.Important),m?o.setStyle(l,d,f,b):l.style.setProperty(d,f,E?"important":"")}}}(d,b,Ui(Er(),l),f,m))}function vT(o,a,l,d,f,m){const b=null===a;let E;for(;f>0;){const T=o[f],M=Array.isArray(T),R=M?T[1]:T,V=null===R;let z=l[f+1];z===St&&(z=V?H:void 0);let ne=V?ol(z,d):R===d?z:void 0;if(M&&!vu(ne)&&(ne=ol(T,d)),vu(ne)&&(E=ne,b))return E;const Ce=o[f+1];f=b?On(Ce):oc(Ce)}if(null!==a){let T=m?a.residualClasses:a.residualStyles;null!=T&&(E=ol(T,d))}return E}function vu(o){return void 0!==o}function Fd(o,a){return 0!=(o.flags&(a?16:32))}function Q_(o,a=""){const l=ke(),d=Nt(),f=o+20,m=d.firstCreatePass?pf(d,f,1,a,null):d.data[f],b=l[f]=function ru(o,a){return Mn(o)?o.createText(a):o.createTextNode(a)}(l[11],a);af(d,l,b,m),bi(m,!1)}function Of(o){return bu("",o,""),Of}function bu(o,a,l){const d=ke(),f=Ho(d,o,a,l);return f!==St&&jt(d,Er(),f),bu}function ug(o,a,l,d,f){const m=ke(),b=Sd(m,o,a,l,d,f);return b!==St&&jt(m,Er(),b),ug}function wT(o,a,l){!function $o(o,a,l,d){const f=Nt(),m=ts(2);f.firstUpdatePass&&gT(f,null,m,d);const b=ke();if(l!==St&&Xr(b,m,l)){const E=f.data[Er()];if(Fd(E,d)&&!pT(f,m)){let T=d?E.classesWithoutHost:E.stylesWithoutHost;null!==T&&(l=pe(T,l||"")),yu(f,E,b,l,d)}else!function zA(o,a,l,d,f,m,b,E){f===St&&(f=H);let T=0,M=0,R=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==R||null!==V;){const z=T<f.length?f[T+1]:void 0,ne=M<m.length?m[M+1]:void 0;let Ue,Ce=null;R===V?(T+=2,M+=2,z!==ne&&(Ce=V,Ue=ne)):null===V||null!==R&&R<V?(T+=2,Ce=R):(M+=2,Ce=V,Ue=ne),null!==Ce&&yT(o,a,l,d,Ce,Ue,b,E),R=T<f.length?f[T]:null,V=M<m.length?m[M]:null}}(f,E,b,b[11],b[m+1],b[m+1]=function GA(o,a,l){if(null==l||""===l)return H;const d=[],f=zn(l);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(d,m,f[m]);else"string"==typeof f&&a(d,f);return d}(o,a,l),d,m)}}(Zr,Ca,Ho(ke(),o,a,l),!0)}function dg(o,a,l){const d=ke();return Xr(d,Ws(),a)&&Rs(Nt(),Bn(),d,o,a,d[11],l,!0),dg}const Go=void 0;var Nf=["en",[["a","p"],["AM","PM"],Go],[["AM","PM"],Go,Go],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Go,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Go,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Go,"{1} 'at' {0}",Go],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DT(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Ff={};function hg(o){const a=function aw(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=ly(a);if(l)return l;const d=a.split("-")[0];if(l=ly(d),l)return l;if("en"===d)return Nf;throw new Error(`Missing locale data for the locale "${o}".`)}function ay(o){return hg(o)[Tt.PluralCase]}function ly(o){return o in Ff||(Ff[o]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[o]),Ff[o]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const fg="en-US";let AT=fg;function Aw(o,a,l,d,f){if(o=ie(o),Array.isArray(o))for(let m=0;m<o.length;m++)Aw(o[m],a,l,d,f);else{const m=Nt(),b=ke();let E=uu(o)?o:ie(o.provide),T=Kr(o);const M=_n(),R=1048575&M.providerIndexes,V=M.directiveStart,z=M.providerIndexes>>20;if(uu(o)||!o.multi){const ne=new Xn(T,f,sg),Ce=xw(E,a,f?R:R+z,V);-1===Ce?(fn(ji(M,b),m,E),Mw(m,o,a.length),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ne),b.push(ne)):(l[Ce]=ne,b[Ce]=ne)}else{const ne=xw(E,a,R+z,V),Ce=xw(E,a,R,R+z),Ue=ne>=0&&l[ne],$e=Ce>=0&&l[Ce];if(f&&!$e||!f&&!Ue){fn(ji(M,b),m,E);const at=function YT(o,a,l,d,f){const m=new Xn(o,l,sg);return m.multi=[],m.index=a,m.componentProviders=0,ZT(m,f,d&&!l),m}(f?Rw:KT,l.length,f,d,T);!f&&$e&&(l[Ce].providerFactory=at),Mw(m,o,a.length,0),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(at),b.push(at)}else Mw(m,o,ne>-1?ne:Ce,ZT(l[f?Ce:ne],T,!f&&d));!f&&d&&$e&&l[Ce].componentProviders++}}}function Mw(o,a,l,d){const f=uu(a),m=function RC(o){return!!o.useClass}(a);if(f||m){const T=(m?ie(a.useClass):a).prototype.ngOnDestroy;if(T){const M=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=M.indexOf(l);-1===R?M.push(l,[d,T]):M[R+1].push(d,T)}else M.push(l,T)}}}function ZT(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function xw(o,a,l,d){for(let f=l;f<d;f++)if(a[f]===o)return f;return-1}function KT(o,a,l,d){return Dy(this.multi,[])}function Rw(o,a,l,d){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=Xs(l,l[1],this.providerFactory.index,d);m=E.slice(0,b),Dy(f,m);for(let T=b;T<E.length;T++)m.push(E[T])}else m=[],Dy(f,m);return m}function Dy(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function kw(o,a=[]){return l=>{l.providersResolver=(d,f)=>function WT(o,a,l){const d=Nt();if(d.firstCreatePass){const f=Ni(o);Aw(l,d.data,d.blueprint,f,!0),Aw(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class Yt{}class _M{resolveComponentFactory(a){throw function QT(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Sn=(()=>{class o{}return o.NULL=new _M,o})();function Gi(){return hs(_n(),ke())}function hs(o,a){return new Lf(zr(o,a))}let Lf=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=Gi,o})();function yM(o){return o instanceof Lf?o.nativeElement:o}class Nw{}let XT=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Fw(){const o=ke(),l=Or(_n().index,o);return function vM(o){return o[11]}(ai(l)?l:o)}(),o})(),bM=(()=>{class o{}return o.\u0275prov=Jt({token:o,providedIn:"root",factory:()=>null}),o})();class JT{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Wn=new JT("13.1.3"),eI={};function Lw(o,a,l,d,f=!1){for(;null!==l;){const m=a[l.index];if(null!==m&&d.push(xn(m)),$r(m))for(let E=10;E<m.length;E++){const T=m[E],M=T[1].firstChild;null!==M&&Lw(T[1],T,M,d)}const b=l.type;if(8&b)Lw(o,a,l.child,d);else if(32&b){const E=ee(l,a);let T;for(;T=E();)d.push(T)}else if(16&b){const E=Be(a,l);if(Array.isArray(E))d.push(...E);else{const T=it(a[16]);Lw(T[1],T,E,d,!0)}}l=f?l.projectionNext:l.next}return d}class er{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Lw(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if($r(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(rf(a,d),No(l,d))}this._attachedToViewContainer=!1}Ms(this._lView[1],this._lView)}onDestroy(a){__(this._lView[1],this._lView,null,a)}markForCheck(){Kt(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ur(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Di(o,a,l){Ja(!0);try{ur(o,a,l)}finally{Ja(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dl(o,a){dt(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=a}}class tI extends er{constructor(a){super(a),this._view=a}detectChanges(){Qp(this._view)}checkNoChanges(){!function Jn(o){Ja(!0);try{Qp(o)}finally{Ja(!1)}}(this._view)}get context(){return null}}class nI extends Sn{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=pr(a);return new Vw(l,this.ngModule)}}function rI(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}const wM=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Zm});class Vw extends Yt{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function At(o){return o.map(hi).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return rI(this.componentDef.inputs)}get outputs(){return rI(this.componentDef.outputs)}create(a,l,d,f){const m=(f=f||this.ngModule)?function EM(o,a){return{get:(l,d,f)=>{const m=o.get(l,eI,f);return m!==eI||d===eI?m:a.get(l,d,f)}}}(a,f.injector):a,b=m.get(Nw,Mo),E=m.get(bM,null),T=b.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",R=d?function ab(o,a,l){if(Mn(o))return o.selectRootElement(a,l===Ht.ShadowDom);let d="string"==typeof a?o.querySelector(a):a;return d.textContent="",d}(T,d,this.componentDef.encapsulation):rc(b.createRenderer(null,this.componentDef),M,function iI(o){const a=o.toLowerCase();return"svg"===a?Gr:"math"===a?"http://www.w3.org/1998/MathML/":null}(M)),V=this.componentDef.onPush?576:528,z=function Si(o,a){return{components:[],scheduler:o||Zm,clean:DA,playerHandler:a||null,flags:0}}(),ne=cc(0,null,null,1,0,null,null,null,null,null),Ce=pl(null,ne,z,V,null,null,b,T,E,m);let Ue,$e;Uc(Ce);try{const at=function uc(o,a,l,d,f,m){const b=l[1];l[20]=o;const T=pf(b,20,2,"#host",null),M=T.mergedAttrs=a.hostAttrs;null!==M&&(T_(T,M,!0),null!==o&&(Ju(f,o,M),null!==T.classes&&Lr(f,o,T.classes),null!==T.styles&&Oe(f,o,T.styles)));const R=d.createRenderer(o,a),V=pl(l,g_(a),null,a.onPush?64:16,l[20],T,d,R,m||null,null);return b.firstCreatePass&&(fn(ji(T,l),b,a.type),yC(b,T),Kp(T,l.length,1)),cr(l,V),l[20]=V}(R,this.componentDef,Ce,b,T);if(R)if(d)Ju(T,R,["ng-version",Wn.full]);else{const{attrs:Re,classes:yt}=function oC(o){const a=[],l=[];let d=1,f=2;for(;d<o.length;){let m=o[d];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++d]):8===f&&l.push(m);else{if(!ba(f))break;f=m}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Re&&Ju(T,R,Re),yt&&yt.length>0&&Lr(T,R,yt.join(" "))}if($e=Wa(ne,20),void 0!==l){const Re=$e.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const $t=l[yt];Re.push(null!=$t?Array.from($t):null)}}Ue=function Hn(o,a,l,d,f){const m=l[1],b=function Cd(o,a,l){const d=_n();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Yp(o,d,a,wd(o,a,1,null),l));const f=Xs(a,o,d.directiveStart,d);Ir(f,a);const m=zr(d,a);return m&&Ir(m,a),f}(m,l,a);if(d.components.push(b),o[8]=b,f&&f.forEach(T=>T(b,a)),a.contentQueries){const T=_n();a.contentQueries(1,b,T.directiveStart)}const E=_n();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Cr(E.index),au(l[1],E,0,E.directiveStart,E.directiveEnd,a),db(a,b)),b}(at,this.componentDef,Ce,z,[kA]),ao(ne,Ce,null)}finally{Zs()}return new TM(this.componentType,Ue,hs($e,Ce),Ce,$e)}}class TM extends class Sy{}{constructor(a,l,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new tI(f),this.componentType=a}get injector(){return new bt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class qd{}class ml{}const vg=new Map;class Uw extends qd{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nI(this);const d=gr(a);this._bootstrapComponents=ls(d.bootstrap),this._r3Injector=MC(a,l,[{provide:qd,useValue:this},{provide:Sn,useValue:this.componentFactoryResolver}],me(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=co.THROW_IF_NOT_FOUND,d=Ct.Default){return a===co||a===qd||a===_f?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Vf extends ml{constructor(a){super(),this.moduleType=a,null!==gr(a)&&function My(o){const a=new Set;!function l(d){const f=gr(d,!0),m=f.id;null!==m&&(function Eu(o,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${o} - ${me(a)} vs ${me(a.name)}`)}(m,vg.get(m),d),vg.set(m,d));const b=ls(f.imports);for(const E of b)a.has(E)||(a.add(E),l(E))}(o)}(a)}create(a){return new Uw(this.moduleType,a)}}function bg(o,a,l,d,f){return function Cu(o,a,l,d,f,m,b){const E=a+l;return Mi(o,E,f,m)?Ea(o,E+2,b?d.call(b,f,m):d(f,m)):Gd(o,E+2)}(ke(),Pr(),o,a,l,d,f)}function Gd(o,a){const l=o[a];return l===St?void 0:l}function Ry(o,a){const l=Nt();let d;const f=o+20;l.firstCreatePass?(d=function RM(o,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(o===d.name)return d}}(a,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,d.onDestroy)):d=l.data[f];const m=d.factory||(d.factory=Fi(d.type)),b=Kn(sg);try{const E=Cn(!1),T=m();return Cn(E),function Tb(o,a,l,d){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),a[l]=d}(l,ke(),f,T),T}finally{Kn(b)}}function Eg(o,a,l){const d=o+20,f=ke(),m=es(f,d);return function Tu(o,a){return o[1].data[a].pure}(f,d)?function Hw(o,a,l,d,f,m){const b=a+l;return Xr(o,b,f)?Ea(o,b+1,m?d.call(m,f):d(f)):Gd(o,b+1)}(f,Pr(),a,m.transform,l,m):m.transform(l)}function Ia(o){return a=>{setTimeout(o,void 0,a)}}const Os=class zd extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var f,m,b;let E=a,T=l||(()=>null),M=d;if(a&&"object"==typeof a){const V=a;E=null===(f=V.next)||void 0===f?void 0:f.bind(V),T=null===(m=V.error)||void 0===m?void 0:m.bind(V),M=null===(b=V.complete)||void 0===b?void 0:b.bind(V)}this.__isAsync&&(T=Ia(T),E&&(E=Ia(E)),M&&(M=Ia(M)));const R=super.subscribe({next:E,error:T,complete:M});return a instanceof re.w0&&a.add(R),R}};function Iu(){return this._results[Ai()]()}class Oy{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ai(),d=Oy.prototype;d[l]||(d[l]=Iu)}get changes(){return this._changes||(this._changes=new Os)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=Fr(a);(this._changesDetected=!function Ah(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],m=a[d];if(l&&(f=l(f),m=l(m)),m!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Uf=(()=>{class o{}return o.__NG_ELEMENT_ID__=Du,o})();const lI=Uf,Tg=class extends lI{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=pl(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(l)),ao(l,d,a),new er(d)}};function Du(){return Py(_n(),ke())}function Py(o,a){return 4&o.type?new Tg(a,o,hs(o,a)):null}let Ny=(()=>{class o{}return o.__NG_ELEMENT_ID__=OM,o})();function OM(){return Ww(_n(),ke())}const PM=Ny,Gw=class extends PM{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return hs(this._hostTNode,this._hostLView)}get injector(){return new bt(this._hostTNode,this._hostLView)}get parentInjector(){const a=sa(this._hostTNode,this._hostLView);if(lt(a)){const l=il(a,this._hostLView),d=Lt(a);return new bt(l[1].data[d+8],l)}return new bt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=cI(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const f=a.createEmbeddedView(l||{});return this.insert(f,d),f}createComponent(a,l,d,f,m){const b=a&&!function or(o){return"function"==typeof o}(a);let E;if(b)E=l;else{const V=l||{};E=V.index,d=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const T=b?a:new Vw(pr(a)),M=d||this.parentInjector;if(!m&&null==T.ngModule&&M){const V=M.get(qd,null);V&&(m=V)}const R=T.create(M,f,void 0,m);return this.insert(R.hostView,E),R}insert(a,l){const d=a._lView,f=d[1];if(function kl(o){return $r(o[3])}(d)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const V=d[3],z=new Gw(V,V[6],V[3]);z.detach(z.indexOf(a))}}const m=this._adjustIndex(l),b=this._lContainer;!function nf(o,a,l,d){const f=10+d,m=l.length;d>0&&(l[f-1][4]=a),d<m-10?(a[4]=l[f],$l(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const b=a[17];null!==b&&l!==b&&function Jm(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(b,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=128}(f,d,b,m);const E=mr(m,b),T=d[11],M=t_(T,b[7]);return null!==M&&function tf(o,a,l,d,f,m){d[0]=f,d[6]=a,dt(o,d,l,1,f,m)}(f,b[6],T,d,M,E),a.attachToViewContainerRef(),$l(zw(b),m,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=cI(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=rf(this._lContainer,l);d&&(No(zw(this._lContainer),l),Ms(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=rf(this._lContainer,l);return d&&null!=No(zw(this._lContainer),l)?new er(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function cI(o){return o[8]}function zw(o){return o[8]||(o[8]=[])}function Ww(o,a){let l;const d=a[o.index];if($r(d))l=d;else{let f;if(8&o.type)f=xn(d);else{const m=a[11];f=m.createComment("");const b=zr(o,a);ic(m,t_(m,b),f,function n_(o,a){return Mn(o)?o.nextSibling(a):a.nextSibling}(m,b),!1)}a[o.index]=l=lu(d,a,f,o),cr(a,l)}return new Gw(l,o,a)}class Zw{constructor(a){this.queryList=a,this.matches=null}clone(){return new Zw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Kw{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let m=0;m<d;m++){const b=l.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new Kw(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Jw(a,l).matches&&this.queries[l].setDirty()}}class Yw{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class Fy{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(a,f);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new Fy(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Ly{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Ly(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(a,l,uI(l,m)),this.matchTNodeWithReadOption(a,l,N(l,a,m,!1,!1))}else d===Uf?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,N(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Lf||f===Ny||f===Uf&&4&l.type)this.addMatch(l.index,-2);else{const m=N(l,a,f,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function uI(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function Vy(o,a,l,d){return-1===l?function Qw(o,a){return 11&o.type?hs(o,a):4&o.type?Py(o,a):null}(a,o):-2===l?function VM(o,a,l){return l===Lf?hs(a,o):l===Uf?Py(a,o):l===Ny?Ww(a,o):void 0}(o,a,d):Xs(o,o[1],l,a)}function Xw(o,a,l,d){const f=a[19].queries[d];if(null===f.matches){const m=o.data,b=l.matches,E=[];for(let T=0;T<b.length;T+=2){const M=b[T];E.push(M<0?null:Vy(a,m[M],b[T+1],l.metadata.read))}f.matches=E}return f.matches}function _l(o,a,l,d){const f=o.queries.getByIndex(l),m=f.matches;if(null!==m){const b=Xw(o,a,f,l);for(let E=0;E<m.length;E+=2){const T=m[E];if(T>0)d.push(b[E/2]);else{const M=m[E+1],R=a[-T];for(let V=10;V<R.length;V++){const z=R[V];z[17]===z[3]&&_l(z[1],z,M,d)}if(null!==R[9]){const V=R[9];for(let z=0;z<V.length;z++){const ne=V[z];_l(ne[1],ne,M,d)}}}}}return d}function dI(o){const a=ke(),l=Nt(),d=Yu();ra(d+1);const f=Jw(l,d);if(o.dirty&&Qn(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?_l(l,a,d,[]):Xw(l,a,f,d);o.reset(m,yM),o.notifyOnChanges()}return!0}return!1}function Su(o,a,l){const d=Nt();d.firstCreatePass&&(gI(d,new Yw(o,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),pI(d,ke(),a)}function hI(o,a,l,d){const f=Nt();if(f.firstCreatePass){const m=_n();gI(f,new Yw(a,l,d),m.index),function mI(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}pI(f,ke(),l)}function fI(){return function UM(o,a){return o[19].queries[a].queryList}(ke(),Yu())}function pI(o,a,l){const d=new Oy(4==(4&l));__(o,a,d,d.destroy),null===a[19]&&(a[19]=new Kw),a[19].queries.push(new Zw(d))}function gI(o,a,l){null===o.queries&&(o.queries=new Fy),o.queries.track(new Ly(a,l))}function Jw(o,a){return o.queries.getByIndex(a)}function _I(o,a){return Py(o,a)}function Ag(...o){}const $f=new on("Application Initializer");let ei=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Ag,this.reject=Ag,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(kd(m))l.push(m);else if(G_(m)){const b=new Promise((E,T)=>{m.subscribe({complete:E,error:T})});l.push(b)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(J($f,8))},o.\u0275prov=Jt({token:o,factory:o.\u0275fac}),o})();const l0=new on("AppId"),KM={provide:l0,useFactory:function AI(){return`${Ec()}${Ec()}${Ec()}`},deps:[]};function Ec(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Da=new on("Platform Initializer"),c0=new on("Platform ID"),qy=new on("appBootstrapListener");let Mg=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Jt({token:o,factory:o.\u0275fac}),o})();const $y=new on("LocaleId"),QM=new on("DefaultCurrencyCode");class oP{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let u0=(()=>{class o{compileModuleSync(l){return new Vf(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),m=ls(gr(l).declarations).reduce((b,E)=>{const T=pr(E);return T&&b.push(new Vw(T)),b},[]);return new oP(d,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Jt({token:o,factory:o.\u0275fac}),o})();const aP=(()=>Promise.resolve(0))();function xI(o){"undefined"==typeof Zone?aP.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class zo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Os(!1),this.onMicrotaskEmpty=new Os(!1),this.onStable=new Os(!1),this.onError=new Os(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function lP(){let o=Ft.requestAnimationFrame,a=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function kI(o){const a=()=>{!function uP(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Ft,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,d0(o),o.isCheckStableRunning=!0,RI(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),d0(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,m,b,E)=>{try{return OI(o),l.invokeTask(f,m,b,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),ti(o)}},onInvoke:(l,d,f,m,b,E,T)=>{try{return OI(o),l.invoke(f,m,b,E,T)}finally{o.shouldCoalesceRunChangeDetection&&a(),ti(o)}},onHasTask:(l,d,f,m)=>{l.hasTask(f,m),d===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,d0(o),RI(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,f,m)=>(l.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(zo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,a,cP,Ag,Ag);try{return m.runTask(b,l,d)}finally{m.cancelTask(b)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const cP={};function RI(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function d0(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function OI(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function ti(o){o._nesting--,RI(o)}class Sa{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Os,this.onMicrotaskEmpty=new Os,this.onStable=new Os,this.onError=new Os}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}let xg=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zo.assertNotInAngularZone(),xI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xI(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(J(zo))},o.\u0275prov=Jt({token:o,factory:o.\u0275fac}),o})(),Gy=(()=>{class o{constructor(){this._applications=new Map,h0.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return h0.findTestabilityInTree(this,l,d)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Jt({token:o,factory:o.\u0275fac}),o})();class JM{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function ex(o){h0=o}let Wo,h0=new JM;const PI=new on("AllowMultipleToken");class gs{constructor(a,l){this.name=a,this.token=l}}function f0(o,a,l=[]){const d=`Platform: ${a}`,f=new on(d);return(m=[])=>{let b=Rg();if(!b||b.injector.get(PI,!1))if(o)o(l.concat(m).concat({provide:f,useValue:!0}));else{const E=l.concat(m).concat({provide:f,useValue:!0},{provide:S_,useValue:"platform"});!function zy(o){if(Wo&&!Wo.destroyed&&!Wo.injector.get(PI,!1))throw new Ne(400,"");Wo=o.get(Wy);const a=o.get(Da,null);a&&a.forEach(l=>l())}(co.create({providers:E,name:d}))}return function rx(o){const a=Rg();if(!a)throw new Ne(401,"");return a}()}}function Rg(){return Wo&&!Wo.destroyed?Wo:null}let Wy=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const E=function p0(o,a){let l;return l="noop"===o?new Sa:("zone.js"===o?void 0:o)||new zo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),T=[{provide:zo,useValue:E}];return E.run(()=>{const M=co.create({providers:T,parent:this.injector,name:l.moduleType.name}),R=l.create(M),V=R.injector.get(_a,null);if(!V)throw new Ne(402,"");return E.runOutsideAngular(()=>{const z=E.onError.subscribe({next:ne=>{V.handleError(ne)}});R.onDestroy(()=>{g0(this._modules,R),z.unsubscribe()})}),function ix(o,a,l){try{const d=l();return kd(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(V,E,()=>{const z=R.injector.get(ei);return z.runInitializers(),z.donePromise.then(()=>(function nM(o){Le(o,"Expected localeId to be defined"),"string"==typeof o&&(AT=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get($y,fg)||fg),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,d=[]){const f=FI({},d);return function tx(o,a,l){const d=new Vf(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(l){const d=l.injector.get(kg);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Ne(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(J(co))},o.\u0275prov=Jt({token:o,factory:o.\u0275fac}),o})();function FI(o,a){return Array.isArray(a)?a.reduce(FI,o):Object.assign(Object.assign({},o),a)}let kg=(()=>{class o{constructor(l,d,f,m,b){this._zone=l,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new L.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),T=new L.y(M=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{zo.assertNotInAngularZone(),xI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{zo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,he.T)(E,T.pipe((0,ce.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Ne(405,"");let f;f=l instanceof Yt?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const m=function nx(o){return o.isBoundToModule}(f)?void 0:this._injector.get(qd),E=f.create(co.NULL,[],d||f.selector,m),T=E.location.nativeElement,M=E.injector.get(xg,null),R=M&&E.injector.get(Gy);return M&&R&&R.registerApplication(T,M),E.onDestroy(()=>{this.detachView(E.hostView),g0(this.components,E),R&&R.unregisterApplication(T)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;g0(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(qy,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(J(zo),J(co),J(_a),J(Sn),J(ei))},o.\u0275prov=Jt({token:o,factory:o.\u0275fac}),o})();function g0(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let m0=!0,Pg=!1;function VI(){return Pg=!0,m0}function sx(){if(Pg)throw new Error("Cannot enable prod mode after platform setup.");m0=!1}let BI=(()=>{class o{}return o.__NG_ELEMENT_ID__=_0,o})();function _0(o){return function jI(o,a,l){if(Rc(o)&&!l){const d=Or(o.index,a);return new er(d,d)}return 47&o.type?new er(a[16],a):null}(_n(),ke(),16==(16&o))}class WI{constructor(){}supports(a){return Tf(a)}create(a){return new cx(a)}}const lx=(o,a)=>a;class cx{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||lx}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,m=null;for(;l||d;){const b=!d||l&&l.currentIndex<Lg(d,f,m)?l:d,E=Lg(b,f,m),T=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(l=l._next,null==b.previousIndex)f++;else{m||(m=[]);const M=E-f,R=T-f;if(M!=R){for(let z=0;z<M;z++){const ne=z<m.length?m[z]:m[z]=0,Ce=ne+z;R<=Ce&&Ce<M&&(m[z]=ne+1)}m[b.previousIndex]=R-M}}E!==T&&a(b,E,T)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Tf(a))throw new Ne(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,b,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)m=a[E],b=this._trackByFn(E,m),null!==l&&Object.is(l.trackById,b)?(d&&(l=this._verifyReinsertion(l,m,b,E)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,b,E),d=!0),l=l._next}else f=0,function OA(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Ai()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,E=>{b=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,b)?(d&&(l=this._verifyReinsertion(l,E,b,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,b,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,m,f)):a=this._addAfter(new ux(l,d),m,f),a}_verifyReinsertion(a,l,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new ZI),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZI),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class ux{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dx{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class ZI{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new dx,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lg(o,a,l){const d=o.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class T0{constructor(){}supports(a){return a instanceof Map||x_(a)}create(){return new KI}}class KI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||x_(a)))throw new Ne(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const d=new I0(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class I0{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function YI(){return new Xy([new WI])}let Xy=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||YI()),deps:[[o,new vn,new pn]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Ne(901,"")}}return o.\u0275prov=Jt({token:o,providedIn:"root",factory:YI}),o})();function D0(){return new Vg([new T0])}let Vg=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||D0()),deps:[[o,new vn,new pn]]}}find(l){const d=this.factories.find(m=>m.supports(l));if(d)return d;throw new Ne(901,"")}}return o.\u0275prov=Jt({token:o,providedIn:"root",factory:D0}),o})();const QI=[new T0],JI=new Xy([new WI]),wP=new Vg(QI),CP=f0(null,"core",[{provide:c0,useValue:"unknown"},{provide:Wy,deps:[co]},{provide:Gy,deps:[]},{provide:Mg,deps:[]}]),eD=[{provide:kg,useClass:kg,deps:[zo,co,_a,Sn,ei]},{provide:wM,deps:[zo],useFactory:function fx(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:ei,useClass:ei,deps:[[new pn,$f]]},{provide:u0,useClass:u0,deps:[]},KM,{provide:Xy,useFactory:function TP(){return JI},deps:[]},{provide:Vg,useFactory:function S0(){return wP},deps:[]},{provide:$y,useFactory:function IP(o){return o||function hx(){return"undefined"!=typeof $localize&&$localize.locale||fg}()},deps:[[new Gn($y),new pn,new vn]]},{provide:QM,useValue:"USD"}];let tD=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(J(kg))},o.\u0275mod=Nn({type:o}),o.\u0275inj=en({providers:eD}),o})()},3942:(ht,Se,F)=>{"use strict";F.d(Se,{Z:()=>Ne});var c=F(2090),re=F(4859),L=F(9681),he=F(1877);class ce{constructor(te,ae){this._delegate=te,this.firebase=ae,(0,L._addComponent)(te,new re.wA("app-compat",()=>this,"PUBLIC")),this.container=te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this._delegate.automaticDataCollectionEnabled=te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(te=>{this._delegate.checkDestroyed(),te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(te,ae=L._DEFAULT_ENTRY_NAME){var Ee;this._delegate.checkDestroyed();const Ae=this._delegate.container.getProvider(te);return!Ae.isInitialized()&&"EXPLICIT"===(null===(Ee=Ae.getComponent())||void 0===Ee?void 0:Ee.instantiationMode)&&Ae.initialize(),Ae.getImmediate({identifier:ae})}_removeServiceInstance(te,ae=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(te).clearInstance(ae)}_addComponent(te){(0,L._addComponent)(this._delegate,te)}_addOrOverwriteComponent(te){(0,L._addOrOverwriteComponent)(this._delegate,te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const He=function me(He){const te={},ae={__esModule:!0,initializeApp:function ge(Qe,fe={}){const B=L.initializeApp(Qe,fe);if((0,c.r3)(te,B.name))return te[B.name];const q=new He(B,ae);return te[B.name]=q,q},app:Ae,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Me(Qe){const fe=Qe.name,B=fe.replace("-compat","");if(L._registerComponent(Qe)&&"PUBLIC"===Qe.type){const q=(W=Ae())=>{if("function"!=typeof W[B])throw se.create("invalid-app-argument",{appName:fe});return W[B]()};void 0!==Qe.serviceProps&&(0,c.ZB)(q,Qe.serviceProps),ae[B]=q,He.prototype[B]=function(...W){return this._getService.bind(this,fe).apply(this,Qe.multipleInstances?W:[])}}return"PUBLIC"===Qe.type?ae[B]:null},removeApp:function Ee(Qe){delete te[Qe]},useAsService:function nt(Qe,fe){return"serverAuth"===fe?null:fe},modularAPIs:L}};function Ae(Qe){if(!(0,c.r3)(te,Qe=Qe||L._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Qe});return te[Qe]}return ae.default=ae,Object.defineProperty(ae,"apps",{get:function Fe(){return Object.keys(te).map(Qe=>te[Qe])}}),Ae.App=He,ae}(ce);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function te(ae){(0,c.ZB)(He,ae)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),He}(),G=new he.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=$;!function xe(He){(0,L.registerVersion)("@firebase/app-compat","0.1.19",He)}()},9681:(ht,Se,F)=>{"use strict";F.r(Se),F.d(Se,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>ws,_DEFAULT_ENTRY_NAME:()=>Le,_addComponent:()=>An,_addOrOverwriteComponent:()=>Jt,_apps:()=>ln,_clearComponents:()=>bs,_components:()=>It,_getProvider:()=>en,_registerComponent:()=>ni,_removeServiceInstance:()=>Ut,deleteApp:()=>Ct,getApp:()=>mi,getApps:()=>Es,initializeApp:()=>Eo,onLog:()=>Kn,registerVersion:()=>qn,setLogLevel:()=>Co});var c=F(5861),re=F(4859),L=F(1877),he=F(2090),ce=F(2940);class we{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(qe=>{if(function se(De){const Te=De.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(qe)){const st=qe.getImmediate();return`${st.library}/${st.version}`}return null}).filter(qe=>qe).join(" ")}}const me="@firebase/app",$=new L.Yd("@firebase/app"),Le="[DEFAULT]",ct={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,It=new Map;function An(De,Te){try{De.container.addComponent(Te)}catch(qe){$.debug(`Component ${Te.name} failed to register with FirebaseApp ${De.name}`,qe)}}function Jt(De,Te){De.container.addOrOverwriteComponent(Te)}function ni(De){const Te=De.name;if(It.has(Te))return $.debug(`There were multiple attempts to register component ${Te}.`),!1;It.set(Te,De);for(const qe of ln.values())An(qe,De);return!0}function en(De,Te){const qe=De.container.getProvider("heartbeat").getImmediate({optional:!0});return qe&&qe.triggerHeartbeat(),De.container.getProvider(Te)}function Ut(De,Te,qe=Le){en(De,Te).clearInstance(qe)}function bs(){It.clear()}const xr=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ri{constructor(Te,qe,st){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},qe),this._name=qe.name,this._automaticDataCollectionEnabled=qe.automaticDataCollectionEnabled,this._container=st,this.container.addComponent(new re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}const ws="9.6.8";function Eo(De,Te={}){"object"!=typeof Te&&(Te={name:Te});const qe=Object.assign({name:Le,automaticDataCollectionEnabled:!1},Te),st=qe.name;if("string"!=typeof st||!st)throw xr.create("bad-app-name",{appName:String(st)});const Ot=ln.get(st);if(Ot){if((0,he.vZ)(De,Ot.options)&&(0,he.vZ)(qe,Ot.config))return Ot;throw xr.create("duplicate-app",{appName:st})}const mt=new re.H0(st);for(const Nn of It.values())mt.addComponent(Nn);const sn=new ri(De,qe,mt);return ln.set(st,sn),sn}function mi(De=Le){const Te=ln.get(De);if(!Te)throw xr.create("no-app",{appName:De});return Te}function Es(){return Array.from(ln.values())}function Ct(De){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,c.Z)(function*(De){const Te=De.name;ln.has(Te)&&(ln.delete(Te),yield Promise.all(De.container.getProviders().map(qe=>qe.delete())),De.isDeleted=!0)})).apply(this,arguments)}function qn(De,Te,qe){var st;let Ot=null!==(st=ct[De])&&void 0!==st?st:De;qe&&(Ot+=`-${qe}`);const mt=Ot.match(/\s|\//),sn=Te.match(/\s|\//);if(mt||sn){const Nn=[`Unable to register library "${Ot}" with version "${Te}":`];return mt&&Nn.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),mt&&sn&&Nn.push("and"),sn&&Nn.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void $.warn(Nn.join(" "))}ni(new re.wA(`${Ot}-version`,()=>({library:Ot,version:Te}),"VERSION"))}function Kn(De,Te){if(null!==De&&"function"!=typeof De)throw xr.create("invalid-log-argument");(0,L.Am)(De,Te)}function Co(De){(0,L.Ub)(De)}const Vn="firebase-heartbeat-store";let Pi=null;function To(){return Pi||(Pi=(0,ce.openDb)("firebase-heartbeat-database",1,De=>{0===De.oldVersion&&De.createObjectStore(Vn)}).catch(De=>{throw xr.create("storage-open",{originalErrorMessage:De.message})})),Pi}function ft(){return(ft=(0,c.Z)(function*(De){try{return(yield To()).transaction(Vn).objectStore(Vn).get(Ls(De))}catch(Te){throw xr.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function wt(De,Te){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,c.Z)(function*(De,Te){try{const st=(yield To()).transaction(Vn,"readwrite");return yield st.objectStore(Vn).put(Te,Ls(De)),st.complete}catch(qe){throw xr.create("storage-set",{originalErrorMessage:qe.message})}})).apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(De){try{const qe=(yield To()).transaction(Vn,"readwrite");return yield qe.objectStore(Vn).delete(Ls(De)),qe.complete}catch(Te){throw xr.create("storage-delete",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function Ls(De){return`${De.name}!${De.options.appId}`}class H{constructor(Te){this.container=Te,this._heartbeatsCache=null;const qe=this.container.getProvider("app").getImmediate();this._storage=new Ie(qe),this._heartbeatsCachePromise=this._storage.read().then(st=>(this._heartbeatsCache=st,st))}triggerHeartbeat(){var Te=this;return(0,c.Z)(function*(){const st=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ot=function Y(){return(new Date).toISOString().substring(0,10)}();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),!Te._heartbeatsCache.some(mt=>mt.date===Ot))return Te._heartbeatsCache.push({date:Ot,userAgent:st}),Te._heartbeatsCache=Te._heartbeatsCache.filter(mt=>{const sn=new Date(mt.date).valueOf();return Date.now()-sn<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,c.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache)return"";const{heartbeatsToSend:qe,unsentEntries:st}=function Q(De,Te=1024){const qe=[];let st=De.slice();for(const Ot of De){const mt=qe.find(sn=>sn.userAgent===Ot.userAgent);if(mt){if(mt.dates.push(Ot.date),oe(qe)>Te){mt.dates.pop();break}}else if(qe.push({userAgent:Ot.userAgent,dates:[Ot.date]}),oe(qe)>Te){qe.pop();break}st=st.slice(1)}return{heartbeatsToSend:qe,unsentEntries:st}}(Te._heartbeatsCache),Ot=(0,he.h$)(JSON.stringify({version:2,heartbeats:qe}));return st.length>0?(Te._heartbeatsCache=st,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache=null,Te._storage.deleteAll()),Ot})()}}class Ie{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,c.Z)(function*(){if(yield Te._canUseIndexedDBPromise){const st=yield function Ht(De){return ft.apply(this,arguments)}(Te.app);return(null==st?void 0:st.heartbeats)||[]}return[]})()}overwrite(Te){var qe=this;return(0,c.Z)(function*(){if(yield qe._canUseIndexedDBPromise)return wt(qe.app,{heartbeats:Te})})()}add(Te){var qe=this;return(0,c.Z)(function*(){if(yield qe._canUseIndexedDBPromise){const Ot=yield qe.read();return wt(qe.app,{heartbeats:[...Ot,...Te]})}})()}delete(Te){var qe=this;return(0,c.Z)(function*(){if(yield qe._canUseIndexedDBPromise){const Ot=yield qe.read();return wt(qe.app,{heartbeats:Ot.filter(mt=>!Te.includes(mt))})}})()}deleteAll(){var Te=this;return(0,c.Z)(function*(){if(yield Te._canUseIndexedDBPromise)return function Ji(De){return Ft.apply(this,arguments)}(Te.app)})()}}function oe(De){return(0,he.h$)(JSON.stringify({version:2,heartbeats:De})).length}!function Je(De){ni(new re.wA("platform-logger",Te=>new we(Te),"PRIVATE")),ni(new re.wA("heartbeat",Te=>new H(Te),"PRIVATE")),qn(me,"0.7.18",De),qn(me,"0.7.18","esm2017"),qn("fire-js","")}("")},4859:(ht,Se,F)=>{"use strict";F.d(Se,{H0:()=>me,wA:()=>L,zt:()=>ce});var c=F(5861),re=F(2090);class L{constructor($,G,ie){this.name=$,this.instanceFactory=G,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const he="[DEFAULT]";class ce{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const ie=new re.BH;if(this.instancesDeferred.set(G,ie),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:G});Ge&&ie.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const ie=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ge=null!==(G=null==$?void 0:$.optional)&&void 0!==G&&G;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(xe){if(Ge)return null;throw xe}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function se(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:he})}catch(G){}for(const[G,ie]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(G);try{const xe=this.getOrInitializeService({instanceIdentifier:Ge});ie.resolve(xe)}catch(xe){}}}}clearInstance($=he){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,c.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...G.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=he){return this.instances.has($)}getOptions($=he){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,ie=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ie,options:G});for(const[xe,Ne]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(xe)&&Ne.resolve(Ge);return Ge}onInit($,G){var ie;const Ge=this.normalizeInstanceIdentifier(G),xe=null!==(ie=this.onInitCallbacks.get(Ge))&&void 0!==ie?ie:new Set;xe.add($),this.onInitCallbacks.set(Ge,xe);const Ne=this.instances.get(Ge);return Ne&&$(Ne,Ge),()=>{xe.delete($)}}invokeOnInitCallbacks($,G){const ie=this.onInitCallbacks.get(G);if(ie)for(const Ge of ie)try{Ge($,G)}catch(xe){}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let ie=this.instances.get($);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===he?void 0:pe),options:G}),this.instances.set($,ie),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(ie,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ie)}catch(Ge){}var pe;return ie||null}normalizeInstanceIdentifier($=he){return this.component?this.component.multipleInstances?$:he:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new ce($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Se,F)=>{"use strict";F.d(Se,{Am:()=>pe,Ub:()=>me,Yd:()=>se,in:()=>re});const c=[];var re=(()=>{return($=re||(re={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",re;var $})();const L={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},he=re.INFO,ce={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},we=($,G,...ie)=>{if(G<$.logLevel)return;const Ge=(new Date).toISOString(),xe=ce[G];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[xe](`[${Ge}]  ${$.name}:`,...ie)};class se{constructor(G){this.name=G,this._logLevel=he,this._logHandler=we,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in re))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...G),this._logHandler(this,re.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...G),this._logHandler(this,re.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,re.INFO,...G),this._logHandler(this,re.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,re.WARN,...G),this._logHandler(this,re.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...G),this._logHandler(this,re.ERROR,...G)}}function me($){c.forEach(G=>{G.setLogLevel($)})}function pe($,G){for(const ie of c){let Ge=null;G&&G.level&&(Ge=L[G.level]),ie.userLogHandler=null===$?null:(xe,Ne,...He)=>{const te=He.map(ae=>{if(null==ae)return null;if("string"==typeof ae)return ae;if("number"==typeof ae||"boolean"==typeof ae)return ae.toString();if(ae instanceof Error)return ae.message;try{return JSON.stringify(ae)}catch(Ee){return null}}).filter(ae=>ae).join(" ");Ne>=(null!=Ge?Ge:xe.logLevel)&&$({level:re[Ne].toLowerCase(),message:te,args:He,type:xe.name})}}}},5861:(ht,Se,F)=>{"use strict";function c(L,he,ce,we,se,me,pe){try{var $=L[me](pe),G=$.value}catch(ie){return void ce(ie)}$.done?he(G):Promise.resolve(G).then(we,se)}function re(L){return function(){var he=this,ce=arguments;return new Promise(function(we,se){var me=L.apply(he,ce);function pe(G){c(me,we,se,pe,$,"next",G)}function $(G){c(me,we,se,pe,$,"throw",G)}pe(void 0)})}}F.d(Se,{Z:()=>re})}},ht=>{ht(ht.s=5500)}]);